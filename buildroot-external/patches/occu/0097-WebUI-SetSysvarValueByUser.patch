--- occu/WebUI/www/rega/esp/datapointconfigurator.fn.orig
+++ occu/WebUI/www/rega/esp/datapointconfigurator.fn
@@ -1558,7 +1558,12 @@
       object cObjTmp = cObj;
       Call( "/esp/system.fn::getSysVarValAsString()" );
   
-      WriteLine( '<span id="sysvs'#cObj.ID()#'" class="CLASS02535">'#sSysVarVal#'</span>' );
+      object oUser = dom.GetObject( system.GetSessionVar("sessionUserID") );
+	  if( oUser && oUser.UserLevel() == iulAdmin ) {
+        WriteLine( '<span id="sysvs'#cObj.ID()#'" class="CLASS02535" onclick="{ reloadSysVars = function() { PopupClose(); reloadPage(); } } CreatePopup(ID_EDIT_SYSVAR_VALUE, '#cObj.ID()#');">'#sSysVarVal#'</span>' );
+      } else {
+        WriteLine( '<span id="sysvs'#cObj.ID()#'" class="CLASS02535">'#sSysVarVal#'</span>' );
+      }
     WriteLine( '</div>' );
   WriteLine( '</td>' );
   return;
--- occu/WebUI/www/rega/esp/system.fn.orig
+++ occu/WebUI/www/rega/esp/system.fn
@@ -860,6 +860,7 @@
     }
     sv.Channel( ID_ERROR );
   }
+  sv.State(system.GetVar("sValue"));
   dom.RTUpdate(0);
   }
   return;
--- occu/WebUI/www/rega/pages/tabs/admin/msg/newSysVar.htm.orig
+++ occu/WebUI/www/rega/pages/tabs/admin/msg/newSysVar.htm
@@ -3,28 +3,37 @@
   if (system.GetVar("createNew") == 0) {
     object sv = dom.GetObject(system.GetVar("varid"));
   }
+  string hidden = "";
+  if (system.GetVar("editValueOnly") == 1) {hidden="hidden";}
+  system.SetSessionVar("editValueOnly",0);
 %></div>
 
 <div class="CLASS05000">
   <table class="popupTable hidden"  border="1">
-    <colgroup>
-      <col style="width:10%;"/>
-      <col style="width:23%;"/>
-      <col style="width:10%;"/>
-      <col style="width:23%;"/>
-      <col style="width:10%;"/>
-      <col style="width:23%;"/>
-    </colgroup>
-    <tr class="CLASS05001">
-      <th>${thName}</th>
-      <th>${thDescription}</th>
-      <th>${thTypeOfVariable}</th>
-      <th>${thValues}</th>
-      <th>${thUnit}</th>
-      <th>${thCannelMapping}</th>
-    </tr>
+  <% 
+    if (hidden == "") {
+    Write('<colgroup>');
+      Write('<col style="width:10%;"/>');
+      Write('<col style="width:23%;"/>');
+      Write('<col style="width:10%;"/>');
+      Write('<col style="width:23%;"/>');
+      Write('<col style="width:10%;"/>');
+      Write('<col style="width:10%;"/>');
+      Write('<col style="width:13%;"/>');
+    Write('</colgroup>');
+    Write('<tr class="CLASS05001">');
+      Write('<th>${thName}</th>');
+      Write('<th>${thDescription}</th>');
+      Write('<th>${thTypeOfVariable}</th>');
+      Write('<th>${thValues}</th>');
+      Write('<th>${thUnit}</th>');
+      Write('<th>${thValue}</th>');
+      Write('<th>${thCannelMapping}</th>');
+    Write('</tr>');
+	}
+%>
     <tr class="CLASS05002">
-    <td id="tdName" class="CLASS05003" >
+    <td id="tdName" class="CLASS05003 "<%Write(hidden)%> >
     <%
       var svName = "";
       if(system.GetVar("createNew") == 0)
@@ -40,7 +49,7 @@
     %>
       <input id="inpName" type="text" value="<%Write(svName)%>" onblur="stringRemoveNonPrintableChars(this);" />
     </td>
-    <td id="tdDesc" class="CLASS05003" >
+    <td id="tdDesc" class="CLASS05003"<%Write(hidden)%> >
       <%
         var svDesc = "";
         if (system.GetVar("createNew") == 0) 
@@ -50,7 +59,7 @@
       %>
       <input id="inpDesc" type="text" value="<%Write(svDesc)%>" onblur="stringRemoveNonPrintableChars(this);"/>
     </td>
-      <td class="CLASS05004">
+      <td class="CLASS05004" <%Write(hidden)%> >
         <select id="selType" onchange="onTypeChange()">
         <% 
           if (system.GetVar("createNew") == 1) {
@@ -76,9 +85,12 @@
         %>
         </select>
       </td>
-      <td id="tdEdit" class="CLASS05004">
+      <td id="tdEdit" class="CLASS05004"<%Write(hidden)%>>
       </td>
-      <td class="CLASS05004">
+
+           
+    
+      <td class="CLASS05004"<%Write(hidden)%>>
         <% 
           string sUnit = "";
           if (system.GetVar("createNew") == 0) {
@@ -87,7 +99,12 @@
           Write("<input type='text' id='txtUnit' class='CLASS05011' value='"#sUnit#"' onblur='stringRemoveNonPrintableChars(this);'/>");
         %>
       </td>
-      <td class="CLASS05004">
+      
+            
+      <td id="tdValueEdit" class="CLASS05004">
+      </td>
+      
+      <td class="CLASS05004"<%Write(hidden)%>>
         <table width="100%" class="CLASS05005">
           <colgroup>
             <col style="width:50%;"/>
@@ -190,10 +207,12 @@
           iSubType = SYSVAR_BOOL;
           pb += "string sTrue = '"+$("inpLTrue").value+"';";
           pb += "string sFalse = '"+$("inpLFalse").value+"';";
+          pb += "string sValue = '"+$("selValue").value+"';";
           break;
         case 1:
           iSubType = SYSVAR_ENUM;
           pb += "string sValList = '"+$("txVals").value.replace(/(?:\r\n|\r|\n)/g,';')+"';";
+          pb += "string sValue = '"+$("selEnum").value+"';";
           break;
         case 2:
           iSubType = SYSVAR_GENERIC;
@@ -215,14 +234,26 @@
           if( isNaN(itmpMaxVal) ) itmpMaxVal = 0;
           pb += "integer iMinVal = '"+itmpMinVal+"';";
           pb += "integer iMaxVal = '"+itmpMaxVal+"';";
+          
+          if (isNaN($("inpValue").value)) 
+          {
+            alert(translateKey("alertValOutOfRange"));
+            return;
+          }
+          var value = $("inpValue").value;
+          if (value > itmpMaxVal) value = itmpMaxVal;
+          if (value < itmpMinVal) value = itmpMinVal;
+          pb += "string sValue = '"+value+"';";
           break;
         case 3: 
           iSubType = SYSVAR_ALARM;
           pb += "string sTrue = '"+$("inpLTrue").value+"';";
           pb += "string sFalse = '"+$("inpLFalse").value+"';";
+          pb += "string sValue = '"+$("selValue").value+"';";
           break;
         case 4:
           iSubType = SYSVAR_STRING;
+          pb += "string sValue = '"+$("txValue").value.replace(/'/g,"\\'")+"';";
           break;
       }
       pb += "string sUnit = '"+$("txtUnit").value+"';";
@@ -293,7 +324,7 @@
         loadLogicEdit(translateKey("lblTriggered"), translateKey("lblNotTriggered"));
         break;
       case 4:
-        loadNoneEdit();
+        loadChar8859Edit("");
         break;
     }
   };
@@ -303,13 +334,29 @@
     //elm.value = elmVal.replace(/\\n|\\r|\\t/g, "");
     elm.value = elmVal.replace(/\\/g, "");
   };
+  
+  checkInpValue = function() {
+   var itmpValue = parseFloat( $("inpValue").value );
 
+   var itmpMinVal = parseFloat( $("inpMin").value );
+   var itmpMaxVal = parseFloat( $("inpMax").value );
+   
+   if (isNaN(itmpValue)) {
+     // Popup erscheint beim Speichern; doppeltes alert() ist nervig
+     // alert(translateKey("alertValOutOfRange"));
+   } else {
+     if (itmpValue > itmpMaxVal) document.getElementById('inpValue').value = itmpMaxVal;
+     if (itmpValue < itmpMinVal) document.getElementById('inpValue').value = itmpMinVal;
+   }
+  }
+  
   loadNoneEdit = function()
   {
     $("tdEdit").innerHTML = "";
+    $("tdValueEdit").innerHTML = "";
   };
   
-  loadLogicEdit = function(sTrue, sFalse) 
+  loadLogicEdit = function(sTrue, sFalse, sValue) 
   {
     var s = "";
     s += "<table class='CLASS05010'>";
@@ -322,9 +369,25 @@
     s += "</tr>";
     s += "</table>";
     $("tdEdit").innerHTML = s;
+    
+    
+    s = "";
+    var isSelFalse = "selected";
+    var isSelTrue = "";
+    if (sValue === "true") {
+      isSelFalse = "";
+      isSelTrue = "selected";
+    } 
+    s += "<table class='CLASS05010'>";
+    s += "<tr>";
+      s += "<td class='CLASS05011'><select id='selValue'><option "+isSelFalse+" value='0'>"+translateKey("lblFalse")+"</option><option "+isSelTrue+" value='1'>"+translateKey("lblTrue")+"</option></select> </td>";
+    s += "</tr>";
+    s += "</table>";   
+
+    $("tdValueEdit").innerHTML = s
   };
   
-  loadValueEdit = function(vals) 
+  loadValueEdit = function(vals, sValue, optionList) 
   {
     if( vals == "" )
     {
@@ -336,9 +399,23 @@
     s += "<tr><td> <textarea id='txVals' rows='2'>"+vals+"</textarea> </td></tr>";
     s += "</table>";
     $("tdEdit").innerHTML = s;
+    
+    s = "";
+    var hidden = (sValue) ? "" : "style='display: none;'";
+    s += "<table class='CLASS05010' "+hidden+">";
+    s += "<tr>";
+    s += "<td class='CLASS05011'><select id='selEnum'>";
+    s+=optionList;
+    s+="</select> </td>";
+    s += "</tr>";
+    s += "</table>";   
+
+    $("tdValueEdit").innerHTML = s
+    
+    if (sValue) document.getElementById("selEnum").options[sValue].selected=true;
   };
   
-  loadIntEdit = function(val1, val2) 
+  loadIntEdit = function(val1, val2, sValue) 
   {
     var s = "";
     s += "<table class='CLASS05010'>";
@@ -351,7 +428,27 @@
     s += "</tr>";
     s += "</table>";
     $("tdEdit").innerHTML = s;
+    
+    s = "";
+    var val = val1;
+    if (sValue) val = sValue;
+    s += "<table class='CLASS05012'>";
+    s += "<tr><td> <input id='inpValue' type='text' size='12' value='"+translateString(val.toString())+"'  onblur='checkInpValue();'/></td></tr>";
+    s += "</table>";
+    $("tdValueEdit").innerHTML = s;
+    
   }
+  
+    
+  loadChar8859Edit = function(sValue) 
+  {
+    var s = "";
+    s += "<table class='CLASS05012'>";
+    s += "<tr><td> <textarea id='txValue' rows='5'>"+decodeURIComponent(unescape(sValue))+"</textarea> </td></tr>";
+    s += "</table>";
+    $("tdValueEdit").innerHTML = s;
+    $("tdEdit").innerHTML = "";
+  };
 
   <% 
     if (system.GetVar("createNew") == 1) {
@@ -370,18 +467,32 @@
       if (sv.ValueSubType() == istPresent) {
       }
       if (sv.ValueSubType() == istChar8859) {
+        string sval = sv.Value();
+        Write("loadChar8859Edit('"#sval.UriEncode()#"');");
       }
       if (sv.ValueSubType() == istAlarm) {
-        Write("loadLogicEdit('"#sv.ValueName1()#"', '"#sv.ValueName0()#"');");
+        Write("loadLogicEdit('"#sv.ValueName1()#"', '"#sv.ValueName0()#"', '"#sv.Value()#"');");
       }
       if (sv.ValueSubType() == istGeneric) {
-        Write("loadIntEdit('"#sv.ValueMin()#"', '"#sv.ValueMax()#"');");
+        Write("loadIntEdit('"#sv.ValueMin()#"', '"#sv.ValueMax()#"', '"#sv.Value()#"');");
       }
       if (sv.ValueSubType() == istEnum) {
-        Write("loadValueEdit('"#sv.ValueList().Replace('\r\n', ' ').Replace('\r', ' ').Replace('\n', ' ')#"');");
+        integer iVLCount = web.webGetValueListCount( sv.ValueList() );
+        iVLCount = iVLCount - 1;
+        string sVLKey;
+        string optionList = "";
+        string oVal = "";
+        integer count = 0;
+        foreach( sVLKey, system.GenerateEnum(0,iVLCount) )
+        {
+         oVal = count.ToString(0);
+         optionList = optionList # "<option value=\""#oVal#"\">"#web.webGetValueFromList( sv.ValueList(), sVLKey )#"</option>"; 
+         count = count+1;
+        }
+        Write("loadValueEdit('"#sv.ValueList().Replace('\r\n', ' ').Replace('\r', ' ').Replace('\n', ' ')#"', '"#sv.Value()#"', '"#optionList#"');");
       }
       if (sv.ValueSubType() == istBool) {
-        Write("loadLogicEdit('"#sv.ValueName1()#"', '"#sv.ValueName0()#"');");
+        Write("loadLogicEdit('"#sv.ValueName1()#"', '"#sv.ValueName0()#"', '"#sv.Value()#"');");
       }
     }
   %>
--- occu/WebUI/www/webui/js/lang/de/translate.lang.js.orig
+++ occu/WebUI/www/webui/js/lang/de/translate.lang.js
@@ -109,6 +109,7 @@
     "thFirmware" : "Firmware",
     "thTypeOfVariable" : "Variablentyp",
     "thValues" : "Werte",
+    "thValue" : "Wert",
     "thUnit" : "Ma%DFeinheit",
     "thLastUpdate" : "Letzte<br/>Aktualisierung",
     "thControl" : "Bedienung",
@@ -412,6 +413,7 @@
     "dialogChannelOverView" : "Kanal%FCbersicht",
     "dialogCreateNewSysVar" : "Systemvariable neu anlegen",
     "dialogEditSysVar" : "Systemvariable bearbeiten",
+    "dialogEditSysVarValue" : "Systemvariablenwert %E4ndern",
     "dialogCreateScript" : "Skript erstellen",
     "dialogEditScript" : "Skript bearbeiten",
     "dialogEnterValue" : "Wert eingeben",
--- occu/WebUI/www/webui/js/lang/en/translate.lang.js.orig
+++ occu/WebUI/www/webui/js/lang/en/translate.lang.js
@@ -107,6 +107,7 @@
     "thFirmware" : "Firmware",
     "thTypeOfVariable" : "Variable type",
     "thValues" : "Values",
+    "thValue" : "Value",
     "thUnit" : "Unit of measurement",
     "thLastUpdate" : "Last<br/>update",
     "thControl" : "Control",
@@ -408,6 +409,7 @@
     "dialogChannelOverView" : "Channel overview",
     "dialogCreateNewSysVar" : "Create new system variable",
     "dialogEditSysVar" : "Edit system variable",
+    "dialogEditSysVarValue" : "Change system variable value",
     "dialogCreateScript" : "Create script",
     "dialogEditScript" : "Edit script",
     "dialogEnterValue" : "Enter value",
--- occu/WebUI/www/webui/webui.js.orig
+++ occu/WebUI/www/webui/webui.js
@@ -26133,14 +26133,22 @@
         this.setTitle( translateKey("dialogCreateNewSysVar") /*"Systemvariable neu anlegen"*/ );
         this.addToPostBody( 'integer varid = 0;' );
         this.addToPostBody( 'integer createNew = 1;' );
-        this.setWidth(900);
+        this.setWidth(1000);
         this.setFile( "/pages/tabs/admin/msg/newSysVar.htm" );
         break;
       case ID_EDIT_SYSVAR:
         this.setTitle( translateKey("dialogEditSysVar") /*"Systemvariable bearbeiten"*/ );
         this.addToPostBody( 'integer varid = '+this.type+';' );
         this.addToPostBody( 'integer createNew = 0;' );
-        this.setWidth(900);
+        this.setWidth(1000);
+        this.setFile( "/pages/tabs/admin/msg/newSysVar.htm" );
+        break;
+      case ID_EDIT_SYSVAR_VALUE:
+        this.setTitle( translateKey("dialogEditSysVarValue") /*"Systemvariablenwert bearbeiten"*/ );
+        this.addToPostBody( 'integer varid = '+this.type+';' );
+        this.addToPostBody( 'integer createNew = 0;' );
+        this.addToPostBody( 'boolean editValueOnly = 1;' );
+        this.setWidth(240);
         this.setFile( "/pages/tabs/admin/msg/newSysVar.htm" );
         break;
       case ID_CREATE_SCRIPT:
@@ -27040,6 +27048,7 @@
 ID_AUTO_LOGIN_CONFIG     = 1018;
 ID_PROGRAM_CHOOSER       = 1019;
 ID_EDIT_SYSVAR           = 1021;
+ID_EDIT_SYSVAR_VALUE     = 9921;
 ID_CHOOSE_LED            = 1022;
 ID_SET_OUCFM_MODE        = 1023;
 ID_SET_STATUS_DISPLAY    = 1024;
