var x=x||{};x.hub=x.hub||{},x.hub.m=x.hub.m||{},x.hub.m.gealan=x.hub.m.gealan||{},x.hub.m.gealan.GEALAN_MODULE=require("xnm.aio.gealan.js"),x.hub.m.gealan.Handler=function(){var Handler=function Handler(){};return Handler.prototype.init=function(e){e&&e();},Handler.prototype.getSystems=function(){return["gealan"];},Handler.prototype.executeCommandV6=function(e,t,a,u){e&&e.address&&(e.ip=e.address);var s={value:null,ext:null};switch(a.command){case"on":case"off":s.value=a.command;break;case"up":s.value="nextLevel";break;case"down":s.value="previousLevel";break;case"mode":"auto"==a.value?s.value="automatic":"maun"==a.value&&(s.value="manual");break;case"level":s.value="setLevel",s.ext=a.value;}x.hub.m.gealan.GEALAN_MODULE.doCommand(e,s,function(e){e?u&&u(e):u&&u();});},Handler.prototype.getStatesV6=function(e,t,a){e&&e.address&&(e.ip=e.address);var u=[{id:"temperature",device:e,status:{value:"tempIn"}},{id:"temperature2",device:e,status:{value:"tempOut"}},{id:"humidity",device:e,status:{value:"humIn"}},{id:"humidity2",device:e,status:{value:"humOut"}},{id:"filter",device:e,status:{value:"filterReplace"}},{id:"sleep",device:e,status:{value:"sleepMode"}},{id:"stateNr",device:e,status:{value:"stateNr"}},{id:"error",device:e,status:{value:"error"}}],s=x.hub.m.gealan.GEALAN_MODULE.resolveDevice(e);s?s.getStatesCreator(null,u,function(e,t){if(e)a&&a(e);else{var u={};for(var s in t){if("stateNr"==t[s].id){var i=""+t[s].status;if("0"==i)u.state=0,u.mode="manu";else if("6"==i)u.mode="auto";else if("7"==i)u.mode="night_in";else if("8"==i)u.mode="night_out";else if("9"==i)u.mode="flap_closed";else if("10"==i)u.mode="error";else if("11"==i)u.mode="frost_protection";else if(""!=i){var r=parseInt(i);r>0&&r<6&&(u.state=r),u.mode="manu";}}else"humidity"!=t[s].id&&"humidity2"!=t[s].id||(t[s].status=parseInt(t[s].status)),"filter"==t[s].id&&(0==t[s].status?t[s].status=0:t[s].status=100),u[t[s].id]=t[s].status;}"error"!=u.mode&&delete u.error,a&&a(null,u);}}):a&&a(new Error("device json format invalid"));},Handler;}(),"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports=module.exports=new x.hub.m.gealan.Handler());