var util=require("util"),EventEmitter=require("events");var x=x||{};x.hub=x.hub||{},x.hub.m=x.hub.m||{},x.hub.m.proxy=x.hub.m.proxy||{},x.hub.m.proxy.Handler=function(){var Handler=function Handler(){this._logger=require("x.logger.js").getLogger("x.hub.m.proxy.Handler");};return Handler.prototype.getState=function(r,e,o){if(!r)return o&&o({error:new Error("no device")}),null;var t=null;if(r.gateway&&r.gateway.sys&&(t=r.gateway.sys),!t&&r.sys&&(t=r.sys),!t)return o&&o({error:new Error("no sys parameter")}),null;var u=require("m.aio.modulemanager.js").getModule(t);return u?(r.gateway?u.doStatus("value",r.gateway,r,{value:e},function(r,e){r?o&&o({error:r}):o&&o({data:{value:e.status}});}):u.doStatus("1",r,{value:e},function(r,e){r?o&&o({error:r}):o&&o({data:{value:e.status}});}),null):(o&&o({error:new Error("no module for sys:"+t)}),null);},Handler.prototype.executeCommand=function(r,e,o){if(!r)return o&&o({error:new Error("no device")}),null;var t=null;if(r.gateway&&r.gateway.sys&&(t=r.gateway.sys),!t&&r.sys&&(t=r.sys),!t)return o&&o({error:new Error("no sys parameter")}),null;var u=require("m.aio.modulemanager.js").getModule(t);if(!u)return o&&o({error:new Error("no module for sys:"+t)}),null;r.gateway?u.doCommand(r.gateway,r,e,function(r){o&&o({error:r});}):u.doCommand(r,e,function(r,e){o&&o({error:r});});},Handler;}(),"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports=module.exports=new x.hub.m.proxy.Handler());