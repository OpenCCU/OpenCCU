"use strict";var xnm=xnm||{};xnm.aio=xnm.aio||{},xnm.aio.shelly=xnm.aio.shelly||{},xnm.aio.shelly={_logger:{log:function log(){}},_buildRequestOptions:function _buildRequestOptions(e,t,a,o){var n="/"+a.path,l={host:e.ip,port:e.port||80,path:n,method:t,headers:{"Content-Type":'application/json; charset="utf-8"',Connection:"close"}};return"string"==typeof e.username&&"string"==typeof e.password&&(l.auth=e.username+":"+e.password),"string"==typeof o&&(l.headers["Content-Length"]=o.length),l;},_handleResponse:function _handleResponse(e,t,a,o){if(200===a.statusCode){var n="";a.on("data",function(e){n+=String(e);}),a.on("end",function(){if(void 0===t.dataType||"json"===t.dataType)try{n=JSON.parse(n);}catch(e){xnm.aio.shelly._logger.log("error","[_handleResponse] Failed to parse result as JSON: "+e.message);}o&&o(null,{statusCode:a.statusCode,response:n}),o=null;});}else if(204===a.statusCode)o&&o(null,{statusCode:a.statusCode,response:null});else{var l=new Error(e+' request for "'+t.path+'" failed with status code '+a.statusCode);xnm.aio.shelly._logger.log("error","[_handleResponse] "+l.message),o&&o(l,{statusCode:a.statusCode,response:null});}},doRequest:function doRequest(e,t,a,o){var n=null;if(a.path&&xnm.aio.shelly._logger.log("trace","[doRequest] Request path: "+a.path),"GET"!==t&&void 0!==a.data&&null!==a.data)try{n=JSON.stringify(a.data);}catch(e){return xnm.aio.shelly._logger.log("error","[doRequest] Failed to parse body. Error: "+e.message),void(o&&o(e,null));}var l=require("http"),i=xnm.aio.shelly._buildRequestOptions(e,t,a,n),r=l.request(i,function(e){xnm.aio.shelly._handleResponse(t,a,e,o);});"function"==typeof r.setEncoding&&r.setEncoding("utf8"),"function"==typeof r.on&&r.on("error",function(e){e&&xnm.aio.shelly._logger.log("error","[doRequest] Error: "+e.message),o&&o(e),o=null;}),"number"!=typeof a.timeout||isNaN(a.timeout)||"function"!=typeof r.setTimeout||r.setTimeout(a.timeout),n&&r.write(n),r.end();},parseJSON:function parseJSON(e){if(!e||!e.ip)return xnm.aio.shelly._logger.log("warn","[parseJSON] Missing IP."),null;var t=xnm.aio.shelly;switch(e.type){case t.Bulb.TYPE:return new t.Bulb(e.ip,e);case t.Dimmer.TYPE:return new t.Dimmer(e.ip,e);case t.Vintage.TYPE:return new t.Vintage(e.ip,e);case t.BulbDuo.TYPE:return new t.BulbDuo(e.ip,e);case t.EM.TYPE:return new t.EM(e.ip,e);case t.Pro4.TYPE:return new t.Pro4(e.ip,e);case t.EM3.TYPE:return new t.EM3(e.ip,e);case t.Flood.TYPE:return new t.Flood(e.ip,e);case t.HT.TYPE:return new t.HT(e.ip,e);case t.Plug.TYPE:return new t.Plug(e.ip,e);case t.PlugS.TYPE:return new t.PlugS(e.ip,e);case t.RGBW2.TYPE:return new t.RGBW2(e.ip,e);case t.Switch1.TYPE:return new t.Switch1(e.ip,e);case t.Switch1PM.TYPE:return new t.Switch1PM(e.ip,e);case t.Switch2.TYPE:return new t.Switch2(e.ip,e);case t.Switch25.TYPE:return new t.Switch25(e.ip,e);case t.ColorBulb.TYPE:return new t.ColorBulb(e.ip,e);case t.DoorWindow2.TYPE:case t.DoorWindow2.TYPE_1:return new t.DoorWindow2(e.ip,e);case t.MotionSensor.TYPE:return new t.MotionSensor(e.ip,e);case t.Sense.TYPE:return new t.Sense(e.ip,e);case t.Gas.TYPE:return new t.Gas(e.ip,e);case t.Smoke.TYPE:return new t.Smoke(e.ip,e);case t.Switch1L.TYPE:return new t.Switch1L(e.ip,e);case t.TRV.TYPE:return new t.TRV(e.ip,e);case t.Plus1.TYPE:return new t.Plus1(e.ip,e);case t.Plus1PM.TYPE:return new t.Plus1PM(e.ip,e);case t.Plus2PM.TYPE:return new t.Plus2PM(e.ip,e);case t.Pro1.TYPE:return new t.Pro1(e.ip,e);case t.Pro1PM.TYPE:return new t.Pro1PM(e.ip,e);case t.Pro2.TYPE:return new t.Pro2(e.ip,e);case t.Pro2PM.TYPE:return new t.Pro2PM(e.ip,e);case t.Pro4PM.TYPE:return new t.Pro4PM(e.ip,e);case t.UNI.TYPE:return new t.UNI(e.ip,e);case t.Pro3.TYPE:return new t.Pro3(e.ip,e);case t.PlusPlugUS.TYPE:return new t.PlusPlugUS(e.ip,e);case t.PlusWallDimmer.TYPE:return new t.PlusWallDimmer(e.ip,e);case t.PlusHT.TYPE:return new t.PlusHT(e.ip,e);}return new t.Device(e.ip,e);}},xnm.aio.shelly.DM={MAP:{1:{command:[{type:"enum",name:"on",ref:{value:"ch1_on",value_t:"on"}},{type:"enum",name:"off",ref:{value:"ch1_off",value_t:"off"}},{type:"enum",name:"toggle",ref:{value:"ch1_toggle",value_t:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"ch1_state",value_t:"state",options:["on","off"]}},{type:"float",name:"addon 1: temperature (Celsius)",ref:{value:"addonTemp0C",ext:"%f",unit:"°C"}},{type:"float",name:"addon 2: temperature (Celsius)",ref:{value:"addonTemp1C",ext:"%f",unit:"°C"}},{type:"float",name:"addon 3: temperature (Celsius)",ref:{value:"addonTemp2C",ext:"%f",unit:"°C"}},{type:"float",name:"addon 1: temperature (Fahrenheit)",ref:{value:"addonTemp0F",ext:"%f",unit:"°F"}},{type:"float",name:"addon 2: temperature (Fahrenheit)",ref:{value:"addonTemp1F",ext:"%f",unit:"°F"}},{type:"float",name:"addon 3: temperature (Fahrenheit)",ref:{value:"addonTemp2F",ext:"%f",unit:"°F"}},{type:"float",name:"addon: humidity",ref:{value:"addonHum0",ext:"%f",unit:"%"}}]},bulb:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"color brightness",ref:{value:"gain",value_t:"colorGain",ext:"%d",extMeta:"0-100"}},{type:"rgb",name:"color",ref:{value:"color",ext:"%rgb"}},{type:"rgbw",name:"rgb + white color",ref:{value:"color_white",ext:"%rgbw"}},{type:"int",name:"red",ref:{value:"red",ext:"%d",extMeta:"0-100"}},{type:"int",name:"green",ref:{value:"green",ext:"%d",extMeta:"0-100"}},{type:"int",name:"blue",ref:{value:"blue",ext:"%d",extMeta:"0-100"}},{type:"int",name:"white",ref:{value:"white",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"effect",ref:{value:"effect",ext:"%e",extMeta:["off","Meteor shower","Gradual change","Flash","Breath","On/Off gradual","Red/Green change"]}},{type:"int",name:"white: brightness",ref:{value:"ch1_brightness",value_t:"white1bri",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"color temperature",ref:{value:"temp",value_t:"ct",ext:"%d",extMeta:"3000-6500",unit:"K"}}],status:[{type:"enum",name:"mode",ref:{value:"mode",options:["color","white"]}},{type:"float",name:"power",ref:{value:"ch1_power",value_t:"power",ext:"%f",unit:"W"}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"color brightness",ref:{value:"gain",value_t:"colorGain",ext:"%d",extMeta:"0-100"}},{type:"float",name:"power",ref:{value:"power",ext:"%f",unit:"W"}},{type:"rgbw",name:"color",ref:{value:"color",ext:"%s"}},{type:"rgbw",name:"rgb + white color",ref:{value:"color_white",ext:"%s"}},{type:"int",name:"red",ref:{value:"red",ext:"%d",extMeta:"0-100"}},{type:"int",name:"green",ref:{value:"green",ext:"%d",extMeta:"0-100"}},{type:"int",name:"blue",ref:{value:"blue",ext:"%d",extMeta:"0-100"}},{type:"int",name:"white",ref:{value:"white",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"effect",ref:{value:"effect",options:["off","Meteor shower","Gradual change","Flash","Breath","On/Off gradual","Red/Green change"]}},{type:"int",name:"white: brightness",ref:{value:"ch1_brightness",value_t:"white1bri",extMeta:"0-100",unit:"%"}},{type:"int",name:"color temperature",ref:{value:"temp",value_t:"ct",extMeta:"3000-6500",unit:"K"}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"brightness",ref:{value:"brightness",extMeta:"0-100",unit:"%"}},{type:"float",name:"power",ref:{value:"ch1_power",value_t:"power",ext:"%f",unit:"W"}},{type:"float",name:"power total",ref:{value:"ch1_powerTotal",value_t:"powerTotal",ext:"%f",unit:"Wmin"}},{type:"float",name:"temperature (Celsius)",ref:{value:"tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"tempF",ext:"%f",unit:"°F"}}]},vintage:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"transition",ref:{value:"transition",ext:"%d",extMeta:"0-5000",unit:"ms"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"brightness",ref:{value:"brightness",extMeta:"0-100",unit:"%"}},{type:"int",name:"transition",ref:{value:"transition",extMeta:"0-5000",unit:"ms"}},{type:"float",name:"power",ref:{value:"ch1_power",value_t:"power",ext:"%f",unit:"W"}},{type:"float",name:"power total",ref:{value:"ch1_powerTotal",value_t:"powerTotal",ext:"%f",unit:"Wmin"}}]},bulbduo:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"transition",ref:{value:"transition",ext:"%d",extMeta:"0-5000",unit:"ms"}},{type:"int",name:"color temperature",ref:{value:"temp",value_t:"ct",ext:"%d",extMeta:"2700-6500",unit:"K"}},{type:"int",name:"white",ref:{value:"white",ext:"%d",extMeta:"0-100"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"brightness",ref:{value:"brightness",extMeta:"0-100",unit:"%"}},{type:"int",name:"transition",ref:{value:"transition",extMeta:"0-5000",unit:"ms"}},{type:"float",name:"power",ref:{value:"ch1_power",value_t:"power",ext:"%f",unit:"W"}},{type:"float",name:"power total",ref:{value:"ch1_powerTotal",value_t:"powerTotal",ext:"%f",unit:"Wmin"}},{type:"int",name:"color temperature",ref:{value:"temp",value_t:"ct",extMeta:"2700-6500",unit:"K"}},{type:"int",name:"white",ref:{value:"white",ext:"%d",extMeta:"0-100"}}]},em:{command:[{type:"enum",name:"reset all data",ref:{value:"reset"}},{type:"enum",name:"meter 1: reset totals",ref:{value:"ch1_reset",value_t:"meter1reset"}},{type:"enum",name:"meter 2: reset totals",ref:{value:"ch2_reset",value_t:"meter2reset"}}],status:[{type:"float",name:"meter 1: power",ref:{value:"ch1_power",value_t:"meter1power",ext:"%f",unit:"W"}},{type:"float",name:"meter 1: voltage",ref:{value:"ch1_voltage",value_t:"meter1voltage",ext:"%f",unit:"V"}},{type:"float",name:"meter 1: total",ref:{value:"ch1_total",value_t:"meter1total",ext:"%f",unit:"Wh"}},{type:"float",name:"meter 1: total returned",ref:{value:"ch1_totalReturned",value_t:"meter1totalReturned",ext:"%f",unit:"Wh"}},{type:"float",name:"meter 2: power",ref:{value:"ch2_power",value_t:"meter2power",ext:"%f",unit:"W"}},{type:"float",name:"meter 2: voltage",ref:{value:"ch2_voltage",value_t:"meter2voltage",ext:"%f",unit:"V"}},{type:"float",name:"meter 2: total",ref:{value:"ch2_total",value_t:"meter2total",ext:"%f",unit:"Wh"}},{type:"float",name:"meter 2: total returned",ref:{value:"ch2_totalReturned",value_t:"meter2totalReturned",ext:"%f",unit:"Wh"}}]},em3:{command:[{type:"enum",name:"reset all data",ref:{value:"reset"}},{type:"enum",name:"meter 1: reset totals",ref:{value:"ch1_reset",value_t:"meter1reset"}},{type:"enum",name:"meter 2: reset totals",ref:{value:"ch2_reset",value_t:"meter2reset"}},{type:"enum",name:"meter 3: reset totals",ref:{value:"ch3_reset",value_t:"meter3reset"}}],status:[{type:"float",name:"meter 1: power",ref:{value:"ch1_power",value_t:"meter1power",ext:"%f",unit:"W"}},{type:"float",name:"meter 1: current",ref:{value:"ch1_current",value_t:"meter1current",ext:"%f",unit:"A"}},{type:"float",name:"meter 1: voltage",ref:{value:"ch1_voltage",value_t:"meter1voltage",ext:"%f",unit:"V"}},{type:"float",name:"meter 1: total",ref:{value:"ch1_total",value_t:"meter1total",ext:"%f",unit:"Wh"}},{type:"float",name:"meter 1: total returned",ref:{value:"ch1_totalReturned",value_t:"meter1totalReturned",ext:"%f",unit:"Wh"}},{type:"float",name:"meter 2: power",ref:{value:"ch2_power",value_t:"meter2power",ext:"%f",unit:"W"}},{type:"float",name:"meter 2: current",ref:{value:"ch2_current",value_t:"meter2current",ext:"%f",unit:"A"}},{type:"float",name:"meter 2: voltage",ref:{value:"ch2_voltage",value_t:"meter2voltage",ext:"%f",unit:"V"}},{type:"float",name:"meter 2: total",ref:{value:"ch2_total",value_t:"meter2total",ext:"%f",unit:"Wh"}},{type:"float",name:"meter 2: total returned",ref:{value:"ch2_totalReturned",value_t:"meter2totalReturned",ext:"%f",unit:"Wh"}},{type:"float",name:"meter 3: power",ref:{value:"ch3_power",value_t:"meter3power",ext:"%f",unit:"W"}},{type:"float",name:"meter 3: current",ref:{value:"ch3_current",value_t:"meter3current",ext:"%f",unit:"A"}},{type:"float",name:"meter 3: voltage",ref:{value:"ch3_voltage",value_t:"meter3voltage",ext:"%f",unit:"V"}},{type:"float",name:"meter 3: total",ref:{value:"ch3_total",value_t:"meter3total",ext:"%f",unit:"Wh"}},{type:"float",name:"meter 3: total returned",ref:{value:"ch3_totalReturned",value_t:"meter3totalReturned",ext:"%f",unit:"Wh"}}]},pro4:{command:[{type:"enum",name:"switch 1 on",ref:{value:"ch1_on",value_t:"switch1on"}},{type:"enum",name:"switch 1 off",ref:{value:"ch1_off",value_t:"switch1off"}},{type:"enum",name:"switch 1 toggle",ref:{value:"ch1_toggle",value_t:"switch1toggle"}},{type:"enum",name:"switch 2 on",ref:{value:"ch2_on",value_t:"switch2on"}},{type:"enum",name:"switch 2 off",ref:{value:"ch2_off",value_t:"switch2off"}},{type:"enum",name:"switch 2 toggle",ref:{value:"ch2_toggle",value_t:"switch2toggle"}},{type:"enum",name:"switch 3 on",ref:{value:"ch3_on",value_t:"switch3on"}},{type:"enum",name:"switch 3 off",ref:{value:"ch3_off",value_t:"switch3off"}},{type:"enum",name:"switch 3 toggle",ref:{value:"ch3_toggle",value_t:"switch3toggle"}},{type:"enum",name:"switch 4 on",ref:{value:"ch4_on",value_t:"switch4on"}},{type:"enum",name:"switch 4 off",ref:{value:"ch4_off",value_t:"switch4off"}},{type:"enum",name:"switch 4 toggle",ref:{value:"ch4_toggle",value_t:"switch4toggle"}}],status:[{type:"enum",name:"switch 1 state",ref:{value:"ch1_state",value_t:"switch1state",options:["on","off"]}},{type:"enum",name:"switch 2 state",ref:{value:"ch2_state",value_t:"switch2state",options:["on","off"]}},{type:"enum",name:"switch 3 state",ref:{value:"ch3_state",value_t:"switch3state",options:["on","off"]}},{type:"enum",name:"switch 4 state",ref:{value:"ch4_state",value_t:"switch4state",options:["on","off"]}},{type:"float",name:"meter 1: power",ref:{value:"ch1_power",value_t:"meter1power",ext:"%f",unit:"W"}},{type:"float",name:"meter 1: total",ref:{value:"ch1_total",value_t:"meter1total",ext:"%f",unit:"Wh"}},{type:"float",name:"meter 2: power",ref:{value:"ch2_power",value_t:"meter2power",ext:"%f",unit:"W"}},{type:"float",name:"meter 2: total",ref:{value:"ch2_total",value_t:"meter2total",ext:"%f",unit:"Wh"}},{type:"float",name:"meter 3: power",ref:{value:"ch3_power",value_t:"meter3power",ext:"%f",unit:"W"}},{type:"float",name:"meter 3: total",ref:{value:"ch3_total",value_t:"meter3total",ext:"%f",unit:"Wh"}},{type:"float",name:"meter 4: power",ref:{value:"ch4_power",value_t:"meter4power",ext:"%f",unit:"W"}},{type:"float",name:"meter 4: total",ref:{value:"ch4_total",value_t:"meter4total",ext:"%f",unit:"Wh"}}]},flood:{command:[],status:[{type:"enum",name:"flood detected",ref:{value:"flood",options:["true","false"]}},{type:"enum",name:"rain mode",ref:{value:"rainMode",options:["true","false"]}},{type:"string",name:"device activation reasons",ref:{value:"actReasons",ext:"%s"}},{type:"float",name:"temperature (Celsius)",ref:{value:"tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"tempF",ext:"%f",unit:"°F"}},{type:"int",name:"battery capacity",ref:{value:"batCapacity",value_t:"battery_level",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"float",name:"battery voltage",ref:{value:"batVoltage",ext:"%f",unit:"V"}}]},ht:{command:[],status:[{type:"int",name:"relative humidity",ref:{value:"humRel",ext:"%d",unit:"%"}},{type:"string",name:"device activation reasons",ref:{value:"actReasons",ext:"%s"}},{type:"float",name:"temperature (Celsius)",ref:{value:"tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"tempF",ext:"%f",unit:"°F"}},{type:"int",name:"battery capacity",ref:{value:"batCapacity",value_t:"battery_level",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"float",name:"battery voltage",ref:{value:"batVoltage",ext:"%f",unit:"V"}}]},plug:{command:[{type:"enum",name:"on",ref:{value:"ch1_on",value_t:"on"}},{type:"enum",name:"off",ref:{value:"ch1_off",value_t:"off"}},{type:"enum",name:"toggle",ref:{value:"ch1_toggle",value_t:"toggle"}}],status:[{type:"enum",name:"state",ref:{value:"ch1_state",value_t:"state",options:["on","off"]}},{type:"float",name:"power",ref:{value:"ch1_power",value_t:"power",ext:"%f",unit:"W"}},{type:"float",name:"power total",ref:{value:"ch1_powerTotal",value_t:"powerTotal",ext:"%f",unit:"Wmin"}}]},rgbw2:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"color brightness",ref:{value:"gain",value_t:"colorGain",ext:"%d",extMeta:"0-100"}},{type:"rgb",name:"color",ref:{value:"color",ext:"%rgb"}},{type:"rgbw",name:"rgb + white color",ref:{value:"color_white",ext:"%rgbw"}},{type:"int",name:"red",ref:{value:"red",ext:"%d",extMeta:"0-100"}},{type:"int",name:"green",ref:{value:"green",ext:"%d",extMeta:"0-100"}},{type:"int",name:"blue",ref:{value:"blue",ext:"%d",extMeta:"0-100"}},{type:"int",name:"white",ref:{value:"white",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"effect",ref:{value:"effect",ext:"%e",extMeta:["off","Meteor shower","Gradual change","Flash","Red/Green change"]}},{type:"enum",name:"white 1: on",ref:{value:"ch1_on",value_t:"white1on"}},{type:"enum",name:"white 2: on",ref:{value:"ch2_on",value_t:"white2on"}},{type:"enum",name:"white 3: on",ref:{value:"ch3_on",value_t:"white3on"}},{type:"enum",name:"white 4: on",ref:{value:"ch4_on",value_t:"white4on"}},{type:"enum",name:"white 1: off",ref:{value:"ch1_off",value_t:"white1off"}},{type:"enum",name:"white 2: off",ref:{value:"ch2_off",value_t:"white2off"}},{type:"enum",name:"white 3: off",ref:{value:"ch3_off",value_t:"white3off"}},{type:"enum",name:"white 4: off",ref:{value:"ch4_off",value_t:"white4off"}},{type:"int",name:"white 1: brightness",ref:{value:"ch1_brightness",value_t:"white1bri",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"white 2: brightness",ref:{value:"ch2_brightness",value_t:"white2bri",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"white 3: brightness",ref:{value:"ch3_brightness",value_t:"white3bri",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"white 4: brightness",ref:{value:"ch4_brightness",value_t:"white4bri",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"mode",ref:{value:"mode",options:["color","white"]}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"color brightness",ref:{value:"gain",value_t:"colorGain",ext:"%d",extMeta:"0-100"}},{type:"float",name:"power",ref:{value:"power",ext:"%f",unit:"W"}},{type:"rgbw",name:"color",ref:{value:"color",ext:"%s"}},{type:"rgbw",name:"rgb + white color",ref:{value:"color_white",ext:"%s"}},{type:"int",name:"red",ref:{value:"red",ext:"%d",extMeta:"0-100"}},{type:"int",name:"green",ref:{value:"green",ext:"%d",extMeta:"0-100"}},{type:"int",name:"blue",ref:{value:"blue",ext:"%d",extMeta:"0-100"}},{type:"int",name:"white",ref:{value:"white",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"effect",ref:{value:"effect",options:["off","Meteor shower","Gradual change","Flash","Red/Green change"]}},{type:"enum",name:"white 1: state",ref:{value:"ch1_state",value_t:"white1state",options:["on","off"]}},{type:"enum",name:"white 2: state",ref:{value:"ch2_state",value_t:"white2state",options:["on","off"]}},{type:"enum",name:"white 3: state",ref:{value:"ch3_state",value_t:"white3state",options:["on","off"]}},{type:"enum",name:"white 4: state",ref:{value:"ch4_state",value_t:"white4state",options:["on","off"]}},{type:"int",name:"white 1: brightness",ref:{value:"ch1_brightness",value_t:"white1bri",extMeta:"0-100",unit:"%"}},{type:"int",name:"white 2: brightness",ref:{value:"ch2_brightness",value_t:"white2bri",extMeta:"0-100",unit:"%"}},{type:"int",name:"white 3: brightness",ref:{value:"ch3_brightness",value_t:"white3bri",extMeta:"0-100",unit:"%"}},{type:"int",name:"white 4: brightness",ref:{value:"ch4_brightness",value_t:"white4bri",extMeta:"0-100",unit:"%"}},{type:"float",name:"white 1: power",ref:{value:"ch1_power",value_t:"white1power",ext:"%f",unit:"W"}},{type:"float",name:"white 2: power",ref:{value:"ch2_power",value_t:"white2power",ext:"%f",unit:"W"}},{type:"float",name:"white 3: power",ref:{value:"ch3_power",value_t:"white3power",ext:"%f",unit:"W"}},{type:"float",name:"white 4: power",ref:{value:"ch4_power",value_t:"white4power",ext:"%f",unit:"W"}}]},"switch":{command:[{type:"enum",name:"switch 1 on",ref:{value:"ch1_on",value_t:"switch1on"}},{type:"enum",name:"switch 1 off",ref:{value:"ch1_off",value_t:"switch1off"}},{type:"enum",name:"switch 1 toggle",ref:{value:"ch1_toggle",value_t:"switch1toggle"}},{type:"enum",name:"switch 2 on",ref:{value:"ch2_on",value_t:"switch2on"}},{type:"enum",name:"switch 2 off",ref:{value:"ch2_off",value_t:"switch2off"}},{type:"enum",name:"switch 2 toggle",ref:{value:"ch2_toggle",value_t:"switch2toggle"}},{type:"int",name:"shutter position",ref:{value:"position",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"shutter up",ref:{value:"up",value_t:"moveUp"}},{type:"enum",name:"shutter down",ref:{value:"down",value_t:"moveDown"}},{type:"enum",name:"shutter stop",ref:{value:"stop"}}],status:[{type:"enum",name:"switch 1 state",ref:{value:"ch1_state",value_t:"switch1state",options:["on","off"]}},{type:"enum",name:"switch 2 state",ref:{value:"ch2_state",value_t:"switch2state",options:["on","off"]}},{type:"enum",name:"shutter state",ref:{value:"roller_state",options:["open","closed","middle"]}},{type:"int",name:"shutter position",ref:{value:"position",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"shutter last direction",ref:{value:"roller_lastDirection",options:["open","closed"]}},{type:"enum",name:"shutter stop reason",ref:{value:"roller_stopReason",options:["normal","safety_switch","obstacle"]}},{type:"float",name:"shutter power",ref:{value:"roller_power",ext:"%f",unit:"W"}},{type:"float",name:"power",ref:{value:"ch1_power",value_t:"power",ext:"%f",unit:"W"}},{type:"float",name:"power total",ref:{value:"ch1_powerTotal",value_t:"powerTotal",ext:"%f",unit:"Wmin"}}]},switch25:{command:[{type:"enum",name:"switch 1 on",ref:{value:"ch1_on",value_t:"switch1on"}},{type:"enum",name:"switch 1 off",ref:{value:"ch1_off",value_t:"switch1off"}},{type:"enum",name:"switch 1 toggle",ref:{value:"ch1_toggle",value_t:"switch1toggle"}},{type:"enum",name:"switch 2 on",ref:{value:"ch2_on",value_t:"switch2on"}},{type:"enum",name:"switch 2 off",ref:{value:"ch2_off",value_t:"switch2off"}},{type:"enum",name:"switch 2 toggle",ref:{value:"ch2_toggle",value_t:"switch2toggle"}},{type:"int",name:"shutter position",ref:{value:"position",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"shutter up",ref:{value:"up",value_t:"moveUp"}},{type:"enum",name:"shutter down",ref:{value:"down",value_t:"moveDown"}},{type:"enum",name:"shutter stop",ref:{value:"stop"}}],status:[{type:"enum",name:"switch 1 state",ref:{value:"ch1_state",value_t:"switch1state",options:["on","off"]}},{type:"enum",name:"switch 1 over temperature",ref:{value:"ch1_overTemp",value_t:"switch1overTemp",options:["true","false"]}},{type:"enum",name:"switch 2 state",ref:{value:"ch2_state",value_t:"switch2state",options:["on","off"]}},{type:"enum",name:"switch 2 over temperature",ref:{value:"ch2_overTemp",value_t:"switch2overTemp",options:["true","false"]}},{type:"enum",name:"shutter state",ref:{value:"roller_state",options:["open","closed","middle"]}},{type:"int",name:"shutter position",ref:{value:"position",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"shutter last direction",ref:{value:"roller_lastDirection",options:["open","closed"]}},{type:"enum",name:"shutter stop reason",ref:{value:"roller_stopReason",options:["normal","safety_switch","obstacle"]}},{type:"float",name:"shutter power",ref:{value:"roller_power",ext:"%f",unit:"W"}},{type:"enum",name:"shutter over temperature",ref:{value:"roller_overTemp",options:["true","false"]}},{type:"float",name:"meter 1 power",ref:{value:"ch1_power",value_t:"meter1power",ext:"%f",unit:"W"}},{type:"float",name:"meter 1 power total",ref:{value:"ch1_powerTotal",value_t:"meter1powerTotal",ext:"%f",unit:"Wmin"}},{type:"float",name:"meter 2 power",ref:{value:"ch2_power",value_t:"meter2power",ext:"%f",unit:"W"}},{type:"float",name:"meter 2 power total",ref:{value:"ch2_powerTotal",value_t:"meter2powerTotal",ext:"%f",unit:"Wmin"}},{type:"float",name:"temperature (Celsius)",ref:{value:"tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"tempF",ext:"%f",unit:"°F"}}]},"1l":{command:[{type:"enum",name:"switch on",ref:{value:"ch1_on",value_t:"switchon"}},{type:"enum",name:"switch off",ref:{value:"ch1_off",value_t:"switchoff"}},{type:"enum",name:"switch toggle",ref:{value:"ch1_toggle",value_t:"switchtoggle"}}],status:[{type:"enum",name:"switch state",ref:{value:"ch1_state",options:["on","off"]}},{type:"enum",name:"switch over temperature",ref:{value:"overTemp",options:["true","false"]}},{type:"float",name:"meter power",ref:{value:"ch1_power",value_t:"meter1power",ext:"%f",unit:"W"}},{type:"float",name:"meter power total",ref:{value:"ch1_powerTotal",value_t:"meter1powerTotal",ext:"%f",unit:"Wmin"}},{type:"float",name:"temperature (Celsius)",ref:{value:"tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"tempF",ext:"%f",unit:"°F"}}]},colorbulb:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"set mode",ref:{value:"mode",ext:"%e",extMeta:["color","white"]}},{type:"enum",name:"set effect",ref:{value:"effect",ext:"%e",extMeta:["off","Meteor shower","Gradual change","Flash"]}},{type:"int",name:"white mode: set brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"color mode: set brightness",ref:{value:"gain",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"white mode: color temperature",ref:{value:"temp",ext:"%d",extMeta:"3000-6500",unit:"K"}},{type:"rgb",name:"set color",ref:{value:"color",ext:"%rgb"}}],status:[{type:"enum",name:"mode",ref:{value:"mode",options:["color","white"]}},{type:"enum",name:"effect",ref:{value:"effect",options:["off","Meteor shower","Gradual change","Flash"]}},{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"white mode: brightness",ref:{value:"brightness",extMeta:"0-100",unit:"%"}},{type:"int",name:"color mode: brightness",ref:{value:"gain",extMeta:"0-100",unit:"%"}},{type:"float",name:"power",ref:{value:"ch1_power",value_t:"power",ext:"%f",unit:"W"}},{type:"float",name:"power total",ref:{value:"ch1_powerTotal",value_t:"powerTotal",ext:"%f",unit:"Wmin"}},{type:"int",name:"white mode: color temperature",ref:{value:"temp",unit:"K"}},{type:"rgbw",name:"color",ref:{value:"color",ext:"%s"}}]},dw2:{command:[],status:[{type:"enum",name:"lux illumination",ref:{value:"lux_illumination",options:["dark","twilight","bright"]}},{type:"int",name:"lux value",ref:{value:"lux_value",extMeta:"0-100",unit:"%"}},{type:"enum",name:"state",ref:{value:"state",options:["open","close"]}},{type:"float",name:"temperature (Celsius)",ref:{value:"tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"tempF",ext:"%f",unit:"°F"}},{type:"int",name:"battery capacity",ref:{value:"batCapacity",value_t:"battery_level",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"float",name:"battery voltage",ref:{value:"batVoltage",ext:"%f",unit:"V"}}]},motionsensor:{command:[{type:"enum",name:"set led disable status",ref:{value:"led_status_disable",ext:"%e",extMeta:["on","off"]}},{type:"int",name:"set motion sensitivity",ref:{value:"motion_sensitivity",ext:"%d",extMeta:"1-256"}},{type:"int",name:"set motion blind time",ref:{value:"motion_blind_time_minutes",ext:"%d",extMeta:"1-1440"}},{type:"int",name:"set motion pulse count",ref:{value:"motion_pulse_count",ext:"%d",extMeta:"1-4"}},{type:"enum",name:"set motion operating mode",ref:{value:"motion_operating_mode",ext:"%e",extMeta:["Any","Dark","Twilight","Bright"]}},{type:"enum",name:"set motion enable",ref:{value:"motion_enable",ext:"%e",extMeta:["on","off"]}}],status:[{type:"enum",name:"lux illumination",ref:{value:"lux_illumination",options:["dark","twilight","bright"]}},{type:"int",name:"lux value",ref:{value:"lux_value",extMeta:"0-100",unit:"%"}},{type:"enum",name:"motion state",ref:{value:"motion",options:["true","false"]}},{type:"enum",name:"vibration state",ref:{value:"vibration",options:["true","false"]}},{type:"enum",name:"is charging",ref:{value:"charger",options:["true","false"]}},{type:"int",name:"battery capacity",ref:{value:"batCapacity",value_t:"battery_level",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"float",name:"battery voltage",ref:{value:"batVoltage",ext:"%f",unit:"V"}},{type:"enum",name:"led disable status",ref:{value:"led_status_disable",options:["on","off"],state_type:"settings"}},{type:"int",name:"motion sensitivity",ref:{value:"motion_sensitivity",extMeta:"1-256",state_type:"settings"}},{type:"int",name:"motion blind time",ref:{value:"motion_blind_time_minutes",extMeta:"1-1440",state_type:"settings"}},{type:"int",name:"motion pulse count",ref:{value:"motion_pulse_count",extMeta:"1-4",state_type:"settings"}},{type:"enum",name:"motion operating mode",ref:{value:"motion_operating_mode",options:["Any","Dark","Twilight","Bright"],state_type:"settings"}},{type:"enum",name:"motion enable",ref:{value:"motion_enable",options:["on","off"],state_type:"settings"}}]},sense:{command:[{type:"enum",name:"motion Led",ref:{value:"motion_led",ext:"%e",extMeta:["true","false"]}},{type:"int",name:"motion duration time",ref:{value:"motion_duration_time",ext:"%d"},unit:"s"}],status:[{type:"enum",name:"motion state",ref:{value:"motion",options:["true","false"]}},{type:"enum",name:"is charging",ref:{value:"charger",options:["true","false"]}},{type:"int",name:"temperature",ref:{value:"temp_value"}},{type:"enum",name:"temperature unit",ref:{value:"temp_units",options:["C"]}},{type:"int",name:"humidity",ref:{value:"humidity",ext:"%d",unit:"%"}},{type:"int",name:"Brightness value",ref:{value:"lux_value",extMeta:"0-100",unit:"%"}},{type:"int",name:"battery level",ref:{value:"bat_level",value_t:"battery_level",ext:"%d",extMeta:"0-100",unit:"%"}}]},gas:{command:[{type:"int",name:"buzzer volume",ref:{value:"set_volume",ext:"%d",extMeta:"1-11"}},{type:"enum",name:"mute alarm",ref:{value:"mute_alarm",ext:"%e",extMeta:["mute","unmute"]}}],status:[{type:"int",name:"buzzer volume",ref:{value:"set_volume",state_type:"settings"}},{type:"enum",name:"sensor state",ref:{value:"gas_sensor_state",options:["unknown","warmup","normal","fault"]}},{type:"int",name:"gas concentration",ref:{value:"gas_concentration"}}]},smoke:{command:[],status:[{type:"enum",name:"smoke state",ref:{value:"smoke",options:["true","false"]}},{type:"int",name:"battery capacity",ref:{value:"batCapacity",value_t:"battery_level",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"float",name:"battery voltage",ref:{value:"batVoltage",ext:"%f",unit:"V"}},{type:"float",name:"temperature (Celsius)",ref:{value:"tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"tempF",ext:"%f",unit:"°F"}}]},trv:{command:[{type:"int",name:"set display brightness",ref:{value:"display_brightness",ext:"%d",extMeta:"1-7"}},{type:"enum",name:"set display flipped",ref:{value:"display_flipped",ext:"%e",extMeta:["enable","disable"]}},{type:"int",name:"set target temperature",ref:{value:"target_temp",ext:"%d",extMeta:"4-31"}},{type:"enum",name:"set target temperature enabled",ref:{value:"target_temp_enabled",ext:"%e",extMeta:["enable","disable"]}}],status:[{type:"int",name:"display brightness",ref:{value:"display_brightness",extMeta:"1-7",state_type:"settings"}},{type:"enum",name:"display flipped",ref:{value:"display_flipped",options:["enable","disable"],state_type:"settings"}},{type:"int",name:"Current temperature",ref:{value:"temp_value"}},{type:"enum",name:"Current temperature unit",ref:{value:"temp_units",options:["C"]}},{type:"int",name:"Target temperature",ref:{value:"target_temp_value",extMeta:"4-31"}},{type:"enum",name:"Target temperature enabled",ref:{value:"target_temp_enabled",options:["true","false"]}},{type:"enum",name:"Target temperature unit",ref:{value:"target_temp_units",options:["C"]}},{type:"enum",name:"is charging",ref:{value:"charger",options:["true","false"]}},{type:"int",name:"battery capacity",ref:{value:"batCapacity",value_t:"battery_level",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"float",name:"battery voltage",ref:{value:"batVoltage",ext:"%f",unit:"V"}}]},plus1:{command:[{type:"enum",name:"switch on",ref:{value:"ch1_on",value_t:"switchon"}},{type:"enum",name:"switch off",ref:{value:"ch1_off",value_t:"switchoff"}},{type:"enum",name:"switch toggle",ref:{value:"ch1_toggle",value_t:"switchtoggle"}}],status:[{type:"enum",name:"switch state",ref:{value:"ch1_state",value_t:"switchState",options:["on","off"]}},{type:"float",name:"temperature (Celsius)",ref:{value:"ch1_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"ch1_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"active energy total (Watt-hours)",ref:{value:"ch1_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"power",ref:{value:"power",ext:"%f",unit:"W"}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",unit:"V"}},{type:"float",name:"current",ref:{value:"current",ext:"%f",unit:"A"}}]},plus1pm:{command:[{type:"enum",name:"switch on",ref:{value:"ch1_on",value_t:"switchon"}},{type:"enum",name:"switch off",ref:{value:"ch1_off",value_t:"switchoff"}},{type:"enum",name:"switch toggle",ref:{value:"ch1_toggle",value_t:"switchtoggle"}}],status:[{type:"enum",name:"switch state",ref:{value:"ch1_state",value_t:"switchState",options:["on","off"]}},{type:"float",name:"temperature (Celsius)",ref:{value:"ch1_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"ch1_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"active energy total (Watt-hours)",ref:{value:"ch1_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"power",ref:{value:"ch1_power",ext:"%f",unit:"W"}},{type:"float",name:"voltage",ref:{value:"ch1_voltage",ext:"%f",unit:"V"}},{type:"float",name:"current",ref:{value:"ch1_current",ext:"%f",unit:"A"}}]},plus2pm:{command:[{mode:"switch",type:"enum",name:"switch 1 on",ref:{value:"ch1_on",value_t:"switch1on"}},{mode:"switch",type:"enum",name:"switch 1 off",ref:{value:"ch1_off",value_t:"switch1off"}},{mode:"switch",type:"enum",name:"switch 1 toggle",ref:{value:"ch1_toggle",value_t:"switch1toggle"}},{mode:"switch",type:"enum",name:"switch 2 on",ref:{value:"ch2_on",value_t:"switch2on"}},{mode:"switch",type:"enum",name:"switch 2 off",ref:{value:"ch2_off",value_t:"switch2off"}},{mode:"switch",type:"enum",name:"switch 2 toggle",ref:{value:"ch2_toggle",value_t:"switch2toggle"}},{mode:"cover",type:"int",name:"cover position",ref:{value:"Cover.GoToPosition_pos",value_t:"position",ext:"%d",extMeta:"0-100"}},{mode:"cover",type:"int",name:"cover step",ref:{value:"Cover.GoToPosition_rel",value_t:"step_relative",ext:"%d",extMeta:"-100-100"}},{mode:"cover",type:"enum",name:"cover open",ref:{value:"Cover.Open",value_t:"open"}},{mode:"cover",type:"enum",name:"cover close",ref:{value:"Cover.Close",value_t:"close"}},{mode:"cover",type:"enum",name:"cover stop",ref:{value:"Cover.Stop",value_t:"stop"}}],status:[{mode:"switch",type:"enum",name:"switch 1 state",ref:{value:"ch1_state",value_t:"switch1state",options:["on","off"]}},{mode:"switch",type:"float",name:"switch 1 temperature (Celsius)",ref:{value:"ch1_tempC",ext:"%f",unit:"°C"}},{mode:"switch",type:"float",name:"switch 1 temperature (Fahrenheit)",ref:{value:"ch1_tempF",ext:"%f",unit:"°F"}},{mode:"switch",type:"float",name:"switch 1 active energy total (Watt-hours)",ref:{value:"ch1_aenergy_total",ext:"%f",unit:"Wh"}},{mode:"switch",type:"float",name:"switch 1 active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{mode:"switch",type:"float",name:"switch 1 active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{mode:"switch",type:"float",name:"switch 1 active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{mode:"switch",type:"float",name:"switch 1 power",ref:{value:"ch1_power",ext:"%f",unit:"W"}},{mode:"switch",type:"float",name:"switch 1 voltage",ref:{value:"ch1_voltage",ext:"%f",unit:"V"}},{mode:"switch",type:"float",name:"switch 1 current",ref:{value:"ch1_current",ext:"%f",unit:"A"}},{mode:"switch",type:"enum",name:"switch 2 state",ref:{value:"ch2_state",value_t:"switch2state",options:["on","off"]}},{mode:"switch",type:"float",name:"switch 2 temperature (Celsius)",ref:{value:"ch2_tempC",ext:"%f",unit:"°C"}},{mode:"switch",type:"float",name:"switch 2 temperature (Fahrenheit)",ref:{value:"ch2_tempF",ext:"%f",unit:"°F"}},{mode:"switch",type:"float",name:"switch 2 active energy total (Watt-hours)",ref:{value:"ch2_aenergy_total",ext:"%f",unit:"Wh"}},{mode:"switch",type:"float",name:"switch 2 active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{mode:"switch",type:"float",name:"switch 2 active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{mode:"switch",type:"float",name:"switch 2 active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{mode:"switch",type:"float",name:"switch 2 power",ref:{value:"ch2_power",ext:"%f",unit:"W"}},{mode:"switch",type:"float",name:"switch 2 voltage",ref:{value:"ch2_voltage",ext:"%f",unit:"V"}},{mode:"switch",type:"float",name:"switch 2 current",ref:{value:"ch2_current",ext:"%f",unit:"A"}},{mode:"cover",type:"enum",name:"cover state",ref:{value:"cover_state",value_t:"state",options:["open","closed","opening","closing","stopped","calibrating"]}},{mode:"cover",type:"int",name:"cover current position",ref:{value:"currentPosition",ext:"%d",extMeta:"0-100"}},{mode:"cover",type:"int",name:"cover target position",ref:{value:"targetPosition",ext:"%d",extMeta:"0-100"}},{mode:"cover",type:"float",name:"power",ref:{value:"power",ext:"%f",unit:"W"}},{mode:"cover",type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",unit:"V"}},{mode:"cover",type:"float",name:"current",ref:{value:"current",ext:"%f",unit:"A"}},{mode:"cover",type:"float",name:"temperature (Celsius)",ref:{value:"ch0_tempC",value_t:"tempC",ext:"%f",unit:"°C"}},{mode:"cover",type:"float",name:"temperature (Fahrenheit)",ref:{value:"ch0_tempF",value_t:"tempF",ext:"%f",unit:"°F"}}]},pro1:{command:[{type:"enum",name:"switch on",ref:{value:"ch1_on",value_t:"switchon"}},{type:"enum",name:"switch off",ref:{value:"ch1_off",value_t:"switchoff"}},{type:"enum",name:"switch toggle",ref:{value:"ch1_toggle",value_t:"switchtoggle"}}],status:[{type:"enum",name:"switch state",ref:{value:"ch1_state",value_t:"switchState",options:["on","off"]}},{type:"float",name:"temperature (Celsius)",ref:{value:"ch1_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"ch1_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"active energy total (Watt-hours)",ref:{value:"ch1_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"power",ref:{value:"power",ext:"%f",unit:"W"}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",unit:"V"}},{type:"float",name:"current",ref:{value:"current",ext:"%f",unit:"A"}}]},pro1pm:{command:[{type:"enum",name:"switch on",ref:{value:"ch1_on",value_t:"switchon"}},{type:"enum",name:"switch off",ref:{value:"ch1_off",value_t:"switchoff"}},{type:"enum",name:"switch toggle",ref:{value:"ch1_toggle",value_t:"switchtoggle"}}],status:[{type:"enum",name:"switch state",ref:{value:"ch1_state",value_t:"switchState",options:["on","off"]}},{type:"float",name:"temperature (Celsius)",ref:{value:"ch1_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"ch1_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"active energy total (Watt-hours)",ref:{value:"ch1_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"power",ref:{value:"power",ext:"%f",unit:"W"}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",unit:"V"}},{type:"float",name:"current",ref:{value:"current",ext:"%f",unit:"A"}}]},pro2:{command:[{type:"enum",name:"switch 1 on",ref:{value:"ch1_on",value_t:"switch1on"}},{type:"enum",name:"switch 1 off",ref:{value:"ch1_off",value_t:"switch1off"}},{type:"enum",name:"switch 1 toggle",ref:{value:"ch1_toggle",value_t:"switch1toggle"}},{type:"enum",name:"switch 2 on",ref:{value:"ch2_on",value_t:"switch2on"}},{type:"enum",name:"switch 2 off",ref:{value:"ch2_off",value_t:"switch2off"}},{type:"enum",name:"switch 2 toggle",ref:{value:"ch2_toggle",value_t:"switch2toggle"}}],status:[{type:"enum",name:"switch 1 state",ref:{value:"ch1_state",value_t:"switch1state",options:["on","off"]}},{type:"float",name:"switch 1 temperature (Celsius)",ref:{value:"ch1_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"switch 1 temperature (Fahrenheit)",ref:{value:"ch1_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"switch 1 active energy total (Watt-hours)",ref:{value:"ch1_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"switch 1 active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 1 active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 1 active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 1 power",ref:{value:"ch1_power",ext:"%f",unit:"W"}},{type:"float",name:"switch 1 voltage",ref:{value:"ch1_voltage",ext:"%f",unit:"V"}},{type:"float",name:"switch 1 current",ref:{value:"ch1_current",ext:"%f",unit:"A"}},{type:"enum",name:"switch 2 state",ref:{value:"ch2_state",value_t:"switch2state",options:["on","off"]}},{type:"float",name:"switch 2 temperature (Celsius)",ref:{value:"ch2_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"switch 2 temperature (Fahrenheit)",ref:{value:"ch2_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"switch 2 active energy total (Watt-hours)",ref:{value:"ch2_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"switch 2 active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 2 active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 2 active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 2 power",ref:{value:"ch2_power",ext:"%f",unit:"W"}},{type:"float",name:"switch 2 voltage",ref:{value:"ch2_voltage",ext:"%f",unit:"V"}},{type:"float",name:"switch 2 current",ref:{value:"ch2_current",ext:"%f",unit:"A"}}]},pro2pm:{command:[{mode:"switch",type:"enum",name:"switch 1 on",ref:{value:"ch1_on",value_t:"switch1on"}},{mode:"switch",type:"enum",name:"switch 1 off",ref:{value:"ch1_off",value_t:"switch1off"}},{mode:"switch",type:"enum",name:"switch 1 toggle",ref:{value:"ch1_toggle",value_t:"switch1toggle"}},{mode:"switch",type:"enum",name:"switch 2 on",ref:{value:"ch2_on",value_t:"switch2on"}},{mode:"switch",type:"enum",name:"switch 2 off",ref:{value:"ch2_off",value_t:"switch2off"}},{mode:"switch",type:"enum",name:"switch 2 toggle",ref:{value:"ch2_toggle",value_t:"switch2toggle"}},{mode:"cover",type:"int",name:"cover position",ref:{value:"Cover.GoToPosition_pos",value_t:"position",ext:"%d",extMeta:"0-100"}},{mode:"cover",type:"int",name:"cover step",ref:{value:"Cover.GoToPosition_rel",value_t:"step_relative",ext:"%d",extMeta:"-100-100"}},{mode:"cover",type:"enum",name:"cover open",ref:{value:"Cover.Open",value_t:"open"}},{mode:"cover",type:"enum",name:"cover close",ref:{value:"Cover.Close",value_t:"close"}},{mode:"cover",type:"enum",name:"cover stop",ref:{value:"Cover.Stop",value_t:"stop"}}],status:[{mode:"switch",type:"enum",name:"switch 1 state",ref:{value:"ch1_state",value_t:"switch1state",options:["on","off"]}},{mode:"switch",type:"float",name:"switch 1 temperature (Celsius)",ref:{value:"ch1_tempC",ext:"%f",unit:"°C"}},{mode:"switch",type:"float",name:"switch 1 temperature (Fahrenheit)",ref:{value:"ch1_tempF",ext:"%f",unit:"°F"}},{mode:"switch",type:"float",name:"switch 1 active energy total (Watt-hours)",ref:{value:"ch1_aenergy_total",ext:"%f",unit:"Wh"}},{mode:"switch",type:"float",name:"switch 1 active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{mode:"switch",type:"float",name:"switch 1 active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{mode:"switch",type:"float",name:"switch 1 active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{mode:"switch",type:"float",name:"switch 1 power",ref:{value:"ch1_power",ext:"%f",unit:"W"}},{mode:"switch",type:"float",name:"switch 1 voltage",ref:{value:"ch1_voltage",ext:"%f",unit:"V"}},{mode:"switch",type:"float",name:"switch 1 current",ref:{value:"ch1_current",ext:"%f",unit:"A"}},{mode:"switch",type:"enum",name:"switch 2 state",ref:{value:"ch2_state",value_t:"switch2state",options:["on","off"]}},{mode:"switch",type:"float",name:"switch 2 temperature (Celsius)",ref:{value:"ch2_tempC",ext:"%f",unit:"°C"}},{mode:"switch",type:"float",name:"switch 2 temperature (Fahrenheit)",ref:{value:"ch2_tempF",ext:"%f",unit:"°F"}},{mode:"switch",type:"float",name:"switch 2 active energy total (Watt-hours)",ref:{value:"ch2_aenergy_total",ext:"%f",unit:"Wh"}},{mode:"switch",type:"float",name:"switch 2 active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{mode:"switch",type:"float",name:"switch 2 active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{mode:"switch",type:"float",name:"switch 2 active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{mode:"switch",type:"float",name:"switch 2 power",ref:{value:"ch2_power",ext:"%f",unit:"W"}},{mode:"switch",type:"float",name:"switch 2 voltage",ref:{value:"ch2_voltage",ext:"%f",unit:"V"}},{mode:"switch",type:"float",name:"switch 2 current",ref:{value:"ch2_current",ext:"%f",unit:"A"}},{mode:"cover",type:"enum",name:"cover state",ref:{value:"cover_state",value_t:"state",options:["open","closed","opening","closing","stopped","calibrating"]}},{mode:"cover",type:"int",name:"cover current position",ref:{value:"currentPosition",ext:"%d",extMeta:"0-100"}},{mode:"cover",type:"int",name:"cover target position",ref:{value:"targetPosition",ext:"%d",extMeta:"0-100"}},{mode:"cover",type:"float",name:"power",ref:{value:"power",ext:"%f",unit:"W"}},{mode:"cover",type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",unit:"V"}},{mode:"cover",type:"float",name:"current",ref:{value:"current",ext:"%f",unit:"A"}},{mode:"cover",type:"float",name:"temperature (Celsius)",ref:{value:"ch0_tempC",value_t:"tempC",ext:"%f",unit:"°C"}},{mode:"cover",type:"float",name:"temperature (Fahrenheit)",ref:{value:"ch0_tempF",value_t:"tempF",ext:"%f",unit:"°F"}}]},pro3:{command:[{type:"enum",name:"switch 1 on",ref:{value:"ch1_on",value_t:"switch1on"}},{type:"enum",name:"switch 1 off",ref:{value:"ch1_off",value_t:"switch1off"}},{type:"enum",name:"switch 1 toggle",ref:{value:"ch1_toggle",value_t:"switch1toggle"}},{type:"enum",name:"switch 2 on",ref:{value:"ch2_on",value_t:"switch2on"}},{type:"enum",name:"switch 2 off",ref:{value:"ch2_off",value_t:"switch2off"}},{type:"enum",name:"switch 2 toggle",ref:{value:"ch2_toggle",value_t:"switch2toggle"}},{type:"enum",name:"switch 3 on",ref:{value:"ch3_on",value_t:"switch3on"}},{type:"enum",name:"switch 3 off",ref:{value:"ch3_off",value_t:"switch3off"}},{type:"enum",name:"switch 3 toggle",ref:{value:"ch3_toggle",value_t:"switch3toggle"}}],status:[{type:"enum",name:"switch 1 state",ref:{value:"ch1_state",value_t:"switch1state",options:["on","off"]}},{type:"float",name:"switch 1 temperature (Celsius)",ref:{value:"ch1_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"switch 1 temperature (Fahrenheit)",ref:{value:"ch1_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"switch 1 active energy total (Watt-hours)",ref:{value:"ch1_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"switch 1 active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 1 active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 1 active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 1 power",ref:{value:"ch1_power",ext:"%f",unit:"W"}},{type:"float",name:"switch 1 voltage",ref:{value:"ch1_voltage",ext:"%f",unit:"V"}},{type:"float",name:"switch 1 current",ref:{value:"ch1_current",ext:"%f",unit:"A"}},{type:"enum",name:"switch 2 state",ref:{value:"ch2_state",value_t:"switch2state",options:["on","off"]}},{type:"float",name:"switch 2 temperature (Celsius)",ref:{value:"ch2_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"switch 2 temperature (Fahrenheit)",ref:{value:"ch2_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"switch 2 active energy total (Watt-hours)",ref:{value:"ch2_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"switch 2 active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 2 active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 2 active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 2 power",ref:{value:"ch2_power",ext:"%f",unit:"W"}},{type:"float",name:"switch 2 voltage",ref:{value:"ch2_voltage",ext:"%f",unit:"V"}},{type:"float",name:"switch 2 current",ref:{value:"ch2_current",ext:"%f",unit:"A"}},{type:"enum",name:"switch 3 state",ref:{value:"ch3_state",value_t:"switch3state",options:["on","off"]}},{type:"float",name:"switch 3 temperature (Celsius)",ref:{value:"ch3_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"switch 3 temperature (Fahrenheit)",ref:{value:"ch3_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"switch 3 active energy total (Watt-hours)",ref:{value:"ch3_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"switch 3 active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch3_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 3 active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch3_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 3 active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch3_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 3 power",ref:{value:"ch3_power",ext:"%f",unit:"W"}},{type:"float",name:"switch 3 voltage",ref:{value:"ch3_voltage",ext:"%f",unit:"V"}},{type:"float",name:"switch 3 current",ref:{value:"ch3_current",ext:"%f",unit:"A"}}]},pro4pm:{command:[{type:"enum",name:"switch 1 on",ref:{value:"ch1_on",value_t:"switch1on"}},{type:"enum",name:"switch 1 off",ref:{value:"ch1_off",value_t:"switch1off"}},{type:"enum",name:"switch 1 toggle",ref:{value:"ch1_toggle",value_t:"switch1toggle"}},{type:"enum",name:"switch 2 on",ref:{value:"ch2_on",value_t:"switch2on"}},{type:"enum",name:"switch 2 off",ref:{value:"ch2_off",value_t:"switch2off"}},{type:"enum",name:"switch 2 toggle",ref:{value:"ch2_toggle",value_t:"switch2toggle"}},{type:"enum",name:"switch 3 on",ref:{value:"ch3_on",value_t:"switch3on"}},{type:"enum",name:"switch 3 off",ref:{value:"ch3_off",value_t:"switch3off"}},{type:"enum",name:"switch 3 toggle",ref:{value:"ch3_toggle",value_t:"switch3toggle"}},{type:"enum",name:"switch 4 on",ref:{value:"ch4_on",value_t:"switch4on"}},{type:"enum",name:"switch 4 off",ref:{value:"ch4_off",value_t:"switch4off"}},{type:"enum",name:"switch 4 toggle",ref:{value:"ch4_toggle",value_t:"switch4toggle"}}],status:[{type:"enum",name:"switch 1 state",ref:{value:"ch1_state",value_t:"switch1state",options:["on","off"]}},{type:"float",name:"switch 1 temperature (Celsius)",ref:{value:"ch1_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"switch 1 temperature (Fahrenheit)",ref:{value:"ch1_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"switch 1 active energy total (Watt-hours)",ref:{value:"ch1_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"switch 1 active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 1 active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 1 active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 1 power",ref:{value:"ch1_power",ext:"%f",unit:"W"}},{type:"float",name:"switch 1 voltage",ref:{value:"ch1_voltage",ext:"%f",unit:"V"}},{type:"float",name:"switch 1 current",ref:{value:"ch1_current",ext:"%f",unit:"A"}},{type:"enum",name:"switch 2 state",ref:{value:"ch2_state",value_t:"switch2state",options:["on","off"]}},{type:"float",name:"switch 2 temperature (Celsius)",ref:{value:"ch2_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"switch 2 temperature (Fahrenheit)",ref:{value:"ch2_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"switch 2 active energy total (Watt-hours)",ref:{value:"ch2_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"switch 2 active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 2 active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 2 active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch2_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 2 power",ref:{value:"ch2_power",ext:"%f",unit:"W"}},{type:"float",name:"switch 2 voltage",ref:{value:"ch2_voltage",ext:"%f",unit:"V"}},{type:"float",name:"switch 2 current",ref:{value:"ch2_current",ext:"%f",unit:"A"}},{type:"enum",name:"switch 3 state",ref:{value:"ch3_state",value_t:"switch3state",options:["on","off"]}},{type:"float",name:"switch 3 temperature (Celsius)",ref:{value:"ch3_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"switch 3 temperature (Fahrenheit)",ref:{value:"ch3_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"switch 3 active energy total (Watt-hours)",ref:{value:"ch3_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"switch 3 active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch3_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 3 active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch3_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 3 active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch3_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 3 power",ref:{value:"ch3_power",ext:"%f",unit:"W"}},{type:"float",name:"switch 3 voltage",ref:{value:"ch3_voltage",ext:"%f",unit:"V"}},{type:"float",name:"switch 3 current",ref:{value:"ch3_current",ext:"%f",unit:"A"}},{type:"enum",name:"switch 4 state",ref:{value:"ch4_state",value_t:"switch4state",options:["on","off"]}},{type:"float",name:"switch 4 temperature (Celsius)",ref:{value:"ch4_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"switch 4 temperature (Fahrenheit)",ref:{value:"ch4_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"switch 4 active energy total (Watt-hours)",ref:{value:"ch4_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"switch 4 active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch4_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 4 active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch4_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 4 active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch4_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"switch 4 power",ref:{value:"ch4_power",ext:"%f",unit:"W"}},{type:"float",name:"switch 4 voltage",ref:{value:"ch4_voltage",ext:"%f",unit:"V"}},{type:"float",name:"switch 4 current",ref:{value:"ch4_current",ext:"%f",unit:"A"}}]},uni:{command:[{type:"enum",name:"switch 1 on",ref:{value:"ch1_on",value_t:"switch1on"}},{type:"enum",name:"switch 1 off",ref:{value:"ch1_off",value_t:"switch1off"}},{type:"enum",name:"switch 1 toggle",ref:{value:"ch1_toggle",value_t:"switch1toggle"}},{type:"enum",name:"switch 2 on",ref:{value:"ch2_on",value_t:"switch2on"}},{type:"enum",name:"switch 2 off",ref:{value:"ch2_off",value_t:"switch2off"}},{type:"enum",name:"switch 2 toggle",ref:{value:"ch2_toggle",value_t:"switch2toggle"}}],status:[{type:"enum",name:"switch 1 state",ref:{value:"ch1_state",value_t:"switch1state",options:["on","off"]}},{type:"enum",name:"switch 2 state",ref:{value:"ch2_state",value_t:"switch2state",options:["on","off"]}}]},"plug-u1":{command:[{type:"enum",name:"switch on",ref:{value:"ch1_on",value_t:"switchon"}},{type:"enum",name:"switch off",ref:{value:"ch1_off",value_t:"switchoff"}},{type:"enum",name:"switch toggle",ref:{value:"ch1_toggle",value_t:"switchtoggle"}}],status:[{type:"enum",name:"switch state",ref:{value:"ch1_state",value_t:"switchState",options:["on","off"]}},{type:"float",name:"temperature (Celsius)",ref:{value:"ch1_tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"ch1_tempF",ext:"%f",unit:"°F"}},{type:"float",name:"active energy total (Watt-hours)",ref:{value:"ch1_aenergy_total",ext:"%f",unit:"Wh"}},{type:"float",name:"active energy by minute 1 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_1",ext:"%f",unit:"mWh"}},{type:"float",name:"active energy by minute 2 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_2",ext:"%f",unit:"mWh"}},{type:"float",name:"active energy by minute 3 (Milliwatt-hours)",ref:{value:"ch1_aenergy_by_minute_3",ext:"%f",unit:"mWh"}},{type:"float",name:"power",ref:{value:"power",ext:"%f",unit:"W"}},{type:"float",name:"voltage",ref:{value:"voltage",ext:"%f",unit:"V"}},{type:"float",name:"current",ref:{value:"current",ext:"%f",unit:"A"}}]},pluswdus:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"brightness",ref:{value:"brightness",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"state",ref:{value:"state",options:["on","off"]}},{type:"int",name:"brightness",ref:{value:"brightness",extMeta:"0-100",unit:"%"}}]},plusht:{command:[],status:[{mode:"temperature",type:"float",name:"temperature (Celsius)",ref:{value:"ch0_tempC",value_t:"tempC",ext:"%f",unit:"°C"}},{mode:"temperature",type:"float",name:"temperature (Fahrenheit)",ref:{value:"ch0_tempF",value_t:"tempF",ext:"%f",unit:"°F"}},{mode:"humidity",type:"int",name:"relative humidity",ref:{value:"humRel",ext:"%d",unit:"%"}},{mode:"power",type:"int",name:"battery capacity",ref:{value:"batCapacity",value_t:"battery_level",ext:"%d",extMeta:"0-100",unit:"%"}},{mode:"power",type:"float",name:"battery voltage",ref:{value:"batVoltage",ext:"%f",unit:"V"}}]}},SYS:"shelly",applyUIFilter:function applyUIFilter(e,t,a){if(!e.sys)return null;var _contains=function _contains(e,t){if("*"===e||"*"===e[0])return!0;for(var a=0;a<e.length;a++){if(e[a]==t)return!0;}return!1;},_filter=function _filter(e,t){var o=[],n=null,l=xnm.aio.shelly.DM.getCommandStatusMap(e,a);return l&&(n=function(e,t,a){var o=[];switch(a.catagory){case"command":e.command&&e.command.forEach(function(e){if(_contains(a.elems,e.type)){var t=JSON.parse(JSON.stringify(e));o.push(t);}});break;case"status":e.status&&e.status.forEach(function(e){if(_contains(a.elems,e.type)){var t=JSON.parse(JSON.stringify(e));o.push(t);}});}return o;}(l,0,t),o=o.concat(n)),o;},o=JSON.parse(JSON.stringify(e)),n=null;switch(t.catagory){case"command":n=_filter(e,t),o.command=n;break;case"status":n=_filter(e,t),o.status=n;break;default:return null;}return n&&0!=n.length?o:null;},createDevice:function createDevice(e,t,a){var o=xnm.aio.shelly.DM;e?e.type?e.ip?a(null,e):a(new o.Error(o.Error.ERROR_CODE.INVALID,"IP is missing")):a(new o.Error(o.Error.ERROR_CODE.INVALID,"type is missing")):a(new o.Error(o.Error.ERROR_CODE.INVALID,"info is missing"));},deleteDevice:function deleteDevice(e,t,a){a&&a();},getCommandStatusMap:function getCommandStatusMap(e,t){if(!e.type)return null;var a=xnm.aio.shelly.DM.MAP[e.type]||null;if(!a)return a;var o={command:a.command.slice(0),status:a.status.slice(0)};return e.type===xnm.aio.shelly.RGBW2.TYPE?"color"===e.mode?(o.command.splice(11,12),o.status.splice(11,12)):"white"===e.mode&&(o.command.splice(0,11),o.status.splice(1,10)):e.type===xnm.aio.shelly.Switch2.TYPE?"roller"===e.mode?(o.command.splice(0,6),o.status.splice(0,2)):"relay"===e.mode&&(o.command.splice(6,4),o.status.splice(2,5)):e.type===xnm.aio.shelly.Switch25.TYPE?"roller"===e.mode?(o.command.splice(0,6),o.status.splice(0,4)):"relay"===e.mode&&(o.command.splice(6,4),o.status.splice(4,6)):e.type!==xnm.aio.shelly.Plus2PM.TYPE&&e.type!==xnm.aio.shelly.Pro2PM.TYPE||(o.command=o.command.filter(function(t){return!t.mode||t.mode===e.mode;}),o.status=o.status.filter(function(t){return!t.mode||t.mode===e.mode;})),o;},getIPDeviceType:function getIPDeviceType(){return[{sys:xnm.aio.shelly.DM.SYS,name:"Shelly"}];},supportSmartWidget:function supportSmartWidget(e){if(!e||!e.type)return!1;var t=this.toGeneralDevice(e);if(!t)return!1;return["blind","brightness","contact","dimmer","door","dw2","heater","light","meter","motion","powermeter","rgb","shutter","switch","temperature","window"].includes(t.type);},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a,o,n){if(!t||!t.type)return!1;var l={},i={},r=[];var addType=function addType(e){r.includes(e)||r.push(e);},s=this.toGeneralDevice(t);if(s){var _e=s.type;addType(_e),"dw2"===_e?(addType("contact"),addType("door"),addType("window")):"meter"===_e&&addType("powermeter");}var adjustValue=function adjustValue(e){var t=e.value;return["brightness","ch1_brightness","gain"].includes(t)?t=["dimTo","brightness"]:"K"===e.unit||"ct"===t?t="colorTemp":["moveDown","moveUp"].includes(e.value_t)?t=e.value_t:t.startsWith("ch1_")&&(t=t.substring(4)),Array.isArray(t)||(t=[t,t]),t;},u=this.getCommandStatusMap(t);return u.command=u.command||[],u.status=u.status||[],u.command.forEach(function(e){var t=adjustValue(e.ref)[0];l["%".concat(t,"%")]=e.ref,"on"===t?l["%dimOn%"]=e.ref:"off"===t&&(l["%dimOff%"]=e.ref),["on","off"].includes(t)&&addType("switch"),["dimTo"].includes(t)&&addType("dimmer"),"%rgb"===e.ref.ext&&addType("rgb");}),u.status.forEach(function(e){var t=adjustValue(e.ref)[1];if(i["%".concat(t,"%")]=e.ref,i["%".concat(t,"State%")]=e.ref,"state"===t)r.includes("switch")&&(i["%switchState%"]=e.ref),r.includes("contact")&&(i["%contactState%"]=e.ref);else if("brightness"===t)r.includes("dimmer")&&(i["%dimmerState%"]=e.ref);else if(["current","power","total","voltage"].includes(t.replace("ch1_",""))&&r.includes("powermeter")){var _a=t.replace("ch1_","");_a="total"===_a?"EnergyCounter":_a[0].toUpperCase()+_a.substring(1),i["%meter".concat(_a,"%")]=e.ref;}}),e._injectToSmartWidgetTemplate(o,r,n,l,i);},toGeneralDevice:function toGeneralDevice(e){var t=xnm.aio.shelly.parseJSON(e);return t&&"function"==typeof t.toGeneralDevice?t.toGeneralDevice():null;},updateDevice:function updateDevice(e,t,a){var o=xnm.aio.shelly.DM;e?e.type?e.ip?a(null,e):a(new o.Error(o.Error.ERROR_CODE.INVALID,"IP is missing")):a(new o.Error(o.Error.ERROR_CODE.INVALID,"type is missing")):a(new o.Error(o.Error.ERROR_CODE.INVALID,"info is missing"));}},xnm.aio.shelly.DM.MAP["1pm"]={command:xnm.aio.shelly.DM.MAP[1].command.slice(0),status:xnm.aio.shelly.DM.MAP[1].status.slice(0)},xnm.aio.shelly.DM.MAP["1pm"].status.push({type:"float",name:"power",ref:{value:"ch1_power",value_t:"power",ext:"%f",unit:"W"}},{type:"float",name:"power total",ref:{value:"ch1_powerTotal",value_t:"powerTotal",ext:"%f",unit:"Wmin"}},{type:"enum",name:"over temperature",ref:{value:"overTemp",options:["true","false"]}},{type:"float",name:"temperature (Celsius)",ref:{value:"tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"tempF",ext:"%f",unit:"°F"}}),xnm.aio.shelly.DM.MAP["plug-s"]={command:xnm.aio.shelly.DM.MAP.plug.command.slice(0),status:xnm.aio.shelly.DM.MAP.plug.status.slice(0)},xnm.aio.shelly.DM.MAP["plug-s"].status.push({type:"enum",name:"over temperature",ref:{value:"overTemp",options:["true","false"]}},{type:"float",name:"temperature (Celsius)",ref:{value:"tempC",ext:"%f",unit:"°C"}},{type:"float",name:"temperature (Fahrenheit)",ref:{value:"tempF",ext:"%f",unit:"°F"}}),xnm.aio.shelly.DM.Error=function(e,t){this.code=e,this.message=t,this.stack=new Error().stack;},xnm.aio.shelly.DM.Error.prototype=new Error(),xnm.aio.shelly.DM.Error.prototype.name="ShellyDMError",xnm.aio.shelly.DM.Error.prototype.code=0,xnm.aio.shelly.DM.Error.ERROR_CODE={DEFAULT:0,INDEX_EXISTS:1,INVALID:2,UNKNOWN:3,NOT_FOUND:4,IP_EXISTS:5},xnm.aio.shelly.Device=function(e,t){this.ip=e,this.port=80,this.type=null,t&&(this.firmware=t.firmware||null,this.id=t.id||null,this.mode=t.mode||null,this.password=t.password||null,this.port=t.port||this.port,this.roller_dir=t.roller_dir||"open100",this.type=t.type,this.username=t.username||null);},xnm.aio.shelly.Device.prototype={_getStateFromResult:function _getStateFromResult(e,t){if(!e||!t)return null;if("actReasons"===t)return Array.isArray(e.act_reasons)?e.act_reasons.join(", "):null;if(e.bat){var a=e.bat;switch(t){case"batCapacity":case"bat_level":return a.value;case"batVoltage":return a.voltage;}}if("charger"===t)return e.charger;if(Array.isArray(e.meters)){if(e.meters.length>0){var o=e.meters[0];switch(t){case"ch1_power":return o.power;case"ch1_powerTotal":return o.total;}}if(e.meters.length>1){var n=e.meters[1];switch(t){case"ch2_power":return n.power;case"ch2_powerTotal":return n.total;}}}if(e.tmp){var l=e.tmp;switch(t){case"tempC":return l.tC;case"tempF":return l.tF;case"temp_value":return l.value;case"temp_units":return l.units;}}return"overTemp"===t?e.overtemperature?"true":"false":null;},equalsTo:function equalsTo(e){return!!e&&(e instanceof xnm.aio.shelly.Device||e instanceof xnm.aio.shelly.DeviceGen2)&&this.ip===e.ip&&this.port===e.port&&this.id===e.id;},executeCommand:function executeCommand(e,t,a){var o=xnm.aio.shelly.parseJSON(e);if(o)o._executeCommand(t,a);else{var n=new Error("Could not create device from data.");a&&a(n,null);}},executeCommandCreator:function executeCommandCreator(e,t,a){t&&t.value?this.executeCommand(e,t,function(e){a&&a(e);}):a&&a(new Error("Command value is empty."));},getState:function getState(e){xnm.aio.shelly._logger.log("trace","[Device.getState] Sending request."),xnm.aio.shelly.doRequest(this,"GET",{path:"status"},function(t,a){t?e&&e(t,null):e&&e(null,a.response);});},getSettings:function getSettings(e){xnm.aio.shelly._logger.log("trace","[Device.settings] Sending request."),xnm.aio.shelly.doRequest(this,"GET",{path:"settings"},function(t,a){t?e&&e(t,null):e&&e(null,a.response);});},getStatesCreator:function getStatesCreator(e,t,a){var o=this;this.getState(function(e,n){if(!n)return void(a&&a(new Error("Failed to get states.")));var l=[];var i=[];for(var r=0;r<t.length;r++){var s=t[r];if(s&&s.id&&s.status)if(s.status.state_type&&"settings"===s.status.state_type)i.push({id:s.id,value:s.status.value});else{var u=o._getStateFromResult(n,s.status.value);null!==u&&l.push({id:s.id,status:u});}}i.length?o.getSettings(function(e,t){if(t){for(var n=0;n<i.length;n++){var r=i[n];if(!r||!r.id||!r.value)continue;var _e2=o._getStateFromResult(t,r.value);null!==_e2&&l.push({id:r.id,status:_e2});}a&&a(null,l);}else a&&a(new Error("Failed to get settings."));}):a&&a(null,l);});},toJSON:function toJSON(){return{sys:xnm.aio.shelly.DM.SYS,type:this.type,ip:this.ip,id:this.id,firmware:this.firmware};}},xnm.aio.shelly.GenericSwitch=function(e,t){xnm.aio.shelly.Device.call(this,e,t);},xnm.aio.shelly.GenericSwitch.prototype=Object.create(xnm.aio.shelly.Device.prototype),xnm.aio.shelly.GenericSwitch.constructor=xnm.aio.shelly.GenericSwitch,xnm.aio.shelly.GenericSwitch.prototype._executeCommand=function(e,t){if(3!==e.value.indexOf("_off")&&3!==e.value.indexOf("_on")&&3!==e.value.indexOf("_toggle"))switch(e.value){case"down":this.cmdMoveDown(t);break;case"position":this.cmdSetPosition(e.ext,t);break;case"stop":this.cmdMoveStop(t);break;case"up":this.cmdMoveUp(t);break;default:var a=new Error("Unknown command: "+e.value);xnm.aio.shelly._logger.log("warn","[GenericSwitch._executeCommand] "+a.message),t(a,null);}else{var _a2=e.value.charAt(2)||1,o=e.value.slice(4);this.cmdTurn(_a2-1,o,t);}},xnm.aio.shelly.GenericSwitch.prototype._getStateFromResult=function(e,t){if(!e||!t)return null;if(Array.isArray(e.relays)){if(e.relays.length>0){var a=e.relays[0];switch(t){case"ch1_overTemp":return a.overtemperature?"true":"false";case"ch1_state":return a.ison?"on":"off";}}if(e.relays.length>1){var o=e.relays[1];switch(t){case"ch2_overTemp":return o.overtemperature?"true":"false";case"ch2_state":return o.ison?"on":"off";}}}if(Array.isArray(e.rollers)&&e.rollers.length>0){var n=e.rollers[0];switch(t){case"position":return"open0"===this.roller_dir?n.current_pos:100-n.current_pos;case"roller_lastDirection":return"close"===n.last_direction?"closed":n.last_direction;case"roller_overTemp":return n.overtemperature?"true":"false";case"roller_power":return n.power;case"roller_state":if("open0"===this.roller_dir){if(n.current_pos>=66)return"closed";if(n.current_pos<=33)return"open";}else{if(n.current_pos>=66)return"open";if(n.current_pos<=33)return"closed";}return"middle";case"roller_stopReason":return n.stop_reason;}}if(e.ext_temperature&&0===t.indexOf("addonTemp")){var l=e.ext_temperature[t.substring(9,10)],i=t.substring(10,11);if(l){var r=l["t"+i];if("number"==typeof r)return r;}}if(e.ext_humidity&&0===t.indexOf("addonHum")){var s=e.ext_humidity[t.substring(8,9)];if(s){var u=s.hum;if("number"==typeof u)return u;}}return xnm.aio.shelly.Device.prototype._getStateFromResult.call(this,e,t);},xnm.aio.shelly.GenericSwitch.prototype.cmdTurn=function(e,t,a){var o={path:"relay/"+e+"?turn="+t};xnm.aio.shelly._logger.log("trace","[GenericSwitch.cmdTurn] Sending request."),xnm.aio.shelly.doRequest(this,"GET",o,function(e,t){a&&a(e,t);});},xnm.aio.shelly.GenericSwitch.prototype.cmdMoveDown=function(e){xnm.aio.shelly._logger.log("trace","[GenericSwitch.cmdMoveDown] Sending request."),xnm.aio.shelly.doRequest(this,"GET",{path:"roller/0?go=close"},function(t,a){e&&e(t,a);});},xnm.aio.shelly.GenericSwitch.prototype.cmdMoveStop=function(e){xnm.aio.shelly._logger.log("trace","[GenericSwitch.cmdMoveStop] Sending request."),xnm.aio.shelly.doRequest(this,"GET",{path:"roller/0?go=stop"},function(t,a){e&&e(t,a);});},xnm.aio.shelly.GenericSwitch.prototype.cmdMoveUp=function(e){xnm.aio.shelly._logger.log("trace","[GenericSwitch.cmdMoveUp] Sending request."),xnm.aio.shelly.doRequest(this,"GET",{path:"roller/0?go=open"},function(t,a){e&&e(t,a);});},xnm.aio.shelly.GenericSwitch.prototype.cmdSetPosition=function(e,t){if("number"!=typeof e||isNaN(e)||e<0||e>100){var a=new Error("Invalid value for position: "+e);return xnm.aio.shelly._logger.log("error","[GenericSwitch.cmdSetPosition] "+a.message),void(t&&t(a,null));}"open100"===this.roller_dir&&(e=100-e);var o={path:"roller/0?go=to_pos&roller_pos="+Math.round(e)};xnm.aio.shelly._logger.log("trace","[GenericSwitch.cmdSetPosition] Sending request."),xnm.aio.shelly.doRequest(this,"GET",o,function(e,a){t&&t(e,a);});},xnm.aio.shelly.Switch1=function(e,t){xnm.aio.shelly.GenericSwitch.call(this,e,t),this.type=xnm.aio.shelly.Switch1.TYPE;},xnm.aio.shelly.Switch1.TYPE="1",xnm.aio.shelly.Switch1.prototype=Object.create(xnm.aio.shelly.GenericSwitch.prototype),xnm.aio.shelly.Switch1.constructor=xnm.aio.shelly.Switch1,xnm.aio.shelly.Switch1.prototype.toGeneralDevice=function(){return{type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"}},states:{state:{value:"ch1_state"},addonHum0:{value:"addonHum0"},addonTemp0C:{value:"addonTemp0C"},addonTemp0F:{value:"addonTemp0F"},addonTemp1C:{value:"addonTemp1C"},addonTemp1F:{value:"addonTemp1F"},addonTemp2C:{value:"addonTemp2C"},addonTemp2F:{value:"addonTemp2F"}}}};},xnm.aio.shelly.Switch1PM=function(e,t){xnm.aio.shelly.Switch1.call(this,e,t),this.type=xnm.aio.shelly.Switch1PM.TYPE;},xnm.aio.shelly.Switch1PM.TYPE="1pm",xnm.aio.shelly.Switch1PM.prototype=Object.create(xnm.aio.shelly.Switch1.prototype),xnm.aio.shelly.Switch1PM.constructor=xnm.aio.shelly.Switch1PM,xnm.aio.shelly.Switch1PM.prototype.toGeneralDevice=function(){return{type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]},overTemp:{values:["true","false"]}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"}},states:{state:{value:"ch1_state"},overTemp:{value:"overTemp",options:["true","false"]}}}};},xnm.aio.shelly.Plug=function(e,t){xnm.aio.shelly.GenericSwitch.call(this,e,t),this.type=xnm.aio.shelly.Plug.TYPE;},xnm.aio.shelly.Plug.TYPE="plug",xnm.aio.shelly.Plug.prototype=Object.create(xnm.aio.shelly.GenericSwitch.prototype),xnm.aio.shelly.Plug.constructor=xnm.aio.shelly.Plug,xnm.aio.shelly.Plug.prototype.toGeneralDevice=function(){return{type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"}},states:{state:{value:"ch1_state"}}}};},xnm.aio.shelly.PlugS=function(e,t){xnm.aio.shelly.Plug.call(this,e,t),this.type=xnm.aio.shelly.PlugS.TYPE;},xnm.aio.shelly.PlugS.TYPE="plug-s",xnm.aio.shelly.PlugS.prototype=Object.create(xnm.aio.shelly.Plug.prototype),xnm.aio.shelly.PlugS.constructor=xnm.aio.shelly.PlugS,xnm.aio.shelly.PlugS.prototype.toGeneralDevice=function(){return{type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]},overTemp:{values:["true","false"]}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"}},states:{state:{value:"ch1_state"},overTemp:{value:"overTemp",options:["true","false"]}}}};},xnm.aio.shelly.Switch2=function(e,t){xnm.aio.shelly.GenericSwitch.call(this,e,t),this.type=xnm.aio.shelly.Switch2.TYPE;},xnm.aio.shelly.Switch2.TYPE="switch",xnm.aio.shelly.Switch2.prototype=Object.create(xnm.aio.shelly.GenericSwitch.prototype),xnm.aio.shelly.Switch2.constructor=xnm.aio.shelly.Switch2,xnm.aio.shelly.Switch2.prototype.toGeneralDevice=function(){return"relay"===this.mode?{type:"switch",commands:{on:{},off:{},toggle:{},ch2_on:{},ch2_off:{},ch2_toggle:{}},states:{state:{values:["on","off"]},ch2_state:{values:["on","off"]},power:{type:"FLOAT"},powerTotal:{type:"FLOAT"}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"},ch2_on:{value:"ch2_on"},ch2_off:{value:"ch2_off"},ch2_toggle:{value:"ch2_toggle"}},states:{state:{value:"ch1_state"},ch2_state:{value:"ch2_state"},power:{value:"ch1_power",ext:"%f",unit:"W"},powerTotal:{value:"ch1_powerTotal",ext:"%f",unit:"Wmin"}}}}:"roller"===this.mode?{type:"shutter",commands:{position:{type:"INT",min:0,max:100,unit:"%"},up:{},down:{},stop:{}},states:{position:{type:"INT",min:0,max:100,unit:"%"},state:{values:["open","closed","middle"]},lastDirection:{values:["open","closed"]},stopReason:{values:["normal","safety_switch","obstacle"]},power:{type:"FLOAT"},powerTotal:{type:"FLOAT"}},details:{commands:{position:{value:"position",ext:"%d",extMeta:"0-100",unit:"%"},up:{value:"up"},down:{value:"down"},stop:{value:"stop"}},states:{position:{value:"position",ext:"%d",extMeta:"0-100",unit:"%"},state:{value:"roller_state",options:["open","closed","middle"]},lastDirection:{value:"roller_lastDirection",options:["open","closed"]},stopReason:{value:"roller_stopReason",options:["normal","safety_switch","obstacle"]},power:{value:"ch1_power",ext:"%f",unit:"W"},powerTotal:{value:"ch1_powerTotal",ext:"%f",unit:"Wmin"}}}}:null;},xnm.aio.shelly.Switch25=function(e,t){xnm.aio.shelly.GenericSwitch.call(this,e,t),this.type=xnm.aio.shelly.Switch25.TYPE,this.mode=this.mode||"relay";},xnm.aio.shelly.Switch25.TYPE="switch25",xnm.aio.shelly.Switch25.prototype=Object.create(xnm.aio.shelly.GenericSwitch.prototype),xnm.aio.shelly.Switch25.constructor=xnm.aio.shelly.Switch25,xnm.aio.shelly.Switch25.prototype.toGeneralDevice=function(){return"relay"===this.mode?{type:"switch",commands:{on:{},off:{},toggle:{},ch2_on:{},ch2_off:{},ch2_toggle:{}},states:{state:{values:["on","off"]},ch2_state:{values:["on","off"]}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"},ch2_on:{value:"ch2_on"},ch2_off:{value:"ch2_off"},ch2_toggle:{value:"ch2_toggle"}},states:{state:{value:"ch1_state"},ch2_state:{value:"ch2_state"}}}}:"roller"===this.mode?{type:"blind",commands:{position:{value:{type:"INT",min:0,max:100,unit:"%"}},up:{},down:{},stop:{}},states:{position:{type:"INT",min:0,max:100,unit:"%"},state:{values:["open","closed","middle"]}},details:{commands:{position:{value:"position",ext:"%d",extMeta:"0-100",unit:"%"},up:{value:"up"},down:{value:"down"},stop:{value:"stop"}},states:{position:{value:"position",ext:"%d",extMeta:"0-100",unit:"%"},state:{value:"roller_state",options:["open","closed","middle"]}}}}:null;},xnm.aio.shelly.Switch1L=function(e,t){xnm.aio.shelly.GenericSwitch.call(this,e,t),this.type=xnm.aio.shelly.Switch1L.TYPE;},xnm.aio.shelly.Switch1L.TYPE="1l",xnm.aio.shelly.Switch1L.prototype=Object.create(xnm.aio.shelly.GenericSwitch.prototype),xnm.aio.shelly.Switch1L.constructor=xnm.aio.shelly.Switch1L,xnm.aio.shelly.Switch1L.prototype.toGeneralDevice=function(){return{type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"}},states:{state:{value:"ch1_state"}}}};},xnm.aio.shelly.GenericLight=function(e,t){xnm.aio.shelly.Device.call(this,e,t);},xnm.aio.shelly.GenericLight.prototype=Object.create(xnm.aio.shelly.Device.prototype),xnm.aio.shelly.GenericLight.constructor=xnm.aio.shelly.GenericLight,xnm.aio.shelly.GenericLight.prototype._executeCommand=function(e,t){switch(e.value){case"blue":this.cmdSetSingleColor("blue",e.ext,t);break;case"brightness":this.cmdSetBrightness(e.ext,t);break;case"transition":this.cmdSetTransition(e.ext,t);break;case"color":this.cmdSetColor(e.ext,t);break;case"gain":this.cmdSetGain(e.ext,t);break;case"green":this.cmdSetSingleColor("green",e.ext,t);break;case"mode":this.cmdSetMode(e.ext,t);break;case"off":this.cmdOff(t);break;case"on":this.cmdOn(t);break;case"red":this.cmdSetSingleColor("red",e.ext,t);break;case"toggle":this.cmdToggle(t);break;case"white":this.cmdSetSingleColor("white",e.ext,t);break;case"effect":this.cmdSetEffect(e.ext,t);break;case"temp":this.cmdSetColorTemp(e.ext,t);break;default:var a=new Error("Unknown command: "+e.value);xnm.aio.shelly._logger.log("warn","[GenericLight._executeCommand] "+a.message),t(a,null);}},xnm.aio.shelly.GenericLight.prototype._getStateFromResult=function(e,t){if(!e||!t)return null;if(Array.isArray(e.lights)&&e.lights.length>0){var a=e.lights[0];switch(t){case"red":return Math.round(a.red/2.55);case"green":return Math.round(a.green/2.55);case"blue":return Math.round(a.blue/2.55);case"white":return Math.round(a.white/2.55);case"gain":return a.ison?a.gain:0;case"effect":return"function"==typeof this.getEffectName?this.getEffectName(a.effect):a.effect;case"brightness":return a.ison?a.brightness:0;case"transition":return a.transition;case"temp":return a.temp;case"mode":return a.mode;case"state":return a.ison?"on":"off";case"color":return this._getColorHex(a.red,a.green,a.blue);}}return xnm.aio.shelly.Device.prototype._getStateFromResult.call(this,e,t);},xnm.aio.shelly.GenericLight.prototype.cmdOff=function(e){var t={path:"light/0?turn=off"};!(this instanceof xnm.aio.shelly.Bulb)&&this instanceof xnm.aio.shelly.RGBW2&&(t.path="color/0?turn=off"),xnm.aio.shelly._logger.log("trace","[GenericLight.cmdOff] Sending request."),xnm.aio.shelly.doRequest(this,"GET",t,function(t,a){e&&e(t,a);});},xnm.aio.shelly.GenericLight.prototype.cmdOn=function(e){var t={path:"light/0?turn=on"};!(this instanceof xnm.aio.shelly.Bulb)&&this instanceof xnm.aio.shelly.RGBW2&&(t.path="color/0?turn=on"),xnm.aio.shelly._logger.log("trace","[GenericLight.cmdOn] Sending request."),xnm.aio.shelly.doRequest(this,"GET",t,function(t,a){e&&e(t,a);});},xnm.aio.shelly.GenericLight.prototype.cmdSetTransition=function(e,t){if("number"!=typeof e||isNaN(e)||e<0||e>5e3){var a=new Error("Invalid value for transition: "+e);return xnm.aio.shelly._logger.log("error","[GenericLight.cmdSetTransition] "+a.message),void(t&&t(a,null));}var o={path:"light/0?transition="+e};xnm.aio.shelly._logger.log("trace","[GenericLight.cmdSetTransition] Sending request."),xnm.aio.shelly.doRequest(this,"GET",o,function(e,a){t&&t(e,a);});},xnm.aio.shelly.GenericLight.prototype.cmdSetBrightness=function(e,t){if("number"!=typeof e||isNaN(e)||e<0||e>100){var a=new Error("Invalid value for brightness: "+e);return xnm.aio.shelly._logger.log("error","[GenericLight.cmdSetBrightness] "+a.message),void(t&&t(a,null));}var o={path:null};this instanceof xnm.aio.shelly.Dimmer||this instanceof xnm.aio.shelly.Vintage||this instanceof xnm.aio.shelly.BulbDuo?(o.path="light/0?",o.path+=0===e?"turn=off":"turn=on&brightness="+e):o.path="white/0?mode=white&turn=on&brightness="+e,xnm.aio.shelly._logger.log("trace","[GenericLight.cmdSetBrightness] Sending request."),xnm.aio.shelly.doRequest(this,"GET",o,function(e,a){t&&t(e,a);});},xnm.aio.shelly.GenericLight.prototype.cmdSetColor=function(e,t){if("string"!=typeof e||e.length<6||e.length>9){var a=new Error("Invalid value for color: "+e);return xnm.aio.shelly._logger.log("error","[GenericLight.cmdSetColor] "+a.message),void(t&&t(a,null));}e=e.replace("#","");var o="";(o+="&red="+parseInt(e.substring(0,2),16),o+="&green="+parseInt(e.substring(2,4),16),o+="&blue="+parseInt(e.substring(4,6),16),8===e.length)?o+="&white="+parseInt(e.substring(6,8),16):o+="&white=0";var n={path:"color/0?turn=on&mode=color"+o};xnm.aio.shelly._logger.log("trace","[GenericLight.cmdSetColor] Sending request."),xnm.aio.shelly.doRequest(this,"GET",n,function(e,a){t&&t(e,a);});},xnm.aio.shelly.GenericLight.prototype.cmdSetColorTemp=function(e,t){if("number"!=typeof e||isNaN(e)||e<2700||e>6500){var _a3=new Error("Invalid value for color temperature: "+e);return xnm.aio.shelly._logger.log("error","[GenericLight.cmdSetColorTemp] "+_a3.message),void(t&&t(_a3,null));}var a={path:null};this instanceof xnm.aio.shelly.BulbDuo?a.path="light/0?turn=on&temp="+Math.round(e):a.path="white/0?turn=on&mode=white&temp="+Math.round(e),xnm.aio.shelly._logger.log("trace","[GenericLight.cmdSetColorTemp] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.GenericLight.prototype.cmdSetEffect=function(e,t){if("string"==typeof e&&"function"==typeof this.getEffectIndex&&(e=this.getEffectIndex(e)),"number"!=typeof e||e<0){var a=new Error("Invalid value for effect: "+e);return xnm.aio.shelly._logger.log("error","[GenericLight.cmdSetEffect] "+a.message),void(t&&t(a,null));}var o={path:"color/0?turn=on&mode=color&effect="+e};xnm.aio.shelly._logger.log("trace","[GenericLight.cmdSetEffect] Sending request."),xnm.aio.shelly.doRequest(this,"GET",o,function(e,a){t&&t(e,a);});},xnm.aio.shelly.GenericLight.prototype.cmdSetSingleColor=function(e,t,a){if("number"!=typeof t||isNaN(t)||t<0||t>100){var o=new Error("Invalid value for color: "+t);return xnm.aio.shelly._logger.log("error","[GenericLight.cmdSetSingleColor] "+o.message),void(a&&a(o,null));}if(["red","green","blue","white"].indexOf(e)<0){var n=new Error("Invalid value for key: "+e);return xnm.aio.shelly._logger.log("error","[GenericLight.cmdSetSingleColor] "+n.message),void(a&&a(n,null));}var l={path:"color/0?turn=on&mode=color"+("&"+e+"="+(t=Math.round(2.55*t)))};this instanceof xnm.aio.shelly.BulbDuo&&(l.path="light/0?turn=on&white="+t),xnm.aio.shelly._logger.log("trace","[GenericLight.cmdSetSingleColor] Sending request."),xnm.aio.shelly.doRequest(this,"GET",l,function(e,t){a&&a(e,t);});},xnm.aio.shelly.GenericLight.prototype.cmdSetGain=function(e,t){if("number"!=typeof e||isNaN(e)||e<0||e>100){var a=new Error("Invalid value for gain: "+e);return xnm.aio.shelly._logger.log("error","[GenericLight.cmdSetGain] "+a.message),void(t&&t(a,null));}var o={path:"color/0?turn=on&mode=color&gain="+e};xnm.aio.shelly._logger.log("trace","[GenericLight.cmdSetGain] Sending request."),xnm.aio.shelly.doRequest(this,"GET",o,function(e,a){t&&t(e,a);});},xnm.aio.shelly.GenericLight.prototype.cmdSetMode=function(e,t){if(["color","white"].indexOf(e)<0){var a=new Error("Invalid value for mode: "+e);return xnm.aio.shelly._logger.log("error","[GenericLight.cmdSetMode] "+a.message),void(t&&t(a,null));}var o={};this instanceof xnm.aio.shelly.Bulb||this instanceof xnm.aio.shelly.ColorBulb||this instanceof xnm.aio.shelly.RGBW2?o.path="settings/?mode="+e:o.path="light/0?turn=on&mode="+e,xnm.aio.shelly._logger.log("trace","[GenericLight.cmdSetMode] Sending request."),xnm.aio.shelly.doRequest(this,"GET",o,function(e,a){t&&t(e,a);});},xnm.aio.shelly.GenericLight.prototype.cmdToggle=function(e){var t={path:"light/0?turn=toggle"};!(this instanceof xnm.aio.shelly.Bulb)&&this instanceof xnm.aio.shelly.RGBW2&&(t.path="color/0?turn=toggle"),xnm.aio.shelly._logger.log("trace","[GenericLight.cmdToggle] Sending request."),xnm.aio.shelly.doRequest(this,"GET",t,function(t,a){e&&e(t,a);});},xnm.aio.shelly.GenericLight.prototype._getColorHex=function(e,t,a,o){var n="#",l=Number(e).toString(16),i=Number(t).toString(16),r=Number(a).toString(16);if(l.length<2&&(l="0"+l),i.length<2&&(i="0"+i),r.length<2&&(r="0"+r),n+=l+i+r,"number"==typeof o&&!isNaN(o)){var s=Number(o).toString(16);s.length<2&&(s="0"+s),n+=s;}return n.toUpperCase();},xnm.aio.shelly.Dimmer=function(e,t){xnm.aio.shelly.GenericLight.call(this,e,t),this.type=xnm.aio.shelly.Dimmer.TYPE;},xnm.aio.shelly.Dimmer.TYPE="dimmer",xnm.aio.shelly.Dimmer.prototype=Object.create(xnm.aio.shelly.GenericLight.prototype),xnm.aio.shelly.Dimmer.constructor=xnm.aio.shelly.Dimmer,xnm.aio.shelly.Dimmer.prototype.toGeneralDevice=function(){return{type:"dimmer",commands:{on:{},off:{},toggle:{},brightness:{value:{type:"INT",min:0,max:100}}},states:{brightness:{type:"INT",min:0,max:100},state:{values:["on","off"]},power:{type:"FLOAT"},powerTotal:{type:"FLOAT"},tempC:{type:"FLOAT"},tempF:{type:"FLOAT"}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},brightness:{value:"brightness",ext:"%d",extMeta:"1-100",unit:"%"}},states:{brightness:{value:"brightness",ext:"%d",extMeta:"1-100",unit:"%"},state:{value:"state"},power:{value:"ch1_power",ext:"%f",unit:"W"},powerTotal:{value:"ch1_powerTotal",ext:"%f",unit:"Wmin"},tempC:{value:"tempC",ext:"%f",unit:"°C"},tempF:{value:"tempF",ext:"%f",unit:"°F"}}}};},xnm.aio.shelly.Vintage=function(e,t){xnm.aio.shelly.GenericLight.call(this,e,t),this.type=xnm.aio.shelly.Vintage.TYPE;},xnm.aio.shelly.Vintage.TYPE="vintage",xnm.aio.shelly.Vintage.prototype=Object.create(xnm.aio.shelly.GenericLight.prototype),xnm.aio.shelly.Vintage.constructor=xnm.aio.shelly.Vintage,xnm.aio.shelly.Vintage.prototype.toGeneralDevice=function(){return{type:"light",commands:{on:{},off:{},toggle:{},brightness:{value:{type:"INT",min:0,max:100}},transition:{value:{type:"INT",min:0,max:5e3}}},states:{brightness:{type:"INT",min:0,max:100},transition:{type:"INT",min:0,max:5e3},state:{values:["on","off"]},power:{type:"FLOAT"},powerTotal:{type:"FLOAT"}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},brightness:{value:"brightness",ext:"%d",extMeta:"0-100",unit:"%"},transition:{value:"transition",ext:"%d",extMeta:"0-5000",unit:"ms"}},states:{brightness:{value:"brightness",ext:"%d",extMeta:"1-100",unit:"%"},transition:{value:"transition",ext:"%d",extMeta:"1-5000",unit:"ms"},state:{value:"state"},power:{value:"ch1_power",ext:"%f",unit:"W"},powerTotal:{value:"ch1_powerTotal",ext:"%f",unit:"Wmin"}}}};},xnm.aio.shelly.BulbDuo=function(e,t){xnm.aio.shelly.GenericLight.call(this,e,t),this.type=xnm.aio.shelly.BulbDuo.TYPE;},xnm.aio.shelly.BulbDuo.TYPE="bulbduo",xnm.aio.shelly.BulbDuo.prototype=Object.create(xnm.aio.shelly.GenericLight.prototype),xnm.aio.shelly.BulbDuo.constructor=xnm.aio.shelly.BulbDuo,xnm.aio.shelly.BulbDuo.prototype.toGeneralDevice=function(){return{type:"dimmer",commands:{on:{},off:{},toggle:{},brightness:{value:{type:"INT",min:0,max:100}},transition:{value:{type:"INT",min:0,max:5e3}},temp:{value:{type:"INT",min:2700,max:6500}},white:{value:{type:"INT",min:0,max:100}}},states:{brightness:{type:"INT",min:0,max:100},transition:{type:"INT",min:0,max:5e3},state:{values:["on","off"]},power:{type:"FLOAT"},powerTotal:{type:"FLOAT"},temp:{type:"INT",min:2700,max:6500},white:{type:"INT",min:0,max:100}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},brightness:{value:"gain",ext:"%d",extMeta:"0-100",unit:"%"},transition:{value:"transition",ext:"%d",extMeta:"0-5000",unit:"ms"},white:{value:"white",ext:"100",extMeta:"0-100"},temp:{value:"temp",ext:"%d",extMeta:"2700-6500"}},states:{white:{value:"white",ext:"%d",extMeta:"0-100"},brightness:{value:"brightness",ext:"%d",extMeta:"1-100",unit:"%"},transition:{value:"transition",ext:"%d",extMeta:"1-5000",unit:"ms"},state:{value:"state"},power:{value:"ch1_power",ext:"%f",unit:"W"},powerTotal:{value:"ch1_powerTotal",ext:"%f",unit:"Wmin"},temp:{value:"temp",ext:"%f",extMeta:"2700-6500",unit:"K"}}}};},xnm.aio.shelly.ColorBulb=function(e,t){xnm.aio.shelly.GenericLight.call(this,e,t),this.type=xnm.aio.shelly.ColorBulb.TYPE;},xnm.aio.shelly.ColorBulb.EFFECTS=["off","Meteor shower","Gradual change","Flash"],xnm.aio.shelly.ColorBulb.TYPE="colorbulb",xnm.aio.shelly.ColorBulb.prototype=Object.create(xnm.aio.shelly.GenericLight.prototype),xnm.aio.shelly.ColorBulb.constructor=xnm.aio.shelly.ColorBulb,xnm.aio.shelly.ColorBulb.prototype.getEffects=function(){return xnm.aio.shelly.ColorBulb.EFFECTS;},xnm.aio.shelly.ColorBulb.prototype.getEffectName=function(e){return this.getEffects()[e]||e;},xnm.aio.shelly.ColorBulb.prototype.getEffectIndex=function(e){e=String(e).toLowerCase();var t=this.getEffects();for(var a=0;a<t.length;a++){if(t[a].toLowerCase()===e)return a;}return 0;},xnm.aio.shelly.ColorBulb.prototype.toGeneralDevice=function(){return{type:"dimmer",commands:{on:{},off:{},toggle:{},mode:{},brightness:{value:{type:"INT",min:0,max:100}},gain:{value:{type:"INT",min:0,max:100}},color:{value:{type:"RGB"}},color_temperature:{value:{type:"INT",min:3e3,max:6500}},effect:{value:{type:"INT"}}},states:{brightness:{type:"INT",min:0,max:100},gain:{type:"INT",min:0,max:100},color:{type:"RGB"},mode:{},state:{},power:{type:"FLOAT"},power_total:{type:"FLOAT"},color_temperature:{type:"FLOAT"},effect:{}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},mode:{value:"mode",ext:"%e",extMeta:["color","white"]},brightness:{value:"brightness",ext:"%d",extMeta:"0-100",unit:"%"},gain:{value:"gain",ext:"%d",extMeta:"0-100",unit:"%"},color:{value:"color",ext:"%rgb"},color_temperature:{value:"temp",ext:"%d"},effect:{value:"effect",ext:"%d",options:xnm.aio.shelly.ColorBulb.EFFECTS.slice(0)}},states:{brightness:{value:"brightness"},gain:{value:"gain"},color:{value:"color"},mode:{value:"mode"},state:{value:"state"},power:{value:"ch1_power"},power_total:{value:"ch1_powerTotal"},color_temperature:{value:"temp"},effect:{value:"effect"}}}};},xnm.aio.shelly.GenericMeasure=function(e,t){xnm.aio.shelly.Device.call(this,e,t);},xnm.aio.shelly.GenericMeasure.prototype=Object.create(xnm.aio.shelly.Device.prototype),xnm.aio.shelly.GenericMeasure.constructor=xnm.aio.shelly.GenericMeasure,xnm.aio.shelly.GenericMeasure.prototype._executeCommand=function(e,t){var a={path:null};switch(e.value){case"ch1_reset":a.path="emeter/0?reset_totals=1";break;case"ch2_reset":a.path="emeter/1?reset_totals=1";break;case"ch3_reset":a.path="emeter/2?reset_totals=1";break;case"reset":a.path="reset_data";}xnm.aio.shelly._logger.log("trace","[GenericMeasure._executeCommand] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.GenericMeasure.prototype._getStateFromResult=function(e,t){if(!e||!t)return null;var a=-1;if(0===t.indexOf("ch1_")?a=0:0===t.indexOf("ch2_")?a=1:0===t.indexOf("ch3_")&&(a=2),Array.isArray(e.emeters)&&a>=0){var o=e.emeters[a];if(!o)return null;if(3===t.indexOf("_power"))return o.power;if(3===t.indexOf("_current"))return o.current;if(3===t.indexOf("_voltage"))return o.voltage;if(3===t.indexOf("_totalReturned"))return o.total_returned;if(3===t.indexOf("_total"))return o.total;}return xnm.aio.shelly.Device.prototype._getStateFromResult.call(this,e,t);},xnm.aio.shelly.Pro4=function(e,t){xnm.aio.shelly.GenericMeasure.call(this,e,t),this.type=xnm.aio.shelly.Pro4.TYPE;},xnm.aio.shelly.Pro4.TYPE="pro4",xnm.aio.shelly.Pro4.prototype=Object.create(xnm.aio.shelly.GenericMeasure.prototype),xnm.aio.shelly.Pro4.constructor=xnm.aio.shelly.Pro4,xnm.aio.shelly.Pro4.prototype.toGeneralDevice=function(){return{type:"meter",commands:{on:{},off:{},toggle:{}},states:{state:{},power:{type:"FLOAT"},total:{type:"FLOAT"}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"},ch2_on:{value:"ch2_on"},ch2_off:{value:"ch2_off"},ch2_toggle:{value:"ch2_toggle"},ch3_on:{value:"ch3_on"},ch3_off:{value:"ch3_off"},ch3_toggle:{value:"ch3_toggle"},ch4_on:{value:"ch4_on"},ch4_off:{value:"ch4_off"},ch4_toggle:{value:"ch4_toggle"}},states:{state:{type:"ch1_state"},ch2_state:{type:"ch2_state"},ch3_state:{type:"ch3_state"},ch4_state:{type:"ch4_state"},power:{type:"ch1_power"},ch2_power:{type:"ch2_power"},ch3_power:{type:"ch3_power"},ch4_power:{type:"ch4_power"},total:{type:"ch1_total"},ch2_total:{type:"ch2_total"},ch3_total:{type:"ch3_total"},ch4_total:{type:"ch4_total"}}}};},xnm.aio.shelly.EM3=function(e,t){xnm.aio.shelly.GenericMeasure.call(this,e,t),this.type=xnm.aio.shelly.EM3.TYPE;},xnm.aio.shelly.EM3.TYPE="em3",xnm.aio.shelly.EM3.prototype=Object.create(xnm.aio.shelly.GenericMeasure.prototype),xnm.aio.shelly.EM3.constructor=xnm.aio.shelly.EM3,xnm.aio.shelly.EM3.prototype.toGeneralDevice=function(){return{type:"meter",commands:{},states:{power:{type:"FLOAT"},ch2_power:{type:"FLOAT"},ch3_power:{type:"FLOAT"},current:{type:"FLOAT"},ch2_current:{type:"FLOAT"},ch3_current:{type:"FLOAT"},voltage:{type:"FLOAT"},ch2_voltage:{type:"FLOAT"},ch3_voltage:{type:"FLOAT"},total:{type:"FLOAT"},ch2_total:{type:"FLOAT"},ch3_total:{type:"FLOAT"},total_returned:{type:"FLOAT"},ch2_total_returned:{type:"FLOAT"},ch3_total_returned:{type:"FLOAT"}},details:{commands:{},states:{power:{value:"ch1_power",ext:"%f",unit:"W"},ch2_power:{value:"ch2_power",ext:"%f",unit:"W"},ch3_power:{value:"ch3_power",ext:"%f",unit:"W"},current:{value:"ch1_current",ext:"%f",unit:"A"},ch2_current:{value:"ch2_current",ext:"%f",unit:"A"},ch3_current:{value:"ch3_current",ext:"%f",unit:"A"},voltage:{value:"ch1_voltage",ext:"%f",unit:"V"},ch2_voltage:{value:"ch2_voltage",ext:"%f",unit:"V"},ch3_voltage:{value:"ch3_voltage",ext:"%f",unit:"V"},total:{value:"ch1_total",ext:"%f",unit:"Wh"},ch2_total:{value:"ch2_total",ext:"%f",unit:"Wh"},ch3_total:{value:"ch3_total",ext:"%f",unit:"Wh"},total_returned:{value:"ch1_totalReturned",ext:"%f",unit:"Wh"},ch2_total_returned:{value:"ch2_totalReturned",ext:"%f",unit:"Wh"},ch3_total_returned:{value:"ch3_totalReturned",ext:"%f",unit:"Wh"}}}};},xnm.aio.shelly.EM=function(e,t){xnm.aio.shelly.GenericMeasure.call(this,e,t),this.type=xnm.aio.shelly.EM.TYPE;},xnm.aio.shelly.EM.TYPE="em",xnm.aio.shelly.EM.prototype=Object.create(xnm.aio.shelly.GenericMeasure.prototype),xnm.aio.shelly.EM.constructor=xnm.aio.shelly.EM,xnm.aio.shelly.EM.prototype.toGeneralDevice=function(){return{type:"meter",commands:{},states:{power:{type:"FLOAT"},ch2_power:{type:"FLOAT"},current:{type:"FLOAT"},ch2_current:{type:"FLOAT"},voltage:{type:"FLOAT"},ch2_voltage:{type:"FLOAT"},total:{type:"FLOAT"},ch2_total:{type:"FLOAT"},total_returned:{type:"FLOAT"},ch2_total_returned:{type:"FLOAT"}},details:{commands:{},states:{power:{value:"ch1_power",ext:"%f",unit:"W"},ch2_power:{value:"ch2_power",ext:"%f",unit:"W"},current:{value:"ch1_current",ext:"%f",unit:"A"},ch2_current:{value:"ch2_current",ext:"%f",unit:"A"},voltage:{value:"ch1_voltage",ext:"%f",unit:"V"},ch2_voltage:{value:"ch2_voltage",ext:"%f",unit:"V"},total:{value:"ch1_total",ext:"%f",unit:"Wh"},ch2_total:{value:"ch2_total",ext:"%f",unit:"Wh"},total_returned:{value:"ch1_totalReturned",ext:"%f",unit:"Wh"},ch2_total_returned:{value:"ch2_totalReturned",ext:"%f",unit:"Wh"}}}};},xnm.aio.shelly.RGBW2=function(e,t){xnm.aio.shelly.GenericLight.call(this,e,t),this.type=xnm.aio.shelly.RGBW2.TYPE,this.mode=this.mode||"color";},xnm.aio.shelly.RGBW2.EFFECTS=["off","Meteor shower","Gradual change","Flash","Red/Green change"],xnm.aio.shelly.RGBW2.TYPE="rgbw2",xnm.aio.shelly.RGBW2.prototype=Object.create(xnm.aio.shelly.GenericLight.prototype),xnm.aio.shelly.RGBW2.constructor=xnm.aio.shelly.RGBW2,xnm.aio.shelly.RGBW2.prototype._executeCommand=function(e,t){switch(e.value){case"ch1_brightness":this.cmdSetWhiteBrightness(0,e.ext,t);break;case"ch2_brightness":this.cmdSetWhiteBrightness(1,e.ext,t);break;case"ch3_brightness":this.cmdSetWhiteBrightness(2,e.ext,t);break;case"ch4_brightness":this.cmdSetWhiteBrightness(3,e.ext,t);break;case"ch1_off":this.cmdWhiteOff(0,t);break;case"ch2_off":this.cmdWhiteOff(1,t);break;case"ch3_off":this.cmdWhiteOff(2,t);break;case"ch4_off":this.cmdWhiteOff(3,t);break;case"ch1_on":this.cmdWhiteOn(0,t);break;case"ch2_on":this.cmdWhiteOn(1,t);break;case"ch3_on":this.cmdWhiteOn(2,t);break;case"ch4_on":this.cmdWhiteOn(3,t);break;case"ch1_toggle":this.cmdWhiteToggle(0,t);break;case"ch2_toggle":this.cmdWhiteToggle(1,t);break;case"ch3_toggle":this.cmdWhiteToggle(2,t);break;case"ch4_toggle":this.cmdWhiteToggle(3,t);break;default:xnm.aio.shelly.GenericLight.prototype._executeCommand.call(this,e,t);}},xnm.aio.shelly.RGBW2.prototype._getStateFromResult=function(e,t){if(!e||!t)return null;if(Array.isArray(e.lights)&&e.lights.length>0){var a=e.lights[0];if("color"===a.mode)switch(t){case"color":return this._getColorHex(a.red,a.green,a.blue);case"color_white":return this._getColorHex(a.red,a.green,a.blue,a.white);case"red":return Math.round(a.red/2.55);case"green":return Math.round(a.green/2.55);case"blue":return Math.round(a.blue/2.55);case"white":return a.ison?Math.round(a.white/2.55):0;case"gain":return a.ison?a.gain:0;case"effect":return this.getEffectName(a.effect);case"mode":return a.mode;case"power":return a.power;case"state":return a.ison?"on":"off";}else if("white"===a.mode){switch(t){case"ch1_state":return e.lights[0].ison?"on":"off";case"ch1_brightness":return e.lights[0].brightness;case"ch1_power":return e.lights[0].power;case"mode":return e.lights[0].mode;}if(e.lights.length>1)switch(t){case"ch2_state":return e.lights[1].ison?"on":"off";case"ch2_brightness":return e.lights[1].brightness;case"ch2_power":return e.lights[1].power;}if(e.lights.length>2)switch(t){case"ch3_state":return e.lights[2].ison?"on":"off";case"ch3_brightness":return e.lights[2].brightness;case"ch3_power":return e.lights[2].power;}if(e.lights.length>3)switch(t){case"ch4_state":return e.lights[3].ison?"on":"off";case"ch4_brightness":return e.lights[3].brightness;case"ch4_power":return e.lights[3].power;}}}return xnm.aio.shelly.Device.prototype._getStateFromResult.call(this,e,t);},xnm.aio.shelly.RGBW2.prototype.cmdSetWhiteBrightness=function(e,t,a){if("number"!=typeof t||isNaN(t)||t<0||t>100){var o=new Error("Invalid value for brightness: "+t);return xnm.aio.shelly._logger.log("error","[RGBW2.cmdSetWhiteBrightness] "+o.message),void(a&&a(o,null));}var n={path:"white/"+e+"?turn=on&brightness="+t};xnm.aio.shelly._logger.log("trace","[RGBW2.cmdSetWhiteBrightness] Sending request."),xnm.aio.shelly.doRequest(this,"GET",n,function(e,t){a&&a(e,t);});},xnm.aio.shelly.RGBW2.prototype.cmdWhiteOff=function(e,t){var a={path:"white/"+e+"?turn=off"};xnm.aio.shelly._logger.log("trace","[RGBW2.cmdWhiteOff] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.RGBW2.prototype.cmdWhiteOn=function(e,t){var a={path:"white/"+e+"?turn=on"};xnm.aio.shelly._logger.log("trace","[RGBW2.cmdWhiteOn] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.RGBW2.prototype.cmdWhiteToggle=function(e,t){var a={path:"white/"+e+"?turn=toggle"};xnm.aio.shelly._logger.log("trace","[RGBW2.cmdWhiteToggle] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.RGBW2.prototype.getEffectIndex=function(e){e=String(e).toLowerCase();var t=this.getEffects();for(var a=0;a<t.length;a++){if(t[a].toLowerCase()===e)return a;}return 0;},xnm.aio.shelly.RGBW2.prototype.getEffectName=function(e){return this.getEffects()[e]||e;},xnm.aio.shelly.RGBW2.prototype.getEffects=function(){return xnm.aio.shelly.RGBW2.EFFECTS;},xnm.aio.shelly.RGBW2.prototype.toGeneralDevice=function(){return"color"===this.mode?{type:"dimmer",commands:{on:{},off:{},toggle:{},brightness:{value:{type:"INT",min:0,max:100}},color:{value:{type:"RGB"}},color_white:{value:{type:"RGBW"}},red:{value:{type:"INT",min:0,max:100}},green:{value:{type:"INT",min:0,max:100}},blue:{value:{type:"INT",min:0,max:100}},white:{value:{type:"INT",min:0,max:100}},gain:{value:{type:"INT",min:0,max:100}},effect:{values:xnm.aio.shelly.RGBW2.EFFECTS.slice(0)}},states:{brightness:{type:"INT",min:0,max:100},color:{type:"RGB"},color_white:{type:"RGBW"},red:{type:"INT",min:0,max:100},green:{type:"INT",min:0,max:100},blue:{type:"INT",min:0,max:100},white:{type:"INT",min:0,max:100},gain:{type:"INT",min:0,max:100},mode:{values:["color","white"]},state:{values:["on","off"]},power:{type:"FLOAT"},effect:{values:xnm.aio.shelly.RGBW2.EFFECTS.slice(0)}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},brightness:{value:"gain",ext:"%d",extMeta:"0-100",unit:"%"},color:{value:"color",ext:"%rgb"},color_white:{value:"color",ext:"%rgbw"},red:{value:"red",ext:"%d",extMeta:"0-100"},green:{value:"green",ext:"%d",extMeta:"0-100"},blue:{value:"blue",ext:"%d",extMeta:"0-100"},white:{value:"white",ext:"100",extMeta:"0-100"},gain:{value:"gain",ext:"%d",extMeta:"0-100"},effect:{value:"effect",ext:"%e",options:xnm.aio.shelly.RGBW2.EFFECTS.slice(0)}},states:{brightness:{value:"gain",ext:"%d",extMeta:"0-100",unit:"%"},color:{value:"color",ext:"%rgb"},color_white:{value:"color_white",ext:"%rgbw"},red:{value:"red",ext:"%d",extMeta:"0-100"},green:{value:"green",ext:"%d",extMeta:"0-100"},blue:{value:"blue",ext:"%d",extMeta:"0-100"},white:{value:"white",ext:"%d",extMeta:"0-100"},gain:{value:"gain",ext:"%d",extMeta:"0-100"},mode:{value:"mode"},state:{value:"state"},power:{value:"power",ext:"%f",unit:"W"},effect:{value:"effect"}}}}:"white"===this.mode?{type:"dimmer",commands:{on:{},off:{},brightness:{value:{type:"INT",min:0,max:100}},ch2_on:{},ch2_off:{},ch2_brightness:{value:{type:"INT",min:0,max:100}},ch3_on:{},ch3_off:{},ch3_brightness:{value:{type:"INT",min:0,max:100}},ch4_on:{},ch4_off:{},ch4_brightness:{value:{type:"INT",min:0,max:100}}},states:{state:{values:["on","off"]},ch2_state:{values:["on","off"]},ch3_state:{values:["on","off"]},ch4_state:{values:["on","off"]},brightness:{type:"INT",min:0,max:100},ch2_brightness:{type:"INT",min:0,max:100},ch3_brightness:{type:"INT",min:0,max:100},ch4_brightness:{type:"INT",min:0,max:100},power:{type:"FLOAT"},ch2_power:{type:"FLOAT"},ch3_power:{type:"FLOAT"},ch4_power:{type:"FLOAT"},mode:{values:["color","white"]}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},brightness:{value:"ch1_brightness",ext:"%d",extMeta:"0-100",unit:"%"},ch2_on:{value:"ch2_on"},ch2_off:{value:"ch2_off"},ch2_brightness:{value:"ch2_brightness",ext:"%d",extMeta:"0-100",unit:"%"},ch3_on:{value:"ch3_on"},ch3_off:{value:"ch3_off"},ch3_brightness:{value:"ch3_brightness",ext:"%d",extMeta:"0-100",unit:"%"},ch4_on:{value:"ch4_on"},ch4_off:{value:"ch4_off"},ch4_brightness:{value:"ch4_brightness",ext:"%d",extMeta:"0-100",unit:"%"}},states:{state:{value:"ch1_state"},brightness:{value:"ch1_brightness",ext:"%d",extMeta:"0-100",unit:"%"},power:{value:"ch1_power",ext:"%f",unit:"W"},ch2_state:{value:"ch2_state"},ch2_brightness:{value:"ch2_brightness",ext:"%d",extMeta:"0-100",unit:"%"},ch2_power:{value:"ch2_power",ext:"%f",unit:"W"},ch3_state:{value:"ch3_state"},ch3_brightness:{value:"ch3_brightness",ext:"%d",extMeta:"0-100",unit:"%"},ch3_power:{value:"ch3_power",ext:"%f",unit:"W"},ch4_state:{value:"ch4_state"},ch4_brightness:{value:"ch4_brightness",ext:"%d",extMeta:"0-100",unit:"%"},ch4_power:{value:"ch4_power",ext:"%f",unit:"W"},mode:{value:"mode"}}}}:null;},xnm.aio.shelly.Bulb=function(e,t){xnm.aio.shelly.RGBW2.call(this,e,t),this.type=xnm.aio.shelly.Bulb.TYPE,this.mode=this.mode||"color";},xnm.aio.shelly.Bulb.EFFECTS=["off","Meteor shower","Gradual change","Flash","Breath","On/Off gradual","Red/Green change"],xnm.aio.shelly.Bulb.TYPE="bulb",xnm.aio.shelly.Bulb.prototype=Object.create(xnm.aio.shelly.RGBW2.prototype),xnm.aio.shelly.Bulb.constructor=xnm.aio.shelly.Bulb,xnm.aio.shelly.Bulb.prototype.getEffects=function(){return xnm.aio.shelly.Bulb.EFFECTS;},xnm.aio.shelly.Bulb.prototype.toGeneralDevice=function(){return"color"===this.mode?{type:"dimmer",commands:{on:{},off:{},toggle:{},brightness:{value:{type:"INT",min:0,max:100}},color:{value:{type:"RGB"}},color_white:{value:{type:"RGBW"}},red:{value:{type:"INT",min:0,max:100}},green:{value:{type:"INT",min:0,max:100}},blue:{value:{type:"INT",min:0,max:100}},white:{value:{type:"INT",min:0,max:100}},gain:{value:{type:"INT",min:0,max:100}},effect:{values:xnm.aio.shelly.Bulb.EFFECTS.slice(0)}},states:{brightness:{type:"INT",min:0,max:100},color:{type:"RGB"},color_white:{type:"RGBW"},red:{type:"INT",min:0,max:100},green:{type:"INT",min:0,max:100},blue:{type:"INT",min:0,max:100},white:{type:"INT",min:0,max:100},gain:{type:"INT",min:0,max:100},mode:{values:["color","white"]},state:{values:["on","off"]},power:{type:"FLOAT"},effect:{values:xnm.aio.shelly.Bulb.EFFECTS.slice(0)}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},brightness:{value:"gain",ext:"%d",extMeta:"0-100",unit:"%"},color:{value:"color",ext:"%rgb"},color_white:{value:"color",ext:"%rgbw"},red:{value:"red",ext:"%d",extMeta:"0-100"},green:{value:"green",ext:"%d",extMeta:"0-100"},blue:{value:"blue",ext:"%d",extMeta:"0-100"},white:{value:"white",ext:"100",extMeta:"0-100"},gain:{value:"gain",ext:"%d",extMeta:"0-100"},effect:{value:"effect",ext:"%e",options:xnm.aio.shelly.Bulb.EFFECTS.slice(0)}},states:{brightness:{value:"gain",ext:"%d",extMeta:"0-100",unit:"%"},color:{value:"color",ext:"%rgb"},color_white:{value:"color_white",ext:"%rgbw"},red:{value:"red",ext:"%d",extMeta:"0-100"},green:{value:"green",ext:"%d",extMeta:"0-100"},blue:{value:"blue",ext:"%d",extMeta:"0-100"},white:{value:"white",ext:"%d",extMeta:"0-100"},gain:{value:"gain",ext:"%d",extMeta:"0-100"},mode:{value:"mode"},state:{value:"state"},power:{value:"power",ext:"%f",unit:"W"},effect:{value:"effect"}}}}:"white"===this.mode?{type:"dimmer",commands:{on:{},off:{},brightness:{value:{type:"INT",min:0,max:100}}},states:{state:{values:["on","off"]},brightness:{type:"INT",min:0,max:100},power:{type:"FLOAT"},mode:{values:["color","white"]}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},brightness:{value:"ch1_brightness",ext:"%d",extMeta:"0-100",unit:"%"}},states:{state:{value:"ch1_state"},brightness:{value:"ch1_brightness",ext:"%d",extMeta:"0-100",unit:"%"},power:{value:"ch1_power",ext:"%f",unit:"W"},mode:{value:"mode"}}}}:null;},xnm.aio.shelly.Flood=function(e,t){xnm.aio.shelly.Device.call(this,e,t),this.type=xnm.aio.shelly.Flood.TYPE;},xnm.aio.shelly.Flood.TYPE="flood",xnm.aio.shelly.Flood.prototype=Object.create(xnm.aio.shelly.Device.prototype),xnm.aio.shelly.Flood.constructor=xnm.aio.shelly.Flood,xnm.aio.shelly.Flood.prototype._getStateFromResult=function(e,t){return e&&t?"flood"===t?void 0===e.flood?null:e.flood?"true":"false":"rainMode"===t?void 0===e.rain_sensor?null:e.rain_sensor?"true":"false":xnm.aio.shelly.Device.prototype._getStateFromResult.call(this,e,t):null;},xnm.aio.shelly.Flood.prototype.toGeneralDevice=function(){return{type:"sensor",states:{flood:{values:["true","false"]},rainMode:{value:["true","false"]},tempC:{type:"FLOAT"},tempF:{type:"FLOAT"},batCapacity:{type:"INT",min:0,max:100,unit:"%"}},details:{states:{flood:{value:"flood"},rainMode:{value:"rainMode"},tempC:{value:"tempC",ext:"%f",unit:"°C"},tempF:{value:"tempF",ext:"%f",unit:"°F"},batCapacity:{value:"batCapacity",ext:"%d",extMeta:"0-100",unit:"%"}}}};},xnm.aio.shelly.HT=function(e,t){xnm.aio.shelly.Device.call(this,e,t),this.type=xnm.aio.shelly.HT.TYPE;},xnm.aio.shelly.HT.TYPE="ht",xnm.aio.shelly.HT.prototype=Object.create(xnm.aio.shelly.Device.prototype),xnm.aio.shelly.HT.constructor=xnm.aio.shelly.HT,xnm.aio.shelly.HT.prototype._getStateFromResult=function(e,t){return e&&t?"humRel"===t?e.hum&&void 0!==e.hum?e.hum.value:null:xnm.aio.shelly.Device.prototype._getStateFromResult.call(this,e,t):null;},xnm.aio.shelly.HT.prototype.toGeneralDevice=function(){return{type:"sensor",states:{humidity:{type:"INT"},tempC:{type:"FLOAT"},tempF:{type:"FLOAT"},batCapacity:{type:"INT",min:0,max:100,unit:"%"}},details:{states:{humidity:{value:"humRel",ext:"%d",unit:"%"},tempC:{value:"tempC",ext:"%f",unit:"°C"},tempF:{value:"tempF",ext:"%f",unit:"°F"},batCapacity:{value:"batCapacity",ext:"%d",extMeta:"0-100",unit:"%"}}}};},xnm.aio.shelly.Handler=function(){var e=require("x.logger.js");e&&(xnm.aio.shelly._logger=e.getLogger("xnm.aio.shelly"));},xnm.aio.shelly.Handler.prototype={devicemanager:xnm.aio.shelly.DM,discoverWithTimeout:function discoverWithTimeout(e,t,a){var o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var n=require("x.mdns.js");n.clearRecordBuffer();var l=["_http._tcp.local"],i=-1===l.indexOf(a)?0:l.indexOf(a);("number"!=typeof e||isNaN(e))&&(e=1e4);var r=this;n.discoverServiceWithTimeout(l[i],e/l.length,function(a,n){if(a)t&&t(a,null);else{for(var s=0;s<n.length;s++){var u=n[s];if(0===String(u.target).toLowerCase().indexOf("shelly")&&u.ip&&u.ip.length>0&&u.info){u.info.id||-1===u.target.toLowerCase().indexOf(".local")||(u.info.id=u.target.substr(0,u.target.toLowerCase().indexOf(".local")));var m=String(u.info.id).substring(6),h=m.split("-");h.splice(h.length-1,1),"4pro"==(m=h.join("-"))&&(m="pro4");var c={firmware:u.info.fw_id,id:u.info.id,ip:u.ip[0],port:80,sys:xnm.aio.shelly.DM.SYS,type:"string"==typeof m?m.toLowerCase():m};o.push(c);}}i+1===l.length?t&&t(a,o):r.discoverWithTimeout(e,t,l[i+1],o);}});},doCommand:function doCommand(e,t,a){var o=this.resolveDevice(e);o?o.executeCommandCreator(e,t,function(e){a&&a(e);}):a&&a(new Error("device format invalid"));},doStatus:function doStatus(e,t,a,o){var n=this.resolveDevice(t);if(n){var l=[{id:e,status:a}];n.getStatesCreator(null,l,function(e,t){e?o&&o(e):o&&o(null,t[0]);});}else o&&o(new Error("device format invalid"));},getDeviceCommands:function getDeviceCommands(e,t){var a=xnm.aio.shelly.DM.applyUIFilter(e,{catagory:"command",elems:"*"}),o=a?a.command:[];t&&t(null,o);},getDeviceStatus:function getDeviceStatus(e,t){var a=xnm.aio.shelly.DM.applyUIFilter(e,{catagory:"status",elems:"*"}),o=a?a.status:[];t&&t(null,o);},registModule:function registModule(e){e.register(xnm.aio.shelly.DM.SYS,"shelly");},resolveDevice:function resolveDevice(e){return e?xnm.aio.shelly.parseJSON(e):null;}},"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports=module.exports=new xnm.aio.shelly.Handler()),xnm.aio.shelly.GenericSensor=function(e,t){xnm.aio.shelly.Device.call(this,e,t);},xnm.aio.shelly.GenericSensor.prototype=Object.create(xnm.aio.shelly.Device.prototype),xnm.aio.shelly.GenericSensor.constructor=xnm.aio.shelly.GenericSensor,xnm.aio.shelly.GenericSensor.prototype._getStateFromResult=function(e,t){var _e$sensor,_e$sensor2,_e$sensor3,_e$lux,_e$lux2,_e$hum;if(!e||!t)return null;switch(t){case"state":return(_e$sensor=e.sensor)===null||_e$sensor===void 0?void 0:_e$sensor.state;case"motion":return"true"===String((_e$sensor2=e.sensor)===null||_e$sensor2===void 0?void 0:_e$sensor2.motion)?"true":"false";case"vibration":return"true"===String((_e$sensor3=e.sensor)===null||_e$sensor3===void 0?void 0:_e$sensor3.vibration)?"true":"false";case"lux_illumination":return(_e$lux=e.lux)===null||_e$lux===void 0?void 0:_e$lux.illumination;case"lux_value":return(_e$lux2=e.lux)===null||_e$lux2===void 0?void 0:_e$lux2.value;case"humidity":return parseFloat((_e$hum=e.hum)===null||_e$hum===void 0?void 0:_e$hum.value).toFixed(2);}return xnm.aio.shelly.Device.prototype._getStateFromResult.call(this,e,t);},xnm.aio.shelly.GenericSensor.prototype._executeCommand=function(e,t){var a=new Error("Unknown command: "+e.value);xnm.aio.shelly._logger.log("warn","[GenericSensor._executeCommand] "+a.message),t(a,null);},xnm.aio.shelly.DoorWindow2=function(e,t){xnm.aio.shelly.GenericSensor.call(this,e,t),this.type=xnm.aio.shelly.DoorWindow2.TYPE;},xnm.aio.shelly.DoorWindow2.TYPE="dw2",xnm.aio.shelly.DoorWindow2.TYPE_1="dw",xnm.aio.shelly.DoorWindow2.prototype=Object.create(xnm.aio.shelly.GenericSensor.prototype),xnm.aio.shelly.DoorWindow2.constructor=xnm.aio.shelly.DoorWindow2,xnm.aio.shelly.DoorWindow2.prototype.toGeneralDevice=function(){return{type:"dw2",commands:{},states:{illumination:{},brightness:{type:"INT",min:0,max:100},state:{}},details:{commands:{},states:{illumination:{value:"lux_illumination"},brightness:{value:"lux_value"},state:{value:"state"}}}};},xnm.aio.shelly.MotionSensor=function(e,t){xnm.aio.shelly.GenericSensor.call(this,e,t),this.type=xnm.aio.shelly.MotionSensor.TYPE;},xnm.aio.shelly.MotionSensor.TYPE="motionsensor",xnm.aio.shelly.MotionSensor.prototype=Object.create(xnm.aio.shelly.GenericSensor.prototype),xnm.aio.shelly.MotionSensor.constructor=xnm.aio.shelly.MotionSensor,xnm.aio.shelly.MotionSensor.OPERATING_MODE=["Any","Dark","Twilight","Bright"],xnm.aio.shelly.MotionSensor.prototype.getOperatingModes=function(){return xnm.aio.shelly.MotionSensor.OPERATING_MODE;},xnm.aio.shelly.MotionSensor.prototype.getOperatingModeName=function(e){return this.getOperatingModes()[e]||e;},xnm.aio.shelly.MotionSensor.prototype.getOperatingModeIndex=function(e){e=String(e).toLowerCase();var t=this.getOperatingModes();for(var a=0;a<t.length;a++){if(t[a].toLowerCase()===e)return a;}return 0;},xnm.aio.shelly.MotionSensor.prototype.toGeneralDevice=function(){return{type:"motion",commands:{led_status_disable:{},sensitivity:{},blind_time_minutes:{},pulse_count:{},operating_mode:{},enable:{}},states:{lux_illumination:{values:["dark","twilight","bright"]},lux_value:{type:"INT"},motion:{values:["true","false"]},vibration:{values:["true","false"]},charger:{values:["true","false"]},batCapacity:{type:"INT"},batVoltage:{type:"FLOAT"},motion_sensitivity:{type:"INT"},motion_blind_time_minutes:{type:"INT"},motion_pulse_count:{type:"INT"},motion_operating_mode:{values:["Any","Dark","Twilight","Bright"]},motion_enable:{values:["on","off"]}},details:{commands:{led_status_disable:{value:"led_status_disable"},sensitivity:{value:"motion_sensitivity"},blind_time_minutes:{value:"motion_blind_time_minutes"},pulse_count:{value:"motion_pulse_count"},operating_mode:{value:"motion_operating_mode"},enable:{value:"motion_enable"}},states:{lux_illumination:{value:"lux_illumination"},lux_value:{value:"lux_value"},motion:{value:"motion"},vibration:{value:"vibration"},charger:{value:"charger"},batCapacity:{value:"batCapacity"},batVoltage:{value:"batVoltage"},motion_sensitivity:{value:"motion_sensitivity"},motion_blind_time_minutes:{value:"motion_blind_time_minutes"},motion_pulse_count:{value:"motion_pulse_count"},motion_operating_mode:{value:"motion_operating_mode"},motion_enable:{value:"motion_enable"}}}};},xnm.aio.shelly.MotionSensor.prototype._getStateFromResult=function(e,t){var _e$motion,_e$motion2,_e$motion3,_e$motion4,_e$motion5;if(!e||!t)return null;switch(t){case"led_status_disable":return"true"===String(e.led_status_disable)?"on":"off";case"motion_sensitivity":return(_e$motion=e.motion)===null||_e$motion===void 0?void 0:_e$motion.sensitivity;case"motion_blind_time_minutes":return(_e$motion2=e.motion)===null||_e$motion2===void 0?void 0:_e$motion2.blind_time_minutes;case"motion_pulse_count":return(_e$motion3=e.motion)===null||_e$motion3===void 0?void 0:_e$motion3.pulse_count;case"motion_operating_mode":return this.getOperatingModeName((_e$motion4=e.motion)===null||_e$motion4===void 0?void 0:_e$motion4.operating_mode);case"motion_enable":return"true"===String((_e$motion5=e.motion)===null||_e$motion5===void 0?void 0:_e$motion5.enabled)?"on":"off";}return xnm.aio.shelly.GenericSensor.prototype._getStateFromResult.call(this,e,t);},xnm.aio.shelly.MotionSensor.prototype._executeCommand=function(e,t){switch(e.value){case"led_status_disable":this.cmdLedStatusDisable(e.ext);break;case"motion_sensitivity":this.cmdMotionSensitivity(e.ext);break;case"motion_blind_time_minutes":this.cmdMotionBlindTimeMinutes(e.ext);break;case"motion_operating_mode":this.cmdOperatingMode(e.ext);break;case"motion_pulse_count":this.cmdMotionPulseCount(e.ext);break;case"motion_enable":this.cmdMotionEnable(e.ext);break;default:xnm.aio.shelly.GenericSensor.prototype._executeCommand.call(this,e,t);}},xnm.aio.shelly.MotionSensor.prototype.cmdLedStatusDisable=function(e,t){"on"===e?e=!0:"off"===e&&(e=!1);var a={path:"settings?led_status_disable="+e};xnm.aio.shelly._logger.log("trace","[MotionSensor.cmdLedStatusDisable] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.MotionSensor.prototype.cmdMotionSensitivity=function(e,t){if("number"!=typeof e||isNaN(e)||e<1||e>256){var _a4=new Error("Invalid value for sensitivity : "+e);return xnm.aio.shelly._logger.log("error","[MotionSensor.cmdMotionSensitivity] "+_a4.message),void(t&&t(_a4,null));}var a={path:"settings?motion_sensitivity="+e};xnm.aio.shelly._logger.log("trace","[MotionSensor.cmdMotionSensitivity] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.MotionSensor.prototype.cmdMotionBlindTimeMinutes=function(e,t){if("number"!=typeof e||isNaN(e)||e<1||e>1440){var _a5=new Error("Invalid value for motion blind time  : "+e);return xnm.aio.shelly._logger.log("error","[MotionSensor.cmdMotionBlindTimeMinutes] "+_a5.message),void(t&&t(_a5,null));}var a={path:"settings?motion_blind_time_minutes="+e};xnm.aio.shelly._logger.log("trace","[MotionSensor.cmdMotionBlindTimeMinutes] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.MotionSensor.prototype.cmdOperatingMode=function(e,t){if("string"==typeof e&&"function"==typeof this.getOperatingModeIndex&&(e=this.getOperatingModeIndex(e)),"number"!=typeof e||e<0){var a=new Error("Invalid value for effect: "+e);return xnm.aio.shelly._logger.log("error","[MotionSensor.cmdOperatingMode] "+a.message),void(t&&t(a,null));}var o={path:"settings?motion_operating_mode="+e};xnm.aio.shelly._logger.log("trace","[MotionSensor.cmdOperatingMode] Sending request."),xnm.aio.shelly.doRequest(this,"GET",o,function(e,a){t&&t(e,a);});},xnm.aio.shelly.MotionSensor.prototype.cmdMotionPulseCount=function(e,t){if("number"!=typeof e||isNaN(e)||e<1||e>4){var _a6=new Error("Invalid value for motion pulse count  : "+e);return xnm.aio.shelly._logger.log("error","[MotionSensor.cmdMotionPulseCount] "+_a6.message),void(t&&t(_a6,null));}var a={path:"settings?motion_pulse_count="+e};xnm.aio.shelly._logger.log("trace","[MotionSensor.cmdMotionPulseCount] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.MotionSensor.prototype.cmdMotionEnable=function(e,t){"on"===e?e=!0:"off"===e&&(e=!1);var a={path:"settings?motion_enable="+e};xnm.aio.shelly._logger.log("trace","[MotionSensor.cmdMotionEnable] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.Sense=function(e,t){xnm.aio.shelly.GenericSensor.call(this,e,t),this.type=xnm.aio.shelly.Sense.TYPE;},xnm.aio.shelly.Sense.TYPE="sense",xnm.aio.shelly.Sense.prototype=Object.create(xnm.aio.shelly.GenericSensor.prototype),xnm.aio.shelly.Sense.constructor=xnm.aio.shelly.Sense,xnm.aio.shelly.Sense.prototype.toGeneralDevice=function(){return{type:"sensor",commands:{motionLed:{},motionDurationTime:{}},states:{motion:{values:["true","false"]},charger:{values:["true","false"]},temperature:{type:"INT"},temperatureUnit:{values:["C"]},humidity:{type:"INT"},luxValue:{type:"INT"},batteryLevel:{type:"INT"}},details:{commands:{motionLed:{value:"motion_led"},motionDurationTime:{value:"motion_duration_time"}},states:{motion:{value:"motion"},charger:{value:"charger"},temperature:{value:"temp_value"},temperatureUnit:{value:"temp_units"},humidity:{value:"humidity"},luxValue:{value:"lux_value"},batteryLevel:{value:"bat_level"}}}};},xnm.aio.shelly.Sense.prototype._getStateFromResult=function(e,t){return e&&t?"motion"===t?e.motion:xnm.aio.shelly.GenericSensor.prototype._getStateFromResult.call(this,e,t):null;},xnm.aio.shelly.Sense.prototype._executeCommand=function(e,t){switch(e.value){case"motion_led":this.cmdMotionLed(e.ext);break;case"motion_duration_time":this.cmdMotionDurationTime(e.ext);break;default:xnm.aio.shelly.GenericSensor.prototype._executeCommand.call(this,e,t);}},xnm.aio.shelly.Sense.prototype.cmdMotionLed=function(e,t){var a={path:"settings?pir_motion_led="+e};xnm.aio.shelly._logger.log("trace","[Sense.cmdMotionLed] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.Sense.prototype.cmdMotionDurationTime=function(e,t){if("number"!=typeof e||isNaN(e)||e<0){var _a7=new Error("Invalid value for motion duration time : "+e);return xnm.aio.shelly._logger.log("error","[Sense.cmdMotionDurationTime] "+_a7.message),void(t&&t(_a7,null));}var a={path:"settings?pir_motion_duration_time="+e};xnm.aio.shelly._logger.log("trace","[Sense.cmdMotionDurationTime] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.Gas=function(e,t){xnm.aio.shelly.GenericSensor.call(this,e,t),this.type=xnm.aio.shelly.Gas.TYPE;},xnm.aio.shelly.Gas.TYPE="gas",xnm.aio.shelly.Gas.prototype=Object.create(xnm.aio.shelly.GenericSensor.prototype),xnm.aio.shelly.Gas.constructor=xnm.aio.shelly.Gas,xnm.aio.shelly.Gas.prototype.toGeneralDevice=function(){return{type:"sensor",commands:{setVolume:{},muteAlarm:{}},states:{setVolume:{values:["true","false"]},gasSensorState:{values:["unknown","warmup","normal","fault"]},gasConcentration:{type:"INT"}},details:{commands:{setVolume:{value:"set_volume"},muteAlarm:{value:"mute_alarm"}},states:{setVolume:{value:"set_volume"},gasSensorState:{value:"gas_sensor_state"},gasConcentration:{value:"gas_concentration"}}}};},xnm.aio.shelly.Gas.prototype._getStateFromResult=function(e,t){var _e$gas_sensor,_e$concentration;if(!e||!t)return null;switch(t){case"set_volume":return e.set_volume;case"gas_sensor_state":return(_e$gas_sensor=e.gas_sensor)===null||_e$gas_sensor===void 0?void 0:_e$gas_sensor.sensor_state;case"gas_concentration":return(_e$concentration=e.concentration)===null||_e$concentration===void 0?void 0:_e$concentration.ppm;}return xnm.aio.shelly.GenericSensor.prototype._getStateFromResult.call(this,e,t);},xnm.aio.shelly.Gas.prototype._executeCommand=function(e,t){switch(e.value){case"set_volume":this.cmdSetVolume(e.ext);break;case"mute_alarm":this.cmdMuteAlarm(e.ext);break;default:xnm.aio.shelly.GenericSensor.prototype._executeCommand.call(this,e,t);}},xnm.aio.shelly.Gas.prototype.cmdSetVolume=function(e,t){var a={path:"settings?set_volume="+e};xnm.aio.shelly._logger.log("trace","[Gas.setVolume] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.Gas.prototype.cmdMuteAlarm=function(e,t){if(["mute","unmute"].indexOf(e)<0){var a=new Error("Invalid value: "+e);return xnm.aio.shelly._logger.log("error","[Gas.cmdMuteAlarm] "+a.message),void(t&&t(a,null));}var o={path:e};xnm.aio.shelly._logger.log("trace","[Gas.cmdMuteAlarm] Sending request."),xnm.aio.shelly.doRequest(this,"GET",o,function(e,a){t&&t(e,a);});},xnm.aio.shelly.Smoke=function(e,t){xnm.aio.shelly.GenericSensor.call(this,e,t),this.type=xnm.aio.shelly.Smoke.TYPE;},xnm.aio.shelly.Smoke.TYPE="smoke",xnm.aio.shelly.Smoke.prototype=Object.create(xnm.aio.shelly.GenericSensor.prototype),xnm.aio.shelly.Smoke.constructor=xnm.aio.shelly.Smoke,xnm.aio.shelly.Smoke.prototype.toGeneralDevice=function(){return{type:"smoke",commands:{},states:{smockState:{values:["true","false"]},batteryCapacity:{type:"INT"},batteryVoltage:{type:"FLOAT"},tempC:{type:"FLOAT"},tempF:{type:"FLOAT"}},details:{commands:{},states:{smockState:{value:"smoke"},batteryCapacity:{value:"batCapacity"},batteryVoltage:{value:"batVoltage"},tempC:{value:"tempC"},tempF:{value:"tempF"}}}};},xnm.aio.shelly.Smoke.prototype._getStateFromResult=function(e,t){return e&&t?"smoke"===t?e.smoke:xnm.aio.shelly.GenericSensor.prototype._getStateFromResult.call(this,e,t):null;},xnm.aio.shelly.GenericThermostat=function(e,t){xnm.aio.shelly.Device.call(this,e,t);},xnm.aio.shelly.GenericThermostat.prototype=Object.create(xnm.aio.shelly.Device.prototype),xnm.aio.shelly.GenericThermostat.constructor=xnm.aio.shelly.GenericThermostat,xnm.aio.shelly.GenericThermostat.prototype._executeCommand=function(e,t){switch(e.value){case"display_brightness":this.cmdDisplayBrightness(e.ext,t);break;case"display_flipped":this.cmdDisplayFlipped(e.ext,t);break;case"target_temp":this.cmdTargetTemp(e.ext,t);break;case"target_temp_enabled":this.cmdTargetTempEnabled(e.ext,t);break;default:var a=new Error("Unknown command: "+e.value);xnm.aio.shelly._logger.log("warn","[GenericThermostat._executeCommand] "+a.message),t(a,null);}},xnm.aio.shelly.GenericThermostat.prototype._getStateFromResult=function(e,t){var _a$target_t,_a$target_t2,_a$target_t3,_a$tmp,_a$tmp2;if(!e||!t)return null;if(Array.isArray(e.thermostats)&&e.thermostats.length>0){var a=e.thermostats[0];switch(t){case"target_temp_value":return(_a$target_t=a.target_t)===null||_a$target_t===void 0?void 0:_a$target_t.value;case"target_temp_enabled":return"true"===String((_a$target_t2=a.target_t)===null||_a$target_t2===void 0?void 0:_a$target_t2.enabled)?"enable":"disable";case"target_temp_units":return(_a$target_t3=a.target_t)===null||_a$target_t3===void 0?void 0:_a$target_t3.units;case"temp_value":return(_a$tmp=a.tmp)===null||_a$tmp===void 0?void 0:_a$tmp.value;case"temp_units":return(_a$tmp2=a.tmp)===null||_a$tmp2===void 0?void 0:_a$tmp2.units;}}if(e.display){var o=e.display;switch(t){case"display_brightness":return o.brightness;case"display_flipped":return"true"===String(o.flipped)?"enable":"disable";}}return xnm.aio.shelly.Device.prototype._getStateFromResult.call(this,e,t);},xnm.aio.shelly.GenericThermostat.prototype.cmdDisplayBrightness=function(e,t){if("number"!=typeof e||isNaN(e)||e<0||e>7){var a=new Error("Invalid value for brightness: "+e);return xnm.aio.shelly._logger.log("error","[GenericThermostat.cmdDisplayBrightness] "+a.message),void(t&&t(a,null));}var o={path:"settings?display_brightness="+e};xnm.aio.shelly._logger.log("trace","[GenericThermostat.cmdDisplayBrightness] Sending request."),xnm.aio.shelly.doRequest(this,"GET",o,function(e,a){t&&t(e,a);});},xnm.aio.shelly.GenericThermostat.prototype.cmdDisplayFlipped=function(e,t){if("enable"===e)e=!0;else if("disable"===e)e=!1;else{var a=new Error("Invalid value for display flipped: "+e);xnm.aio.shelly._logger.log("error","[GenericThermostat.cmdDisplayFlipped] "+a.message),t&&t(a,null);}var o={path:"settings?display_flipped="+e};xnm.aio.shelly._logger.log("trace","[GenericThermostat.cmdDisplayFlipped] Sending request."),xnm.aio.shelly.doRequest(this,"GET",o,function(e,a){t&&t(e,a);});},xnm.aio.shelly.GenericThermostat.prototype.cmdTargetTemp=function(e,t){if("number"!=typeof e||isNaN(e)||e<4||e>31){var _a8=new Error("Invalid value for target temperature: "+e);return xnm.aio.shelly._logger.log("error","[GenericThermostat.cmdTargetTemp] "+_a8.message),void(t&&t(_a8,null));}var a={path:"settings/thermostats/0?target_t="+e};xnm.aio.shelly._logger.log("trace","[GenericThermostat.cmdTargetTemp] Sending request."),xnm.aio.shelly.doRequest(this,"GET",a,function(e,a){t&&t(e,a);});},xnm.aio.shelly.GenericThermostat.prototype.cmdTargetTempEnabled=function(e,t){if("enable"===e)e=!0;else if("disable"===e)e=!1;else{var a=new Error("Invalid value for target temperature enabled: "+e);xnm.aio.shelly._logger.log("error","[GenericThermostat.cmdTargetTempEnabled] "+a.message),t&&t(a,null);}var o={path:"settings/thermostats/0?target_t_enabled="+e};xnm.aio.shelly._logger.log("trace","[GenericThermostat.cmdTargetTempEnabled] Sending request."),xnm.aio.shelly.doRequest(this,"GET",o,function(e,a){t&&t(e,a);});},xnm.aio.shelly.TRV=function(e,t){xnm.aio.shelly.GenericThermostat.call(this,e,t),this.type=xnm.aio.shelly.TRV.TYPE;},xnm.aio.shelly.TRV.TYPE="trv",xnm.aio.shelly.TRV.prototype=Object.create(xnm.aio.shelly.GenericThermostat.prototype),xnm.aio.shelly.TRV.constructor=xnm.aio.shelly.TRV,xnm.aio.shelly.TRV.prototype.toGeneralDevice=function(){return{type:"switch",commands:{display_brightness:{},display_flipped:{},target_temp:{},target_temp_enabled:{}},states:{display_brightness:{type:"INT"},display_flipped:{values:["enable","disable"]},current_temp_value:{type:"INT"},current_temp_units:{values:["C"]},target_temp_value:{type:"INT"},target_temp_enabled:{values:["true","false"]},target_temp_units:{values:["C"]},charger:{values:["true","false"]},batCapacity:{type:"INT"},batVoltage:{type:"FLOAT"}},details:{commands:{display_brightness:{value:"display_brightness"},display_flipped:{value:"display_flipped"},target_temp:{value:"target_temp"},target_temp_enabled:{value:"target_temp_enabled"}},states:{display_brightness:{value:"display_brightness"},display_flipped:{value:"display_flipped"},current_temp_value:{value:"temp_value"},current_temp_units:{value:"temp_units"},target_temp_value:{value:"target_temp_value"},target_temp_enabled:{value:"target_temp_enabled"},target_temp_units:{value:"target_temp_units"},charger:{value:"charger"},batCapacity:{value:"batCapacity"},batVoltage:{value:"batVoltage"}}}};},xnm.aio.shelly.UNI=function(e,t){xnm.aio.shelly.GenericSwitch.call(this,e,t),this.type=xnm.aio.shelly.UNI.TYPE;},xnm.aio.shelly.UNI.TYPE="uni",xnm.aio.shelly.UNI.prototype=Object.create(xnm.aio.shelly.GenericSwitch.prototype),xnm.aio.shelly.UNI.constructor=xnm.aio.shelly.UNI,xnm.aio.shelly.UNI.prototype.toGeneralDevice=function(){return{type:"switch",commands:{ch1_on:{},ch1_off:{},ch1_toggle:{},ch2_on:{},ch2_off:{},ch2_toggle:{}},states:{ch1_state:{values:["on","off"]},ch2_state:{values:["on","off"]}},details:{commands:{ch1_on:{value:"ch1_on"},ch1_off:{value:"ch1_off"},ch1_toggle:{value:"ch1_toggle"},ch2_on:{value:"ch2_on"},ch2_off:{value:"ch2_off"},ch2_toggle:{value:"ch2_toggle"}},states:{ch1_state:{value:"ch1_state"},ch2_state:{value:"ch2_state"}}}};},xnm.aio.shelly.DeviceGen2=function(e,t){xnm.aio.shelly.Device.call(this,e,t),this.channels=1;},xnm.aio.shelly.DeviceGen2.prototype=Object.assign({},xnm.aio.shelly.Device.prototype,{getStatesCreator:function getStatesCreator(e,t,a){var _this=this;this.getState(function(e,o){if(o){for(var n=[],l=0;l<t.length;l++){var i=t[l];if(i&&i.id&&i.status){var r=_this._getStateFromResult(o,i.status.value);null!==r&&n.push({id:i.id,status:r});}}a&&a(null,n);}else a&&a(new Error("Failed to get states."));});},getState:function getState(e,t,a){var _this2=this;t=t||0;var o=a||[],n={path:"rpc/"+this.category+".GetStatus?id="+t};xnm.aio.shelly._logger.log("trace","[DeviceGen2.getState] Sending request."),xnm.aio.shelly.doRequest(this,"GET",n,function(a,n){a?e&&e(a,null):(o.push(n.response),t<_this2.channels-1?_this2.getState(e,t+1,o):e&&e(null,o));});},_getStateFromResult:function _getStateFromResult(e,t){if(!e||!e.length||!t)return null;var a=Number(t[2]);(isNaN(a)||a<1)&&(a=1);var o=e[a-1];switch(t){case"cover_state":return o.state;case"current":return o.current;case"currentPosition":var _e3=o.current_pos;return null===_e3?"?":_e3;case"power":return o.apower;case"targetPosition":var _t=o.target_pos;return null===_t?"?":_t;case"voltage":return o.voltage;}if(3===t.indexOf("_state"))return o.output?"on":"off";if(3===t.indexOf("_temp")){return"C"===(t[8]||"C")?o.temperature.tC:o.temperature.tF;}return 3===t.indexOf("_aenergy_total")?o.aenergy.total:3===t.indexOf("_aenergy_by_minute_1")?o.aenergy.by_minute[0]:3===t.indexOf("_aenergy_by_minute_2")?o.aenergy.by_minute[1]:3===t.indexOf("_aenergy_by_minute_3")?o.aenergy.by_minute[2]:xnm.aio.shelly.Device.prototype._getStateFromResult.call(this,o,t);},_executeCommand:function _executeCommand(e,t){if(3===e.value.indexOf("_off")||3===e.value.indexOf("_on")||3===e.value.indexOf("_toggle")){var a=e.value.charAt(2)||1,o=e.value.slice(4);this.cmdTurn(a-1,o,t);}else if("cover"===this.mode)this.cmdCover(0,e,t);else{var n=new Error("Unknown command: "+e.value);xnm.aio.shelly._logger.log("warn","[DeviceGen2._executeCommand] "+n.message),t(n,null);}},cmdCover:function cmdCover(e,t,a){if(!t.value.startsWith("Cover.")){var _e4=new Error("Not a cover command: "+t.value);return xnm.aio.shelly._logger.log("warn","[DeviceGen2.cmdCover] "+_e4.message),void a(_e4,null);}var o=t.value;t.value.startsWith("Cover.GoToPosition")&&(o="Cover.GoToPosition");var n={path:"rpc/".concat(o,"?id=").concat(e)};"Cover.GoToPosition_pos"===t.value?n.path+="&pos="+t.ext:"Cover.GoToPosition_rel"===t.value&&(n.path+="&rel="+t.ext),xnm.aio.shelly._logger.log("trace","[DeviceGen2.cmdCover] Sending request."),xnm.aio.shelly.doRequest(this,"GET",n,function(e,t){a&&a(e,t);});},cmdTurn:function cmdTurn(e,t,a){var o={path:"relay/"+e+"?turn="+t};xnm.aio.shelly._logger.log("trace","[DeviceGen2.cmdTurn] Sending request."),xnm.aio.shelly.doRequest(this,"GET",o,function(e,t){a&&a(e,t);});}}),xnm.aio.shelly.DeviceGen2.constructor=xnm.aio.shelly.DeviceGen2,xnm.aio.shelly.Plus1=function(e,t){xnm.aio.shelly.DeviceGen2.call(this,e,t),this.type=xnm.aio.shelly.Plus1.TYPE,this.category=xnm.aio.shelly.Plus1.CATEGORY;},xnm.aio.shelly.Plus1.TYPE="plus1",xnm.aio.shelly.Plus1.CATEGORY="switch",xnm.aio.shelly.Plus1.prototype=Object.create(xnm.aio.shelly.DeviceGen2.prototype),xnm.aio.shelly.Plus1.prototype.toGeneralDevice=function(){return{type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"}},states:{state:{value:"ch1_state"},temperatureCelsius:{value:"ch1_tempC"},temperatureFahrenheit:{value:"ch1_tempF"}}}};},xnm.aio.shelly.Plus1.constructor=xnm.aio.shelly.Plus1,xnm.aio.shelly.Plus1PM=function(e,t){xnm.aio.shelly.DeviceGen2.call(this,e,t),this.type=xnm.aio.shelly.Plus1PM.TYPE,this.category=xnm.aio.shelly.Plus1PM.CATEGORY;},xnm.aio.shelly.Plus1PM.TYPE="plus1pm",xnm.aio.shelly.Plus1PM.CATEGORY="switch",xnm.aio.shelly.Plus1PM.prototype=Object.create(xnm.aio.shelly.DeviceGen2.prototype),xnm.aio.shelly.Plus1PM.prototype.toGeneralDevice=function(){return{type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"}},states:{state:{value:"ch1_state"},temperatureCelsius:{value:"ch1_tempC"},temperatureFahrenheit:{value:"ch1_tempF"}}}};},xnm.aio.shelly.Plus1PM.constructor=xnm.aio.shelly.Plus1PM,xnm.aio.shelly.Plus2PM=function(e,t){xnm.aio.shelly.DeviceGen2.call(this,e,t),this.type=xnm.aio.shelly.Plus2PM.TYPE,this.category=xnm.aio.shelly.Plus2PM.CATEGORY,this.channels=2,"cover"===this.mode&&(this.category="Cover",this.channels=1);},xnm.aio.shelly.Plus2PM.TYPE="plus2pm",xnm.aio.shelly.Plus2PM.CATEGORY="switch",xnm.aio.shelly.Plus2PM.prototype=Object.create(xnm.aio.shelly.DeviceGen2.prototype),xnm.aio.shelly.Plus2PM.prototype.toGeneralDevice=function(){return"cover"===this.mode?{type:"blind",commands:{position:{value:{type:"INT",min:0,max:100,unit:"%"}},open:{},close:{},stop:{}},states:{position:{type:"INT",min:0,max:100,unit:"%"},state:{values:["open","opening","closed","closing","stopped","calibrating"]}},details:{commands:{position:{value:"Cover.GoToPosition_pos",ext:"%d",extMeta:"0-100",unit:"%"},open:{value:"Cover.Open"},close:{value:"Cover.Close"},stop:{value:"Cover.Stop"}},states:{position:{value:"currentPosition",ext:"%d",extMeta:"0-100",unit:"%"},state:{value:"cover_state",options:["open","opening","closed","closing","stopped","calibrating"]}}}}:{type:"switch",commands:{on:{},off:{},toggle:{},ch2_on:{},ch2_off:{},ch2_toggle:{}},states:{state:{values:["on","off"]},temperatureCelsius:{type:"FLOAT"},temperatureFahrenheit:{type:"FLOAT"},ch2_state:{values:["on","off"]},ch2_temperatureCelsius:{type:"FLOAT"},ch2_temperatureFahrenheit:{type:"FLOAT"}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"},ch2_on:{value:"ch2_on"},ch2_off:{value:"ch2_off"},ch2_toggle:{value:"ch2_toggle"}},states:{state:{value:"ch1_state"},temperatureCelsius:{value:"ch1_tempC"},temperatureFahrenheit:{value:"ch1_tempF"},ch2_state:{value:"ch2_state"},ch2_temperatureCelsius:{value:"ch2_tempC"},ch2_temperatureFahrenheit:{value:"ch2_tempF"}}}};},xnm.aio.shelly.Plus2PM.constructor=xnm.aio.shelly.Plus2PM,xnm.aio.shelly.Pro1=function(e,t){xnm.aio.shelly.DeviceGen2.call(this,e,t),this.type=xnm.aio.shelly.Pro1.TYPE,this.category=xnm.aio.shelly.Pro1.CATEGORY;},xnm.aio.shelly.Pro1.TYPE="pro1",xnm.aio.shelly.Pro1.CATEGORY="switch",xnm.aio.shelly.Pro1.prototype=Object.create(xnm.aio.shelly.DeviceGen2.prototype),xnm.aio.shelly.Pro1.prototype.toGeneralDevice=function(){return{type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"}},states:{state:{value:"ch1_state"},temperatureCelsius:{value:"ch1_tempC"},temperatureFahrenheit:{value:"ch1_tempF"}}}};},xnm.aio.shelly.Pro1.constructor=xnm.aio.shelly.Pro1,xnm.aio.shelly.Pro1PM=function(e,t){xnm.aio.shelly.DeviceGen2.call(this,e,t),this.type=xnm.aio.shelly.Pro1PM.TYPE,this.category=xnm.aio.shelly.Pro1PM.CATEGORY;},xnm.aio.shelly.Pro1PM.TYPE="pro1pm",xnm.aio.shelly.Pro1PM.CATEGORY="switch",xnm.aio.shelly.Pro1PM.prototype=Object.create(xnm.aio.shelly.DeviceGen2.prototype),xnm.aio.shelly.Pro1PM.prototype.toGeneralDevice=function(){return{type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"}},states:{state:{value:"ch1_state"},temperatureCelsius:{value:"ch1_tempC"},temperatureFahrenheit:{value:"ch1_tempF"}}}};},xnm.aio.shelly.Pro1PM.constructor=xnm.aio.shelly.Pro1PM,xnm.aio.shelly.Pro2=function(e,t){xnm.aio.shelly.DeviceGen2.call(this,e,t),this.type=xnm.aio.shelly.Pro2.TYPE,this.category=xnm.aio.shelly.Pro2.CATEGORY,this.channels=2;},xnm.aio.shelly.Pro2.TYPE="pro2",xnm.aio.shelly.Pro2.CATEGORY="switch",xnm.aio.shelly.Pro2.prototype=Object.create(xnm.aio.shelly.DeviceGen2.prototype),xnm.aio.shelly.Pro2.prototype.toGeneralDevice=function(){return{type:"switch",commands:{on:{},off:{},toggle:{},ch2_on:{},ch2_off:{},ch2_toggle:{}},states:{state:{values:["on","off"]},temperatureCelsius:{type:"FLOAT"},temperatureFahrenheit:{type:"FLOAT"},ch2_state:{values:["on","off"]},ch2_temperatureCelsius:{type:"FLOAT"},ch2_temperatureFahrenheit:{type:"FLOAT"}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"},ch2_on:{value:"ch2_on"},ch2_off:{value:"ch2_off"},ch2_toggle:{value:"ch2_toggle"}},states:{state:{value:"ch1_state"},temperatureCelsius:{value:"ch1_tempC"},temperatureFahrenheit:{value:"ch1_tempF"},ch2_state:{value:"ch2_state"},ch2_temperatureCelsius:{value:"ch2_tempC"},ch2_temperatureFahrenheit:{value:"ch2_tempF"}}}};},xnm.aio.shelly.Pro2.constructor=xnm.aio.shelly.Pro2,xnm.aio.shelly.Pro2PM=function(e,t){xnm.aio.shelly.DeviceGen2.call(this,e,t),this.type=xnm.aio.shelly.Pro2PM.TYPE,this.category=xnm.aio.shelly.Pro2PM.CATEGORY,this.channels=2,"cover"===this.mode&&(this.category="Cover",this.channels=1);},xnm.aio.shelly.Pro2PM.TYPE="pro2pm",xnm.aio.shelly.Pro2PM.CATEGORY="switch",xnm.aio.shelly.Pro2PM.prototype=Object.create(xnm.aio.shelly.DeviceGen2.prototype),xnm.aio.shelly.Pro2PM.prototype.toGeneralDevice=function(){return"cover"===this.mode?{type:"blind",commands:{position:{value:{type:"INT",min:0,max:100,unit:"%"}},open:{},close:{},stop:{}},states:{position:{type:"INT",min:0,max:100,unit:"%"},state:{values:["open","opening","closed","closing","stopped","calibrating"]}},details:{commands:{position:{value:"Cover.GoToPosition_pos",ext:"%d",extMeta:"0-100",unit:"%"},open:{value:"Cover.Open"},close:{value:"Cover.Close"},stop:{value:"Cover.Stop"}},states:{position:{value:"currentPosition",ext:"%d",extMeta:"0-100",unit:"%"},state:{value:"cover_state",options:["open","opening","closed","closing","stopped","calibrating"]}}}}:{type:"switch",commands:{on:{},off:{},toggle:{},ch2_on:{},ch2_off:{},ch2_toggle:{}},states:{state:{values:["on","off"]},temperatureCelsius:{type:"FLOAT"},temperatureFahrenheit:{type:"FLOAT"},ch2_state:{values:["on","off"]},ch2_temperatureCelsius:{type:"FLOAT"},ch2_temperatureFahrenheit:{type:"FLOAT"}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"},ch2_on:{value:"ch2_on"},ch2_off:{value:"ch2_off"},ch2_toggle:{value:"ch2_toggle"}},states:{state:{value:"ch1_state"},temperatureCelsius:{value:"ch1_tempC"},temperatureFahrenheit:{value:"ch1_tempF"},ch2_state:{value:"ch2_state"},ch2_temperatureCelsius:{value:"ch2_tempC"},ch2_temperatureFahrenheit:{value:"ch2_tempF"}}}};},xnm.aio.shelly.Pro2PM.constructor=xnm.aio.shelly.Pro2PM,xnm.aio.shelly.Pro4PM=function(e,t){xnm.aio.shelly.DeviceGen2.call(this,e,t),this.type=xnm.aio.shelly.Pro4PM.TYPE,this.category=xnm.aio.shelly.Pro4PM.CATEGORY,this.channels=4;},xnm.aio.shelly.Pro4PM.TYPE="pro4pm",xnm.aio.shelly.Pro4PM.CATEGORY="switch",xnm.aio.shelly.Pro4PM.prototype=Object.create(xnm.aio.shelly.DeviceGen2.prototype),xnm.aio.shelly.Pro4PM.prototype.toGeneralDevice=function(){return{type:"switch",commands:{on:{},off:{},toggle:{},ch2_on:{},ch2_off:{},ch2_toggle:{},ch3_on:{},ch3_off:{},ch3_toggle:{},ch4_on:{},ch4_off:{},ch4_toggle:{}},states:{state:{values:["on","off"]},temperatureCelsius:{type:"FLOAT"},temperatureFahrenheit:{type:"FLOAT"},ch2_state:{values:["on","off"]},ch2_temperatureCelsius:{type:"FLOAT"},ch2_temperatureFahrenheit:{type:"FLOAT"},ch3_state:{values:["on","off"]},ch3_temperatureCelsius:{type:"FLOAT"},ch3_temperatureFahrenheit:{type:"FLOAT"},ch4_state:{values:["on","off"]},ch4_temperatureCelsius:{type:"FLOAT"},ch4_temperatureFahrenheit:{type:"FLOAT"}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"},ch2_on:{value:"ch2_on"},ch2_off:{value:"ch2_off"},ch2_toggle:{value:"ch2_toggle"},ch3_on:{value:"ch3_on"},ch3_off:{value:"ch3_off"},ch3_toggle:{value:"ch3_toggle"},ch4_on:{value:"ch4_on"},ch4_off:{value:"ch4_off"},ch4_toggle:{value:"ch4_toggle"}},states:{state:{value:"ch1_state"},temperatureCelsius:{value:"ch1_tempC"},temperatureFahrenheit:{value:"ch1_tempF"},ch2_state:{value:"ch2_state"},ch2_temperatureCelsius:{value:"ch2_tempC"},ch2_temperatureFahrenheit:{value:"ch2_tempF"},ch3_state:{value:"ch3_state"},ch3_temperatureCelsius:{value:"ch3_tempC"},ch3_temperatureFahrenheit:{value:"ch3_tempF"},ch4_state:{value:"ch4_state"},ch4_temperatureCelsius:{value:"ch4_tempC"},ch4_temperatureFahrenheit:{value:"ch4_tempF"}}}};},xnm.aio.shelly.Pro4PM.constructor=xnm.aio.shelly.Pro4PM,xnm.aio.shelly.Pro3=function(e,t){xnm.aio.shelly.DeviceGen2.call(this,e,t),this.type=xnm.aio.shelly.Pro3.TYPE,this.category=xnm.aio.shelly.Pro3.CATEGORY,this.channels=3;},xnm.aio.shelly.Pro3.TYPE="pro3",xnm.aio.shelly.Pro3.CATEGORY="switch",xnm.aio.shelly.Pro3.prototype=Object.create(xnm.aio.shelly.DeviceGen2.prototype),xnm.aio.shelly.Pro3.prototype.toGeneralDevice=function(){return{type:"switch",commands:{on:{},off:{},toggle:{},ch2_on:{},ch2_off:{},ch2_toggle:{},ch3_on:{},ch3_off:{},ch3_toggle:{}},states:{state:{values:["on","off"]},temperatureCelsius:{type:"FLOAT"},temperatureFahrenheit:{type:"FLOAT"},ch2_state:{values:["on","off"]},ch2_temperatureCelsius:{type:"FLOAT"},ch2_temperatureFahrenheit:{type:"FLOAT"},ch3_state:{values:["on","off"]},ch3_temperatureCelsius:{type:"FLOAT"},ch3_temperatureFahrenheit:{type:"FLOAT"}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"},ch2_on:{value:"ch2_on"},ch2_off:{value:"ch2_off"},ch2_toggle:{value:"ch2_toggle"},ch3_on:{value:"ch3_on"},ch3_off:{value:"ch3_off"},ch3_toggle:{value:"ch3_toggle"}},states:{state:{value:"ch1_state"},temperatureCelsius:{value:"ch1_tempC"},temperatureFahrenheit:{value:"ch1_tempF"},ch2_state:{value:"ch2_state"},ch2_temperatureCelsius:{value:"ch2_tempC"},ch2_temperatureFahrenheit:{value:"ch2_tempF"},ch3_state:{value:"ch3_state"},ch3_temperatureCelsius:{value:"ch3_tempC"},ch3_temperatureFahrenheit:{value:"ch3_tempF"}}}};},xnm.aio.shelly.Pro3.constructor=xnm.aio.shelly.Pro3,xnm.aio.shelly.PlusPlugUS=function(e,t){xnm.aio.shelly.DeviceGen2.call(this,e,t),this.type=xnm.aio.shelly.PlusPlugUS.TYPE,this.category=xnm.aio.shelly.PlusPlugUS.CATEGORY,this.channels=1;},xnm.aio.shelly.PlusPlugUS.TYPE="plug-u1",xnm.aio.shelly.PlusPlugUS.CATEGORY="switch",xnm.aio.shelly.PlusPlugUS.prototype=Object.create(xnm.aio.shelly.DeviceGen2.prototype),xnm.aio.shelly.PlusPlugUS.prototype.toGeneralDevice=function(){return{type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]},temperatureCelsius:{type:"FLOAT"},temperatureFahrenheit:{type:"FLOAT"}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"}},states:{state:{value:"ch1_state"},temperatureCelsius:{value:"ch1_tempC"},temperatureFahrenheit:{value:"ch1_tempF"}}}};},xnm.aio.shelly.PlusPlugUS.constructor=xnm.aio.shelly.PlusPlugUS,xnm.aio.shelly.PlusWallDimmer=function(e,t){xnm.aio.shelly.DeviceGen2.call(this,e,t),this.type=xnm.aio.shelly.PlusWallDimmer.TYPE,this.category=xnm.aio.shelly.PlusWallDimmer.CATEGORY,this.channels=1;},xnm.aio.shelly.PlusWallDimmer.TYPE="pluswdus",xnm.aio.shelly.PlusWallDimmer.CATEGORY="dimmer",xnm.aio.shelly.PlusWallDimmer.prototype=Object.create(xnm.aio.shelly.DeviceGen2.prototype),xnm.aio.shelly.PlusWallDimmer.prototype.toGeneralDevice=function(){return{type:"dimmer",commands:{on:{},off:{},toggle:{},brightness:{value:{type:"INT",min:0,max:100}}},states:{brightness:{type:"INT",min:0,max:100},state:{values:["on","off"]}},details:{commands:{on:{value:"ch1_on"},off:{value:"ch1_off"},toggle:{value:"ch1_toggle"},brightness:{value:"ch1_gain",ext:"%d",extMeta:"0-100",unit:"%"}},states:{brightness:{value:"ch1_brightness",ext:"%d",extMeta:"1-100",unit:"%"},state:{value:"ch1_state"}}}};},xnm.aio.shelly.PlusWallDimmer.constructor=xnm.aio.shelly.PlusWallDimmer,xnm.aio.shelly.PlusHT=function(e,t){switch(xnm.aio.shelly.DeviceGen2.call(this,e,t),this.type=xnm.aio.shelly.PlusHT.TYPE,this.category=xnm.aio.shelly.PlusHT.CATEGORY,this.channels=1,this.mode){case"temperature":default:this.category="Temperature";break;case"humidity":this.category="Humidity";break;case"power":this.category="DevicePower";}},xnm.aio.shelly.PlusHT.TYPE="plusht",xnm.aio.shelly.PlusHT.CATEGORY="switch",xnm.aio.shelly.PlusHT.prototype=Object.create(xnm.aio.shelly.DeviceGen2.prototype),xnm.aio.shelly.PlusHT.prototype.toGeneralDevice=function(){return"Temperature"===this.mode?{type:"temperature",commands:{},states:{temperatureCelsius:{type:"FLOAT"},temperatureFahrenheit:{type:"FLOAT"}},details:{commands:{},states:{temperatureCelsius:{value:"ch1_tempC"},temperatureFahrenheit:{value:"ch1_tempF"}}}}:"Humidity"===this.mode?{type:"sensor",commands:{},states:{humidity:{type:"INT"}},details:{commands:{},states:{humidity:{value:"humidity"}}}}:"DevicePower"===this.mode?{type:"sensor",commands:{},states:{batCapacity:{type:"INT"},batVoltage:{type:"FLOAT"}},details:{commands:{},states:{batCapacity:{value:"batCapacity"},batVoltage:{value:"batVoltage"}}}}:void 0;},xnm.aio.shelly.PlusHT.constructor=xnm.aio.shelly.PlusHT;