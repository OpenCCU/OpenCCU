function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}var x=x||{};x.xmlrpc=x.xmlrpc||{},x.xmlrpc.Handler=function(){},x.xmlrpc.Handler.prototype.serializeReq=function(e,r){if(!e)throw new Error("method name invalid");var a='<?xml version="1.0" encoding="UTF-8"?>';return a+="<methodCall>",a+="<methodName>"+this._escapeXml(e)+"</methodName>",a+=this.serializeParams(r),a+="</methodCall>";},x.xmlrpc.Handler.prototype.serializeRsp=function(e,r){var a='<?xml version="1.0" encoding="UTF-8"?>';return a+="<methodResponse>",e?a+=this.serializeFault(e):r&&(a+=this.serializeParams(r)),a+="</methodResponse>";},x.xmlrpc.Handler.prototype.serializeFault=function(e){var r="<fault>",a=this.serializeValue(e);return a&&(r+=a),r+="</fault>";},x.xmlrpc.Handler.prototype.serializeParams=function(e){var r,a="<params>";if(e)for(var t=0;t<e.length;t++){(r=this.serializeValue(e[t]))&&(a+="<param>"+r+"</param>");}return a+="</params>";},x.xmlrpc.Handler.prototype.serializeValue=function(e,r){if(null==e)return"<value><nil/></value>";if(r)return"<value><"+r+">"+e+"</"+r+"></value>";var a,t;switch(_typeof(e)){case"boolean":return"<value><boolean>"+(e?1:0)+"</boolean></value>";case"number":return e%1==0?"<value><i4>"+e+"</i4></value>":"<value><double>"+e+"</double></value>";case"string":return"<value><string>"+this._escapeXml(e)+"</string></value>";case"object":if(e instanceof Date)return"<value><dateTime.iso8601>"+this._formatDateISO8601(e)+"</dateTime.iso8601></value>";if("[object Array]"===Object.prototype.toString.call(e)){a="<value><array><data>";for(var i=0;i<e.length;i++){(t=this.serializeValue(e[i]))&&(a+=t);}return a+="</data></array></value>";}if(e.__rpcValueType)return this.serializeValue(e.__rpcValue,e.__rpcValueType);for(var l in a="<value><struct>",e){e.hasOwnProperty(l)&&(t=this.serializeValue(e[l]))&&(a+="<member><name>"+this._escapeXml(l)+"</name>"+t+"</member>");}return a+="</struct></value>";default:return null;}},x.xmlrpc.Handler.prototype.deserializeReq=function(e){if(!e)throw new Error("xml invalid");var r;try{r=$($.parseXML(e));}catch(e){throw e;}var a=r.children();if(!a||1!=a.length)throw new Error("method call invalid:0");var t=$(a[0]),i=t.prop("tagName");if("methodCall"!=i)throw new Error("method call invalid:1");if(!(a=t.children())||2!=a.length)throw new Error("method call invalid:2");if("methodName"!=(i=(t=$(a[0])).prop("tagName")))throw new Error("method call invalid:3");var l=t.text();if("params"!=(i=(t=$(a[1])).prop("tagName")))throw new Error("method call invalid:4");return{methodName:l,params:this.deserializeParams(t)};},x.xmlrpc.Handler.prototype.deserializeRsp=function(e){if(!e)throw new Error("xml invalid");var r;try{r=$($.parseXML(e));}catch(e){throw e;}var a=r.children();if(!a||1!=a.length)throw new Error("method response invalid:0");var t=$(a[0]),i=t.prop("tagName");if("methodResponse"!=i)throw new Error("method response invalid:1");if(!(a=t.children())||1!=a.length)throw new Error("method response invalid:2");if("fault"==(i=(t=$(a[0])).prop("tagName")))return{error:this.deserializeFault(t)};if("params"==i)return{params:this.deserializeParams(t)};throw new Error("method response invalid:3");},x.xmlrpc.Handler.prototype.deserializeFault=function(e){if(!e)throw new Error("fault node is null");if("fault"!=e.prop("tagName"))throw new Error("fault invalid");var r=e.children();if(!r||1!=r.length||!r[0])throw new Error("fault value invalid");return this.deserializeValue($(r[0]));},x.xmlrpc.Handler.prototype.deserializeParams=function(e){if(!e)throw new Error("params node is null");if("params"!=e.prop("tagName"))throw new Error("params invalid");var r=e.children(),a=[];if(!r||0==r.length)return a;for(var t=0;t<r.length;t++){var i=$(r[t]);if(!i||"param"!=i.prop("tagName"))throw new Error("params invalid");var l=i.children();if(!l||1!=l.length||!l[0])throw new Error("param invalid");i=$(l[0]);var n=this.deserializeValue(i);a.push(n);}return a;},x.xmlrpc.Handler.prototype.deserializeValue=function(e){if(!e)throw new Error("value node is null");var r=e.prop("tagName");if("value"!=r)throw new Error("value invalid");var a=e.children();if(!a||0==a.length||!a[0]){var t=e.text();return null==t||void 0===t?"":t;}var i,l,n,o=$(a[0]);switch(r=o.prop("tagName")){case"nil":i=null;break;case"boolean":if(null==(i=o.text())||void 0===i||0==i.length||"1"!=i&&"0"!=i)throw new Error("boolean value invalid");i="1"==i;break;case"i4":case"int":if(null==(i=o.text())||void 0===i||0==i.length)throw new Error("int value invalid");if(i=parseInt(i),isNaN(i))throw new Error("int value invalid");break;case"double":if(null==(i=o.text())||void 0===i||0==i.length)throw new Error("double value invalid");if(i=parseFloat(i),isNaN(i))throw new Error("double value invalid");break;case"string":i=(i=o.text())||"";break;case"dateTime.iso8601":if(null==(i=o.text())||void 0===i||0==i.length)throw new Error("dateTime value invalid");i=this._resolveDateISO8601(i);break;case"array":if(!(a=o.children())||1!=a.length||!a[0])throw new Error("array invalid");if("data"!=(r=(o=$(a[0])).prop("tagName")))throw new Error("array data invalid");if(i=[],(a=o.children())||0!=a.length)for(l=0;l<a.length;l++){a[l]&&(n=this.deserializeValue($(a[l])),i.push(n));}break;case"struct":if(i={},!(a=o.children())||0==a.length)break;for(l=0;l<a.length;l++){if(a[l]){var s=(o=$(a[l])).children();if(!s||2!=s.length)throw new Error("struct member invalid");if(!s[0]||!s[1])throw new Error("struct member invalid");if("name"!=(r=(o=$(s[0])).prop("tagName")))throw new Error("struct member name invalid");var u=o.text();if(!u)throw new Error("struct member name invalid");o=$(s[1]),i[u]=this.deserializeValue(o);}}}return i;},x.xmlrpc.XML_CHAR_MAP={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},x.xmlrpc.Handler.prototype._escapeXml=function(e){return e.replace(/[<>&"']/g,function(e){return x.xmlrpc.XML_CHAR_MAP[e];});},x.xmlrpc.Handler.prototype._unescapeXml=function(e){return e?e=(e=(e=(e=(e=e.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&")).replace(/&quot;/g,'"')).replace(/&apos;/g,"'"):e;},x.xmlrpc.Handler.prototype._formatDateISO8601=function(e){var pad=function pad(e){var r=String(e);return 1===r.length&&(r="0"+r),r;};return Date.prototype.toISOString?e.toISOString():this.getUTCFullYear()+"-"+pad(this.getUTCMonth()+1)+"-"+pad(this.getUTCDate())+"T"+pad(this.getUTCHours())+":"+pad(this.getUTCMinutes())+":"+pad(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z";},x.xmlrpc.Handler.prototype._resolveDateISO8601=function(e){var r=(e=e.replace(/\D/g," ")).split(" ");return r[1]--,new Date(Date.UTC(r[0],r[1],r[2],r[3],r[4],r[5]));},"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports=module.exports=new x.xmlrpc.Handler());