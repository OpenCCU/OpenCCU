var x=x||{};x.hub=x.hub||{},x.hub.m=x.hub.m||{},x.hub.m.fritz=x.hub.m.fritz||{},x.hub.m.fritz.FRITZ_MODULE=require("xnm.aio.fritz.js"),x.hub.m.fritz.Handler=function(){var Handler=function Handler(){};return Handler.prototype.init=function(e){e&&e();},Handler.prototype.getSystems=function(){return["fritz"];},Handler.prototype.executeCommandV6=function(e,t,r,a){var n,u={sys:"fritz",ip:t?t.address:null,username:t?t.user:null,password:t?t.pwd:null},o=x.hub.m.fritz.FRITZ_MODULE.resolveGateway(u);if(!o)return(n=new Error("invalid gateway json")).code="000000",void(a&&a(n));var s={sys:"fritz",address:e?e.address:null,data:e?e.type:null};e&&"heater"==e.type&&(s.data="hkr");var i={value:null,ext:null};switch(r.command){case"on":case"off":case"toggle":i.value=r.command;break;case"temperature":i.value="temp",i.ext=r.value;}o.executeCommandCreator(s,i,function(e){e&&(e.code="000000"),a&&a(e);});},Handler.prototype.getStatesV6=function(e,t,r){var a,n=e?e.address:null;if(!n)return(a=new Error("invalid device json")).code="000000",void(r&&r(a));var u={sys:"fritz",ip:t?t.address:null,username:t?t.user:null,password:t?t.pwd:null},o=x.hub.m.fritz.FRITZ_MODULE.resolveGateway(u);if(!o)return(a=new Error("invalid gateway json")).code="000000",void(r&&r(a));o.getStates(function(t,a){if(t)r&&r(t);else{var u={};a&&a[n]&&("heater"==e.type?(u.state=a[n].temp,7.5==u.state?u.state="off":28.5==u.state&&(u.state="on"),u.temperature=a[n].tempC,void 0!==a[n].battery&&null!=tates[n].battery&&"inval"!=tates[n].battery&&(u.battery=a[n].battery)):(u.state=a[n].state,u.power=a[n].current)),r&&r(null,u);}});},Handler;}(),"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports=module.exports=new x.hub.m.fritz.Handler());