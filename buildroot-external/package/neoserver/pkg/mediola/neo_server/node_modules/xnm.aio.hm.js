var xnm=xnm||{};xnm.aio=xnm.aio||{},xnm.aio.hm=xnm.aio.hm||{},xnm.aio.hm.Util=function(){var e={"&amp;":"&","&quot;":'"',"&lt;":"<","&gt;":">"};return{formatFloatString:function formatFloatString(e){if(void 0===e||null==e||""==e)return"?";var t=parseFloat(e),a=t.toString(),n=a.split(".");return a=2===n.length?n[1].length>2?t.toFixed(3):2===n[1].length?t.toFixed(2):t.toFixed(1):t.toFixed(1),a;},decodeXml:function decodeXml(t){return t.replace(/(&quot;|&lt;|&gt;|&amp;)/g,function(t,a){return e[a];});}};}(),xnm.aio.hm.MHMCCU=function(e,t,a,n,r,s,l,o){var u=require("x.logger.js");this._logger=u?u.getLogger("xnm.aio.hm.MHMCCU"):{log:function log(){}},this.type=s||1,this.ip=e,this.port=a||80,this.username=l,this.password=t,this.tclport=n||8181,this.uuid=r,this.cloudmatic=o,this._cloudmaticState="off",this._statebuffer={},this._reqNo=0;},xnm.aio.hm.MHMCCU._cloneJSONObj=function(e){var t=JSON.stringify(e);return t=JSON.parse(t);},xnm.aio.hm.MHMCCU.prototype={executeCommand:function executeCommand(e,t,a){if(e){if(t){var n=null,r=1,s=e.type,l={type:e.type,address:e.address,"interface":e["interface"],channels:{}},o=e.address.indexOf(":");switch(o>0&&(r=e.address.substr(o+1),l.address=e.address.substr(0,o)),l["interface"]||(l["interface"]=e.data),"on"==t?"DIMMER"==e.type&&(t="dimRaw",n=100):"off"==t?"DIMMER"==e.type&&(t="dimRaw",n=0):"toggle"==t||(0==t.indexOf("dimTo")&&(t=t.replace(/dimTo/g,"")),0==t.indexOf("moveTo")&&(t=t.replace(/moveTo/g,"")),n=t=t.replace(/%/g,""),"DIMMER"==e.type?t="dimRaw":"FHT80b"==e.subtype&&(t="themoRTempRaw",r=2,s="CLIMATECONTROL_REGULATOR")),XC.debugf(l),t={value:t,ext:n},e.type){case xnm.aio.hm.DM.SYSVAR:case xnm.aio.hm.DM.PROG:this.executeCommandCreator(e,t,a);break;default:l.channels[s]={address:r},this.executeCommandCreator(l,t,a);}}else a&&a(new Error("command invalid"));}else a&&a(new Error("device invalid"));},executeCCUCommand:function executeCCUCommand(e,t){if(e){var a=null;"cloudmaticOn"==e.value?this._cloudmaticState="on":"cloudmaticOff"==e.value?this._cloudmaticState="off":"cloudmaticToggle"==e.value?this._cloudmaticState="on"==this._cloudmaticState?"off":"on":a=new Error("unknown command"),t&&t(a);}else t&&t(new Error("command invalid"));},getStates:function getStates(e,t,a){if(t&&0!=t.length){for(var n=[],r=0;r<t.length;r++){var s=t[r];switch(s.type){case xnm.aio.hm.DM.SYSVAR:n.push(t[r]);break;case xnm.aio.hm.DM.PROG:break;default:var l=s.channelAddress,o=s.channelName,u={type:s.type,address:s.address,"interface":s["interface"],channels:{}},i=s.address.indexOf(":");i>0&&(l=s.address.substr(i+1),u.address=s.address.substr(0,i)),u["interface"]||(u["interface"]=s.data),o||(o=s.type),"SWITCH"==s.type?(u.channels.SWITCH={address:1},n.push({id:s.id,device:u,status:{value:"switchState"}}),"meteringSwitch"==s.subtype&&(u.channels.POWERMETER={address:2},n.push({id:s.id+":current",device:u,status:{value:"meterPower"}}))):"FHT80b"==s.subtype?(u.channels.WEATHER={address:1},u.channels.CLIMATECONTROL_REGULATOR={address:2},n.push({id:s.id+":C",device:u,status:{value:"weatherTemp"}}),n.push({id:s.id+":T",device:u,status:{value:"themoRSetTemp"}}),n.push({id:s.id+":M",device:u,status:{value:"themoRMode"}})):(u.channels[o]={address:l},"DIMMER"==s.type&&n.push({id:s.id,device:u,status:{value:"dimmerLevel"}}));}}this.getStatesCreator(e,n,a);}else a&&a(null,{});},executeCommandCreator:function executeCommandCreator(e,t,a){var n=this,cb=function cb(e,t,a,n){this.device=e,this.command=t,this.channel=a,this.callback=n;};if(cb.prototype.execute=function(t,a){var r,s=this;t?this.callback&&this.callback(t):("CUxD"==e["interface"]?r=xnm.aio.hm.CUxDChannel[this.channel]:"HmIP-RF"==e["interface"]||"HmIP-HEATING"==e.type?r=xnm.aio.hm.HmIPChannel[p]:"HM-Sec-Sir-WM"!=e.type||"SWITCH_SENSOR_1"!=p&&"SWITCH_SENSOR_2"!=p||(r=xnm.aio.hm.Channel.SWITCH_SENSOR),r||(r=xnm.aio.hm.Channel[this.channel]),r.handleCommandResponse?r.handleCommandResponse(n,this.device,this.command,a,function(){setTimeout(function(){s.callback&&s.callback();},500);}):setTimeout(function(){s.callback&&s.callback();},500));},e&&!e.ip){if(t){var r=null;switch(e.type){case xnm.aio.hm.DM.SYSVAR:if(!e["class"]||!xnm.aio.hm.SysVar[e["class"].toUpperCase()])return void(a&&a(new Error("device class invalid")));if(!xnm.aio.hm.SysVar[e["class"].toUpperCase()].buildCommandScript)return void(a&&a(new Error("do not support command")));if(!(r=xnm.aio.hm.SysVar[e["class"].toUpperCase()].buildCommandScript(this,e,t)))return void(a&&a(new Error("command is invalid")));this._doRequest(r,!0,function(e){a&&a(e);});break;case xnm.aio.hm.DM.PROG:if(!(r=xnm.aio.hm.Prog.buildCommandScript(this,e,t)))return void(a&&a(new Error("command is invalid")));this._doRequest(r,!0,function(e){a&&a(e);});break;default:if(e&&"BidCos-RF"==e["interface"]&&e.type&&xnm.aio.hm.BidCosDevice[e.type]){var s=xnm.aio.hm.BidCosDevice[e.type];if(s.executeCommand)return void s.executeCommand(this,e,t,a);}if(e&&"HmIP-RF"==e["interface"]){var _n=xnm.aio.hm.HmIPDevice.resolveJSON(e);if(_n&&_n.executeCommand)return void _n.executeCommand(this,e,t,a);}if(e&&"VirtualDevices"==e["interface"]&&e.type&&xnm.aio.hm.VirtualDevice[e.type]){var l=xnm.aio.hm.VirtualDevice[e.type];if(l){var o=new l();if(o.executeCommand)return void o.executeCommand(this,e,t,a);}}if(!e.channels)return void(a&&a(new Error("device channels invalid")));var u=null;if("DimmerKey"==e.type)return(r=(u=xnm.aio.hm.DimmerKey).buildCommandScript(this,e,t))?void this._doRequestMarked(r,!0,{execute:function execute(e){setTimeout(function(){a&&a(e);},3e3);}}):void(a&&a(new Error("no correspondent channel for the command is found")));var i=e.channels,c=!1,m=!1;for(var p in i){if(i.hasOwnProperty(p)&&(u=null,"CUxD"==e["interface"]?u=xnm.aio.hm.CUxDChannel[p]:"HmIP-RF"==e["interface"]||"HmIP-HEATING"==e.type?u=xnm.aio.hm.HmIPChannel[p]:"HM-Sec-Sir-WM"!=e.type||"SWITCH_SENSOR_1"!=p&&"SWITCH_SENSOR_2"!=p||(u=xnm.aio.hm.Channel.SWITCH_SENSOR),u||(u=xnm.aio.hm.Channel[p]),u&&(c=!0,u.buildCommandScript&&(r=u.buildCommandScript(this,e,e.channels[p],t))))){m=!0;var f=new cb(e,t,p,a);this._doRequestMarked(r,!0,f);break;}}if(!c)return void(a&&a(new Error("no correspondent channel is found")));m||a&&a(new Error("no correspondent channel for the command is found"));}}else a&&a(new Error("command invalid"));}else this.executeCCUCommand(t,a);},buildScript:function buildScript(e){for(var t='var o;string states="";',a=0;a<e.length;a++){t+='states = states # "'+a+'=";',t+=e[a].script,a<e.length-1&&(t+='states = states # "\\r@@@\\n";');}return t;},resolveStateResponse:function resolveStateResponse(e,t,a){var n=[];if(a)for(var r=0;r<a.length;r++){var s=a[r];n.push({id:s.alias,status:s.state});}for(var l=0;l<e.length;l++){var o=e[l],u=o.alias,i=o.channel;if(o.device){var c,m=o.device;switch(m.type){case xnm.aio.hm.DM.SYSVAR:if(!m["class"]||!xnm.aio.hm.SysVar[m["class"].toUpperCase()]){n.push({id:u,status:"?"});continue;}c=xnm.aio.hm.SysVar[m["class"].toUpperCase()].handleStatusResponse(t[l],o.status),n.push({id:u,status:c});break;case xnm.aio.hm.DM.PROG:n.push({id:u,status:"?"});break;default:if(m&&"BidCos-RF"==m["interface"]&&m.type&&xnm.aio.hm.BidCosDevice[m.type]){var p=xnm.aio.hm.BidCosDevice[m.type];if(p.handleStatusResponse){c=p.handleStatusResponse(t[l],o.status),n.push({id:u,status:c});continue;}}if(m&&"HmIP-RF"==m["interface"]){var _e=xnm.aio.hm.HmIPDevice.resolveJSON(m);if(_e&&_e.handleStatusResponse){c=_e.handleStatusResponse(t[l],o.status,this),n.push({id:u,status:c});continue;}}if(m&&"VirtualDevices"==m["interface"]&&m.type&&xnm.aio.hm.VirtualDevice[m.type]){var f=xnm.aio.hm.VirtualDevice[m.type];if(f){var E=new f();if(E.handleStatusResponse){c=E.handleStatusResponse(t[l],o.status),n.push({id:u,status:c});continue;}}}var d=null;if("CUxD"==m["interface"]?d=xnm.aio.hm.CUxDChannel[i]:"HmIP-RF"==m["interface"]||"HmIP-HEATING"==m.type?d=xnm.aio.hm.HmIPChannel[i]:"HM-Sec-Sir-WM"!=m.type||"SWITCH_SENSOR_1"!=i&&"SWITCH_SENSOR_2"!=i?"HM-WDS30-OT2-SM-2"!=m.type||"WEATHER_1"!=i&&"WEATHER_2"!=i&&"WEATHER_3"!=i&&"WEATHER_4"!=i||(d=xnm.aio.hm.Channel.WEATHER):d=xnm.aio.hm.Channel.SWITCH_SENSOR,d||(d=xnm.aio.hm.Channel[i]),!d){n.push({id:u,status:"?"});continue;}if(!d.handleStatusResponse){n.push({id:u,status:t[u]});continue;}c=d.handleStatusResponse(t[l],o.status),n.push({id:u,status:c});}}else n.push({id:u,status:"?"});}return n;},resolveState:function resolveState(e,t,a){if(!e||!e.channels)return null;if(!(t&&t.channel&&t.datapoint&&t["interface"]))return null;var n=t.channel.indexOf(":");if(-1==n)return null;if(e&&"BidCos-RF"==e["interface"]&&e.type){var _n2=xnm.aio.hm.BidCosDevice[e.type];if(_n2&&_n2.resolveState)return _n2.resolveState(e,t,a);}if(e&&"HmIP-RF"==e["interface"]&&e.type){var _n3=xnm.aio.hm.HmIPDevice.resolveJSON(e);if(_n3&&_n3.resolveState)return _n3.resolveState(e,t,a);}var r,s,l=t.channel.substr(n+1);for(var o in e.channels){if(e.channels.hasOwnProperty(o))if(e.channels[o].address==l){r=o,"HM-Sec-Sir-WM"!=e.type||"SWITCH_SENSOR_1"!=r&&"SWITCH_SENSOR_2"!=r?"HM-WDS30-OT2-SM-2"!=e.type||"WEATHER_1"!=r&&"WEATHER_2"!=r&&"WEATHER_3"!=r&&"WEATHER_4"!=r||(r="WEATHER"):r="SWITCH_SENSOR";break;}}return r?("BidCos-RF"==t["interface"]||"BidCos-Wired"==t["interface"]?s=xnm.aio.hm.Channel[r]:"HmIP-RF"==t["interface"]&&(s=xnm.aio.hm.HmIPChannel[r]),s&&s.resolveState?s.resolveState(e,t,a):null):null;},resolveDatapointInfo:function resolveDatapointInfo(e,t,a){if(!(e&&e["interface"]&&e.type&&e.address&&t))return null;if("SysVar"==e.type||"Prog"==e.type)return null;var n=null,r=null;if("BidCos-RF"==e["interface"]||"BidCos-Wired"==e["interface"])n=xnm.aio.hm.DM._getChannels(e),r=xnm.aio.hm.MAP;else if("HmIP-RF"==e["interface"])n=xnm.aio.hm.DM._getHmIPChannels(e),r=xnm.aio.hm.HMIP_MAP;else{if("CUxD"!=e["interface"])return null;n=xnm.aio.hm.DM._getCUxDChannels(e),r=xnm.aio.hm.CUxDMAP;}var s,l=null,o=null,u=null;for(s in n){var i=n[s],c=r[s];if(c){for(var m in i){var p=c[m];if(p){var f=a?p.command:p.status;if(f)for(var E=0;E<f.length;E++){if(f[E].ref.value==t){o=m;break;}}if(o)break;}}if(o){l=s;break;}}}if(!l||!o)return null;for(var _t in e.channels){if(_t==l){var d=e.address,h=d.indexOf(":");-1!=h&&(d=d.substr(0,h)),u=d+":"+e.channels[_t].address;break;}}return u?{"interface":e["interface"],channel:u,channelType:l,datapoint:o}:null;},getStatesCreator:function getStatesCreator(e,t,a){for(var n=[],r=[],s=null,l=this,o=[],u=[],i=[],c=0;c<t.length;c++){var m,p=t[c],f=p.id,E=p.status,d=p.device;if(f&&d&&E){if(!d.type&&d.ip){"serviceMsg"==E.value?o.push(p):"ccuTime"==E.value?u.push(p):"cloudmaticState"==E.value&&i.push(p);continue;}switch(d.type){case xnm.aio.hm.DM.SYSVAR:if(!d["class"]||!xnm.aio.hm.SysVar[d["class"].toUpperCase()])continue;(s=xnm.aio.hm.SysVar[d["class"].toUpperCase()].buildStateScript(this,d,E))&&n.push({alias:f,script:s,device:d,status:E});break;case xnm.aio.hm.DM.PROG:continue;default:if(d&&"BidCos-RF"==d["interface"]&&d.type&&xnm.aio.hm.BidCosDevice[d.type]&&(m=xnm.aio.hm.BidCosDevice[d.type]).buildStateScript&&(s=m.buildStateScript(this,d,E))){n.push({alias:f,script:s,device:d,channel:null,status:E});break;}if(d&&"HmIP-RF"==d["interface"]){if((m=xnm.aio.hm.HmIPDevice.resolveJSON(d))&&m.getBufferedState){var _e2=m.getBufferedState(this,d,E);if(null!=_e2&&void 0!==_e2){r.push({alias:f,state:_e2});break;}}if(m&&m.buildStateScript&&(s=m.buildStateScript(this,d,E))){n.push({alias:f,script:s,device:d,channel:null,status:E});break;}}if(d&&"VirtualDevices"==d["interface"]&&d.type){var h=xnm.aio.hm.VirtualDevice[d.type];if(h){var T=new h();if(T.buildStateScript&&(s=T.buildStateScript(this,d,E))){n.push({alias:f,script:s,device:d,channel:null,status:E});break;}}}if(d.channels){var S=d.channels;for(var v in S){if(S.hasOwnProperty(v)){var R=null;if("CUxD"==d["interface"]?R=xnm.aio.hm.CUxDChannel[v]:"HmIP-RF"==d["interface"]||"HmIP-HEATING"==d.type?R=xnm.aio.hm.HmIPChannel[v]:"HM-Sec-Sir-WM"!=d.type||"SWITCH_SENSOR_1"!=v&&"SWITCH_SENSOR_2"!=v?"HM-WDS30-OT2-SM-2"!=d.type||"WEATHER_1"!=v&&"WEATHER_2"!=v&&"WEATHER_3"!=v&&"WEATHER_4"!=v||(R=xnm.aio.hm.Channel.WEATHER):R=xnm.aio.hm.Channel.SWITCH_SENSOR,R||(R=xnm.aio.hm.Channel[v]),R&&R.getBufferedState){var _e3=R.getBufferedState(this._statebuffer,d,d.channels[v],E);if(null!=_e3&&void 0!==_e3){r.push({alias:f,state:_e3});break;}}if(R&&R.buildStateScript&&(s=R.buildStateScript(this,d,d.channels[v],E))){n.push({alias:f,script:s,device:d,channel:v,status:E});break;}}}}}}}this.getCloudmaticStatus(e,i,function(t,i){void 0!==e&&null!=e&&void 0!==e.reportStates&&null!=e.reportStates&&!t&&i&&i.length>0&&e.reportStates(null,i),l.getServiceMessageStatus(e,o,function(t,o){l.getCCUStatus(e,u,function(e,t){if(0===n.length){var u=l.resolveStateResponse([],[],r);return t&&(u=u?u.concat(t):t),o&&(u=u?u.concat(o):o),i&&(u=u?u.concat(i):i),void(a&&a(null,u||[]));}s=l.buildScript(n);l._doRequest(s,!0,function(e,s){var u=null;if(e)a&&a(e);else{var c=s.indexOf("<states>"),m=s.lastIndexOf("</states");if(m>c+8)try{u=s.substring(c+8,m);var p=(u=xnm.aio.hm.Util.decodeXml(u)).split("\r@@@\n");u={};for(var f=0;f<p.length;f++){var E=p[f].indexOf("=");if(E>0)u[p[f].substr(0,E)]=p[f].substr(E+1);}u=l.resolveStateResponse(n,u,r),t&&(u=u?u.concat(t):t),o&&(u=u?u.concat(o):o),i&&(u=u?u.concat(i):i),a&&a(null,u);}catch(e){a&&a(new Error("response format error"));}else a&&a(new Error("response format error"));}});});});});},getDeviceList:function getDeviceList(e){var _parseSysvar=function _parseSysvar(e,t){if(!e.valuetype)return null;var a=null;switch(e.valuetype){case"2":a="binary";break;case"4":a="float";break;case"16":a="integer";break;case"20":a="string";break;default:return null;}var n={};return n.sys=xnm.aio.hm.DM.SYS,n.id=e.name,n.type=xnm.aio.hm.DM.SYSVAR,n.address=t,n["class"]=a,n;},_parseProg=function _parseProg(e,t){if(!e.name)return null;var a={};return a.sys=xnm.aio.hm.DM.SYS,a.id=e.name,a.address=t,a.type=xnm.aio.hm.DM.PROG,a;};this._logger.log("debug","get device list from ccu:"+this.ip);var t=this;this._getDevices(function(a,n){a?e&&e(a):t._getSysvars(function(a,r){a?e&&e(a):t._getProgs(function(a,s){if(a)e&&e(a);else{var l=function(e,a,n){var r,s,l={devices:[],sysvars:[],progs:[]},o=null;if(e&&e.devices&&(r=t._parseDevices(e.devices))&&r.length>0&&(l.devices=l.devices.concat(r)),a&&a.systemvars)for(s in o=a.systemvars){o.hasOwnProperty(s)&&(r=_parseSysvar(a.systemvars[s],s))&&l.sysvars.push(r);}if(n&&n.progs)for(s in o=n.progs){o.hasOwnProperty(s)&&(r=_parseProg(n.progs[s],s))&&l.progs.push(r);}return l;}(n,r,s);e(null,l);}});});});},_getDevices:function _getDevices(e){this._logger.log("debug","list devices from ccu:"+this.ip);var t=xnm.aio.hm.MHMCCU._SCRIPT_GET_DEVICES,a=this;this._doRequest(t,!0,function(t,n){if(t)a._logger.log("debug","list hm devices error:"+t.stack),e&&e(t);else{a._logger.log("debug",n);var r=a._xml2json(n);e(null,r);}},24e4);},_getSysvars:function _getSysvars(e){this._logger.log("debug","list variables from ccu:"+this.ip);var t=xnm.aio.hm.MHMCCU._SCRIPT_GET_SYSVARS,a=this;this._doRequest(t,!0,function(t,n){if(t)a._logger.log("debug","list variables error:"+t.stack),e&&e(t);else{a._logger.log("debug",n);var r=a._xml2json(n);e(null,r);}},24e4);},_getProgs:function _getProgs(e){this._logger.log("debug","list programs from ccu:"+this.ip);var t=xnm.aio.hm.MHMCCU._SCRIPT_GET_PROGS,a=this;this._doRequest(t,!0,function(t,n){if(t)a._logger.log("debug","list programs error:"+t.stack),e&&e(t);else{a._logger.log("debug",n);var r=a._xml2json(n);e(null,r);}},24e4);},_xml2json:function _xml2json(e){if(!e)return null;var t=e.indexOf("<res>"),a=e.lastIndexOf("</res>");if(a<=t+5)return null;try{var n=e.substring(t+5,a);return n=xnm.aio.hm.Util.decodeXml(n),n=this._processJsonStr(n),JSON.parse(n);}catch(a){return this._logger.log("error",a.message),null;}},_processJsonStr:function _processJsonStr(e){var t=e.split("#[");if(1==t.length)return e;for(var a=1;a<t.length;a++){var n=t[a].indexOf("]#");if(-1!=n){var r=t[a].substr(0,n);r=JSON.stringify(r),t[a]=t[a].substr(n+2),t[a]=r+t[a];}}var s=t.join("");return s=s.replace(/\,(?!\s*?[\{\[\"\'\w])/g,"");},_parseDevices:function _parseDevices(e){var t,a=e,n=[];for(var r in a){a.hasOwnProperty(r)&&(t=this._parseDevice(e[r]))&&t.length>0&&(n=n.concat(t));}return n;},_parseDevice:function _parseDevice(e){var t=["HM-LC-Sw1-Ba-PCB","HM-LC-Sw4-Ba-PCB","HM-Sen-LI-O","HM-Sec-SD","HM-Sec-SD-Generic","HM-Sec-Key","HM-Sec-SCo","HM-Sec-MDIR","HM-Sen-MDIR-O","HM-WDS40-TH-I","HM-WDS40-TH-I-2","HM-WDS10-TH-O","HM-WDS100-C6-O-2","HM-WDS100-C6-O","HM-PB-6-WM55","HM-PB-2-WM55","HM-PB-4Dis-WM","HM-SwI-3-FM","HM-SCI-3-FM","HM-PBI-4-FM","HM-Sec-MDIR-2","HM-PB-2-WM55-2","HM-PB-2-FM","HM-OU-CFM-TW"],_isChannelUnknow=function _isChannelUnknow(e){return"WRAPPER"!=e&&"VIR-LG-RGBW-DIM-CH"!=e&&(!xnm.aio.hm.CHANNEL[e]||"VIRTUAL_DIMMER"==e);},_getMappedChannelName=function _getMappedChannelName(e,t){if("CUxD"==e["interface"])if("WEATHER"==t.hsstype){if(t.datapoints&&function(e,t){for(var a=0;a<t.length;a++){if(t[a]==e)return!0;}return!1;}("BRIGHTNESS_WEST",t.datapoints))return"ENOCEAN_WEATHER2";}else if("SENSOR"==t.hsstype){if(e.channels.WEATHER&&e.channels.CLIMATECONTROL_REGULATOR&&e.channels.SWITCH)return"ENOCEAN_SENSOR_ERROR";}else if("SWITCH"==t.hsstype&&e.channels.SWITCH&&e.channels.POWERMETER)return"ENOCEAN_Bidi_Switch2";return null;};if(!e.channels)return null;if(!e["interface"])return null;if("VirtualDevices"==e["interface"]&&xnm.aio.hm.VirtualDevice)return xnm.aio.hm.VirtualDevice.parseDevice(e);if("HmIP-RF"==e["interface"])return xnm.aio.hm.HmIPDevice.parseDevice(e);var a=[];if("BidCos-RF"==e["interface"]){if(a=xnm.aio.hm.BidCosDevice.parseDevice(e))return a;a=[];}var n,r,s=function(e){var t=e.channels;if(!t)return 0;var a,n=0,r=0,s={};for(var l in t){if(t.hasOwnProperty(l)){if(!(a=e.channels[l]).address)continue;var o=a.address.indexOf(":");if(-1===o)continue;if(0==a.address.substring(o+1))continue;if(!a.hsstype)continue;if(_isChannelUnknow(a.hsstype))continue;n+=1,s[a.hsstype]=!0;}}if(0==n)return 0;for(var u in s){s.hasOwnProperty(u)&&(r+=1);}return n>r?n:1;}(e);if(0==s)return null;if(s>1&&"CUxD"!=e["interface"])return function(e){var a,n,r=[],s=e.channels;for(var l in s){if(s.hasOwnProperty(l)){if(!(a=e.channels[l]).address)continue;var o=a.address.indexOf(":");if(-1===o)continue;var u=a.address.substring(o+1);if(0==u&&-1==t.indexOf(e.hsstype))continue;if(!a.hsstype)continue;if(!xnm.aio.hm.CHANNEL[a.hsstype])continue;(n={}).sys=xnm.aio.hm.DM.SYS,n.id=a.name?a.name:e.name,n.type=e.hsstype,n.address=a.address,n.rfAddr=e.rfAddr,n["interface"]=e["interface"],n.channels={},n.channels[a.hsstype]={id:a.name,address:u,room:a.room,group:a.func,datapoints:[]},r.push(n);}}return r;}(e);(r={}).sys=xnm.aio.hm.DM.SYS,r.id=e.name,r.type=e.hsstype,r.address=e.address,r.rfAddr=e.rfAddr,r["interface"]=e["interface"],r.channels={};var l=e.channels,o=!1;for(var u in l){if(l.hasOwnProperty(u)){if(!(n=e.channels[u]).address)continue;var i=n.address.indexOf(":");if(-1===i)continue;var c=n.address.substring(i+1);if(0==c&&-1==t.indexOf(e.hsstype))continue;if(!n.hsstype)continue;if("CUxD"==r["interface"]){if(!xnm.aio.hm.CUxDCHANNEL[n.hsstype]&&!xnm.aio.hm.CHANNEL[n.hsstype])continue;}else if(_isChannelUnknow(n.hsstype))continue;if(r.channels[n.hsstype]){var m=r.channels[n.hsstype],p=m.id,f=m.address,E=_getMappedChannelName(r,n);if(E)n.hsstype=E;else{if(-1==r.address.indexOf(":")&&1==Object.keys(r.channels).length&&(r.address=r.address+":"+r.channels[n.hsstype].address),"CUxD"==r["interface"]){var d=xnm.aio.hm.MHMCCU._resolveCUxDType(r);d&&(r.cuxd=d);}r.id=p||f,a.push(r),(r={}).sys=xnm.aio.hm.DM.SYS,r.id=e.name,"CUxD"==e["interface"]&&n.name&&(r.id=n.name),r.type=e.hsstype,r.address=e.address+":"+c,r["interface"]=e["interface"],r.channels={};}}o=!0;var h,T,S,v={id:n.name,address:c,room:n.room,group:n.func,datapoints:[]},R=v.datapoints;if("CUxD"==r["interface"])v.datapoints=n.datapoints;else for(h in n.datapoints){n.datapoints.hasOwnProperty(h)&&(T={name:(S=n.datapoints[h]).name,valuetype:S.valuetype,operations:S.operations},R.push(T));}r.channels[n.hsstype]=v;}}if(o&&a.push(r),"CUxD"==r["interface"]){var _e4=xnm.aio.hm.MHMCCU._resolveCUxDType(r);_e4&&(r.cuxd=_e4);}return a;},getCloudmaticStatus:function getCloudmaticStatus(e,t,a){if(!t||t.length<=0)a&&a(null,[]);else{for(var n=[],r=0;r<t.length;r++){var s=t[r];if(s){var l=s.id,o=s.status;if(l&&o&&"cloudmaticState"===o.value)n.push({id:l,status:this._cloudmaticState});}}a(null,n);}},getCCUStatus:function getCCUStatus(e,t,a){if(!t||t.length<=0)a&&a(null,[]);else{this._logger.log("debug","get ccu states:"+this.ip);this._doRequest('var ccutime=system.Date("%H:%M:%S").ToString();',!0,function(e,n){if(e)a&&a(e);else{if(!n)return null;var r=[],s=n.indexOf("<ccutime>"),l=n.lastIndexOf("</ccutime>");if(l<=s+9)return null;var o=n.substring(s+9,l);o=xnm.aio.hm.Util.decodeXml(o);for(var u=0;u<t.length;u++){var i=t[u];if(i){var c=i.id,m=i.status;if(c&&m&&"ccuTime"===m.value)r.push({id:c,status:o});}}a&&a(null,r);}});}},getServiceMessageStatus:function getServiceMessageStatus(e,t,a){!t||t.length<=0?a&&a(null,[]):this.getServiceMessage(function(e,n){if(e)a&&a(e);else if(n){for(var r="",s=[],l=0;l<n.length;l++){if(n[l].name&&n[l].error){var o="";switch(n[l].error){case"LOWBAT":o="low battery";break;case"UNREACH":o="communication is interrupted";break;case"STICKY_UNREACH":o="communication was interrupted";break;case"FAULT_REPORTING":o="reporing failure";break;case"ERROR":o="failure";break;default:o=n[l].error;}r+=n[l].name+": "+o+"\n";}}for(var u=0;u<t.length;u++){var i=t[u];if(i){var c=i.id,m=i.status;if(c&&m&&"serviceMsg"===m.value)s.push({id:c,status:r});}}a(null,s);}else a&&a(null,[]);});},getServiceMessage:function getServiceMessage(e){var t=xnm.aio.hm.MHMCCU._SCRIPT_GET_SEVICE_MESSAGE;this._doRequest(t,!0,function(t,a){if(t)e&&e(t);else{var n=function(e){if(!e)return null;var t=e.indexOf("<res>"),a=e.lastIndexOf("</res>");if(a<=t+5)return null;var n=e.substring(t+5,a);return n=xnm.aio.hm.Util.decodeXml(n),JSON.parse(n);}(a);e(null,n);}});},toJSON:function toJSON(){return{sys:xnm.aio.hm.DM.SYS,ip:this.ip,port:this.port,uuid:this.uuid,username:this.username,password:this.password,tclport:this.tclport,cloudmatic:this.cloudmatic,type:this.type};},equalsTo:function equalsTo(e){return!!e&&e instanceof xnm.aio.hm.MHMCCU&&this.ip==e.ip&&this.port==e.port&&this.username==e.username&&this.password==e.password;},_doRequestMarked:function _doRequestMarked(e,t,a){this._doRequest(e,t,function(e,t){a&&a.execute.call(a,e,t);},5e3);},_doRequest:function _doRequest(e,t,a,n){if("on"!=this._cloudmaticState){var r=this.port,s="/api/homematic.cgi";t&&(r=this.tclport,s="/tclrega.exe");var l=a,o={host:this.ip,port:r,path:s,method:"POST",headers:{"Content-Type":'text/xml; charset="ISO-8859-1"',"Content-Length":e.length,"User-Agent":"mediola",Connection:"close"}};(this.username||this.password)&&(o.auth=(this.username?this.username:"")+":"+(this.password?this.password:""),o.headers.Authorization="Basic "+new Buffer((this.username?this.username:"")+":"+(this.password?this.password:"")).toString("base64"));var u=JSON.parse(JSON.stringify(o));u.headers&&u.headers.Authorization&&(u.headers.Authorization="*********"),u.auth&&(u.auth="********");var i=this._reqNo++;this._logger.log("trace","do request ["+i+"]:"+JSON.stringify(u));var c=this,m="",p=require("http").request(o,function(e){e.setEncoding("binary"),e.on("data",function(e){m+=e;}),e.on("end",function(){var t;c._logger.log("trace","receive code ["+i+"]:"+e.statusCode+" response:"+m),200!=e.statusCode&&(t=new Error("post request failed with status code:"+e.statusCode)),l&&l(t,m),l=null;});});if(p.setEncoding&&p.setEncoding("ISO-8859-1"),p.setTimeout){var f=6e4;null!=n&&void 0!==n||(n=0),(f=(n=parseInt(n))>=0?n:f)>0&&p.setTimeout(f,function(){c._logger.log("trace","do request timeout"),p.abort();});}p.on&&"function"==typeof p.on&&p.on("error",function(e){c._logger.log("trace","do request error:"+(e?e.message:"")),e||(e=new Error("http request error")),l&&l(e),l=null;}),this._logger.log("trace","send body ["+i+"]:"+e),p.write(e),p.end();}else this._doCloudmaticRequest(e,t,a,n);},_doCloudmaticRequest:function _doCloudmaticRequest(e,t,a,n){if(!(this.cloudmatic&&this.cloudmatic.id&&this.cloudmatic.username&&this.cloudmatic.password))return void(a&&a(new Error("cloudmatic config invalid")));var r=this.cloudmatic.id+".meine-homematic.de",s=this.port,l="/api/homematic.cgi";t&&(s=this.tclport,l="/tclrega.exe");var o=a,u={host:r,port:s,path:l,method:"POST",headers:{"Content-Type":'text/xml; charset="ISO-8859-1"',"Content-Length":e.length,"User-Agent":"mediola",Connection:"close"}};(this.cloudmatic.username||this.cloudmatic.password)&&(u.auth=(this.cloudmatic.username?this.cloudmatic.username:"")+":"+(this.cloudmatic.password?this.cloudmatic.password:""),u.headers.Authorization="Basic "+new Buffer((this.cloudmatic.username?this.cloudmatic.username:"")+":"+(this.cloudmatic.password?this.cloudmatic.password:"")).toString("base64"));var i=JSON.parse(JSON.stringify(u));i.headers&&i.headers.Authorization&&(i.headers.Authorization="*********"),i.auth&&(i.auth="********");var c=this._reqNo++;this._logger.log("trace","CloudMatic request [".concat(c,"]: ")+JSON.stringify(i));var m=this,p="",f=require("http").request(u,function(e){e.setEncoding("binary"),e.on("data",function(e){p+=e;}),e.on("end",function(){var t;m._logger.log("trace","CloudMatic status code [".concat(c,"] ")+e.statusCode+" with response: "+p),200!=e.statusCode&&(t=new Error("POST request failed with status code: "+e.statusCode)),o&&o(t,p),o=null;});});f.setEncoding&&f.setEncoding("ISO-8859-1");var E=-1;if(f.setTimeout){var d=6e4;null!=n&&void 0!==n||(n=0),n=parseInt(n),(d=n>0?n:d)<1e4&&(d=1e4),d>0&&f.setTimeout(d,function(){E=d,f.abort();});}f.on&&"function"==typeof f.on&&f.on("error",function(e){e||(e=E>-1?new Error("HTTP request error (CloudMatic) [".concat(c,"]: Timed out after ").concat(E,"ms.")):new Error("HTTP request error (CloudMatic) [".concat(c,"]: Reason unknown"))),o&&o(e),o=null;}),this._logger.log("trace","Send CloudMatic body [".concat(c,"]: ")+e),f.write(e),f.end();}},xnm.aio.hm.MHMCCU._resolveCUxDType=function(e){var _hasDataPoint=function _hasDataPoint(e,t){for(var a=0;a<t.length;a++){if(t[a]==e)return!0;}return!1;};if(!e.type)return null;if(!e.channels)return null;if(e.channels.SWITCH&&e.channels.POWERMETER)return"EnOcean_Bidi_Switch";if(e.channels.WEATHER&&e.channels.CLIMATECONTROL_REGULATOR&&e.channels.CLIMATECONTROL_VENT_DRIVE)return"EnOcean_Actuator";if(e.channels.WEATHER&&e.channels.CLIMATECONTROL_REGULATOR&&e.channels.SWITCH&&e.channels.SENSOR)return"EnOcean_Airconditioner";if(e.channels.MOTION_DETECTOR&&e.channels.WEATHER&&e.channels.POWER)return"EnOcean_Motion";if(e.channels.KEY&&e.channels.SENSOR&&e.channels.POWER)return"EnOcean_PioTek_Tracker";if(e.channels.WEATHER&&e.channels.CLIMATECONTROL_REGULATOR&&e.channels.SWITCH)return"Thermostat_Device";if(e.channels.WEATHER&&e.channels.CLIMATECONTROL_REGULATOR)return"FHT80b";if(e.channels.CLIMATECONTROL_VENT_DRIVE)return"FHT80v";if(e.channels.CAPACITIVE_FILLING_LEVEL_SENSOR)return"KFM_100_S";if(e.channels.WRAPPER)return"Transform_Device";if(e.channels.KEY){if(_hasDataPoint("KEYPRESS_TIME",e.channels.KEY.datapoints))return"EnOcean_Key";if(_hasDataPoint("CMD_RUNS",e.channels.KEY.datapoints))return"System_Key";if(_hasDataPoint("MOTION",e.channels.KEY.datapoints))return"Universal_Key";}else if(e.channels.SWITCH){if(_hasDataPoint("EVENTCTR",e.channels.SWITCH.datapoints))return"FS20_Switch_Sensor";if(_hasDataPoint("TOGGLE",e.channels.SWITCH.datapoints))return"FS20_Switch";if(_hasDataPoint("CMD_RUNS",e.channels.SWITCH.datapoints))return"System_Switch";if(_hasDataPoint("MOTION",e.channels.SWITCH.datapoints))return"Universal_Switch";if(_hasDataPoint("ENERGY_COUNTER",e.channels.SWITCH.datapoints)&&_hasDataPoint("POWER",e.channels.SWITCH.datapoints))return"EnOcean_Switch";}else{if(e.channels.DIMMER)return _hasDataPoint("TOGGLE",e.channels.DIMMER.datapoints)?"FS20_Dimmer":_hasDataPoint("CMD_RUNS",e.channels.DIMMER.datapoints)?"System_Dimmer":_hasDataPoint("MOTION",e.channels.DIMMER.datapoints)?"Universal_Dimmer":_hasDataPoint("SET_STATE",e.channels.DIMMER.datapoints)?"System_Multi_Dimmer":_hasDataPoint("ENERGY_COUNTER",e.channels.DIMMER.datapoints)&&_hasDataPoint("POWER",e.channels.DIMMER.datapoints)?"EnOcean_Dimmer":"FHT_Multiventil";if(e.channels.BLIND){if(_hasDataPoint("CMD_RUNS",e.channels.BLIND.datapoints))return"System_Blind";if(_hasDataPoint("MOTION",e.channels.BLIND.datapoints))return"Universal_Blind";if(_hasDataPoint("WORKING",e.channels.BLIND.datapoints)&&_hasDataPoint("DIRECTION",e.channels.BLIND.datapoints))return"EnOcean_Blind";}else{if(e.channels.WEATHER)return _hasDataPoint("HUMIDITYF",e.channels.WEATHER.datapoints)?"Temp/Hum_Sensor":_hasDataPoint("RAINING",e.channels.WEATHER.datapoints)&&_hasDataPoint("HUMIDITY",e.channels.WEATHER.datapoints)?"KS200/300":_hasDataPoint("RAINING",e.channels.WEATHER.datapoints)||_hasDataPoint("BRIGHTNESS_WEST",e.channels.WEATHER.datapoints)?"EnOcean_WeatherStation":_hasDataPoint("BRIGHTNESS",e.channels.WEATHER.datapoints)&&_hasDataPoint("MEDIAN",e.channels.WEATHER.datapoints)?"EnOcean_Brightness":"Temperature_Sensor";if(e.channels.ROTARY_HANDLE_SENSOR)return"EnOcean_Handle";if(e.channels.SHUTTER_CONTACT)return _hasDataPoint("EVENTCTR",e.channels.SHUTTER_CONTACT.datapoints)?"FS20_Contact":_hasDataPoint("MOTION",e.channels.SHUTTER_CONTACT.datapoints)?"Universal_Shutter":"EnOcean_Contact";if(e.channels.MOTION_DETECTOR){if(_hasDataPoint("EVENTCTR",e.channels.MOTION_DETECTOR.datapoints))return"FS20_Motion";if(_hasDataPoint("MOTION",e.channels.MOTION_DETECTOR.datapoints))return"Universal_Motion";}else{if(e.channels.SENSOR)return _hasDataPoint("INFO",e.channels.SENSOR.datapoints)?"M-BUS_EnergyCam":_hasDataPoint("EVENTCTR",e.channels.SENSOR.datapoints)?"FS20_Sensor":_hasDataPoint("MAX5MINUTES",e.channels.SENSOR.datapoints)?"EM1000":_hasDataPoint("LAST_TICKS",e.channels.SENSOR.datapoints)?"ESA1000/2000":_hasDataPoint("DISTANCE",e.channels.SENSOR.datapoints)?"RS232_Water_Sensor":_hasDataPoint("COUNTER",e.channels.SENSOR.datapoints)?"HM-Sec-SC"==e.type?"HMS_100_Contact":"HM-Sec-WDS"==e.type?"HMS_100_W/WD":"Security_Sensor":"FHT_Contact";if(e.channels.DANGER){if(_hasDataPoint("EVENTCTR",e.channels.DANGER.datapoints))return"FS20_Alarm";if(_hasDataPoint("MOTION",e.channels.DANGER.datapoints))return"Universal_Alarm";}else{if(e.channels.EVENT_INTERFACE)return"FS20_Event_Trigger";if(e.channels.RELAIS)return"FS20_Relais";if(e.channels.WRAPPER)return"Transform_Device";if(e.channels.SYSTEM)return"System_Multi_Dimmer";}}}}return null;},xnm.aio.hm.MHMCCU._getDataPointAddress=function(e,t,a){if(!e||!e["interface"]||!e.address)return null;if(void 0===t.address||null==t.address)return null;if(!a)return null;var n=e.address,r=e.address.indexOf(":");return-1!=r&&(n=e.address.substring(0,r)),e["interface"]+"."+n+":"+t.address+"."+a;},xnm.aio.hm.MHMCCU._SCRIPT_GET_PROGS='!# Get the device list\r\nstring res = \'{\';\r\n\r\nstring sDevId;\r\nstring sChnId;\r\nstring sDptId;\r\nstring sRoomId;\r\nstring sFunctionId;\r\nobject oDevice;\r\nobject oChannel;\r\nobject oDatapoint;\r\nobject oRoom;\r\nstring sDevInterfaceId;\r\nstring sDevInterfaceName;\r\nboolean dFirst = true;\r\nboolean cFirst = true;\r\nboolean dpFirst = true;\r\nboolean hasRoom = true;\r\ninteger dptCount = 0;\r\n\r\nres = res # \'"progs":{\';\r\ndFirst = true;\r\nforeach(sDevId, dom.GetObject(ID_PROGRAMS).EnumUsedIDs()) {\r\n\tif (dFirst) {\r\n\t\tdFirst=false;\r\n\t} else {\r\n\t\tres = res # \',\';\r\n\t}\r\n\toDevice = dom.GetObject(sDevId);\r\n\r\n  res = res # \'"\' # sDevId # \'":{"name":#[\' # oDevice.Name();\r\n  res = res # \']#,"active":"\' # oDevice.Active() # \'"\';\r\n\r\n  res = res # \'}\';\r\n}\r\n\r\nres = res # \'}}\';\r\nsDevId="";\r\nsChnId="";\r\nsDptId="";\r\nsRoomId="";\r\nsFunctionId="";\r\noDevice="";\r\noChannel="";\r\noDatapoint="";\r\noRoom="";\r\nsDevInterfaceId="";\r\nsDevInterfaceName="";\r\ndFirst="";\r\ncFirst="";\r\ndpFirst="";\r\nsValue="";\r\n',xnm.aio.hm.MHMCCU._SCRIPT_GET_SYSVARS='!# Get the device list\r\nstring res = \'{\';\r\n\r\nstring sDevId;\r\nstring sChnId;\r\nstring sDptId;\r\nstring sRoomId;\r\nstring sFunctionId;\r\nobject oDevice;\r\nobject oChannel;\r\nobject oDatapoint;\r\nobject oRoom;\r\nstring sDevInterfaceId;\r\nstring sDevInterfaceName;\r\nboolean dFirst = true;\r\nboolean cFirst = true;\r\nboolean dpFirst = true;\r\nboolean hasRoom = true;\r\ninteger dptCount = 0;\r\n\r\nres = res # \'"systemvars":{\';\r\ndFirst = true;\r\nstring sValue;\r\nforeach(sDevId, dom.GetObject(ID_SYSTEM_VARIABLES).EnumUsedIDs()) {\r\n\tif (dFirst) {\r\n\t\tdFirst=false;\r\n\t} else {\r\n\t\tres = res # \',\';\r\n\t}\r\n\toDevice = dom.GetObject(sDevId);\r\n\r\n  res = res # \'"\' # sDevId # \'":{"name":#[\' # oDevice.Name();\r\n  res = res # \']#,"valuetype":"\' # oDevice.ValueType();\r\n  res = res # \'"}\';\r\n}\r\nres = res # \'}\';\r\nres = res # \'}\';\r\nsDevId="";\r\nsChnId="";\r\nsDptId="";\r\nsRoomId="";\r\nsFunctionId="";\r\noDevice="";\r\noChannel="";\r\noDatapoint="";\r\noRoom="";\r\nsDevInterfaceId="";\r\nsDevInterfaceName="";\r\ndFirst="";\r\ncFirst="";\r\ndpFirst="";\r\nsValue="";\r\n',xnm.aio.hm.MHMCCU._SCRIPT_GET_DEVICES='!# Get the device list\r\nstring res = \'{\';\r\nstring sDevId;\r\nstring sChnId;\r\nstring sDptId;\r\nstring sRoomId;\r\nstring sFunctionId;\r\nobject oDevice;\r\nobject oChannel;\r\nobject oDatapoint;\r\nobject oRoom;\r\nobject oDevInterface;\r\nstring sDevInterfaceId;\r\nstring sDevInterfaceName;\r\nboolean dFirst = true;\r\nboolean cFirst = true;\r\nboolean dpFirst = true;\r\nboolean hasRoom = true;\r\ninteger dptCount = 0;\r\nres = res # \'"devices":{\';\r\nforeach(sDevId, root.Devices().EnumUsedIDs()) {\r\nif (dFirst) {\r\ndFirst=false;\r\n} else {\r\nres = res # \',\';\r\n}\r\noDevice = dom.GetObject(sDevId);\r\nsDevInterfaceId = oDevice.Interface();\r\noDevInterface = dom.GetObject(sDevInterfaceId);\r\nres = res # \'"\' # sDevId # \'":{"name":#[\' # oDevice.Name();\r\nres = res # \']#,"typename":"\' # oDevice.TypeName();\r\nres = res # \'","hsstype":"\' # oDevice.HssType();\r\nres = res # \'","address":"\' # oDevice.Address();\r\nif (oDevInterface) {\r\nsDevInterfaceName = oDevInterface.Name();\r\nres = res # \'","interface":"\' # sDevInterfaceName;\r\n}\r\nelse {\r\nsDevInterfaceName = "";\r\nres = res # \'","interface":"\';\r\n}\r\nres = res # \'","channels":{\';\r\ncFirst = true;\r\nforeach(sChnId, oDevice.Channels()) {\r\nif (cFirst) {\r\ncFirst=false;\r\n} else {\r\nres = res # \',\';\r\n}\r\nres = res # \'"\' # sChnId# \'":{\';\r\noChannel = dom.GetObject(sChnId);\r\nres = res # \'"hsstype":"\' # oChannel.HssType();\r\nres = res # \'","name":#[\' # oChannel.Name();\r\nsFunctionId = oChannel.ChnFunction();\r\nres = res # \']#,"func":"\' # dom.GetObject(sFunctionId);\r\nres = res # \'","room":[\';\r\nhasRoom = false;\r\nforeach(sRoomId, oChannel.ChnRoom()) {\r\noRoom = dom.GetObject(sRoomId);\r\nres = res # \'#[\' # oRoom.Name();\r\nres = res # \']#,\';\r\nhasRoom = true;\r\n}\r\nif (hasRoom) {\r\nres = res.Substr(0, res.Length()-1);\r\n}\r\nres = res # \']\';\r\nres = res # \',"address":"\' # oChannel.Address() # \'"\';\r\nif (sDevInterfaceName == \'CUxD\') {\r\nres = res # \',"datapoints":[\';\r\ndptCount = 0;\r\nforeach(sDptId, oChannel.DPs()) {\r\noDatapoint = dom.GetObject(sDptId);\r\nif (oDatapoint.TypeName() == "HSSDP") {\r\ndptCount = dptCount + 1;\r\n}\r\n}\r\nforeach(sDptId, oChannel.DPs()) {\r\noDatapoint = dom.GetObject(sDptId);\r\nif (oDatapoint.TypeName() == "HSSDP") {\r\nres = res # \'"\' # oDatapoint.HssType() # \'"\';\r\ndptCount = dptCount - 1;\r\nif (dptCount > 0) {\r\nres = res # \',\';\r\n}\r\n}\r\n}\r\nres = res # \']\';\r\n}\r\nres = res # \'}\';\r\n}\r\nres = res # \'}}\';\r\n}\r\nres = res # \'}\';\r\nres = res # \'}\';\r\nsDevId="";\r\nsChnId="";\r\nsDptId="";\r\nsRoomId="";\r\nsFunctionId="";\r\noDevice="";\r\noChannel="";\r\noDatapoint="";\r\noRoom="";\r\nsDevInterfaceId="";\r\nsDevInterfaceName="";\r\ndFirst="";\r\ncFirst="";\r\ndpFirst="";\r\nsValue="";',xnm.aio.hm.MHMCCU._SCRIPT_GET_SEVICE_MESSAGE='! get service message from ccu\r\n! message errors:\r\n! FAULT_REPORTING: communication failure\r\n! STICKY_UNREACH: communication was interrupted\r\n! UNREACH: communication is interrupted\r\n! ERROR: failure\r\n!\r\n\r\nstring sTmp;\r\nstring sdesc;\r\nboolean hasMessage;\r\nobject sdev;\r\nobject ch;\r\nobject trigDP;\r\nobject oTmp;\r\nobject oTmpArray = dom.GetObject(ID_SERVICES);\r\nstring res = "[";\r\nif(oTmpArray) {\r\n  foreach(sTmp, oTmpArray.EnumIDs()){\r\n    object oTmp = dom.GetObject(sTmp);\r\n    if(oTmp){\r\n      if( oTmp.IsTypeOf( OT_ALARMDP ) && ( oTmp.AlState() == asOncoming ) ){\r\n        hasMessage = true;\r\n        trigDP = dom.GetObject(oTmp.AlTriggerDP());\r\n        ch = dom.GetObject(trigDP.Channel());\r\n        sdev = dom.GetObject(ch.Device());\r\n        sdesc = trigDP.HssType();\r\n        res = res # \'{"name":"\'+sdev.Name()#\'","channel":"\'#ch.Address()#\'","error":"\'+sdesc+\'"},\';\r\n      }\r\n    }\r\n  }\r\n}\r\nif (hasMessage) {\r\n  res = res.Substr(0, res.Length()-1);\r\n}\r\nres = res # "]";\r\nsTmp="";\r\nsdesc="";\r\nhasMessage="";\r\nsdev="";\r\nch="";\r\ntrigDP="";\r\noTmp="";\r\noTmpArray="";',xnm.aio.hm.TYPE={"HM-PB-4Dis-WM":0,"ZEL STG RM DWT 10":0,"263 155":0,"HM-PB-4Dis-WM-2":0,ASH550I:1,ASH550:1,"HM-WDS10-TH-O":1,"263 158":1,"HM-WDS20-TH-O":1,"HM-WDS40-TH-I":1,"263 157":1,"IS-WDS-TH-OD-S-R3":1,"HM-WDS40-TH-I-2":1,"HM-LC-Bl1-SM":2,"HM-LC-Bl1-FM":2,"HM-LC-Bl1-PB-FM":2,"ZEL STG RM FEP 230V":2,"263 146":2,"HM-LC-BlX":2,"HM-LC-Bl1-SM-2":2,"HM-LC-Bl1-FM-2":2,"HM-LC-Bl1PBU-FM":2,"263 147":2,"HM-CC-RT-DN":3,"HM-CC-RT-DN-BoM":4,"HM-CC-TC":5,"ZEL STG RM FWT":5,"HM-CC-VD":6,"ZEL STG RM FSA":6,CENTRAL:7,"HM-RCV-50":7,"HM-OU-CF-Pl":8,"HM-OU-CFM-Pl":9,"HM-OU-CFM-TW":9,"HM-OU-CM-PCB":10,"HM-LC-Dim1L-Pl":11,"HM-LC-Dim1L-Pl-2":11,"HM-LC-Dim1L-CV":11,"263 132":11,"HM-LC-Dim2L-CV":11,"HM-LC-Dim2L-SM":11,"HSS-DX":11,"HM-LC-Dim1L-Pl-3":11,"HM-LC-Dim1L-CV-2":11,"HM-LC-Dim2L-SM-2":11,"HM-LC-Dim1PWM-CV":12,"HM-LC-Dim1PWM-CV-2":12,"HM-LC-Dim1TPBU-FM":13,"HM-LC-Dim1TPBU-FM-2":13,"263 133":13,"HM-LC-Dim1T-Pl":13,"HM-LC-Dim1T-CV":13,"HM-LC-Dim1T-FM":13,"HM-LC-Dim1T-Pl-3":13,"HM-LC-Dim1T-CV-2":13,"HM-LC-Dim1T-FM-2":13,"HM-LC-Dim2T-SM":13,"HM-LC-Dim2T-SM-2":13,"HM-LC-Dim1T-Pl-2":13,"263 134":13,"HM-Dis-WM55":14,"HM-MOD-EM-8":15,"HM-ES-PMSw1-Pl":16,"HM-ES-PMSw1-Pl-DN-R1":16,"HM-ES-PMSw1-Pl-DN-R2":16,"HM-ES-PMSw1-Pl-DN-R3":16,"HM-ES-PMSw1-Pl-DN-R4":16,"HM-ES-PMSw1-Pl-DN-R5":16,"HM-ES-PMSw1-DR":16,"HM-ES-PMSw1-SM":16,"HM-Dis-TD-T":17,"HM-LC-Sw4-Ba-PCB":55,"HM-MOD-Re-8":26,"HM-LC-Sw1-Ba-PCB":55,"HM-Sec-Key":18,"HM-Sec-Key-S":18,"HM-Sec-Key-O":18,"HM-Sec-Key-Generic":18,KS550:19,KS888:19,KS550Tech:19,KS550LC:19,"HM-WDS100-C6-O":19,"HM-WDS100-C6-O-2":19,"HM-OU-LED16":20,"HM-OU-X":20,"HM-PB-2-WM55-2":21,"HM-PB-2-WM55":21,"ZEL STG RM WT 2":21,"263 135":21,"HM-PB-2-FM":21,"HM-PBI-4-FM":21,"ZEL STG RM FST UP4":21,"263 145":21,"HM-PBI-X":21,"HM-RC-4-2":21,"HM-RC-4-3":21,"HM-PB-6-WM55":21,"HM-RC-8":21,"HM-RC-4":21,"HM-RC-4-B":21,"HM-RC-P1":21,"HM-RC-Sec3":21,"HM-RC-Sec3-B":21,"HM-RC-Key3":21,"HM-RC-Key3-B":21,"HM-PB-4-WM":21,"HM-PB-2-WM":21,"RC-H":21,atent:21,"ZEL STG RM HS 4":21,"HM-RC-X":21,"BRC-H":21,"HM-RC-SB-X":21,"HM-RC-12":21,"HM-RC-12-B":21,"HM-RC-12-SW":21,"HM-RC-Key4-2":22,"HM-RC-Sec4-2":22,"HM-RC-19":23,"HM-RC-19-B":23,"HM-RC-19-SW":23,"HM-Sen-RD-O":24,"HM-Sec-RHS":25,"ZEL STG RM FDK":25,"HM-Sec-xx":25,"HM-LC-Sw1-Pl":26,"HM-LC-Sw1-Pl-2":26,"HM-LC-Sw1-SM":26,"HM-LC-Sw2-SM":26,"HM-LC-Sw4-SM":26,"HM-LC-Sw4-PCB":26,"HM-LC-Sw4-WM":26,"HM-LC-Sw1-FM":26,"263 130":26,"HM-LC-Sw2-FM":26,"HM-LC-Sw1-PB-FM":26,"HM-LC-Sw2-PB-FM":26,"HM-LC-Sw4-DR":26,"HM-LC-Sw2-DR":26,"ZEL STG RM FZS":26,"ZEL STG RM FZS-2":26,"HM-LC-SwX":26,"HM-LC-Sw1PBU-FM":26,"263 131":26,"HM-LC-Sw1-Pl-3":26,"HM-LC-Sw1-SM-2":26,"HM-LC-Sw4-SM-2":26,"HM-LC-Sw4-PCB-2":26,"HM-LC-Sw4-WM-2":26,"HM-LC-Sw1-FM-2":26,"HM-LC-Sw2-FM-2":26,"HM-LC-Sw4-DR-2":26,"HM-LC-Sw2-DR-2":26,"HM-LC-Sw2PBU-FM":26,"HM-LC-Sw1-Pl-OM54":26,"HM-LC-Sw1-SM-ATmega168":26,"HM-LC-Sw4-SM-ATmega168":26,S550IA:27,"HM-WDS30-T-O":27,"HM-Sec-SC":28,"ZEL STG RM FFK":28,"HM-Sec-SC-2":28,"HM-SCI-3-FM":29,"HM-CC-SCD":30,"263 160":30,"HM-Sec-MDIR-2":31,"HM-Sec-MDIR":31,"263 162":31,"HM-Sec-MD":31,"HM-Sec-SD":32,"HM-Sec-SD-Generic":32,"HM-Sec-SD-2":58,"HM-Sec-SFA-SM":33,"HM-Sen-MDIR-SM":34,"HM-Sen-MDIR-O":34,"HM-MD":34,"HM-Sen-MDIR-O-2":34,"HM-Sen-EP":35,"HM-Sen-X":35,"HM-Sen-Wa-Od":36,"HM-SwI-3-FM":37,"ZEL STG RM FSS UP3":37,"263 144":37,"HM-SwI-X":37,"HM-TC-IT-WM-W-EU":38,"HM-Sec-TiS":39,"HM-WDS30-OT2-SM":40,"HM-WDS30-OT2-SM-2":40,"HM-Sec-WDS":41,"HM-Sec-WDS-2":41,"HM-Sec-Win":42,"HM-Sec-Win-Generic":42,WS550:43,WS888:43,WS550Tech:43,WS550LCB:43,WS550LCW:43,"HM-WDC7000":43,"HMW-IO-12-Sw14-DR":44,"HMW-IO-12-Sw7-DR":45,"HMW-IO-12-FM":46,"HMW-IO-4-FM":46,"HMW-LC-Bl1-DR":47,"HMW-LC-Dim1L-DR":48,"HMW-LC-Sw2-DR":49,"HMW-Sen-SC-12-DR":50,"HMW-Sen-SC-12-FM":50,"HM-CC-VG-1":51,"HM-ES-TX-WM":52,"HM-LC-RGBW-WM":53,"HM-Sec-SD-2-Team":54,"HM-Sen-LI-O":56,"HM-Sec-SCo":28,"HM-Sec-Sir-WM":57,"HM-LC-AO-SM":11,"HM-Sec-SD-Team":59,"HM-LC-Ja1PBU-FM":60,"HM-MOD-EM-8bit":61,"HM-LC-DW-WM":62},xnm.aio.hm.CATAGORY=[{catagory:"Display-Wandtaster AP",channels:{MAINTENANCE:0,KEY:1}},{catagory:"Temperatur-Feuchte-Sensor",channels:{MAINTENANCE:0,WEATHER:2}},{catagory:"Funk- Jalousieaktor",channels:{BLIND:0}},{catagory:"Heizkörperthermostat",channels:{CLIMATECONTROL_RT_TRANSCEIVER:0}},{catagory:"Heizkörperthermostat",channels:{CLIMATECONTROL_RT_TRANSCEIVER:1}},{catagory:"Funk- Wandthermostat",channels:{CLIMATECONTROL_REGULATOR:0,WEATHER:2}},{catagory:"Funk- Ventilsteuerung",channels:{CLIMATECONTROL_VENT_DRIVE:0}},{catagory:"HomeMatic Zentrale und virtuelle Fernbedienung",channels:{VIRTUAL_KEY:0}},{catagory:"Funk- Gong mit Signalleuchte",channels:{SIGNAL_LED:0,SIGNAL_CHIME:0}},{catagory:"MP3 Funk-Gong mit Signalleuchte und Speicher",channels:{MAINTENANCE:0,SIGNAL_LED:1,SIGNAL_CHIME:1}},{catagory:"Funk-Gongmodul MP3 mit Speicher",channels:{SIGNAL_CHIME:1}},{catagory:"Funk-Anschnitt-Dimmaktor",channels:{DIMMER:1}},{catagory:"Funk-PWM-Dimmaktor",channels:{DIMMER:2,VIRTUAL_DIMMER:0}},{catagory:"Funk-Abschnitt-Dimmaktor",channels:{DIMMER:3,VIRTUAL_DIMMER:1}},{catagory:"Display-Statusanzeige AP",channels:{KEY:2}},{catagory:"HomeMatic 8-Kanal Sendemodul",channels:{KEY:1,SHUTTER_CONTACT:2}},{catagory:"Funk-Schaltaktor mit Leistungsmessung",channels:{SWITCH:1,POWERMETER:0,CONDITION_POWER:0,CONDITION_CURRENT:0,CONDITION_VOLTAGE:0,CONDITION_FREQUENCY:0}},{catagory:"Funk- Schaltaktor Bat",channels:{STATUS_INDICATOR:0}},{catagory:"KeyMatic",channels:{MAINTENANCE:0,KEYMATIC:0}},{catagory:"Funk- Kombisensor",channels:{MAINTENANCE:0,WEATHER:4}},{catagory:"Statusanzeige 16Kanal LED",channels:{KEY:3}},{catagory:"Funk- Wandsender/Tasterschnittstelle/Handsender/Fernbedienung",channels:{MAINTENANCE:0,KEY:1}},{catagory:"Funk-Handsender Key/Sec V2",channels:{KEY:0}},{catagory:"Funk- Fernbedienung 19 Tasten mit Display",channels:{KEY:1,CENTRAL_KEY:0,DISPLAY:0}},{catagory:"HomeMatic Regensensor",channels:{RAINDETECTOR:0,RAINDETECTOR_HEAT:0}},{catagory:"Funk- Fenster-/Drehgriffkontakt",channels:{ROTARY_HANDLE_SENSOR:0}},{catagory:"Funk- Schaltaktor",channels:{SWITCH:1}},{catagory:"Temperatur-Sensor",channels:{WEATHER:0}},{catagory:"Funk- Tür-/Fensterkontakt",channels:{SHUTTER_CONTACT:1}},{catagory:"Funk-Schließer-Kontakt-Interface",channels:{MAINTENANCE:0,SHUTTER_CONTACT:0}},{catagory:"CO2-Sensor",channels:{SENSOR_FOR_CARBON_DIOXIDE:0}},{catagory:"Funk-Bewegungsmelder",channels:{MAINTENANCE:0,MOTION_DETECTOR:1}},{catagory:"Funk-Rauchmelder",channels:{MAINTENANCE:0,SMOKE_DETECTOR:0}},{catagory:"Alarm-Sirenen",channels:{ALARMACTUATOR:0}},{catagory:"Funk-Bewegungsmelder",channels:{MAINTENANCE:0,MOTION_DETECTOR:0}},{catagory:"HM Sensor for Electronic Pulses",channels:{PULSE_SENSOR:0}},{catagory:"HomeMatic Kapazitiver Füllstandsmesser",channels:{CAPACITIVE_FILLING_LEVEL_SENSOR:0}},{catagory:"Funk-Schalterschnittstelle",channels:{MAINTENANCE:0,SWITCH_INTERFACE:0}},{catagory:"Wandthermostat",channels:{THERMALCONTROL_TRANSMIT:0,WEATHER_TRANSMIT:0}},{catagory:"Tilt-Sensor",channels:{TILT_SENSOR:0}},{catagory:"Temperaturdifferenz-Sensor",channels:{WEATHER:1}},{catagory:"Funk-Wassermelder",channels:{WATERDETECTIONSENSOR:0}},{catagory:"WinMatic",channels:{WINMATIC:0,AKKU:0}},{catagory:"Funk-Wetterstation",channels:{WEATHER:3}},{catagory:"I/O-Modul 12 Eingänge 14 Schaltausgänge",channels:{DIGITAL_OUTPUT:0,DIGITAL_ANALOG_OUTPUT:0,DIGITAL_INPUT:0,DIGITAL_ANALOG_INPUT:0}},{catagory:"I/O-Modul 12 Eingänge 7 Schaltausgänge Hutschienenmontage",channels:{KEY:0,SWITCH:0}},{catagory:"4/12fach I/O-Modul Unterputzmontage",channels:{INPUT_OUTPUT:0}},{catagory:"Jalousieaktor 1fach Hutschienenmontage",channels:{KEY:0,BLIND:0}},{catagory:"Dimmaktor 1fach Hutschienenmontage",channels:{KEY:0,DIMMER:0}},{catagory:"Schaltaktor 2fach Hutschienenmontage",channels:{KEY:0,SWITCH:0}},{catagory:"Schließerkontakt-Sensor",channels:{SENSOR:0}},{catagory:"Gruppe 1",channels:{CLIMATECONTROL_RT_TRANSCEIVER:2,SHUTTER_CONTACT:2}},{catagory:"Energiezähler-Sensor",channels:{POWERMETER_IGL:0}},{catagory:"Funk-RGBW-Controller",channels:{DIMMER:4,RGBW_COLOR:0,RGBW_AUTOMATIC:0}},{catagory:"Funk-Rauchmelder 2 Gruppe",channels:{SMOKE_DETECTOR_TEAM_V2:0}},{catagory:"Funk- Schaltaktor Bat",channels:{MAINTENANCE:0,SWITCH:1}},{catagory:"Light Intensity Sensor",channels:{MAINTENANCE:0,LUXMETER:0}},{catagory:"Funk-Innensirene",channels:{SWITCH_SENSOR:0,SWITCH_PANIC:0,ARMING:0}},{catagory:"Funk-Rauchmelder 2",channels:{SMOKE_DETECTOR:1}},{catagory:"Funk-Rauchmelder Gruppe",channels:{SMOKE_DETECTOR_TEAM:0}},{catagory:"Funk-Jalousieaktor",channels:{JALOUSIE:0}},{catagory:"Funk-Sendemodul 8-bit",channels:{KEY:1,MOD_EM8BIT_TRANSMITTER:0}},{catagory:"Funk-Conrtoller für Dual-White-LEDs",channels:{DUAL_WHITE_BRIGHTNESS:0,DUAL_WHITE_COLOR:0}}],xnm.aio.hm.CHANNEL={KEY:{_level:0,datapoints:[{PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"we"},INSTALL_TEST:{type:"action",access:"e"}},{PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"we"},PRESS_LONG_RELEASE:{type:"action",access:"e"},PRESS_CONT:{type:"action",access:"e"},INSTALL_TEST:{type:"action",access:"e"}},{PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"we"},PRESS_LONG_RELEASE:{type:"action",access:"e"},PRESS_CONT:{type:"action",access:"e"},INSTALL_TEST:{type:"action",access:"e"},SUBMIT:{type:"string",access:"w"}},{PRESS_SHORT:{type:"action",access:"we"},LED_STATUS:{type:"option",access:"rwe",values:{0:"OFF",1:"RED",2:"GREEN",3:"ORANGE"}},ALL_LEDS:{type:"string",access:"w"},LED_SLEEP_MODE:{type:"option",access:"w",values:{0:"OFF",1:"ON"}},INSTALL_TEST:{type:"action",access:"we"}}]},CENTRAL_KEY:{_level:1,datapoints:[{PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"we"},PRESS_LONG_RELEASE:{type:"action",access:"e"},PRESS_CONT:{type:"action",access:"e"},INSTALL_TEST:{type:"action",access:"e"}}]},DISPLAY:{_level:2,datapoints:[{TEXT:{type:"string",access:"w"},BULB:{type:"action",access:"w"}}]},VIRTUAL_KEY:{_level:3,datapoints:[{PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"we"},LEVEL:{type:"float",access:"w",min:0,max:1,unit:"100%"}}]},INPUT_OUTPUT:{_level:4,datapoints:[{STATE:{type:"boolean",access:"rwe"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"we"},INSTALL_TEST:{type:"action",access:"e"}}]},SWITCH:{_level:5,datapoints:[{STATE:{type:"boolean",access:"rwe"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}},{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},SWITCH_INTERFACE:{_level:6,datapoints:[{PRESS:{type:"action",access:"we"},INSTALL_TEST:{type:"action",access:"we"}}]},DIMMER:{_level:7,datapoints:[{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},INSTALL_TEST:{type:"action",access:"w"}},{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},RAMP_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},RAMP_STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"LOAD_FAILURE"}},INSTALL_TEST:{type:"action",access:"w"}},{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},LEVEL_REAL:{type:"float",access:"re",min:0,max:1,unit:"100%"},RAMP_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},RAMP_STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},ERROR_REDUCED:{type:"boolean",access:"re"},ERROR_OVERHEAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}},{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},LEVEL_REAL:{type:"float",access:"re",min:0,max:1,unit:"100%"},RAMP_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},RAMP_STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},ERROR_REDUCED:{type:"boolean",access:"re"},ERROR_OVERLOAD:{type:"boolean",access:"re"},ERROR_OVERHEAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}},{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},RAMP_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},RAMP_STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},INSTALL_TEST:{type:"action",access:"w"}}]},VIRTUAL_DIMMER:{_level:8,datapoints:[{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},LEVEL_REAL:{type:"float",access:"re",min:0,max:1,unit:"100%"},RAMP_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},RAMP_STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},ERROR_REDUCED:{type:"boolean",access:"re"},ERROR_OVERHEAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}},{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},LEVEL_REAL:{type:"float",access:"re",min:0,max:1,unit:"100%"},RAMP_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},RAMP_STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},ERROR_REDUCED:{type:"boolean",access:"re"},ERROR_OVERLOAD:{type:"boolean",access:"re"},ERROR_OVERHEAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}}]},BLIND:{_level:9,datapoints:[{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},INSTALL_TEST:{type:"action",access:"w"}}]},KEYMATIC:{_level:10,datapoints:[{STATE:{type:"boolean",access:"rwe"},OPEN:{type:"action",access:"w"},RELOCK_DELAY:{type:"float",access:"w",min:0,max:65535,unit:"s",special:{"111600.0":"NOT_USED"}},STATE_UNCERTAIN:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"CLUTCH_FAILURE",2:"MOTOR_ABORTED"}}}]},WINMATIC:{_level:11,datapoints:[{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%",special:{"-0.005":"LOCKED"}},RELOCK_DELAY:{type:"float",access:"w",min:0,max:65535,unit:"s",special:{"111600.0":"NOT_USED"}},SPEED:{type:"float",access:"w",min:0,max:1,unit:"100%"},STOP:{type:"action",access:"w"},STATE_UNCERTAIN:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"MOTOR_TURN_ERROR",2:"MOTOR_TILT_ERROR"}}}]},CLIMATECONTROL_RT_TRANSCEIVER:{_level:12,datapoints:[{CONTROL_MODE:{type:"option",access:"re",values:{0:"AUTO-MODE",1:"MANU-MODE",2:"PARTY-MODE",3:"BOOST-MODE"}},FAULT_REPORTING:{type:"option",access:"re",values:{0:"NO_FAULT",1:"VALVE_TIGHT",2:"ADJUSTING_RANGE_TOO_LARGE",3:"ADJUSTING_RANGE_TOO_SMALL",4:"COMMUNICATION_ERROR",5:"",6:"LOWBAT",7:"VALVE_ERROR_POSITION"}},BATTERY_STATE:{type:"float",access:"re",min:1.5,max:4.6,unit:"V"},VALVE_STATE:{type:"integer",access:"re",min:0,max:99,unit:"%"},BOOST_STATE:{type:"integer",access:"re",min:0,max:30,unit:"min"},ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-10,max:56,unit:"°C"},SET_TEMPERATURE:{type:"float",access:"rwe",min:4.5,max:30.5,unit:"°C"},AUTO_MODE:{type:"action",access:"w"},MANU_MODE:{type:"float",access:"w",min:4.5,max:30.5,unit:"°C"},BOOST_MODE:{type:"action",access:"w"},COMFORT_MODE:{type:"action",access:"w"},LOWERING_MODE:{type:"action",access:"w"},PARTY_MODE_SUBMIT:{type:"string",access:"w"},PARTY_TEMPERATURE:{type:"float",access:"rw",min:5,max:30,unit:"°C"},PARTY_START_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_START_DAY:{type:"integer",access:"rw",min:1,max:31,unit:"day"},PARTY_START_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_START_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"},PARTY_STOP_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_STOP_DAY:{type:"integer",access:"rw",min:1,max:31,unit:"day"},PARTY_STOP_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_STOP_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"}},{CLEAR_WINDOW_OPEN_SYMBOL:{type:"integer",access:"w",min:0,max:1},SET_SYMBOL_FOR_HEATING_PHASE:{type:"integer",access:"w",min:0,max:1},CONTROL_MODE:{type:"option",access:"re",values:{0:"AUTO-MODE",1:"MANU-MODE",2:"PARTY-MODE",3:"BOOST-MODE"}},FAULT_REPORTING:{type:"option",access:"re",values:{0:"NO_FAULT",1:"VALVE_TIGHT",2:"ADJUSTING_RANGE_TOO_LARGE",3:"ADJUSTING_RANGE_TOO_SMALL",4:"COMMUNICATION_ERROR",5:"",6:"LOWBAT",7:"VALVE_ERROR_POSITION"}},WINDOW_STATE:{type:"boolean",access:"re"},BATTERY_STATE:{type:"float",access:"re",min:1.5,max:4.6,unit:"V"},VALVE_STATE:{type:"integer",access:"re",min:0,max:99,unit:"%"},BOOST_TIME:{type:"integer",access:"re",min:0,max:30,unit:"min"},ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-10,max:56,unit:"°C"},SET_TEMPERATURE:{type:"float",access:"rwe",min:4.5,max:30.5,unit:"°C"},AUTO_MODE:{type:"action",access:"w"},MANU_MODE:{type:"float",access:"w",min:4.5,max:30.5,unit:"°C"},BOOST_MODE:{type:"action",access:"w"},COMFORT_MODE:{type:"action",access:"w"},LOWERING_MODE:{type:"action",access:"w"},PARTY_MODE_SUBMIT:{type:"string",access:"w"},PARTY_TEMPERATURE:{type:"float",access:"rw",min:5,max:30,unit:"°C"},PARTY_START_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_START_DAY:{type:"integer",access:"rw",min:1,max:31,unit:"day"},PARTY_START_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_START_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"},PARTY_STOP_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_STOP_DAY:{type:"integer",access:"rw",min:1,max:31,unit:"day"},PARTY_STOP_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_STOP_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"}},{CONTROL_MODE:{type:"option",access:"re",values:{0:"AUTO-MODE",1:"MANU-MODE",2:"PARTY-MODE",3:"BOOST-MODE"}},ACTUAL_HUMIDITY:{type:"float",access:"re",min:0,max:99,unit:"%"},BOOST_MODE:{type:"action",access:"w"},AUTO_MODE:{type:"action",access:"w"},SET_TEMPERATURE:{type:"float",access:"rwe",min:4.5,max:30.5,unit:"°C"},ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-10,max:56,unit:"°C"},MANU_MODE:{type:"float",access:"w",min:4.5,max:30.5,unit:"°C"},COMFORT_MODE:{type:"action",access:"w"},LOWERING_MODE:{type:"action",access:"w"},PARTY_TEMPERATURE:{type:"float",access:"rw",min:5,max:30,unit:"°C"},PARTY_MODE_SUBMIT:{type:"string",access:"w"},PARTY_START_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_START_DAY:{type:"integer",access:"rw",min:1,max:31,unit:"day"},PARTY_START_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_START_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"},PARTY_STOP_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_STOP_DAY:{type:"integer",access:"rw",min:1,max:31,unit:"day"},PARTY_STOP_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_STOP_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"}}]},THERMALCONTROL_TRANSMIT:{_level:13,datapoints:[{CONTROL_MODE:{type:"option",access:"re",values:{0:"AUTO-MODE",1:"MANU-MODE",2:"PARTY-MODE",3:"BOOST-MODE"}},LOWBAT_REPORTING:{type:"boolean",access:"re"},COMMUNICATION_REPORTING:{type:"boolean",access:"re"},WINDOW_OPEN_REPORTING:{type:"boolean",access:"re"},BATTERY_STATE:{type:"float",access:"re",min:1.5,max:4.6,unit:"V"},BOOST_STATE:{type:"integer",access:"re",min:0,max:30,unit:"min"},ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-10,max:50,unit:"°C"},ACTUAL_HUMIDITY:{type:"float",access:"re",min:0,max:99,unit:"%"},SET_TEMPERATURE:{type:"float",access:"rwe",min:4.5,max:30.5,unit:"°C"},AUTO_MODE:{type:"action",access:"w"},MANU_MODE:{type:"float",access:"w",min:4.5,max:30.5,unit:"°C"},BOOST_MODE:{type:"action",access:"w"},COMFORT_MODE:{type:"action",access:"w"},LOWERING_MODE:{type:"action",access:"w"},PARTY_MODE_SUBMIT:{type:"string",access:"rw"},PARTY_TEMPERATURE:{type:"float",access:"rw",min:5,max:30,unit:"°C"},PARTY_START_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_START_DAY:{type:"integer",access:"rw",min:1,max:31,unit:"day"},PARTY_START_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_START_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"},PARTY_STOP_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_STOP_DAY:{type:"integer",access:"rw",min:1,max:31,unit:"day"},PARTY_STOP_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_STOP_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"}}]},CLIMATECONTROL_REGULATOR:{_level:14,datapoints:[{SETPOINT:{type:"float",access:"rwe",min:6,max:30,unit:"°C",special:{"0.0":"VENT_CLOSED","100.0":"VENT_OPEN"}},ADJUSTING_COMMAND:{type:"integer",access:"re",min:0,max:4},ADJUSTING_DATA:{type:"integer",access:"re",min:0,max:250},STATE:{type:"boolean",access:"w"}}]},CLIMATECONTROL_VENT_DRIVE:{_level:15,datapoints:[{VALVE_STATE:{type:"integer",access:"re",min:0,max:99,unit:"%"},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"VALVE_DRIVE_BLOCKED",2:"VALVE_DRIVE_LOOSE",3:"ADJUSTING_RANGE_TO_SMALL",4:"LOWBAT"}}}]},SIGNAL_LED:{_level:16,datapoints:[{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}},{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"},SUBMIT:{type:"string",access:"w"}}]},SIGNAL_CHIME:{_level:17,datapoints:[{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}},{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"},SUBMIT:{type:"string",access:"w"}}]},WEATHER:{_level:18,datapoints:[{TEMPERATURE:{type:"float",access:"re",min:-40,max:80,unit:"°C"}},{TEMPERATURE:{type:"float",access:"re",min:-150,max:150,unit:"°C"},LOWBAT:{type:"boolean",access:"re"}},{TEMPERATURE:{type:"float",access:"re",min:-40,max:80,unit:"°C"},HUMIDITY:{type:"integer",access:"re",min:0,max:99,unit:"%"}},{TEMPERATURE:{type:"float",access:"re",min:-40,max:80,unit:"°C"},HUMIDITY:{type:"integer",access:"re",min:0,max:99,unit:"%"},AIR_PRESSURE:{type:"integer",access:"re",min:500,max:1100,unit:"hPa"}},{TEMPERATURE:{type:"float",access:"re",min:-40,max:80,unit:"°C"},HUMIDITY:{type:"integer",access:"re",min:0,max:99,unit:"%"},RAINING:{type:"boolean",access:"re"},RAIN_COUNTER:{type:"float",access:"re",min:0,max:9666.265,unit:"mm"},WIND_SPEED:{type:"float",access:"re",min:0,max:1638.3,unit:"km/h"},WIND_DIRECTION:{type:"integer",access:"re",min:0,max:355,unit:"degree"},WIND_DIRECTION_RANGE:{type:"integer",access:"re",min:0,max:67,unit:"degree"},SUNSHINEDURATION:{type:"integer",access:"re",min:0,max:255},BRIGHTNESS:{type:"integer",access:"re",min:0,max:255}}]},WEATHER_TRANSMIT:{_level:19,datapoints:[{TEMPERATURE:{type:"float",access:"re",min:-10,max:50,unit:"°C"},HUMIDITY:{type:"integer",access:"re",min:0,max:99,unit:"%"}}]},RAINDETECTOR:{_level:20,datapoints:[{STATE:{type:"option",access:"re",values:{0:"DRY",1:"RAIN"}},INSTALL_TEST:{type:"action",access:"e"}}]},RAINDETECTOR_HEAT:{_level:21,datapoints:[{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},ROTARY_HANDLE_SENSOR:{_level:22,datapoints:[{STATE:{type:"option",access:"re",values:{0:"CLOSED",1:"TILTED",3:"OPEN"}},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},SHUTTER_CONTACT:{_level:23,datapoints:[{STATE:{type:"boolean",access:"re"},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}},{STATE:{type:"boolean",access:"re"},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}},{STATE:{type:"boolean",access:"re"}}]},SENSOR_FOR_CARBON_DIOXIDE:{_level:24,datapoints:[{STATE:{type:"option",access:"re",values:{0:"LEVEL_NORMAL",1:"LEVEL_ADDED",2:"LEVEL_ADDED_STRONG"}},INSTALL_TEST:{type:"action",access:"e"}}]},MOTION_DETECTOR:{_level:25,datapoints:[{BRIGHTNESS:{type:"integer",access:"re",min:0,max:255},NEXT_TRANSMISSION:{type:"integer",access:"rw"},MOTION:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}},{BRIGHTNESS:{type:"integer",access:"re",min:0,max:255},NEXT_TRANSMISSION:{type:"integer",access:"rw"},MOTION:{type:"boolean",access:"re"},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},INSTALL_TEST:{type:"action",access:"e"}}]},SMOKE_DETECTOR:{_level:26,datapoints:[{STATE:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}},{STATE:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"},LOWBAT:{type:"boolean",access:"re"}}]},ALARMACTUATOR:{_level:27,datapoints:[{STATE:{type:"boolean",access:"rwe"},ERROR_POWER:{type:"option",access:"re",values:{0:"NO_ERROR",1:"POWER_FAILURE"}},ERROR_SABOTAGE:{type:"option",access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},ERROR_BATTERY:{type:"option",access:"re",values:{0:"NO_ERROR",1:"BATTERY_DEFECT"}},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}}]},PULSE_SENSOR:{_level:28,datapoints:[{SEQUENCE_OK:{type:"action",access:"we"},INSTALL_TEST:{type:"action",access:"e"}}]},CAPACITIVE_FILLING_LEVEL_SENSOR:{_level:29,datapoints:[{FILLING_LEVEL:{type:"integer",access:"re",min:0,max:100,unit:"%"},INSTALL_TEST:{type:"action",access:"e"}}]},TILT_SENSOR:{_level:30,datapoints:[{STATE:{type:"boolean",access:"re"},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},WATERDETECTIONSENSOR:{_level:31,datapoints:[{STATE:{type:"option",access:"re",values:{0:"DRY",1:"WET",2:"WATER"}},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},AKKU:{_level:32,datapoints:[{LEVEL:{type:"float",access:"re",min:0,max:1,unit:"100%"},STATUS:{type:"option",access:"re",values:{0:"TRICKLE_CHARGE",1:"CHARGE",2:"DISCHARGE",3:"STATE_UNKNOWN"}}}]},DIGITAL_OUTPUT:{_level:33,datapoints:[{STATE:{type:"boolean",access:"rwe"}}]},DIGITAL_ANALOG_OUTPUT:{_level:34,datapoints:[{STATE:{type:"boolean",access:"rwe"},FREQUENCY:{type:"float",access:"rwe",min:0,max:5e4,unit:"mHz"}}]},DIGITAL_INPUT:{_level:35,datapoints:[{STATE:{type:"boolean",access:"rwe"},FREQUENCY:{type:"float",access:"re",min:0,max:35e4,unit:"mHz"}}]},DIGITAL_ANALOG_INPUT:{_level:36,datapoints:[{STATE:{type:"boolean",access:"rwe"},VALUE:{type:"float",access:"re",min:0,max:1e3}}]},SENSOR:{_level:37,datapoints:[{SENSOR:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},POWERMETER:{_level:38,datapoints:[{BOOT:{type:"boolean",access:"re"},ENERGY_COUNTER:{type:"float",access:"re",min:0,max:838860.7,unit:"Wh"},POWER:{type:"float",access:"re",min:0,max:167772.15,unit:"W"},CURRENT:{type:"float",access:"re",min:0,max:65535,unit:"mA"},VOLTAGE:{type:"float",access:"re",min:0,max:6553.5,unit:"V"},FREQUENCY:{type:"float",access:"re",min:48.72,max:51.27,unit:"Hz"}}]},CONDITION_POWER:{_level:39,datapoints:[{DECISION_VALUE:{type:"integer",access:"re",min:0,max:255}}]},CONDITION_CURRENT:{_level:40,datapoints:[{DECISION_VALUE:{type:"integer",access:"re",min:0,max:255}}]},CONDITION_VOLTAGE:{_level:41,datapoints:[{DECISION_VALUE:{type:"integer",access:"re",min:0,max:255}}]},CONDITION_FREQUENCY:{_level:42,datapoints:[{DECISION_VALUE:{type:"integer",access:"re",min:0,max:255}}]},STATUS_INDICATOR:{_level:43,datapoints:[{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},POWERMETER_IGL:{_level:44,datapoints:[{BOOT:{type:"boolean",access:"re"},GAS_ENERGY_COUNTER:{type:"float",access:"re",min:0,max:2147483.647,unit:"m3"},GAS_POWER:{type:"float",access:"re",min:0,max:16777.215,unit:"m3"},ENERGY_COUNTER:{type:"float",access:"re",min:0,max:838860.7,unit:"Wh"},POWER:{type:"float",access:"re",min:0,max:167772.15,unit:"W"}}]},RGBW_COLOR:{_level:44,datapoints:[{COLOR:{type:"integer",access:"rwe",min:0,max:255}}]},RGBW_AUTOMATIC:{_level:45,datapoints:[{PROGRAM:{type:"integer",access:"rwe",min:0,max:255}}]},SMOKE_DETECTOR_TEAM_V2:{_level:46,datapoints:[{STATE:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},MAINTENANCE:{_level:47,datapoints:[{LOWBAT:{type:"boolean",access:"re"}}]},LUXMETER:{_level:48,datapoints:[{LUX:{type:"float",access:"re",min:0,max:1e5,unit:"Lux"}}]},SWITCH_SENSOR:{_level:49,datapoints:[{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},ERROR_SABOTAGE:{type:"option",access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}}]},SWITCH_PANIC:{_level:50,datapoints:[{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},ERROR_SABOTAGE:{type:"option",access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}}]},ARMING:{_level:51,datapoints:[{ARMSTATE:{type:"option",access:"rwe",values:{0:"DISARMED",1:"EXTSENS_ARMED",2:"ALLSENS_ARMED",3:"ALARM_BLOCKED"}},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},ERROR_SABOTAGE:{type:"option",access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}}]},SMOKE_DETECTOR_TEAM:{_level:52,datapoints:[{STATE:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},JALOUSIE:{_level:53,datapoints:[{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},INSTALL_TEST:{type:"action",access:"w"},LEVEL_SLATS:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},WORKING_SLATS:{type:"boolean",access:"re"},DIRECTION_SLATS:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},LEVEL_COMBINED:{type:"string",access:"w"}}]},MOD_EM8BIT_TRANSMITTER:{_level:54,datapoints:[{STATE:{type:"integer",access:"re",min:0,max:255},LOWBAT:{type:"boolean",access:"re"}}]},DUAL_WHITE_BRIGHTNESS:{_level:55,datapoints:[{DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},ERROR_OVERHEAT:{type:"boolean",access:"re"},ERROR_REDUCED:{type:"boolean",access:"re"},INHIBIT:{type:"boolean",access:"rwe"},INSTALL_TEST:{type:"action",access:"w"},LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},LEVEL_REAL:{type:"float",access:"re",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},RAMP_STOP:{type:"action",access:"w"},RAMP_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},WORKING:{type:"boolean",access:"re"}}]},DUAL_WHITE_COLOR:{_level:56,datapoints:[{DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},INHIBIT:{type:"boolean",access:"rwe"},INSTALL_TEST:{type:"action",access:"w"},LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},LEVEL_REAL:{type:"float",access:"re",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},ON_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},RAMP_STOP:{type:"action",access:"w"},RAMP_TIME:{type:"float",access:"w",min:0,max:85825945.6,unit:"s"},WORKING:{type:"boolean",access:"re"}}]}},xnm.aio.hm.MAP={KEY:{PRESS_SHORT:{command:[{type:"enum",name:"short press",ref:{value:"pressShort"}}]},PRESS_LONG:{command:[{type:"enum",name:"long press",ref:{value:"pressLong"}}]},SUBMIT:{command:[{type:"string",name:"set value",ref:{value:"setValue",ext:"%s"}}]},LED_STATUS:{command:[{type:"enum",name:"off",ref:{value:"ledOff"}},{type:"enum",name:"red",ref:{value:"ledRed"}},{type:"enum",name:"green",ref:{value:"ledGreen"}},{type:"enum",name:"orange",ref:{value:"ledOrange"}}],status:[{type:"enum",name:"led status",ref:{value:"ledStatus",options:["off","red","green","orange"]}}]},ALL_LEDS:{command:[{type:"string",name:"set value",ref:{value:"setAllLed",ext:"%s"}}]},LED_SLEEP_MODE:{command:[{type:"enum",name:"led sleep mode off",ref:{value:"sleepModeOff"}},{type:"enum",name:"led sleep mode on",ref:{value:"sleepModeOn"}}]}},CENTRAL_KEY:{PRESS_SHORT:{command:[{type:"enum",name:"short press",ref:{value:"pressShort"}}]},PRESS_LONG:{command:[{type:"enum",name:"long press",ref:{value:"pressLong"}}]}},VIRTUAL_KEY:{PRESS_SHORT:{command:[{type:"enum",name:"short press",ref:{value:"pressShort"}}]},PRESS_LONG:{command:[{type:"enum",name:"long press",ref:{value:"pressLong"}}]}},INPUT_OUTPUT:{STATE:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"status",ref:{value:"inoutState",options:["off","on"]}}]},PRESS_SHORT:{command:[{type:"enum",name:"short press",ref:{value:"pressShort"}}]},PRESS_LONG:{command:[{type:"enum",name:"long press",ref:{value:"pressLong"}}]}},SWITCH:{STATE:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}}]}},SWITCH_INTERFACE:{PRESS:{command:[{type:"enum",name:"press",ref:{value:"press"}}]}},DIMMER:{LEVEL:{command:[{type:"enum",name:"off",ref:{value:"dimOff"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"enum",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"dim to",ref:{value:"dimRaw",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"toggle to",ref:{value:"toggleTo",ext:"%e",extMeta:["10%","20%","30%","40%","50%","60%","70%","80%","90%","100%"],sort:"none"}}],status:[{type:"int",name:"dimmer status",ref:{value:"dimmerLevel"}}]},OLD_LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dimOn"}}]},DIRECTION:{status:[{type:"enum",name:"dim direction",ref:{value:"dimmerDirection",options:["none","up","down","undefined"]}}]}},VIRTUAL_DIMMER:{LEVEL:{command:[{type:"enum",name:"off",ref:{value:"dimOff"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"enum",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"dim to",ref:{value:"dimRaw",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"toggle to",ref:{value:"toggleTo",ext:"%e",extMeta:["10%","20%","30%","40%","50%","60%","70%","80%","90%","100%"],sort:"none"}}],status:[{type:"int",name:"dimmer status",ref:{value:"dimmerLevel"}}]},OLD_LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dimOn"}}]},DIRECTION:{status:[{type:"enum",name:"dim direction",ref:{value:"dimmerDirection",options:["none","up","down","undefined"]}}]}},BLIND:{LEVEL:{command:[{type:"enum",name:"move up",ref:{value:"blindUp"}},{type:"enum",name:"move down",ref:{value:"blindDown"}},{type:"enum",name:"step up",ref:{value:"blindStepUp"}},{type:"enum",name:"step down",ref:{value:"blindStepDown"}},{type:"enum",name:"move to",ref:{value:"blindTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"move to",ref:{value:"blindRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"blind status",ref:{value:"blindLevel"}},{type:"enum",name:"position description",ref:{value:"blindPosDes",options:["top","middle","bottom"]}}]},STOP:{command:[{type:"enum",name:"stop",ref:{value:"blindStop"}}]},DIRECTION:{status:[{type:"enum",name:"blind direction",ref:{value:"blindDirection",options:["none","up","down","undefined"]}}]}},KEYMATIC:{STATE:{command:[{type:"enum",name:"unlock",ref:{value:"keyOpen"}},{type:"enum",name:"lock",ref:{value:"keyLock"}}],status:[{type:"enum",name:"lock status",ref:{value:"keyState",options:["open","lock"]}}]},OPEN:{command:[{type:"enum",name:"open",ref:{value:"keyOpenDo"}}]}},WINMATIC:{LEVEL:{command:[{type:"enum",name:"move up",ref:{value:"windowUp"}},{type:"enum",name:"move down",ref:{value:"windowDown"}},{type:"enum",name:"move to",ref:{value:"windowTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"lock",ref:{value:"winLock",value_t:"lock"}},{type:"int",name:"move to",ref:{value:"windowRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"window status",ref:{value:"winLevel"}}]},STOP:{command:[{type:"enum",name:"stop",ref:{value:"winStop"}}]},DIRECTION:{status:[{type:"enum",name:"window direction",ref:{value:"winDirection",options:["none","up","down","undefined"]}}]},ERROR:{status:[{type:"enum",name:"window error",ref:{value:"winError",options:["no_error","motor_turn_error","motor_tilt_error"]}}]}},CLIMATECONTROL_RT_TRANSCEIVER:{CONTROL_MODE:{status:[{type:"enum",name:"mode",ref:{value:"themoMode",options:["auto","manu","party","boost"]}}]},FAULT_REPORTING:{status:[{type:"enum",name:"fault reporting",ref:{value:"themoFault",options:["no_fault","valve_tight","adjusting_range_too_large","adjusting_range_too_small","communication_error","low_bat","valve_error_position"]}},{type:"enum",name:"low battery",ref:{value:"themoLowbat",options:["true","false"]}}]},BATTERY_STATE:{status:[{type:"float",name:"battery state",ref:{value:"themoBattery"}}]},VALVE_STATE:{status:[{type:"int",name:"valve state",ref:{value:"themoValve"}}]},BOOST_STATE:{status:[{type:"int",name:"boost state",ref:{value:"themoBoost"}}]},ACTUAL_TEMPERATURE:{status:[{type:"float",name:"actual temperature",ref:{value:"themoActualTemp",extMeta:"-10.0-56.0",scale:"0.1"}}]},ACTUAL_HUMIDITY:{status:[{type:"float",name:"actual humidity",ref:{value:"themoActualHum"}}]},SET_TEMPERATURE:{command:[{type:"enum",name:"temperature up",ref:{value:"themoTempUp"}},{type:"enum",name:"temperature down",ref:{value:"themoTempDown"}},{type:"enum",name:"off",ref:{value:"themoTempOff"}},{type:"float",name:"temperature to",ref:{value:"themoTempRaw",ext:"%f",extMeta:"4.5-30.5",scale:"0.5"}}],status:[{type:"float",name:"set temperature",ref:{value:"themoSetTemp",extMeta:"4.5-30.5",scale:"0.5"}}]},AUTO_MODE:{command:[{type:"enum",name:"set auto mode",ref:{value:"themoAutoMode"}}]},MANU_MODE:{command:[{type:"float",name:"set manual mode",ref:{value:"themoManuMode",ext:"%f",extMeta:"4.5-30.5"}}]},BOOST_MODE:{command:[{type:"enum",name:"set boost mode",ref:{value:"themoBoostMode"}}]},COMFORT_MODE:{command:[{type:"enum",name:"set comfort mode",ref:{value:"themoComfortMode"}}]},LOWERING_MODE:{command:[{type:"enum",name:"set lowering mode",ref:{value:"themoLoweringMode"}}]},WINDOW_STATE:{status:[{type:"enum",name:"window state",ref:{value:"themoWinState",options:["open","close"]}}]}},THERMALCONTROL_TRANSMIT:{CONTROL_MODE:{status:[{type:"enum",name:"mode",ref:{value:"themoTMode",options:["auto","manu","party","boost"]}}]},LOWBAT_REPORTING:{status:[{type:"enum",name:"low battery",ref:{value:"themoTLowbat",options:["true","false"]}}]},COMMUNICATION_REPORTING:{status:[{type:"enum",name:"communication",ref:{value:"themoTComm",options:["true","false"]}}]},WINDOW_OPEN_REPORTING:{status:[{type:"enum",name:"window open",ref:{value:"themoTWin",options:["open","close"]}}]},BATTERY_STATE:{status:[{type:"float",name:"battery state",ref:{value:"themoTBattery",extMeta:"1.5-4.6",scale:"0.1"}}]},BOOST_STATE:{status:[{type:"int",name:"boost state",ref:{value:"themoTBoost"}}]},ACTUAL_TEMPERATURE:{status:[{type:"float",name:"actual temperature",ref:{value:"themoTActualTemp",extMeta:"-10.0-50.0",scale:"0.1"}}]},ACTUAL_HUMIDITY:{status:[{type:"int",name:"actual humidity",ref:{value:"themoTActualHum"}}]},SET_TEMPERATURE:{command:[{type:"enum",name:"temperature up",ref:{value:"themoTTempUp"}},{type:"enum",name:"temperature down",ref:{value:"themoTTempDown"}},{type:"enum",name:"off",ref:{value:"themoTTempOff"}},{type:"float",name:"temperature to",ref:{value:"themoTTempRaw",ext:"%f",extMeta:"4.5-30.5",scale:"0.5"}}],status:[{type:"float",name:"set temperature",ref:{value:"themoTSetTemp",extMeta:"4.5-30.5",scale:"0.5"}}]},AUTO_MODE:{command:[{type:"enum",name:"set auto mode",ref:{value:"themoTAutoMode"}}]},MANU_MODE:{command:[{type:"float",name:"set manual mode",ref:{value:"themoTManuMode",ext:"%f",extMeta:"4.5-30.5"}}]},BOOST_MODE:{command:[{type:"enum",name:"set boost mode",ref:{value:"themoTBoostMode"}}]},COMFORT_MODE:{command:[{type:"enum",name:"set comfort mode",ref:{value:"themoTComfortMode"}}]},LOWERING_MODE:{command:[{type:"enum",name:"set lowering mode",ref:{value:"themoTLoweringMode"}}]}},CLIMATECONTROL_REGULATOR:{SETPOINT:{command:[{type:"enum",name:"temperature up",ref:{value:"themoRTempUp"}},{type:"enum",name:"temperature down",ref:{value:"themoRTempDown"}},{type:"enum",name:"close",ref:{value:"themoRTempClose"}},{type:"float",name:"temperature to",ref:{value:"themoRTempRaw",ext:"%f",extMeta:"6-30",scale:"0.5"}}],status:[{type:"float",name:"set temperature",ref:{value:"themoRSetTemp",extMeta:"6-30",scale:"0.5"}}]}},CLIMATECONTROL_VENT_DRIVE:{VALVE_STATE:{status:[{type:"int",name:"valve state",ref:{value:"valveState"}}]},ERROR:{status:[{type:"enum",name:"valve error",ref:{value:"valveError",options:["no_error","valve_drive_blocked","valve_drive_loose","adjusting_range_to_small","low_bat"]}}]}},SIGNAL_LED:{STATE:{command:[{type:"enum",name:"led on",ref:{value:"signalLedOn"}},{type:"enum",name:"led off",ref:{value:"signalLedOff"}},{type:"enum",name:"led toggle",ref:{value:"signalLedToggle"}}],status:[{type:"enum",name:"led state",ref:{value:"signalLedState",options:["on","off"]}}]},SUBMIT:{command:[{type:"string",name:"set led",ref:{value:"setSignalLed",ext:"%s"}}]}},SIGNAL_CHIME:{STATE:{command:[{type:"enum",name:"chime on",ref:{value:"signalChimeOn"}},{type:"enum",name:"chime off",ref:{value:"signalChimeOff"}},{type:"enum",name:"chime toggle",ref:{value:"signalChimeToggle"}}],status:[{type:"enum",name:"chime state",ref:{value:"signalChimeState",options:["on","off"]}}]},SUBMIT:{command:[{type:"string",name:"set chime",ref:{value:"setSignalChime",ext:"%s"}}]}},WEATHER:{TEMPERATURE:{status:[{type:"float",name:"temperature",ref:{value:"weatherTemp",extMeta:"-40.0-80.0",scale:"0.1"}}]},HUMIDITY:{status:[{type:"int",name:"humidity",ref:{value:"weatherHum"}}]},AIR_PRESSURE:{status:[{type:"int",name:"air pressure",ref:{value:"weatherAirP"}}]},LOWBAT:{status:[{type:"enum",name:"low battery",ref:{value:"weatherLowbat",options:["true","false"]}}]},RAINING:{status:[{type:"enum",name:"raining",ref:{value:"weatherRaining",options:["true","false"]}}]},RAIN_COUNTER:{status:[{type:"float",name:"rain counter",ref:{value:"weatherRainCounter",extMeta:"0.0-9666.265",scale:"0.01"}}]},WIND_SPEED:{status:[{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-1638.3",scale:"0.1"}}]},WIND_DIRECTION:{status:[{type:"enum",name:"wind direction",ref:{value:"weatherWindD",options:["N","NO","O","SO","S","SW","W","NW"]}},{type:"int",name:"wind direction degree",ref:{value:"weatherWindDRaw",extMeta:"0-355"}}]},WIND_DIRECTION_RANGE:{status:[{type:"int",name:"wind direction range",ref:{value:"weatherWindDRRaw",extMeta:"0-67"}}]},SUNSHINEDURATION:{status:[{type:"int",name:"sunshine duration",ref:{value:"weatherSunD"}}]},BRIGHTNESS:{status:[{type:"int",name:"brightness",ref:{value:"weatherBright"}}]}},WEATHER_TRANSMIT:{TEMPERATURE:{status:[{type:"float",name:"temperature",ref:{value:"weatherTTemp",extMeta:"-10.0-50.0",scale:"0.1"}}]},HUMIDITY:{status:[{type:"int",name:"humidity",ref:{value:"weatherTHum"}}]}},RAINDETECTOR:{STATE:{status:[{type:"enum",name:"rain state",ref:{value:"rainState",options:["dry","rain"]}}]}},RAINDETECTOR_HEAT:{STATE:{command:[{type:"enum",name:"on",ref:{value:"rainHeatOn"}},{type:"enum",name:"off",ref:{value:"rainHeatOff"}},{type:"enum",name:"toggle",ref:{value:"rainHeatToggle"}}],status:[{type:"enum",name:"heater state",ref:{value:"rainHeatState",options:["on","off"]}}]}},ROTARY_HANDLE_SENSOR:{STATE:{status:[{type:"enum",name:"handle state",ref:{value:"handleState",options:["closed","tilted","open"]}}]},ERROR:{status:[{type:"enum",name:"handle error",ref:{value:"handleError",options:["no_error","sabotage"]}}]},LOWBAT:{status:[{type:"enum",name:"handle low battery",ref:{value:"handleLowbat",options:["true","false"]}}]}},SHUTTER_CONTACT:{STATE:{status:[{type:"enum",name:"contact state",ref:{value:"shutterState",value_t:"contactState",options:["closed","open"]}}]},ERROR:{status:[{type:"enum",name:"contact error",ref:{value:"shutterError",value_t:"contactError",options:["no_error","sabotage"]}}]},LOWBAT:{status:[{type:"enum",name:"contact low battery",ref:{value:"shutterLowbat",value_t:"contactLowbat",options:["true","false"]}}]}},SENSOR_FOR_CARBON_DIOXIDE:{STATE:{status:[{type:"enum",name:"co2 state",ref:{value:"co2State",options:["normal","added","added_strong"]}}]}},MOTION_DETECTOR:{BRIGHTNESS:{status:[{type:"int",name:"brightness",ref:{value:"motionBright"}}]},MOTION:{status:[{type:"enum",name:"state",ref:{value:"motionState",options:["on","off"]}}]},ERROR:{status:[{type:"enum",name:"error",ref:{value:"motionError",options:["no_error","sabotage"]}}]}},SMOKE_DETECTOR:{STATE:{status:[{type:"enum",name:"state",ref:{value:"smokeState",options:["on","off"]}}]},LOWBAT:{status:[{type:"enum",name:"battery low",ref:{value:"smokeLowbat",options:["true","false"]}}]}},SMOKE_DETECTOR_TEAM:{STATE:{status:[{type:"enum",name:"state",ref:{value:"smokeGroup1State",options:["on","off"]}}]}},SMOKE_DETECTOR_TEAM_V2:{STATE:{status:[{type:"enum",name:"state",ref:{value:"smokeGroupState",options:["on","off"]}}]}},ALARMACTUATOR:{STATE:{command:[{type:"enum",name:"on",ref:{value:"alarmOn"}},{type:"enum",name:"off",ref:{value:"alarmOff"}},{type:"enum",name:"toggle",ref:{value:"alarmToggle"}}],status:[{type:"enum",name:"state",ref:{value:"alarmState",options:["on","off"]}}]},ERROR_POWER:{status:[{type:"enum",name:"power error",ref:{value:"alarmErrPower",options:["no_error","power_failure"]}}]},ERROR_SABOTAGE:{status:[{type:"enum",name:"sabotage error",ref:{value:"alarmErrSabo",options:["no_error","sabotage"]}}]},ERROR_BATTERY:{status:[{type:"enum",name:"battery error",ref:{value:"alarmErrBat",options:["no_error","barttery_defect"]}}]},LOWBAT:{status:[{type:"enum",name:"battery low",ref:{value:"alarmLowbat",options:["true","false"]}}]}},PULSE_SENSOR:{SEQUENCE_OK:{command:[{type:"enum",name:"sequence ok",ref:{value:"seqOk"}}]}},CAPACITIVE_FILLING_LEVEL_SENSOR:{FILLING_LEVEL:{status:[{type:"int",name:"level",ref:{value:"fillingLevel"}}]}},TILT_SENSOR:{STATE:{status:[{type:"enum",name:"state",ref:{value:"tiltState",options:["on","off"]}}]},LOWBAT:{status:[{type:"enum",name:"battery low",ref:{value:"tiltLowbat",options:["true","false"]}}]}},WATERDETECTIONSENSOR:{STATE:{status:[{type:"enum",name:"state",ref:{value:"waterState",options:["dry","wet","water"]}}]},LOWBAT:{status:[{type:"enum",name:"battery low",ref:{value:"waterLowbat",options:["true","false"]}}]}},AKKU:{LEVEL:{status:[{type:"float",name:"level",ref:{value:"akkuLevel",extMeta:"0.0-1.0",scale:"0.1"}}]},STATUS:{status:[{type:"enum",name:"status",ref:{value:"akkuStatus",options:["trickle_charge","charge","discharge","state_unknow"]}}]}},DIGITAL_OUTPUT:{STATE:{command:[{type:"enum",name:"on",ref:{value:"digOutOn"}},{type:"enum",name:"off",ref:{value:"digOutOff"}},{type:"enum",name:"toggle",ref:{value:"digOutToggle"}}],status:[{type:"enum",name:"state",ref:{value:"digOutState",options:["on","off"]}}]}},DIGITAL_ANALOG_OUTPUT:{STATE:{command:[{type:"enum",name:"on",ref:{value:"daOutOn"}},{type:"enum",name:"off",ref:{value:"daOutOff"}},{type:"enum",name:"toggle",ref:{value:"daOutToggle"}}],status:[{type:"enum",name:"state",ref:{value:"daOutState",options:["on","off"]}}]},FREQUENCY:{command:[{type:"enum",name:"set frequency",ref:{value:"setOutFreq",ext:"%f"}},{type:"float",name:"set frequency",ref:{value:"setOutFreqRaw",ext:"%f",extMeta:"0.0-50000.0",scale:"0.1"}}],status:[{type:"float",name:"state",ref:{value:"daOutFreq",extMeta:"0.0-50000.0",scale:"0.1"}}]}},DIGITAL_INPUT:{FREQUENCY:{status:[{type:"float",name:"freq state",ref:{value:"digInFreq",extMeta:"0.0-350000.0",scale:"0.1"}}]},STATE:{status:[{type:"enum",name:"on/off state",ref:{value:"digInState",options:["on","off"]}}]}},DIGITAL_ANALOG_INPUT:{VALUE:{status:[{type:"float",name:"state",ref:{value:"daInValue",extMeta:"0.0-1000.0",scale:"0.1"}}]},STATE:{status:[{type:"enum",name:"on/off state",ref:{value:"daInState",options:["on","off"]}}]}},SENSOR:{SENSOR:{status:[{type:"enum",name:"state",ref:{value:"sensorState",options:["on","off"]}}]}},POWERMETER:{BOOT:{status:[{type:"enum",name:"boot status",ref:{value:"meterBoot",options:["true","false"]}}]},ENERGY_COUNTER:{status:[{type:"float",name:"energy counter",ref:{value:"meterEnergyCounter",extMeta:"0.0-838860.7",scale:"0.1"}}]},POWER:{status:[{type:"float",name:"power",ref:{value:"meterPower",extMeta:"0.0-167772.15",scale:"0.01"}}]},CURRENT:{status:[{type:"float",name:"current",ref:{value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1"}}]},VOLTAGE:{status:[{type:"float",name:"voltage",ref:{value:"meterVoltage",extMeta:"0.0-6553.5",scale:"0.1"}}]},FREQUENCY:{status:[{type:"float",name:"frequency",ref:{value:"meterFrequency",extMeta:"48.72-51.27",scale:"0.01"}}]}},POWERMETER_IGL:{BOOT:{status:[{type:"enum",name:"boot status",ref:{value:"iglBoot",options:["true","false"]}}]},GAS_ENERGY_COUNTER:{status:[{type:"float",name:"gas energy counter",ref:{value:"iglGasEnergy",extMeta:"0.000-2147483.647",scale:"0.001"}}]},GAS_POWER:{status:[{type:"float",name:"gas power",ref:{value:"iglGasPower",extMeta:"0.00-16777.215",scale:"0.01"}}]},ENERGY_COUNTER:{status:[{type:"float",name:"energy counter",ref:{value:"iglEnergy",extMeta:"0.0-838860.7",scale:"0.1"}}]},POWER:{status:[{type:"float",name:"power",ref:{value:"iglPower",extMeta:"0.00-167772.15",scale:"0.01"}}]}},RGBW_COLOR:{COLOR:{command:[{type:"int",name:"color",ref:{value:"color",ext:"%d",extMeta:"0-255"}},{type:"enum",name:"white",ref:{value:"white"}},{type:"rgb",name:"rgb color",ref:{value:"rgb",ext:"%s"}}],status:[{type:"int",name:"color",ref:{value:"colorState",extMeta:"0-255"}}]}},RGBW_AUTOMATIC:{PROGRAM:{command:[{type:"int",name:"program",ref:{value:"program",ext:"%d",extMeta:"0-255"}}],status:[{type:"int",name:"program",ref:{value:"programState",extMeta:"0-255"}}]}},STATUS_INDICATOR:{STATE:{command:[{type:"enum",name:"on",ref:{value:"statusIndiOn"}},{type:"enum",name:"off",ref:{value:"statusIndiOff"}},{type:"enum",name:"toggle",ref:{value:"statusIndiToggle"}}],status:[{type:"enum",name:"state",ref:{value:"statusIndiState",options:["on","off"]}}]}},MAINTENANCE:{LOWBAT:{status:[{type:"enum",name:"battery low",ref:{value:"maintLowbat",options:["true","false"]}}]}},LUXMETER:{LUX:{status:[{type:"float",name:"light intensity",ref:{value:"luxState",extMeta:"0.00-100000.00",scale:"0.01"}}]}},SWITCH_SENSOR:{STATE:{command:[{type:"enum",name:"on",ref:{value:"switchSensorOn"}},{type:"enum",name:"off",ref:{value:"switchSensorOff"}},{type:"enum",name:"toggle",ref:{value:"switchSensorToggle"}}],status:[{type:"enum",name:"status",ref:{value:"switchSensorState",options:["off","on"]}}]}},SWITCH_PANIC:{STATE:{command:[{type:"enum",name:"on",ref:{value:"switchPanicOn"}},{type:"enum",name:"off",ref:{value:"switchPanicOff"}},{type:"enum",name:"toggle",ref:{value:"switchPanicToggle"}}],status:[{type:"enum",name:"status",ref:{value:"switchPanicState",options:["off","on"]}}]}},ARMING:{STATE:{command:[{type:"enum",name:"disarmed",ref:{value:"armingDisarm"}},{type:"enum",name:"internal armed",ref:{value:"armingIntern"}},{type:"enum",name:"all armed",ref:{value:"armingAll"}},{type:"enum",name:"block alarm",ref:{value:"armingBlock"}}],status:[{type:"enum",name:"status",ref:{value:"armingState",options:["disarmed","internal_armed","all_armed","alarm_blocked"]}}]},ERROR_SABOTAGE:{status:[{type:"enum",name:"sabotage error",ref:{value:"armingErrSabo",options:["no_error","sabotage"]}}]},LOWBAT:{status:[{type:"enum",name:"low battery",ref:{value:"armingLowbat",options:["true","false"]}}]}},JALOUSIE:{LEVEL:{command:[{type:"enum",name:"move up",ref:{value:"jalUp"}},{type:"enum",name:"move down",ref:{value:"jalDown"}},{type:"enum",name:"step up",ref:{value:"jalStepUp"}},{type:"enum",name:"step down",ref:{value:"jalStepDown"}},{type:"int",name:"move to",ref:{value:"jalRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"status",ref:{value:"jalLevel"}},{type:"enum",name:"position description",ref:{value:"jalPosDes",options:["top","middle","bottom"]}}]},STOP:{command:[{type:"enum",name:"stop",ref:{value:"jalStop"}}]},DIRECTION:{status:[{type:"enum",name:"direction",ref:{value:"jalDirection",options:["none","up","down","undefined"]}}]},LEVEL_SLATS:{command:[{type:"enum",name:"lamella up",ref:{value:"jalLmlUp"}},{type:"enum",name:"lamella down",ref:{value:"jalLmlDown"}},{type:"int",name:"lamella step up",ref:{value:"jalLmlStepUp",ext:"%d",extMeta:"5-50"}},{type:"int",name:"lamella step down",ref:{value:"jalLmlStepDown",ext:"%d",extMeta:"5-50"}},{type:"int",name:"lamella to",ref:{value:"jalLmlRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"lamella status",ref:{value:"jalLmlLevel"}}]}},SysVar:{binary:{command:[{type:"enum",name:"on",ref:{value:"binaryOn"}},{type:"enum",name:"off",ref:{value:"binaryOff"}},{type:"enum",name:"toggle",ref:{value:"binaryToggle"}}],status:[{type:"enum",name:"state",ref:{value:"binaryState",options:["on","off"]}},{type:"string",name:"mapped state",ref:{value:"mappedState"}}]},"float":{command:[{type:"float",name:"set value",ref:{value:"rawFloatValue",ext:"%f",scale:"0.1"}}],status:[{type:"float",name:"state",ref:{value:"floatState",scale:"0.1"}}]},integer:{command:[{type:"int",name:"set value",ref:{value:"rawIntValue",ext:"%d"}}],status:[{type:"int",name:"state",ref:{value:"intState"}},{type:"string",name:"mapped state",ref:{value:"mappedState"}}]},string:{command:[{type:"string",name:"set value",ref:{value:"rawStringValue",ext:"%s"}}],status:[{type:"string",name:"state",ref:{value:"stringState"}}]}},CCU:{command:[{type:"enum",name:"cloudmatic on",ref:{value:"cloudmaticOn"}},{type:"enum",name:"cloudmatic off",ref:{value:"cloudmaticOff"}},{type:"enum",name:"cloudmatic toggle",ref:{value:"cloudmaticToggle"}}],status:[{type:"string",name:"service message",ref:{value:"serviceMsg"}},{type:"string",name:"ccu time",ref:{value:"ccuTime"}},{type:"enum",name:"cloudmatic state",ref:{value:"cloudmaticState",options:["on","off"]}}]},MOD_EM8BIT_TRANSMITTER:{STATE:{status:[{type:"int",name:"status",ref:{value:"state8bit"}}]},LOWBAT:{status:[{type:"enum",name:"low battery",ref:{value:"lowbat8bit",options:["true","false"]}}]}},DUAL_WHITE_BRIGHTNESS:{DIRECTION:{status:[{type:"enum",name:"dim direction",ref:{value:"dualWBDirection",options:["none","up","down","undefined"]}}]},ERROR_OVERHEAT:{status:[{type:"enum",name:"overheat error",ref:{value:"dualWBErrHeat",options:["no_error","over_heat"]}}]},ERROR_REDUCED:{status:[{type:"enum",name:"reduced error",ref:{value:"dualWBErrReduced",options:["no_error","reduced"]}}]},LEVEL:{command:[{type:"enum",name:"off",ref:{value:"dualWBOff"}},{type:"enum",name:"dim up",ref:{value:"dualWBUp"}},{type:"enum",name:"dim down",ref:{value:"dualWBDown"}},{type:"int",name:"dim to",ref:{value:"dualWBTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"toggle to",ref:{value:"dualWBToggleTo",ext:"%d",extMeta:"1-100"}}],status:[{type:"int",name:"level status",ref:{value:"dualWBLevel"}}]},OLD_LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dualWBOn"}}]}},DUAL_WHITE_COLOR:{DIRECTION:{status:[{type:"enum",name:"color direction",ref:{value:"dualWCDirection",options:["none","up","down","undefined"]}}]},LEVEL:{command:[{type:"enum",name:"color off",ref:{value:"dualWCOff"}},{type:"enum",name:"color up",ref:{value:"dualWCUp"}},{type:"enum",name:"color down",ref:{value:"dualWCDown"}},{type:"int",name:"color to",ref:{value:"dualWCTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"color toggle to",ref:{value:"dualWCToggleTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"color status",ref:{value:"dualWCLevel"}}]},OLD_LEVEL:{command:[{type:"enum",name:"color on",ref:{value:"dualWCOn"}}]}}},xnm.aio.hm.HM_Sec_Sir_WM_MAP={command:[{type:"enum",name:"internal alarm on",ref:{value:"switchSensorInOn"}},{type:"enum",name:"internal alarm off",ref:{value:"switchSensorInOff"}},{type:"enum",name:"internal alarm toggle",ref:{value:"switchSensorInToggle"}},{type:"enum",name:"external alarm on",ref:{value:"switchSensorExOn"}},{type:"enum",name:"external alarm off",ref:{value:"switchSensorExOff"}},{type:"enum",name:"external alarm toggle",ref:{value:"switchSensorExToggle"}},{type:"enum",name:"panic alarm on",ref:{value:"switchPanicOn"}},{type:"enum",name:"panic alarm off",ref:{value:"switchPanicOff"}},{type:"enum",name:"panic alarm toggle",ref:{value:"switchPanicToggle"}},{type:"enum",name:"disarmed",ref:{value:"armingDisarm"}},{type:"enum",name:"internal armed",ref:{value:"armingIntern"}},{type:"enum",name:"all armed",ref:{value:"armingAll"}}],status:[{type:"enum",name:"internal alarm status",ref:{value:"switchSensorInState",options:["off","on"]}},{type:"enum",name:"external alarm status",ref:{value:"switchSensorExState",options:["off","on"]}},{type:"enum",name:"panic alarm status",ref:{value:"switchPanicState",options:["off","on"]}},{type:"enum",name:"arming status",ref:{value:"armingState",options:["disarmed","internal_armed","all_armed","alarm_blocked"]}},{type:"enum",name:"sabotage error",ref:{value:"armingErrSabo",options:["no_error","sabotage"]}},{type:"enum",name:"low battery",ref:{value:"armingLowbat",options:["true","false"]}}]},xnm.aio.hm.HM_WDS30_OT2_SM_2_MAP={status:[{type:"enum",name:"battery low",ref:{value:"maintLowbat",options:["true","false"]}},{type:"float",name:"temperature 1 (T1)",ref:{value:"weatherTemp1",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temperature 2 (T2)",ref:{value:"weatherTemp2",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T1 -T2)",ref:{value:"weatherTemp3",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T2 -T1)",ref:{value:"weatherTemp4",extMeta:"-150.0-150.0",scale:"0.1"}}]},xnm.aio.hm.HM_ES_TX_WM_MAP={status:[{type:"enum",name:"ch1 boot status",ref:{value:"iec1Boot",options:["true","false"]}},{type:"float",name:"ch1 gas energy counter",ref:{value:"iec1GasEnergy",extMeta:"0.000-2147483.647",scale:"0.001"}},{type:"float",name:"ch1 gas power",ref:{value:"iec1GasPower",extMeta:"0.00-16777.215",scale:"0.01"}},{type:"float",name:"ch1 energy counter",ref:{value:"iec1Energy",extMeta:"0.0-838860.7",scale:"0.1"}},{type:"float",name:"ch1 power",ref:{value:"iec1Power",extMeta:"0.00-167772.15",scale:"0.01"}},{type:"float",name:"ch1 iec energy counter",ref:{value:"iec1IecEnergy",extMeta:"0.0-838860.7",scale:"0.1"}},{type:"float",name:"ch1 iec power",ref:{value:"iec1IecPower",extMeta:"0.00-16777.215",scale:"0.01"}},{type:"enum",name:"ch2 boot status",ref:{value:"iec2Boot",options:["true","false"]}},{type:"float",name:"ch2 gas energy counter",ref:{value:"iec2GasEnergy",extMeta:"0.000-2147483.647",scale:"0.001"}},{type:"float",name:"ch2 gas power",ref:{value:"iec2GasPower",extMeta:"0.00-16777.215",scale:"0.01"}},{type:"float",name:"ch2 energy counter",ref:{value:"iec2Energy",extMeta:"0.0-838860.7",scale:"0.1"}},{type:"float",name:"ch2 power",ref:{value:"iec2Power",extMeta:"0.00-167772.15",scale:"0.01"}},{type:"float",name:"ch2 iec energy counter",ref:{value:"iec2IecEnergy",extMeta:"0.0-838860.7",scale:"0.1"}},{type:"float",name:"ch2 iec power",ref:{value:"iec2IecPower",extMeta:"0.00-16777.215",scale:"0.01"}}]},xnm.aio.hm.HM_MOD_EM_8BIT_MAP={command:[{type:"enum",name:"ch.1 short press",ref:{value:"ch1pressShort"}},{type:"enum",name:"ch.1 long press",ref:{value:"ch1pressLong"}},{type:"enum",name:"ch.2 short press",ref:{value:"ch2pressShort"}},{type:"enum",name:"ch.2 long press",ref:{value:"ch2pressLong"}}],status:[{type:"int",name:"state",ref:{value:"state8bit",extMeta:"0-255"}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","off"]}}],ipevt:[{type:"enum",name:"ch.1 short press",ref:{value:"ch1pressShort",options:["true"]}},{type:"enum",name:"ch.1 long press",ref:{value:"ch1pressLong",options:["true"]}},{type:"enum",name:"ch.2 short press",ref:{value:"ch2pressShort",options:["true"]}},{type:"enum",name:"ch.2 long press",ref:{value:"ch2pressLong",options:["true"]}}]},xnm.aio.hm.CUxDTYPE={Temperature_Sensor:{WEATHER:0},"Temp/Hum_Sensor":{WEATHER:1},"KS200/300":{WEATHER:2},FS20_Contact:{SHUTTER_CONTACT:0},FS20_Switch_Sensor:{SWITCH:0},FS20_Alarm:{DANGER:0},FS20_Event_Trigger:{EVENT_INTERFACE:0},FS20_Motion:{MOTION_DETECTOR:0},FS20_Sensor:{SENSOR:0},FS20_Switch:{SWITCH:1},FS20_Dimmer:{DIMMER:0},FS20_Relais:{RELAIS:0},EM1000:{SENSOR:1},"ESA1000/2000":{SENSOR:2},FHT80v:{CLIMATECONTROL_VENT_DRIVE:0},FHT80b:{CLIMATECONTROL_REGULATOR:0,WEATHER:0},FHT_Multiventil:{DIMMER:1},FHT_Contact:{SENSOR:3},"HMS_100_W/WD":{SENSOR:4},Security_Sensor:{SENSOR:4},HMS_100_Contact:{SENSOR:4},KFM_100_S:{CAPACITIVE_FILLING_LEVEL_SENSOR:0},Transform_Device:{WRAPPER:0},Thermostat_Device:{WEATHER:3,CLIMATECONTROL_REGULATOR:1,SWITCH:2},System_Key:{KEY:1},System_Switch:{SWITCH:3},System_Dimmer:{DIMMER:2},System_Blind:{BLIND:0},System_Multi_Dimmer:{SYSTEM:0,DIMMER:3},RS232_Water_Sensor:{SENSOR:5},Universal_Key:{KEY:0},Universal_Switch:{SWITCH:4},Universal_Dimmer:{DIMMER:4},Universal_Shutter:{SHUTTER_CONTACT:1},Universal_Motion:{MOTION_DETECTOR:1},Universal_Alarm:{DANGER:1},Universal_Blind:{BLIND:1},"M-BUS_EnergyCam":{SENSOR:6},EnOcean_Key:{KEY:2},EnOcean_Handle:{ROTARY_HANDLE_SENSOR:0},EnOcean_Contact:{SHUTTER_CONTACT:2},EnOcean_PioTek_Tracker:{KEY:2,SENSOR:7,POWER:0},EnOcean_Motion:{MOTION_DETECTOR:2,WEATHER:4,POWER:0},EnOcean_Brightness:{WEATHER:5},EnOcean_WeatherStation:{WEATHER:6,ENOCEAN_WEATHER2:0},EnOcean_Switch:{SWITCH:5},EnOcean_Dimmer:{DIMMER:5},EnOcean_Blind:{BLIND:2},EnOcean_Airconditioner:{WEATHER:0,CLIMATECONTROL_REGULATOR:3,SWITCH:6,SENSOR:8,ENOCEAN_SENSOR_ERROR:0},EnOcean_Actuator:{WEATHER:0,CLIMATECONTROL_REGULATOR:2,CLIMATECONTROL_VENT_DRIVE:1},EnOcean_Bidi_Switch:{SWITCH:7,POWERMETER:0,ENOCEAN_Bidi_Switch2:0}},xnm.aio.hm.CUxDCHANNEL={KEY:{_level:0,datapoints:[{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",access:"r"},RCVL:{type:"string",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{LEVEL:{type:"float",access:"rw"},OLD_LEVEL:{type:"action",access:"w"},STOP:{type:"action",access:"w"},STATE:{type:"boolean",access:"rw"},CMD_RUNS:{type:"action",access:"w"},CMD_RUNL:{type:"action",access:"w"},CMD_SETS:{type:"string",access:"rw"},CMD_SETL:{type:"string",access:"rw"},CMD_RETS:{type:"string",access:"r"},CMD_RETL:{type:"string",access:"r"},CMD_QUERY_RET:{type:"action",access:"w"},CMD_EXEC:{type:"string",access:"w"},WORKING:{type:"boolean",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},WORKING:{type:"boolean",access:"r"},KEYPRESS_TIME:{type:"float",access:"r"}}]},SWITCH:{_level:5,datapoints:[{STATE:{type:"boolean",access:"rw"},VALUE:{type:"integer",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},EVENTCTR:{type:"integer",access:"rw"},CONTROL:{type:"integer",access:"r"}},{STATE:{type:"boolean",access:"rw"},ON_TIME:{type:"float",access:"w",unit:"s"},TOGGLE:{type:"action",access:"w"},WORKING:{type:"boolean",access:"r"},PROG_TIMER:{type:"float",access:"rw",unit:"s"}},{STATE:{type:"boolean",access:"r"}},{LEVEL:{type:"float",access:"rw"},OLD_LEVEL:{type:"action",access:"w"},STOP:{type:"action",access:"w"},STATE:{type:"boolean",access:"rw"},CMD_RUNS:{type:"action",access:"w"},CMD_RUNL:{type:"action",access:"w"},CMD_SETS:{type:"string",access:"rw"},CMD_SETL:{type:"string",access:"rw"},CMD_RETS:{type:"string",access:"r"},CMD_RETL:{type:"string",access:"r"},CMD_QUERY_RET:{type:"action",access:"w"},CMD_EXEC:{type:"string",access:"w"},WORKING:{type:"boolean",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",access:"r"},RCVL:{type:"string",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{STATE:{type:"boolean",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},POWER:{type:"float",access:"r"},ENERGY_COUNTER:{type:"float",access:"r"}},{STATE:{type:"boolean",access:"rw"}},{STATE:{type:"boolean",access:"rw"},ON_TIME:{type:"float",access:"w",unit:"s"},INHIBIT:{type:"boolean",access:"rw"},NIGHT_MODE:{type:"boolean",access:"w"},INFO_LED:{type:"integer",access:"w"},WORKING:{type:"boolean",access:"r"},ERROR_OVERLOAD:{type:"boolean",access:"r"}}]},DIMMER:{_level:7,datapoints:[{LEVEL:{type:"float",access:"rw",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},RAMP_TIME:{type:"float",access:"w",unit:"s"},ON_TIME:{type:"float",access:"w",unit:"s"},TOGGLE:{type:"action",access:"w"},WORKING:{type:"boolean",access:"r"},PROG_TIMER:{type:"float",access:"rw"},PROG_DIM_UP:{type:"float",access:"rw"},PROG_DIM_DOWN:{type:"float",access:"rw"}},{LEVEL:{type:"float",access:"rw",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"}},{LEVEL:{type:"float",access:"rw"},OLD_LEVEL:{type:"action",access:"w"},STOP:{type:"action",access:"w"},STATE:{type:"boolean",access:"rw"},CMD_RUNS:{type:"action",access:"w"},CMD_RUNL:{type:"action",access:"w"},CMD_SETS:{type:"string",access:"rw"},CMD_SETL:{type:"string",access:"rw"},CMD_RETS:{type:"string",access:"r"},CMD_RETL:{type:"string",access:"r"},CMD_QUERY_RET:{type:"action",access:"w"},CMD_EXEC:{type:"string",access:"w"},WORKING:{type:"boolean",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{LEVEL:{type:"float",access:"rw"},OLD_LEVEL:{type:"action",access:"w"},SET_STATE:{type:"float",access:"w"}},{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",access:"r"},RCVL:{type:"string",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{LEVEL:{type:"float",access:"rw",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},RAMP_TIME:{type:"float",access:"w",unit:"s"},ON_TIME:{type:"float",access:"w",unit:"s"},WORKING:{type:"boolean",access:"r"},POWER:{type:"float",access:"r"},ENERGY_COUNTER:{type:"float",access:"r"}}]},BLIND:{_level:9,datapoints:[{LEVEL:{type:"float",access:"rw"},OLD_LEVEL:{type:"action",access:"w"},STOP:{type:"action",access:"w"},STATE:{type:"boolean",access:"rw"},CMD_RUNS:{type:"action",access:"w"},CMD_RUNL:{type:"action",access:"w"},CMD_SETS:{type:"string",access:"rw"},CMD_SETL:{type:"string",access:"rw"},CMD_RETS:{type:"string",access:"r"},CMD_RETL:{type:"string",access:"r"},CMD_QUERY_RET:{type:"action",access:"w"},CMD_EXEC:{type:"string",access:"w"},WORKING:{type:"boolean",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",access:"r"},RCVL:{type:"string",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},RAMP_TIME:{type:"float",access:"w"},ON_TIME:{type:"float",access:"w"},WORKING:{type:"boolean",access:"r"},DIRECTION:{type:"option",access:"r",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}}}]},CLIMATECONTROL_REGULATOR:{_level:14,datapoints:[{SETPOINT:{type:"float",access:"rw",min:0,max:99.5,unit:"°C",special:{5.5:"OFF",30.5:"ON"}},STATE:{type:"boolean",access:"w",0:"VENT_CLOSED",1:"VENT_OPEN"},MODE_TEMPERATUR_REGULATOR:{type:"integer",access:"rw",special:{0:"AUTOMATIC",1:"MANUAL",2:"PARTY"}},TEMPERATUR_COMFORT_VALUE:{type:"float",access:"rw",min:0,max:99.5,unit:"°C"},TEMPERATUR_LOWERING_VALUE:{type:"float",access:"rw",min:0,max:99.5,unit:"°C"},TEMPERATUR_WINDOW_OPEN_VALUE:{type:"float",access:"rw",min:0,max:99.5,unit:"°C"},PARTY_END_TIME:{type:"string",access:"rw"}},{SETPOINT:{type:"float",access:"rw",min:0,max:99.5,unit:"°C",special:{5.5:"OFF",30.5:"ON"}},STATE:{type:"boolean",access:"r",0:"VENT_CLOSED",1:"VENT_OPEN"},LEVEL:{type:"float",access:"r"},SET_INVERT:{type:"boolean",access:"rw"}},{SETPOINT:{type:"float",access:"rw",min:0,max:99.5,unit:"°C",special:{5.5:"OFF",30.5:"ON"}},VALVE_STATE:{type:"integer",access:"w",min:0,max:100,unit:"%"},SUMMER_MODE:{type:"boolean",access:"rw"}},{SETPOINT:{type:"float",access:"rw",min:0,max:99.5,unit:"°C",special:{5.5:"OFF",30.5:"ON"}}}]},CLIMATECONTROL_VENT_DRIVE:{_level:15,datapoints:[{VALVE_STATE:{type:"integer",access:"r",unit:"%"},VALVE_OFFSET_VALUE:{type:"float",access:"r",unit:"%"}},{VALVE_STATE:{type:"integer",access:"r",unit:"%"},TEMPERATURE:{type:"float",access:"r"},ALARM:{type:"boolean",access:"r"}}]},WEATHER:{_level:18,datapoints:[{TEMPERATURE:{type:"float",access:"r",unit:"°C"}},{TEMPERATURE:{type:"float",access:"r",unit:"°C"},HUMIDITY:{type:"integer",access:"r",unit:"%"},HUMIDITYF:{type:"float",access:"r",unit:"%"},DEW_POINT:{type:"float",access:"r",unit:"°C"},ABS_HUMIDITY:{type:"float",access:"r",unit:"g/m3"}},{TEMPERATURE:{type:"float",access:"r",unit:"°C"},HUMIDITY:{type:"integer",access:"r",unit:"%"},RAINING:{type:"boolean",access:"r",unit:"%"},RAIN_CTR:{type:"float",access:"r",unit:"mm"},WIND_SPEED:{type:"float",access:"r",unit:"km/h"},DEW_POINT:{type:"float",access:"r",unit:"°C"},ABS_HUMIDITY:{type:"float",access:"r",unit:"g/m3"}},{TEMPERATURE:{type:"float",access:"r",unit:"°C"},HUMIDITY:{type:"integer",access:"r",unit:"%"},DEW_POINT:{type:"float",access:"r",unit:"°C"},ABS_HUMIDITY:{type:"float",access:"r",unit:"g/m3"},SET_TEMPERATURE:{type:"float",access:"w",unit:"°C"},SET_HUMIDITY:{type:"float",access:"w",unit:"%"},TEMP_MIN_24H:{type:"float",access:"r",unit:"°C"},TEMP_MAX_24H:{type:"float",access:"r",unit:"°C"},HUM_MIN_24H:{type:"float",access:"r",unit:"%"},HUM_MAX_24H:{type:"float",access:"r",unit:"%"}},{TEMPERATURE:{type:"float",access:"r",unit:"°C"},BRIGHTNESS:{type:"integer",access:"r",unit:"lx"}},{BRIGHTNESS:{type:"integer",access:"r",unit:"lx"},MEDIAN:{type:"float",access:"r",unit:"lx"},MEAN:{type:"float",access:"r",unit:"lx"},BAT_VOLTAGE:{type:"float",access:"r"}},{BRIGHTNESS:{type:"integer",access:"r",unit:"lx"},WIND_SPEED:{type:"float",access:"r",unit:"km/h"},RAINING:{type:"boolean",access:"r"},TEMPERATURE:{type:"float",access:"r",unit:"°C"}}]},ROTARY_HANDLE_SENSOR:{_level:22,datapoints:[{STATE:{type:"option",access:"re",values:{0:"CLOSED",1:"TILTED",2:"OPEN"}}}]},SHUTTER_CONTACT:{_level:23,datapoints:[{STATE:{type:"boolean",access:"rw"},VALUE:{type:"integer",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},EVENTCTR:{type:"integer",access:"rw"},CONTROL:{type:"integer",access:"r"}},{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",access:"r"},RCVL:{type:"string",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{STATE:{type:"boolean",access:"r"}}]},MOTION_DETECTOR:{_level:25,datapoints:[{MOTION:{type:"boolean",access:"rw"},VALUE:{type:"integer",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},EVENTCTR:{type:"integer",access:"rw"},CONTROL:{type:"integer",access:"r"}},{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",access:"r"},RCVL:{type:"string",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{MOTION:{type:"boolean",access:"r"},BRIGHTNESS:{type:"float",access:"r"}}]},CAPACITIVE_FILLING_LEVEL_SENSOR:{_level:29,datapoints:[{FILLING_LEVEL:{type:"float",access:"r"},FREQ:{type:"float",access:"r"}}]},SENSOR:{_level:37,datapoints:[{STATE:{type:"boolean",access:"rw"},VALUE:{type:"integer",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},EVENTCTR:{type:"integer",access:"rw"},CONTROL:{type:"integer",access:"r"}},{COUNTER:{type:"integer",access:"r"},SUM:{type:"float",access:"r"},MEAN5MINUTES:{type:"float",access:"r"},MAX5MINUTES:{type:"float",access:"r"},SUM_1H:{type:"float",access:"r"},MAX_1H:{type:"float",access:"r"},SUM_24H:{type:"float",access:"r"},MAX_24H:{type:"float",access:"r"},MISS_24H:{type:"integer",access:"r"},METER:{type:"float",access:"r"},CONTROL:{type:"integer",access:"r"}},{COUNTER:{type:"integer",access:"r"},SUM:{type:"float",access:"r"},LAST_VALUE:{type:"float",access:"r"},LAST_TICKS:{type:"float",access:"r"},UNITSPTURN:{type:"float",access:"r"},METER:{type:"float",access:"r"},SUM_1H:{type:"float",access:"r"},SUM_24H:{type:"float",access:"r"},CONTROL:{type:"integer",access:"r"}},{STATE:{type:"boolean",access:"r"}},{STATE:{type:"boolean",access:"r"},COUNTER:{type:"integer",access:"r"}},{DISTANCE:{type:"float",access:"r",unit:"cm"},F_PERCENT:{type:"integer",access:"r",unit:"%"},F_LEVEL:{type:"float",access:"r",unit:"cm"},F_VOLUME:{type:"float",access:"r",unit:"l"},RELAIS1:{type:"boolean",access:"r"},RELAIS2:{type:"boolean",access:"r"}},{INFO:{type:"string",access:"r"},COUNTER:{type:"integer",access:"r"},METER:{type:"float",access:"r"},SUM_24H:{type:"float",access:"r"},SUM:{type:"float",access:"r"},SUM_DATE:{type:"string",access:"r"},SUM_RESET:{type:"action",access:"w"}},{STATE:{type:"boolean",access:"r"},NOTIFICATION:{type:"action",access:"e"}},{MODE:{type:"integer",access:"rw",special:{0:"auto",1:"heat",3:"cool",9:"fan_only",14:"dry"}},VANE:{type:"integer",access:"rw",special:{11:"vertical",12:"horizontal",13:"both",14:"stop"}},SPEED:{type:"integer",access:"rw",special:{0:"auto",1:"low",2:"mid1",3:"mid2",4:"mid3",5:"high"}},ROOM:{type:"option",access:"rw",special:{0:"occupied",1:"standy",2:"unoccupied",3:"off"}}}]},POWERMETER:{_level:38,datapoints:[{POWER:{type:"float",access:"r",unit:"W"},ENERGY_COUNTER:{type:"float",access:"r",unit:"kWh/Wh"},SUM_1H:{type:"float",access:"r"},SUM_24H:{type:"float",access:"r"},VOLTAGE:{type:"float",access:"r",unit:"V"}}]},DANGER:{_level:44,datapoints:[{STATE:{type:"boolean",access:"rw"},VALUE:{type:"integer",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},EVENTCTR:{type:"integer",access:"rw"},CONTROL:{type:"integer",access:"r"}},{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",access:"r"},RCVL:{type:"string",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}}]},EVENT_INTERFACE:{_level:45,datapoints:[{STATE:{type:"action",access:"w"},VALUE:{type:"integer",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},EVENTCTR:{type:"integer",access:"rw"},CONTROL:{type:"integer",access:"r"}}]},RELAIS:{_level:45,datapoints:[{STATE:{type:"boolean",access:"rw"},VALUE:{type:"integer",access:"r"},TRANS:{type:"string",access:"r"},ON_TIME:{type:"float",access:"r",unit:"s"},RAMP_TIME:{type:"float",access:"r",unit:"s"}}]},WRAPPER:{_level:46,datapoints:[{"[DATAPT]":{type:"float",access:"r"},MEDIAN:{type:"float",access:"r"},MEAN:{type:"float",access:"r"},SET_STATE:{type:"float",access:"w"}}]},SYSTEM:{_level:47,datapoints:[{STATE:{type:"action",access:"we"},HOLD:{type:"action",access:"w"}}]},POWER:{_level:48,datapoints:[{BAT_VOLTAGE:{type:"float",access:"r"}}]},ENOCEAN_WEATHER2:{_level:49,datapoints:[{BRIGHTNESS_WEST:{type:"integer",access:"r",unit:"lx"},BRIGHTNESS_SOUTH:{type:"integer",access:"r",unit:"lx"},BRIGHTNESS_EAST:{type:"integer",access:"r",unit:"lx"}}]},ENOCEAN_SENSOR_ERROR:{_level:50,datapoints:[{ERROR:{type:"string",access:"r"}}]},ENOCEAN_Bidi_Switch2:{_level:51,datapoints:[{STATE:{type:"boolean",access:"r"}}]},"VIR-LG-RGBW-DIM-CH":{_level:52,datapoints:[{LEVEL:{type:"float",access:"rw"},OLD_LEVEL:{type:"action",access:"w"},STOP:{type:"action",access:"w"},STATE:{type:"boolean",access:"rw"},RGBW:{type:"string",access:"rw"},WHITE:{type:"float",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},CMD_RUNS:{type:"action",access:"w"},CMD_RUNL:{type:"action",access:"w"},CMD_SETS:{type:"string",access:"rw"},CMD_SETL:{type:"string",access:"rw"},CMD_RETS:{type:"string",access:"r"},CMD_RETL:{type:"string",access:"r"},CMD_QUERY_RET:{type:"action",access:"w"},CMD_EXEC:{type:"string",access:"w"},WORKING:{type:"boolean",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}}]}},xnm.aio.hm.CUxDMAP={KEY:{PRESS_SHORT:{command:[{type:"enum",name:"short press",ref:{value:"pressShort"}}]},PRESS_LONG:{command:[{type:"enum",name:"long press",ref:{value:"pressLong"}}]},CMD_RUNS:{command:[{type:"enum",name:"short press command",ref:{value:"cmdShort"}}]},CMD_RUNL:{command:[{type:"enum",name:"long press command",ref:{value:"cmdLong"}}]}},SWITCH:{STATE:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}}]},POWER:{status:[{type:"float",name:"switch power",ref:{value:"switchPower"}}]},ENERGY_COUNTER:{status:[{type:"float",name:"switch energy counter",ref:{value:"switchEnergyCount"}}]},NIGHT_MODE:{command:[{type:"enum",name:"night mode on",ref:{value:"switchNightOn"}},{type:"enum",name:"night mode off",ref:{value:"switchNightOff"}},{type:"enum",name:"night mode toggle",ref:{value:"switchNightToggle"}}]},INFO_LED:{command:[{type:"enum",name:"led off",ref:{value:"switchLedOff"}},{type:"enum",name:"led green",ref:{value:"switchLedGreen"}},{type:"enum",name:"led oragne",ref:{value:"switchLedOrange"}},{type:"enum",name:"led red",ref:{value:"switchLedRed"}}]}},DIMMER:{LEVEL:{command:[{type:"enum",name:"off",ref:{value:"dimOff"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"dim to",ref:{value:"dimRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"dimmer status",ref:{value:"dimmerLevel"}}]},OLD_LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dimOn"}}]},TOGGLE:{command:[{type:"enum",name:"on",ref:{value:"dimToggle"}}]},POWER:{status:[{type:"float",name:"dimmer power",ref:{value:"dimPower"}}]},ENERGY_COUNTER:{status:[{type:"float",name:"dimmer energy counter",ref:{value:"dimEnergyCount"}}]}},BLIND:{LEVEL:{command:[{type:"enum",name:"move up",ref:{value:"blindUp"}},{type:"enum",name:"move down",ref:{value:"blindDown"}},{type:"enum",name:"step up",ref:{value:"blindStepUp"}},{type:"enum",name:"step down",ref:{value:"blindStepDown"}},{type:"int",name:"move to",ref:{value:"blindRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"blind status",ref:{value:"blindLevel"}}]},STOP:{command:[{type:"enum",name:"stop",ref:{value:"blindStop"}}]}},"VIR-LG-RGBW-DIM-CH":{STATE:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}}]},LEVEL:{command:[{type:"enum",name:"dim off",ref:{value:"dimOff"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"dim to",ref:{value:"dimRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"dimmer status",ref:{value:"dimmerLevel"}}]},OLD_LEVEL:{command:[{type:"enum",name:"dim on",ref:{value:"dimOn"}}]},STOP:{command:[{type:"enum",name:"stop",ref:{value:"dimStop"}}]},RGBW:{command:[{type:"rgbw",name:"color",ref:{value:"dimColor",ext:"%rgbw"}},{type:"string",name:"color (string)",ref:{value:"dimColorS",ext:"%s"}}],status:[{type:"string",name:"color",ref:{value:"dimmerColor"}}]},WHITE:{command:[{type:"float",name:"color temparature",ref:{value:"dimColorTemp",ext:"%f",extMeta:"2000-6500"}}],status:[{type:"float",name:"color temparature",ref:{value:"dimmerColorTemp"}}]},TOGGLE:{command:[{type:"enum",name:"dim toggle",ref:{value:"dimToggle"}}]}},CLIMATECONTROL_REGULATOR:{SETPOINT:{command:[{type:"enum",name:"temperature up",ref:{value:"themoRTempUp"}},{type:"enum",name:"temperature down",ref:{value:"themoRTempDown"}},{type:"enum",name:"close",ref:{value:"themoRTempClose"}},{type:"enum",name:"open",ref:{value:"themoRTempOpen"}},{type:"float",name:"temperature to",ref:{value:"themoRTempRaw",ext:"%f",extMeta:"5-30",scale:"0.5"}}],status:[{type:"float",name:"set temperature",ref:{value:"themoRSetTemp",extMeta:"5-30",scale:"0.5"}}]},STATE:{command:[{type:"enum",name:"valve open",ref:{value:"themoRValveOpen"}},{type:"enum",name:"valve close",ref:{value:"themoRValveClose"}}]},MODE_TEMPERATUR_REGULATOR:{command:[{type:"enum",name:"auto",ref:{value:"themoRModeAuto"}},{type:"enum",name:"manu",ref:{value:"themoRModeManu"}}],status:[{type:"enum",name:"mode",ref:{value:"themoRMode",options:["auto","manu","party"]}}]},TEMPERATUR_COMFORT_VALUE:{command:[{type:"float",name:"comfort temperature to",ref:{value:"themoRComfortTempRaw",ext:"%f",extMeta:"5-30",scale:"0.5"}}],status:[{type:"float",name:"comfort temperature",ref:{value:"themoRComfortTemp",extMeta:"5-30",scale:"0.5"}}]},TEMPERATUR_LOWERING_VALUE:{command:[{type:"float",name:"lowering temperature to",ref:{value:"themoRLowerTempRaw",ext:"%f",extMeta:"5-30",scale:"0.5"}}],status:[{type:"float",name:"lowering temperature",ref:{value:"themoRLowerTemp",extMeta:"5-30",scale:"0.5"}}]},TEMPERATUR_WINDOW_OPEN_VALUE:{command:[{type:"float",name:"win open temperature to",ref:{value:"themoRWinTempRaw",ext:"%f",extMeta:"5-30",scale:"0.5"}}],status:[{type:"float",name:"win open temperature",ref:{value:"themoRWinTemp",extMeta:"5-30",scale:"0.5"}}]},PARTY_END_TIME:{command:[{type:"string",name:"party end time",ref:{value:"themoRSetPartyEnd",ext:"%s"}}],status:[{type:"string",name:"party end time",ref:{value:"themoRPartyEnd"}}]},VALVE_STATE:{command:[{type:"int",name:"valve state",ref:{value:"themoRValveState",ext:"%d"}}]},SUMMER_MODE:{command:[{type:"enum",name:"summer mode on",ref:{value:"themoRSummerOn"}},{type:"enum",name:"summer mode off",ref:{value:"themoRSummerOff"}},{type:"enum",name:"summer mode toggle",ref:{value:"themoRSummerToggle"}}],status:[{type:"enum",name:"summer mode",ref:{value:"themoRSummer",options:["off","on"]}}]}},CLIMATECONTROL_VENT_DRIVE:{VALVE_STATE:{status:[{type:"int",name:"valve state",ref:{value:"valveState"}}]},VALVE_OFFSET_VALUE:{status:[{type:"float",name:"valve offset",ref:{value:"valveOffset"}}]},TEMPERATURE:{status:[{type:"float",name:"temperature",ref:{value:"valveTemperature"}}]},ALARM:{status:[{type:"enmu",name:"alarm",ref:{value:"valveAlamr",options:["ok","alarm"]}}]}},WEATHER:{TEMPERATURE:{status:[{type:"float",name:"temperature",ref:{value:"weatherTemp"}}]},HUMIDITY:{status:[{type:"int",name:"humidity",ref:{value:"weatherHum"}}]},TEMP_MIN_24H:{status:[{type:"float",name:"min temperature 24h",ref:{value:"weatherMinTemp"}}]},TEMP_MAX_24H:{status:[{type:"float",name:"max temperature 24h",ref:{value:"weatherMaxTemp"}}]},HUM_MIN_24H:{status:[{type:"float",name:"min humidity 24h",ref:{value:"weatherMinHum"}}]},HUM_MAX_24H:{status:[{type:"float",name:"max humidity 24h",ref:{value:"weatherMaxHum"}}]},HUMIDITYF:{status:[{type:"float",name:"humidity (float)",ref:{value:"weatherHumF"}}]},DEW_POINT:{status:[{type:"float",name:"dew point",ref:{value:"weatherDew"}}]},ABS_HUMIDITY:{status:[{type:"float",name:"absolute humidity",ref:{value:"weatherHumAbs"}}]},RAINING:{status:[{type:"enum",name:"raining",ref:{value:"weatherRaining",options:["true","false"]}}]},RAIN_CTR:{status:[{type:"float",name:"rain counter",ref:{value:"weatherRainCounter"}}]},WIND_SPEED:{status:[{type:"float",name:"wind speed",ref:{value:"weatherWindS"}}]},BRIGHTNESS:{status:[{type:"int",name:"brightness",ref:{value:"weatherBright"}}]},BAT_VOLTAGE:{status:[{type:"float",name:"battery voltage",ref:{value:"weatherBatVolt"}}]}},ROTARY_HANDLE_SENSOR:{STATE:{status:[{type:"enum",name:"handle state",ref:{value:"handleState",options:["closed","tilted","open"]}}]}},SHUTTER_CONTACT:{STATE:{status:[{type:"enum",name:"contact state",ref:{value:"shutterState",value_t:"contactState",options:["closed","open"]}}]}},MOTION_DETECTOR:{MOTION:{status:[{type:"enum",name:"state",ref:{value:"motionState",options:["on","off"]}}]},BRIGHTNESS:{status:[{type:"float",name:"brightness",ref:{value:"motionBright"}}]}},CAPACITIVE_FILLING_LEVEL_SENSOR:{FILLING_LEVEL:{status:[{type:"float",name:"level",ref:{value:"fillingLevel"}}]}},SENSOR:{STATE:{status:[{type:"enum",name:"state",ref:{value:"sensorState",options:["false","true"]}}]},SUM:{status:[{type:"float",name:"meter sum",ref:{value:"sensorSum"}}]},MEAN5MINUTES:{status:[{type:"float",name:"meter mean value (5 min)",ref:{value:"sensorMean5min"}}]},MAX5MINUTES:{status:[{type:"float",name:"meter max value (5 min)",ref:{value:"sensorMax5min"}}]},SUM_1H:{status:[{type:"float",name:"meter sum (1h)",ref:{value:"sensorSum1h"}}]},MAX_1H:{status:[{type:"float",name:"meter max value (1h)",ref:{value:"sensorMax1h"}}]},SUM_24H:{status:[{type:"float",name:"meter sum (24h)",ref:{value:"sensorSum24h"}}]},MAX_24H:{status:[{type:"float",name:"meter max value (24hn)",ref:{value:"sensorMax24h"}}]},METER:{status:[{type:"float",name:"meter value",ref:{value:"sensorMeter"}}]},LAST_VALUE:{status:[{type:"float",name:"meter last value",ref:{value:"sensorLastValue"}}]},DISTANCE:{status:[{type:"float",name:"water distance",ref:{value:"sensorDistance"}}]},F_PERCENT:{status:[{type:"integer",name:"water fill percent",ref:{value:"sensorFPercent"}}]},F_LEVEL:{status:[{type:"float",name:"water fill level",ref:{value:"sensorFLevel"}}]},F_VOLUME:{status:[{type:"float",name:"water fill volume",ref:{value:"sensorFVolume"}}]},RELAIS1:{status:[{type:"enum",name:"relais1 state",ref:{value:"sensorRelais1",options:["false","true"]}}]},RELAIS2:{status:[{type:"enum",name:"relais2 state",ref:{value:"sensorRelais2",options:["false","true"]}}]},INFO:{status:[{type:"string",name:"sensor info",ref:{value:"sensorInfo"}}]},SUM_DATE:{status:[{type:"string",name:"meter sum date",ref:{value:"sensorSumDate"}}]},SUM_RESET:{command:[{type:"enum",name:"meter sum reset",ref:{value:"sensorSumReset"}}]},MODE:{command:[{type:"enum",name:"aircon. auto mode",ref:{value:"sensModeAuto"}},{type:"enum",name:"aircon. heat mode",ref:{value:"sensModeHeat"}},{type:"enum",name:"aircon. cool mode",ref:{value:"sensModeCool"}},{type:"enum",name:"aircon. fan only mode",ref:{value:"sensModeFanOnly"}},{type:"enum",name:"aircon. dry mode",ref:{value:"sensModeDry"}}],status:[{type:"enum",name:"aircon mode",ref:{value:"sensMode",options:["auto","heat","cool","fan_only","dry"]}}]},VANE:{command:[{type:"enum",name:"vertical swing",ref:{value:"sensSwingV"}},{type:"enum",name:"horizontal swing",ref:{value:"sensSwingH"}},{type:"enum",name:"vertical and horizontal swing",ref:{value:"sensSwingVH"}},{type:"enum",name:"stop swing",ref:{value:"sensSwingS"}}],status:[{type:"enum",name:"swing mode",ref:{value:"sensSwing",options:["vertical","horizontal","both","stop"]}}]},SPEED:{command:[{type:"enum",name:"speed auto",ref:{value:"sensSpeedAuto"}},{type:"enum",name:"speed low",ref:{value:"sensSpeedLow"}},{type:"enum",name:"speed mid1",ref:{value:"sensSpeedMid1"}},{type:"enum",name:"speed mid2",ref:{value:"sensSpeedMid2"}},{type:"enum",name:"speed mid3",ref:{value:"sensSpeedMid3"}},{type:"enum",name:"speed high",ref:{value:"sensSpeedHigh"}}],status:[{type:"enum",name:"speed",ref:{value:"sensSpeed",options:["auto","low","mid1","mid2","mid3","high"]}}]},ROOM:{command:[{type:"enum",name:"occupied",ref:{value:"sensRoomOccu"}},{type:"enum",name:"standby",ref:{value:"sensRoomStandby"}},{type:"enum",name:"unoccupied",ref:{value:"sensRoomUnoccu"}},{type:"enum",name:"off",ref:{value:"sensRoomOff"}}],status:[{type:"enum",name:"room",ref:{value:"sensRoom",options:["occupied","standby","unoccupied","off"]}}]}},POWERMETER:{POWER:{status:[{type:"float",name:"power",ref:{value:"powerMeterPower"}}]},ENERGY_COUNTER:{status:[{type:"float",name:"energy counter",ref:{value:"powerMeterECount"}}]},SUM_1H:{status:[{type:"float",name:"meter sum (1h)",ref:{value:"powerMeterSum1h"}}]},SUM_24H:{status:[{type:"float",name:"meter sum (24h)",ref:{value:"powerMeterSum24h"}}]},VOLTAGE:{status:[{type:"float",name:"meter voltage",ref:{value:"powerMeterVoltage"}}]}},DANGER:{STATE:{status:[{type:"enum",name:"alarm state",ref:{value:"dangerState",options:["ok","danger"]}}]}},EVENT_INTERFACE:{STATE:{command:[{type:"enum",name:"press",ref:{value:"evntIntfPress"}}]}},RELAIS:{STATE:{command:[{type:"enum",name:"on",ref:{value:"relaisOn"}},{type:"enum",name:"off",ref:{value:"relaisOff"}},{type:"enum",name:"toggle",ref:{value:"relaisToggle"}}],status:[{type:"enum",name:"relais status",ref:{value:"relaisState",options:["off","on"]}}]}},WRAPPER:{"[DATAPT]":{status:[{type:"float",name:"value",ref:{value:"wrapperValue"}}]}},SYSTEM:{STATE:{command:[{type:"enum",name:"press",ref:{value:"systemPress"}}]}},FHT_Multiventil_Dimmer:{LEVEL:{command:[{type:"enum",name:"off",ref:{value:"valveOff"}},{type:"enum",name:"valve up",ref:{value:"valveUp"}},{type:"enum",name:"valve down",ref:{value:"valveDown"}},{type:"int",name:"valve to",ref:{value:"valveRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"float",name:"valve status",ref:{value:"valveLevel"}}]},OLD_LEVEL:{command:[{type:"enum",name:"on",ref:{value:"valveOn"}}]}},POWER:{BAT_VOLTAGE:{status:[{type:"float",name:"battery voltage",ref:{value:"powBatVolt"}}]}},HMS_100_Contact:{STATE:{status:[{type:"enum",name:"state",ref:{value:"hmsContactState",options:["close","open"]}}]}},Security_Sensor:{STATE:{status:[{type:"enum",name:"state",ref:{value:"securityState",options:["ok","danger"]}}]}},FHT_Contact:{STATE:{status:[{type:"enum",name:"state",ref:{value:"fhtContactState",options:["close","open"]}}]}},ENOCEAN_WEATHER2:{BRIGHTNESS_WEST:{status:[{type:"int",name:"brightness west",ref:{value:"eoWeather2BrightW"}}]},BRIGHTNESS_SOUTH:{status:[{type:"int",name:"brightness south",ref:{value:"eoWeather2BrightS"}}]},BRIGHTNESS_EAST:{status:[{type:"int",name:"brightness east",ref:{value:"eoWeather2BrightE"}}]}},ENOCEAN_SENSOR_ERROR:{ERROR:{status:[{type:"string",name:"error",ref:{value:"eoSensorErr"}}]}},ENOCEAN_Bidi_Switch2:{STATE:{status:[{type:"enum",name:"cosumer state",ref:{value:"bidiSwitch2State",options:["off","on"]}}]}}},xnm.aio.hm.HMIP_TYPE={"HMIP-PS":0,"HmIP-PCBS":0,"HmIP-PCBS-BAT":0,"HmIP-SWDM":1,"HMIP-SWDO":1,"HmIP-SWDM-B2":1,"Contact AA":1,"HMIP-WTH":2,"HmIP-WTH-2":2,"HmIP-STH":2,"HmIP-STHD":2,"HMIP-eTRV":3,"HmIP-eTRV-2":3,"HmIP-eTRV-2-UK":3,"HmIP-eTRV-B":3,"HmIP-eTRV-B-UK":3,"HmIP-eTRV-B1":3,"HmIP-eTRV-C":3,"HmIP-eTRV-C-2":3,"HmIP-eTRV-E":3,"HmIP-eTRV-E-S":3,"HMIP-WRC2":4,"HMIP-KRC4":4,"HmIP-WRC6":4,"HmIP-SMI":5,"HmIP-SMO":5,"HmIP-SMO-A":5,"HmIP-SRH":6,"HMIP-PSM":7,"HmIP-PSM-UK":7,"HmIP-PSM-IT":7,"HmIP-PSM-CH":7,"Smart Plug AA":7,"HmIP-SWSD":8,"Smoke Detektor":8,"HmIP-BSM":9,"HmIP-FSM":9,"HmIP-BDT":10,"HmIP-ASIR":11,"HmIP-ASIR-2":11,"HmIP-PDT":10,"HmIP-BROLL":12,"HmIP-FROLL":12,"HmIP-BBL":13,"HmIP-FBL":13,"HmIP-SPI":14,"HmIP-FAL230-C6":15,"HmIP-FAL24-C6":15,"HmIP-FAL230-C10":15,"HmIP-FAL24-C10":15,"HmIP-SWO-B":16,"HmIP-SWO-PL":17,"HmIP-STHO":18,"HmIP-STHO-A":18,"HmIP-SPDR":19,"HmIP-SWO-PR":20,"HmIP-HEATING":21},xnm.aio.hm.HMIP_CATAGORY=[{catagory:"IP Schaltaktor",channels:{MAINTENANCE:1,KEY_TRANSCEIVER:0,SWITCH_TRANSMITTER:0,SWITCH_VIRTUAL_RECEIVER:0}},{catagory:"IP Tür-/Fensterkontakt",channels:{MAINTENANCE:2,SHUTTER_CONTACT:0}},{catagory:"IP Wandthermostat",channels:{MAINTENANCE:0,HEATING_CLIMATECONTROL_TRANSCEIVER:0}},{catagory:"IP Ventilsteuerung",channels:{MAINTENANCE:0,HEATING_CLIMATECONTROL_TRANSCEIVER:1}},{catagory:"IP Wandtaster",channels:{MAINTENANCE:0,KEY_TRANSCEIVER:0}},{catagory:"IP Bewegungsmelder",channels:{MAINTENANCE:2,MOTIONDETECTOR_TRANSCEIVER:0}},{catagory:"IP Window Handle Sensor",channels:{MAINTENANCE:2,ROTARY_HANDLE_TRANSCEIVER:0}},{catagory:"IP Energiemesssteckdose",channels:{MAINTENANCE:1,ENERGIE_METER_TRANSMITTER:0,SWITCH_VIRTUAL_RECEIVER:0}},{catagory:"IP Rauchmelder",channels:{MAINTENANCE_SD:0,SMOKE_DETECTOR:0}},{catagory:"IP Energiemess-Schaltaktor",channels:{MAINTENANCE:1,SWITCH_TRANSMITTER:0,SWITCH_VIRTUAL_RECEIVER:0,ENERGIE_METER_TRANSMITTER:0}},{catagory:"IP Dimmaktor",channels:{MAINTENANCE:1,DIMMER_TRANSMITTER:0,DIMMER_VIRTUAL_RECEIVER:0}},{catagory:"IP Alarmsiren",channels:{MAINTENANCE:2,ALARM_SWITCH_VIRTUAL_RECEIVER:0}},{catagory:"IP Rolladenaktor",channels:{MAINTENANCE:1,SHUTTER_TRANSMITTER:0,SHUTTER_VIRTUAL_RECEIVER:0}},{catagory:"IP Jalousieaktor",channels:{MAINTENANCE:1,BLIND_TRANSMITTER:0,BLIND_VIRTUAL_RECEIVER:0}},{catagory:"IP Presencemelder",channels:{MAINTENANCE:2,PRESENCEDETECTOR_TRANSCEIVER:0}},{catagory:"IP Fussbodenheizung",channels:{MAINTENANCE:1,CLIMATECONTROL_FLOOR_PUMP_TRANSCEIVER:0,CLIMATECONTROL_FLOOR_TRANSCEIVER:0}},{catagory:"IP Weather Sensor Basic",channels:{MAINTENANCE:0,WEATHER_TRANSMIT:0}},{catagory:"IP Weather Sensor Plus",channels:{MAINTENANCE:0,WEATHER_TRANSMIT:1}},{catagory:"IP Temperature and Humidity Sensor - Outdoor",channels:{MAINTENANCE:0,CLIMATE_TRANSCEIVER:0}},{catagory:"IP Passage Sensor with Direction Recognition",channels:{MAINTENANCE:0,PASSAGE_DETECTOR_DIRECTION_TRANSMITTER:0}},{catagory:"IP Weather Sensor Pro",channels:{MAINTENANCE:0,WEATHER_TRANSMIT:2}},{catagory:"IP Heizgruppe",channels:{MAINTENANCE:0,HEATING_CLIMATECONTROL_TRANSCEIVER:0,ROTARY_HANDLE_TRANSCEIVER:0,SWITCH_TRANSMITTER:0}}],xnm.aio.hm.HMIP_CHANNEL={MAINTENANCE:{_level:0,datapoints:[{UNREACH:{type:"boolean",access:"re"},OPERATING_VOLTAGE:{type:"float",access:"re"},DUTY_CYCLE:{type:"boolean",access:"re"},LOW_BAT:{type:"boolean",access:"re"}},{UNREACH:{type:"boolean",access:"re"},OPERATING_VOLTAGE:{type:"float",access:"re"},DUTY_CYCLE:{type:"boolean",access:"re"}},{UNREACH:{type:"boolean",access:"re"},OPERATING_VOLTAGE:{type:"float",access:"re"},SABOTAGE:{type:"boolean",access:"re"},DUTY_CYCLE:{type:"boolean",access:"re"},LOW_BAT:{type:"boolean",access:"re"}}]},KEY_TRANSCEIVER:{_level:1,datapoints:[{PRESS_SHORT:{type:"action",access:"e"},PRESS_LONG:{type:"action",access:"e"}}]},SWITCH_TRANSMITTER:{_level:2,datapoints:[{PROCESS:{type:"option",access:"re",values:{}},SECTION:{type:"integer",access:"re"},STATE:{type:"boolean",access:"re"}}]},SWITCH_VIRTUAL_RECEIVER:{_level:3,datapoints:[{PROCESS:{type:"option",access:"re",values:{}},SECTION:{type:"integer",access:"re"},STATE:{type:"boolean",access:"rwe"}}]},SHUTTER_CONTACT:{_level:4,datapoints:[{STATE:{type:"option",access:"re",values:{0:"closed",1:"open"}}}]},HEATING_CLIMATECONTROL_TRANSCEIVER:{_level:5,datapoints:[{ACTIVE_PROFILE:{type:"integer",access:"rwe",min:1,max:6},ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-10,max:56,unit:"°C"},BOOST_MODE:{type:"boolean",access:"rwe"},CONTROL_DIFFERENTIAL_TE:{type:"float",access:"we"},CONTROL_MODE:{type:"option",access:"we",values:{0:"AUTO-MODE",1:"MANU-MODE"}},DURATION_UNIT:{type:"string",access:"w"},DURATION_VALUE:{type:"integer",access:"w"},FROST_PROTECTION:{type:"boolean",access:"re"},HUMIDITY:{type:"integer",access:"re",min:0,max:99,unit:"%"},PARTY_MODE:{type:"boolean",access:"re"},PARTY_SET_POINT_TEMPERA:{type:"float",access:"re"},PARTY_TIME_END:{type:"string",access:"rwe"},PARTY_TIME_START:{type:"string",access:"rwe"},SET_POINT_MODE:{type:"option",access:"rwe",values:{0:"AUTO-MODE",1:"MANU-MODE"}},SET_POINT_TEMPERATURE:{type:"float",access:"rwe",min:4.5,max:30.5,unit:"°C"},SWITCH_POINT_OCCURED:{type:"boolean",access:"re"},WINDOW_STATE:{type:"option",access:"rwe",values:{0:"unknow",1:"unknow"}},HEATING_COOLING:{type:"enum",access:"rwe",values:{0:"HEATING",1:"COOLING"}}},{ACTIVE_PROFILE:{type:"integer",access:"rwe",min:1,max:3},ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-10,max:56,unit:"°C"},BOOST_MODE:{type:"boolean",access:"rwe"},CONTROL_DIFFERENTIAL_TE:{type:"float",access:"we"},CONTROL_MODE:{type:"option",access:"we",values:{0:"AUTO-MODE",1:"MANU-MODE"}},DURATION_UNIT:{type:"string",access:"w"},DURATION_VALUE:{type:"integer",access:"w"},FROST_PROTECTION:{type:"boolean",access:"re"},LEVEL:{type:"float",access:"rwe",min:0,max:1},PARTY_MODE:{type:"boolean",access:"re"},PARTY_SET_POINT_TEMPERA:{type:"float",access:"re"},PARTY_TIME_END:{type:"string",access:"rwe"},PARTY_TIME_START:{type:"string",access:"rwe"},SET_POINT_MODE:{type:"option",access:"rwe",values:{0:"AUTO-MODE",1:"MANU-MODE"}},SET_POINT_TEMPERATURE:{type:"float",access:"rwe",min:4.5,max:30.5,unit:"°C"},SWITCH_POINT_OCCURED:{type:"boolean",access:"re"},VALVE_ADAPTION:{type:"boolean",access:"we"},VALVE_STATE:{type:"option",access:"re",values:{}},WINDOW_STATE:{type:"option",access:"rwe",values:{0:"closed",1:"open"}},HEATING_COOLING:{type:"enum",access:"rwe",values:{0:"HEATING",1:"COOLING"}}}]},MOTIONDETECTOR_TRANSCEIVER:{_level:6,datapoints:[{ILLUMINATION:{type:"float",access:"re"},MOTION:{type:"boolean",access:"re"},RESET_MOTION:{type:"action",access:"w"},MOTION_DETECTION_ACTIVE:{type:"boolean",access:"rwe"}}]},SHUTTER_CONTACT_TRANSCEIVER:{_level:7,datapoints:[{STATE:{type:"option",access:"re",values:{0:"closed",1:"open"}}}]},ENERGIE_METER_TRANSMITTER:{_level:8,datapoints:[{FREQUENCY:{type:"float",access:"re",min:48.72,max:51.27,unit:"Hz"},POWER:{type:"float",access:"re",min:0,max:167772.15,unit:"W"},VOLTAGE:{type:"float",access:"re",min:0,max:6553.5,unit:"V"},ENERGY_COUNTER:{type:"float",access:"re",min:0,max:838860.7,unit:"Wh"},CURRENT:{type:"float",access:"re",min:0,max:65535,unit:"mA"}}]},MAINTENANCE_SD:{_level:9,datapoints:[{UNREACH:{type:"boolean",access:"re"},TIME_OF_OPERATION:{type:"integer",access:"re"},DUTY_CYCLE:{type:"boolean",access:"re"},LOW_BAT:{type:"boolean",access:"re"}}]},SMOKE_DETECTOR:{_level:10,datapoints:[{SMOKE_DETECTOR_COMMAND:{type:"option",access:"w"},ERROR_CODE:{type:"integer",access:"re"},SMOKE_DETECTOR_EVENT:{type:"option",access:"w"},SMOKE_DETECTOR_ALARM_STATUS:{type:"option",access:"re"},SMOKE_DETECTOR_TEST_RESULT:{type:"option",access:"re"}}]},DIMMER_TRANSMITTER:{_level:11,datapoints:[{PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},SECTION:{type:"integer",access:"re",min:0,max:15},LEVEL:{type:"float",access:"re",min:0,max:1.005}}]},DIMMER_VIRTUAL_RECEIVER:{_level:12,datapoints:[{ON_TIME:{type:"float",access:"w",min:0,max:858e4},PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},RAMP_TIME:{type:"float",access:"w",min:0,max:858e4},SECTION:{type:"integer",access:"re",min:0,max:15},LEVEL:{type:"float",access:"rwe",min:0,max:1.005}}]},ALARM_SWITCH_VIRTUAL_RECEIVER:{_level:13,datapoints:[{ACOUSTIC_ALARM_SELECTION:{type:"option",access:"w",values:{0:"DISABLE_ACOUSTIC_SIGNAL",1:"FREQUENCY_RISING",2:"FREQUENCY_FALLING",3:"FREQUENCY_RISING_AND_FALLING",4:"FREQUENCY_ALTERNATING_LOW_HIGH",5:"FREQUENCY_ALTERNATING_LOW_MID_HIGH",6:"FREQUENCY_HIGHON_OFF",7:"FREQUENCY_HIGHON_LONGOFF",8:"FREQUENCY_LOWON_OFF_HIGHON_OFF",9:"FREQUENCY_LOWON_LONGOFF_HIGHON_LONGOFF",10:"LOW_BATTERY",11:"DISARMED",12:"INTERNALLY_ARMED",13:"EXTERNALLY_ARMED",14:"DELAYED_INTERNALLY_ARMED",15:"DELAYED_EXTERNALLY_ARMED",16:"EVENT",17:"ERROR"}},OPTICAL_ALARM_SELECTION:{type:"option",access:"w",values:{0:"DISABLE_OPTICAL_SIGNAL",1:"BLINKING_ALTERNATELY_REPEATING",2:"BLINKING_BOTH_REPEATING",3:"DOUBLE_FLASHING_REPEATING",4:"FLASHING_BOTH_REPEATING",5:"CONFIRMATION_SIGNAL_0",6:"CONFIRMATION_SIGNAL_1",7:"CONFIRMATION_SIGNAL_2"}},PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},STATE:{type:"boolean",access:"re"},SECTION:{type:"integer",access:"re",min:0,max:15},DURATION_UNIT:{type:"option",access:"w",values:{0:"S",1:"M",2:"H",3:"D"}},DURATION_VALUE:{type:"integer",access:"w",min:0,max:16343}}]},ROTARY_HANDLE_TRANSCEIVER:{_level:14,datapoints:[{STATE:{type:"option",access:"re",values:{0:"CLOSED",1:"TILTED",2:"OPEN"}}}]},SHUTTER_TRANSMITTER:{_level:15,datapoints:[{SELF_CALIBRATION:{type:"option",access:"w",values:{0:"STOP",1:"START"}},PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},SECTION:{type:"integer",access:"re",min:0,max:15},LEVEL:{type:"float",access:"re",min:0,max:1.005},SELF_CALIBRATION_RESULT:{type:"boolean",access:"re"}}]},SHUTTER_VIRTUAL_RECEIVER:{_level:16,datapoints:[{STOP:{type:"action",access:"w"},PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},SECTION:{type:"integer",access:"re",min:0,max:15},LEVEL:{type:"float",access:"rwe",min:0,max:1.005}}]},BLIND_TRANSMITTER:{_level:17,datapoints:[{PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},SECTION:{type:"integer",access:"re",min:0,max:15},LEVEL:{type:"float",access:"re",min:0,max:1.005},LEVEL_2:{type:"float",access:"re",min:0,max:1.005}}]},BLIND_VIRTUAL_RECEIVER:{_level:18,datapoints:[{STOP:{type:"action",access:"w"},PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},SECTION:{type:"integer",access:"re",min:0,max:15},LEVEL:{type:"float",access:"rwe",min:0,max:1.005},LEVEL_2:{type:"float",access:"rwe",min:0,max:1.005}}]},PRESENCEDETECTOR_TRANSCEIVER:{_level:19,datapoints:[{CURRENT_ILLUMINATION:{type:"float",access:"re"},ILLUMINATION:{type:"float",access:"re"},PRESENCE_DETECTION_STATE:{type:"boolean",access:"re"},RESET_PRESENCE:{type:"action",access:"w"},PRESENCE_DETECTION_ACTIVE:{type:"boolean",access:"rwe"}}]},CLIMATECONTROL_FLOOR_PUMP_TRANSCEIVER:{_level:20,datapoints:[{HUMIDITY_LIMITER:{type:"boolean",access:"re"},EMERGENCY_OPERATION:{type:"boolean",access:"re"},FROST_PROTECTION:{type:"boolean",access:"re"},STATE:{type:"boolean",access:"re"},DEW_POINT_ALARM:{type:"boolean",access:"re"},EXTERNAL_CLOCK:{type:"boolean",access:"re"}}]},CLIMATECONTROL_FLOOR_TRANSCEIVER:{_level:21,datapoints:[{HUMIDITY_LIMITER:{type:"boolean",access:"re"},EMERGENCY_OPERATION:{type:"boolean",access:"re"},FROST_PROTECTION:{type:"boolean",access:"re"},STATE:{type:"boolean",access:"re"},DEW_POINT_ALARM:{type:"boolean",access:"re"},EXTERNAL_CLOCK:{type:"boolean",access:"re"}}]},WEATHER_TRANSMIT:{_level:22,datapoints:[{ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-3276.8,max:3276.7,unit:"°C"},HUMIDITY:{type:"integer",access:"re",min:0,max:100,unit:"%"},ILLUMINATION:{type:"float",access:"re",min:0,max:163830},SUNSHINEDURATION:{type:"integer",access:"re",min:0,max:16383},SUNSHINEDURATION_OVERFLOW:{type:"boolean",access:"re"},SUNSHINE_THRESHOLD_OVERRUN:{type:"boolean",access:"re"},WIND_SPEED:{type:"float",access:"re",min:0,max:200},WIND_THRESHOLD_OVERRUN:{type:"boolean",access:"re"}},{ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-3276.8,max:3276.7,unit:"°C"},HUMIDITY:{type:"integer",access:"re",min:0,max:100,unit:"%"},ILLUMINATION:{type:"float",access:"re",min:0,max:163830},RAINING:{type:"boolean",access:"re"},RAIN_COUNTER:{type:"float",access:"re",min:0,max:1638},RAIN_COUNTER_OVERFLOW:{type:"boolean",access:"re"},SUNSHINEDURATION:{type:"integer",access:"re",min:0,max:16383},SUNSHINEDURATION_OVERFLOW:{type:"boolean",access:"re"},SUNSHINE_THRESHOLD_OVERRUN:{type:"boolean",access:"re"},WIND_SPEED:{type:"float",access:"re",min:0,max:200},WIND_THRESHOLD_OVERRUN:{type:"boolean",access:"re"}},{ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-3276.8,max:3276.7,unit:"°C"},HUMIDITY:{type:"integer",access:"re",min:0,max:100,unit:"%"},ILLUMINATION:{type:"float",access:"re",min:0,max:163830},RAINING:{type:"boolean",access:"re"},RAIN_COUNTER:{type:"float",access:"re",min:0,max:1638},RAIN_COUNTER_OVERFLOW:{type:"boolean",access:"re"},SUNSHINEDURATION:{type:"integer",access:"re",min:0,max:16383},SUNSHINEDURATION_OVERFLOW:{type:"boolean",access:"re"},SUNSHINE_THRESHOLD_OVERRUN:{type:"boolean",access:"re"},WIND_DIR:{type:"float",access:"re",min:0,max:357.5},WIND_DIR_RANGE:{type:"float",access:"re",min:0,max:146.25},WIND_SPEED:{type:"float",access:"re",min:0,max:200},WIND_THRESHOLD_OVERRUN:{type:"boolean",access:"re"}}]},CLIMATE_TRANSCEIVER:{_level:23,datapoints:[{ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-3276.8,max:3276.7,unit:"°C"},HUMIDITY:{type:"integer",access:"re",min:0,max:100,unit:"%"}}]},PASSAGE_DETECTOR_DIRECTION_TRANSMITTER:{_level:24,datapoints:[{CURRENT_PASSAGE_DIRECTION:{type:"boolean",access:"re"},LAST_PASSAGE_DIRECTION:{type:"boolean",access:"re"},PASSAGE_COUNTER_OVERFLOW:{type:"boolean",access:"re"},PASSAGE_COUNTER_VALUE:{type:"integer",access:"re",min:0,max:127}}]},GENERIC_INPUT_TRANSMITER:{_level:25,datapoints:[{CHANGE_OVER:{type:"boolean",access:"re"},EXTERNAL_CLOCK:{type:"boolean",access:"re"},HUMIDITY_LIMITER:{type:"boolean",access:"re"},STATE:{type:"boolean",access:"re"},TACTILE_SWITCH:{type:"boolean",access:"re"},TEMPERATURE_LIMITER:{type:"boolean",access:"re"}}]},ANALOG_OUTPUT_TRANSCEIVER:{_level:26,datapoints:[{LEVEL:{type:"float",access:"rwe",min:0,max:1.005}}]},MULTI_MODE_INPUT_TRANSMITTER:{_level:27,datapoints:[{STATE:{type:"boolean",access:"re"},PRESS_SHORT:{type:"action",access:"e"},PRESS_LONG:{type:"action",access:"e"}}]},CARBON_DIOXIDE_RECEIVER:{datapoints:[{CONCENTRATION:{type:"integer",access:"re",min:0,max:163830},CONCENTRATION_STATUS:{type:"option",access:"re",values:{0:"NORMAL",1:"UNKNOWN",2:"OVERFLOW"}}}]},DOOR_LOCK_STATE_TRANSMITTER:{datapoints:[{ACTIVITY_STATE:{type:"option",access:"re",values:{0:"UNKNOWN",1:"UP",2:"DOWN",3:"STABLE"}},LOCK_STATE:{type:"option",access:"re",values:{0:"UNKNOWN",1:"LOCKED",2:"UNLOCKED"}},LOCK_TARGET_LEVEL:{type:"option",access:"w",values:{0:"LOCKED",1:"UNLOCKED",2:"OPEN"}},PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},SECTION:{type:"integer",access:"re",min:0,max:15},SECTION_STATUS:{type:"option",access:"re",values:{0:"NORMAL",1:"UNKNOWN"}},WP_OPTIONS:{type:"option",access:"rwe",values:{0:"NOP",1:"ON",2:"OFF"}}}]},DOOR_LOCK_STATE_TRANSCEIVER:{datapoints:[{LOCK_STATE:{type:"option",access:"re",values:{0:"UNKNOWN",1:"LOCKED",2:"UNLOCKED"}}}]},ACCESS_RECEIVER:{datapoints:[{ACCESS_AUTHORIZATION:{type:"option",access:"w",values:{0:"DISABLE",1:"ENABLE"}},STATE:{type:"boolean",access:"re"}}]},RAIN_DETECTION_TRANSMITTER:{datapoints:[{ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-3276.8,max:3276.7},HEATER_STATE:{type:"boolean",access:"re"},RAINING:{type:"boolean",access:"re"}}]}},xnm.aio.hm.HMIP_MAP={MAINTENANCE:{UNREACH:{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]},LOW_BAT:{status:[{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}}]},SABOTAGE:{status:[{type:"enum",name:"sabotage",ref:{value:"errorSabo",options:["false","true"]}}]}},KEY_TRANSCEIVER:{PRESS_SHORT:{ipevt:[{type:"enum",name:"short press",ref:{value:"pressShort"}}]},PRESS_LONG:{ipevt:[{type:"enum",name:"long press",ref:{value:"pressLong"}}]}},SWITCH_TRANSMITTER:{STATE:{status:[{type:"enum",name:"switch status",ref:{value:"switchTState",options:["off","on"]}}]}},SWITCH_VIRTUAL_RECEIVER:{STATE:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}}]}},HEATING_CLIMATECONTROL_TRANSCEIVER:{ACTIVE_PROFILE:{command:[{type:"int",name:"set profile",ref:{value:"themoProf",ext:"%d",extMeta:"1-6",scale:"1"}}],status:[{type:"int",name:"profile",ref:{value:"themoProf"}}]},ACTUAL_TEMPERATURE:{status:[{type:"float",name:"actual temperature",ref:{value:"themoActualTemp",extMeta:"-10.0-56.0",scale:"0.1"}}]},BOOST_MODE:{command:[{type:"enum",name:"boost on",ref:{value:"themoBoostOn"}},{type:"enum",name:"boost off",ref:{value:"themoBoostOff"}}],status:[{type:"enum",name:"boost mode",ref:{value:"themoBoostMode",options:["off","on"]}}]},CONTROL_MODE:{command:[{type:"enum",name:"set auto mode",ref:{value:"themoAutoMode"}},{type:"enum",name:"set manu mode",ref:{value:"themoManuMode"}}]},FROST_PROTECTION:{status:[{type:"enum",name:"frost protection",ref:{value:"themoFrost",options:["off","on"]}}]},HUMIDITY:{status:[{type:"int",name:"humidity",ref:{value:"themoHum"}}]},SET_POINT_MODE:{status:[{type:"enum",name:"mode",ref:{value:"themoMode",options:["auto","manu"]}}]},SET_POINT_TEMPERATURE:{command:[{type:"float",name:"set temperature",ref:{value:"themoTemp",ext:"%f",extMeta:"4.5-30.5",scale:"0.5"}},{type:"enum",name:"on",ref:{value:"themoTempOn"}},{type:"enum",name:"off",ref:{value:"themoTempOff"}},{type:"enum",name:"temperature up",ref:{value:"themoTempUp"}},{type:"enum",name:"temperature down",ref:{value:"themoTempDown"}}],status:[{type:"float",name:"set temperature",ref:{value:"themoTemp",extMeta:"4.5-30.5",scale:"0.5"}}]},LEVEL:{command:[{type:"int",name:"set valve level",ref:{value:"themoValveLevel",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"valve level",ref:{value:"themoValveLevel"}}]},WINDOW_STATE:{command:[{type:"enum",name:"set window open",ref:{value:"themoWinOpen"}},{type:"enum",name:"set window close",ref:{value:"themoWinClose"}}],status:[{type:"enum",name:"window state",ref:{value:"themoWinState",options:["open","closed"]}}]},HEATING_COOLING:{command:[{type:"enum",name:"set heating mode",ref:{value:"themoModeHeating"}},{type:"enum",name:"set cooling mode",ref:{value:"themoModeCooling"}}],status:[{type:"enum",name:"heating/cooling state",ref:{value:"themoHeatingCooling",options:["heating","cooling"]}}]}},SHUTTER_CONTACT:{STATE:{status:[{type:"enum",name:"contact state",ref:{value:"shutterState",value_t:"contactState",options:["closed","open"]}}]}},SHUTTER_CONTACT_TRANSCEIVER:{STATE:{status:[{type:"enum",name:"contact state",ref:{value:"shutterTState",value_t:"contactState",options:["closed","open"]}}]}},MOTIONDETECTOR_TRANSCEIVER:{ILLUMINATION:{status:[{type:"float",name:"illumination",ref:{value:"motionIllu"}}]},MOTION:{status:[{type:"enum",name:"state",ref:{value:"motionState",options:["on","off"]}}]},RESET_MOTION:{command:[{type:"enum",name:"reset",ref:{value:"motionReset"}}]},MOTION_DETECTION_ACTIVE:{command:[{type:"enum",name:"activate detection",ref:{value:"motionOn"}},{type:"enum",name:"deactivate detection",ref:{value:"motionOff"}},{type:"enum",name:"toggle detection",ref:{value:"motionToggle"}}],status:[{type:"enum",name:"detection activated",ref:{value:"motionActivate",options:["off","on"]}}]}},ENERGIE_METER_TRANSMITTER:{ENERGY_COUNTER:{status:[{type:"float",name:"energy counter",ref:{value:"meterEnergyCounter",extMeta:"0.0-838860.7",scale:"0.1"}}]},POWER:{status:[{type:"float",name:"power",ref:{value:"meterPower",extMeta:"0.0-167772.15",scale:"0.01"}}]},CURRENT:{status:[{type:"float",name:"current",ref:{value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1"}}]},VOLTAGE:{status:[{type:"float",name:"voltage",ref:{value:"meterVoltage",extMeta:"0.0-6553.5",scale:"0.1"}}]},FREQUENCY:{status:[{type:"float",name:"frequency",ref:{value:"meterFrequency",extMeta:"48.72-51.27",scale:"0.01"}}]}},MAINTENANCE_SD:{UNREACH:{status:[{type:"enum",name:"communication error",ref:{value:"errorSdComm",options:["false","true"]}}]},LOW_BAT:{status:[{type:"enum",name:"battery low",ref:{value:"errorSdBat",options:["false","true"]}}]}},SMOKE_DETECTOR:{SMOKE_DETECTOR_ALARM_STATUS:{status:[{type:"enum",name:"alarm state",ref:{value:"smokeState",options:["on","off"]}},{type:"enum",name:"alarm detail",ref:{value:"smokeAlarmDetail",options:["off","primary_alarm","intrusion_alarm","secondary_alarm"]}}]},SMOKE_DETECTOR_COMMAND:{command:[{type:"enum",name:"intrusion alarm off",ref:{value:"intrusionAlarmOff"}},{type:"enum",name:"intrusion alarm on",ref:{value:"intrusionAlarmOn"}}]}},DIMMER_TRANSMITTER:{LEVEL:{status:[{type:"int",name:"dimmer status",ref:{value:"dimmerTLevel",extMeta:"0.0-1.005",unit:"%"}}]}},DIMMER_VIRTUAL_RECEIVER:{LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dimOn"}},{type:"enum",name:"off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"int",name:"dimmer status",ref:{value:"dimmerLevel",extMeta:"0-100",unit:"%"}}]}},ALARM_SWITCH_VIRTUAL_RECEIVER:{STATE:{status:[{type:"enum",name:"alarm state",ref:{value:"alarmState",options:["on","off"]}}]},ACOUSTIC_ALARM_SELECTION:{command:[{type:"enum",name:"set audio",ref:{value:"alarmAudio",ext:"%e",extMeta:["DISABLE_ACOUSTIC_SIGNAL","FREQUENCY_RISING","FREQUENCY_FALLING","FREQUENCY_RISING_AND_FALLING","FREQUENCY_ALTERNATING_LOW_HIGH","FREQUENCY_ALTERNATING_LOW_MID_HIGH","FREQUENCY_HIGHON_OFF","FREQUENCY_HIGHON_LONGOFF","FREQUENCY_LOWON_OFF_HIGHON_OFF","FREQUENCY_LOWON_LONGOFF_HIGHON_LONGOFF","LOW_BATTERY","DISARMED","INTERNALLY_ARMED","EXTERNALLY_ARMED","DELAYED_INTERNALLY_ARMED","DELAYED_EXTERNALLY_ARMED","EVENT","ERROR"]}}]},OPTICAL_ALARM_SELECTION:{command:[{type:"enum",name:"set visual",ref:{value:"alarmVisual",ext:"%e",extMeta:["DISABLE_OPTICAL_SIGNAL","BLINKING_ALTERNATELY_REPEATING","BLINKING_BOTH_REPEATING","DOUBLE_FLASHING_REPEATING","FLASHING_BOTH_REPEATING","CONFIRMATION_SIGNAL_0","CONFIRMATION_SIGNAL_1","CONFIRMATION_SIGNAL_2"]}}]},DURATION_UNIT:{command:[{type:"enum",name:"set duration unit",ref:{value:"alarmDurUnit",ext:"%e",extMeta:["S","M","H","D"]}}]},DURATION_VALUE:{command:[{type:"int",name:"set duration",ref:{value:"alarmDur",ext:"%d",extMeta:"0-16343"}}]}},ROTARY_HANDLE_TRANSCEIVER:{STATE:{status:[{type:"enum",name:"handle state",ref:{value:"handleState",options:["closed","tilted","open"]}}]}},SHUTTER_TRANSMITTER:{LEVEL:{status:[{type:"int",name:"blind status",ref:{value:"blindTLevel",extMeta:"0-100",unit:"%"}}]}},SHUTTER_VIRTUAL_RECEIVER:{STOP:{command:[{type:"enum",name:"stop",ref:{value:"stop"}}]},LEVEL:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"int",name:"blind status",ref:{value:"blindLevel",extMeta:"0-100",unit:"%"}}]}},BLIND_TRANSMITTER:{LEVEL:{status:[{type:"int",name:"blind status",ref:{value:"blindTPos",extMeta:"0-100",unit:"%"}}]},LEVEL_2:{status:[{type:"int",name:"lamella status",ref:{value:"lamellaTPos",extMeta:"0-100",unit:"%"}}]}},BLIND_VIRTUAL_RECEIVER:{STOP:{command:[{type:"enum",name:"stop",ref:{value:"stop"}}]},LEVEL:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"int",name:"blind status",ref:{value:"blindPos",extMeta:"0-100",unit:"%"}}]},LEVEL_2:{command:[{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella step up",ref:{value:"lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella step down",ref:{value:"lamellaStepDown",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"int",name:"lamella status",ref:{value:"lamellaPos",extMeta:"0-100",unit:"%"}}]}},PRESENCEDETECTOR_TRANSCEIVER:{ILLUMINATION:{status:[{type:"float",name:"illumination",ref:{value:"presenceIllu"}}]},PRESENCE_DETECTION_STATE:{status:[{type:"enum",name:"state",ref:{value:"presenceState",options:["on","off"]}}]},RESET_PRESENCE:{command:[{type:"enum",name:"reset",ref:{value:"presenceReset"}}]},PRESENCE_DETECTION_ACTIVE:{command:[{type:"enum",name:"activate detection",ref:{value:"presenceOn"}},{type:"enum",name:"deactivate detection",ref:{value:"presenceOff"}},{type:"enum",name:"toggle detection",ref:{value:"presenceToggle"}}],status:[{type:"enum",name:"detection activated",ref:{value:"presenceActivate",options:["off","on"]}}]}},CLIMATECONTROL_FLOOR_PUMP_TRANSCEIVER:{HUMIDITY_LIMITER:{status:[{type:"enum",name:"humidity limiter",ref:{value:"cl_fp_humidityLimiter",options:["true","false"]}}]},EMERGENCY_OPERATION:{status:[{type:"enum",name:"state",ref:{value:"cl_fp_emergencyOP",options:["true","false"]}}]},FROST_PROTECTION:{status:[{type:"enum",name:"frost protection",ref:{value:"cl_fp_frostProtection",options:["true","false"]}}]},STATE:{status:[{type:"enum",name:"controlling state",ref:{value:"cl_fp_state",options:["on","off"]}}]}},CLIMATECONTROL_FLOOR_TRANSCEIVER:{HUMIDITY_LIMITER:{status:[{type:"enum",name:"humidity limiter",ref:{value:"cl_f_humidityLimiter",options:["true","false"]}}]},EMERGENCY_OPERATION:{status:[{type:"enum",name:"state",ref:{value:"cl_f_emergencyOP",options:["true","false"]}}]},FROST_PROTECTION:{status:[{type:"enum",name:"frost protection",ref:{value:"cl_f_frostProtection",options:["true","false"]}}]},STATE:{status:[{type:"enum",name:"controlling state",ref:{value:"cl_f_state",options:["on","off"]}}]}},WEATHER_TRANSMIT:{ACTUAL_TEMPERATURE:{status:[{type:"float",name:"actual temperature",ref:{value:"weatherActualTemp",extMeta:"-3276.8-3276.7",scale:"0.1"}}]},HUMIDITY:{status:[{type:"int",name:"humidity",ref:{value:"weatherHum"}}]},ILLUMINATION:{status:[{type:"float",name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}}]},SUNSHINEDURATION:{status:[{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-163830"}},{type:"int",name:"sunshine duration (today)",ref:{value:"weatherSunDToday"}},{type:"int",name:"sunshine duration (yesterday)",ref:{value:"weatherSunDYesterday"}}]},SUNSHINEDURATION_OVERFLOW:{status:[{type:"enum",name:"sunshine duration overflow",ref:{value:"weatherSunDOF",options:["true","false"]}}]},SUNSHINE_THRESHOLD_OVERRUN:{status:[{type:"enum",name:"sunshine threshold overrun",ref:{value:"weatherSunTOR",options:["true","false"]}}]},WIND_SPEED:{status:[{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0"}}]},WIND_THRESHOLD_OVERRUN:{status:[{type:"enum",name:"wind threshold overrun",ref:{value:"weatherWindTOR",options:["true","false"]}}]},WIND_DIR:{status:[{type:"float",name:"wind direction",ref:{value:"weatherWindD",extMeta:"0.0-357.5"}}]},WIND_DIR_RANGE:{status:[{type:"float",name:"wind direction range",ref:{value:"weatherWindDR",extMeta:"0.0-146.25"}}]},RAINING:{status:[{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}}]},RAIN_COUNTER:{status:[{type:"float",name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0"}},{type:"float",name:"rain counter (today)",ref:{value:"weatherRainCounterToday"}},{type:"float",name:"rain counter (yesterday)",ref:{value:"weatherRainCounterYesterday"}}]},RAIN_COUNTER_OVERFLOW:{status:[{type:"enum",name:"rain counter overflow",ref:{value:"weatherRainCOF",options:["true","false"]}}]}},CLIMATE_TRANSCEIVER:{ACTUAL_TEMPERATURE:{status:[{type:"float",name:"actual temperature",ref:{value:"climateActualTemp",extMeta:"-3276.8-3276.7",scale:"0.1"}}]},HUMIDITY:{status:[{type:"int",name:"humidity",ref:{value:"climateHum"}}]}},GENERIC_INPUT_TRANSMITER:{CHANGE_OVER:{status:[{type:"enum",name:"change over",ref:{value:"genInputChangeOver",options:["true","false"]}}]},EXTERNAL_CLOCK:{status:[{type:"enum",name:"external clock",ref:{value:"genInputExtClock",options:["true","false"]}}]},HUMIDITY_LIMITER:{status:[{type:"enum",name:"humidity limiter",ref:{value:"genInputHumidityLimiter",options:["true","false"]}}]},STATE:{status:[{type:"enum",name:"state",ref:{value:"genInputState",options:["true","false"]}}]},TACTILE_SWITCH:{status:[{type:"enum",name:"tactile swtich",ref:{value:"genInputTactileSwitch",options:["true","false"]}}]},TEMPERATURE_LIMITER:{status:[{type:"enum",name:"temperature limiter",ref:{value:"genInputTempLimiter",options:["true","false"]}}]}},ANALOG_OUTPUT_TRANSCEIVER:{LEVEL:{command:[{type:"enum",name:"off",ref:{value:"analogOutputOff"}},{type:"int",name:"up",ref:{value:"analogOutputUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"down",ref:{value:"analogOutputDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"output to",ref:{value:"analogOutputTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"int",name:"output status",ref:{value:"analogOutputLevel",extMeta:"0-100",unit:"%"}}]}},CARBON_DIOXIDE_RECEIVER:{CONCENTRATION:{status:[{type:"int",name:"co2 concentration",ref:{value:"co2",extMeta:"0-163830",unit:"ppm"}}]},CONCENTRATION_STATUS:{status:[{type:"enum",name:"co2 sensor status",ref:{value:"co2SensorStatus",options:["normal","unknown","overflow"]}}]}},DOOR_LOCK_STATE_TRANSMITTER:{LOCK_STATE:{status:[{type:"enum",name:"lock state",ref:{value:"lockState",options:["unknown","locked","unlocked"]}}]},LOCK_TARGET_LEVEL:{command:[{type:"enum",name:"lock",ref:{value:"lock"}},{type:"enum",name:"unlock",ref:{value:"unlock"}},{type:"enum",name:"open",ref:{value:"open"}}]}},DOOR_LOCK_STATE_TRANSCEIVER:{LOCK_STATE:{status:[{type:"enum",name:"lock state",ref:{value:"lockState",options:["unknown","locked","unlocked"]}}]}},ACCESS_RECEIVER:{ACCESS_AUTHORIZATION:{command:[{type:"enum",name:"user authorization: off",ref:{value:"accessAuthDisable"}},{type:"enum",name:"user authorization: on",ref:{value:"accessAuthEnable"}}]},STATE:{status:[{type:"enum",name:"user authorization",ref:{value:"accessAuthState",options:["on","off"]}}]}},RAIN_DETECTION_TRANSMITTER:{ACTUAL_TEMPERATURE:{status:[{type:"float",name:"temperature",ref:{value:"temperature",extMeta:"-3276.8-3276.7",scale:"0.1"}}]},HEATER_STATE:{status:[{type:"enum",name:"sensor heater",ref:{value:"sensorHeater",options:["on","off"]}}]},RAINING:{status:[{type:"enum",name:"raining",ref:{value:"raining",options:["true","false"]}}]}}},xnm.aio.hm.DimmerKey={buildCommandScript:function buildCommandScript(e,t,a){if(!t.channels)return null;if(!a.value)return null;var n=t.channels[a.ext];if(!n)return null;var r="var o;";return r+='o=dom.GetObject("'+n+'");',r+="if(o!=null){o.State(1);}\n",r+='o="";\n';}},xnm.aio.hm.Channel={buildCommandScript:function buildCommandScript(e,t,a,n){var r=xnm.aio.hm.MHMCCU._getDataPointAddress(e,t,a);if(!r)return null;var s="var o;";return s+='o=dom.GetObject("'+r+'");',s+=n,s+='o="";\n';},buildStateScript:function buildStateScript(e,t,a){var n='o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(e,t,a)+'");';return n+='if(o!=null){states=states#o.Value();}else{states=states#"?";}';},KEY:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"pressShort":r="PRESS_SHORT",s="if(o!=null){o.State(1);}\n";break;case"pressLong":r="PRESS_LONG",s="if(o!=null){o.State(1);}\n";break;case"setValue":if(!n.ext)return null;r="SUBMIT",s='if(o!=null){o.State("'+n.ext+'");}\n';break;case"ledOff":r="LED_STATUS",s="if(o!=null){o.State(0);}\n";break;case"ledRed":r="LED_STATUS",s="if(o!=null){o.State(1);}\n";break;case"ledGreen":r="LED_STATUS",s="if(o!=null){o.State(2);}\n";break;case"ledOrange":r="LED_STATUS",s="if(o!=null){o.State(3);}\n";break;case"setAllLed":if(!n.ext)return null;r="ALL_LEDS",s='if(o!=null){o.State("'+n.ext+'");}\n';break;case"sleepModeOff":r="LED_SLEEP_MODE",s="if(o!=null){o.State(0);}\n";break;case"sleepModeOn":r="LED_SLEEP_MODE",s="if(o!=null){o.State(1);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"ledStatus"!==n.value?null:(r="LED_STATUS",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;if("ledStatus"!==t.value)return"?";switch(e){case"0":return"off";case"1":return"red";case"2":return"green";case"3":return"orange";default:return"?";}},resolveState:function resolveState(e,t,a){var n,r=a;switch(t.datapoint){case"PRESS_SHORT":n="pressShort";break;case"PRESS_LONG":n="pressLong";break;case"PRESS_LONG_RELEASE":n="pressLongRelease";break;case"PRESS_CONT":n="pressCont";break;case"LED_STATUS":switch(n="ledStatus",a){case"0":r="off";break;case"1":r="red";break;case"2":r="green";break;case"3":r="orange";break;default:r="?";}}return n?{key:n,value:r}:null;}},CENTRAL_KEY:{buildCommandScript:function buildCommandScript(e,t,a,n){return xnm.aio.hm.Channel.KEY.buildCommandScript(e,t,a,n);},resolveState:function resolveState(e,t,a){return xnm.aio.hm.Channel.KEY.resolveState(e,t,a);}},VIRTUAL_KEY:{buildCommandScript:function buildCommandScript(e,t,a,n){return xnm.aio.hm.Channel.KEY.buildCommandScript(e,t,a,n);},resolveState:function resolveState(e,t,a){return xnm.aio.hm.Channel.KEY.resolveState(e,t,a);}},INPUT_OUTPUT:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;switch(n.value){case"on":case"off":case"toggle":case"onFor":return xnm.aio.hm.Channel.SWITCH.buildCommandScript(e,t,a,n);case"pressShort":case"pressLong":return xnm.aio.hm.Channel.KEY.buildCommandScript(e,t,a,n);default:return null;}},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"inoutState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"inoutState"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="inoutState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SWITCH:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=t.address,o=l.indexOf(":");switch(-1!=o&&(l=l.substr(0,o)),n.value){case"on":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"off":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"toggle":r="STATE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case"onFor":return s="var o;",s+='o=dom.GetObject("'+t["interface"]+"."+l+":"+a.address+'.ON_TIME");\n',s+="if(o!=null){o.State("+parseFloat(n.ext)+");}\n",s+='o=dom.GetObject("'+t["interface"]+"."+l+":"+a.address+'.STATE");\n',s+="if(o!=null){o.State(1.0);}\n",s+='o="";\n';default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"switchState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"switchState"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="switchState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SWITCH_INTERFACE:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;return"press"!==n.value?null:(r="PRESS",s="if(o!=null){o.State(1);}\n",xnm.aio.hm.Channel.buildCommandScript(t,a,r,s));}},DIMMER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"dimOn":r="OLD_LEVEL",s="if(o!=null){o.State(1);}\n";break;case"dimOff":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"dimUp":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"dimmerLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+0.1;if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"dimDown":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"dimmerLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-0.1;if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"dimTo":case"dimRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;case"toggleTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if("string"!=typeof n.ext)return null;l=n.ext.replace("%",""),l=parseInt(l);}r="LEVEL",s="if(o!=null){real des = 0.0+o.Value(); if(des == 0.0){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l).toFixed(2)+");}else{o.State(0.0);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u,i=t.address;if(t.channels&&t.channels.DIMMER&&(s=t.channels.DIMMER.address),i&&s){if("dimTo"==a.value||"dimRaw"==a.value||"dimOff"==a.value){l="LEVEL";var _t2=0;switch(a.value){case"dimTo":case"dimRaw":_t2=parseFloat(a.ext);break;case"dimOff":_t2=0;}e._statebuffer[i+":"+s+"."+l]={value:_t2,timestamp:new Date().getTime()},r&&r();}else if("dimUp"==a.value||"dimDown"==a.value){if(l="LEVEL",n&&(o=n.indexOf("<v>"),u=n.indexOf("</v>"),-1!=o&&-1!=u&&o+3<u)){var _t3=n.substr(o+3,u-o-3);_t3&&(_t3=Math.round(1e4*parseFloat(_t3))/100,e._statebuffer[i+":"+s+"."+l]={value:_t3,timestamp:new Date().getTime()});}r&&r();}else"dimOn"==a.value||"toggleTo"==a.value?(l="LEVEL",delete e._statebuffer[i+":"+s+"."+l],setTimeout(function(){r&&r();},3e3)):r&&r();}else r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;if("dimmerLevel"===n.value)r="LEVEL";if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=3e3?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"dimmerLevel":r="LEVEL";break;case"dimmerDirection":r="DIRECTION";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"dimmerLevel":return e=parseFloat(e),Math.round(100*e);case"dimmerDirection":switch(e){case"0":return"none";case"1":return"up";case"2":return"down";case"3":return"undefined";default:return"?";}break;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="dimmerLevel";break;case"DIRECTION":n="dimmerDirection";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},VIRTUAL_DIMMER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"dimOn":r="OLD_LEVEL",s="if(o!=null){o.State(1);}\n";break;case"dimOff":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"dimUp":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"dimmerLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+0.1;if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"dimDown":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"dimmerLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-0.1;if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"dimTo":case"dimRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;case"toggleTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if("string"!=typeof n.ext)return null;l=n.ext.replace("%",""),l=parseInt(l);}r="LEVEL",s="if(o!=null){real des = 0.0+o.Value(); if(des == 0.0){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l).toFixed(2)+");}else{o.State(0.0);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u,i=t.address;if(t.channels&&t.channels.DIMMER&&(s=t.channels.DIMMER.address),i&&s){if("dimTo"==a.value||"dimRaw"==a.value||"dimOff"==a.value){l="LEVEL";var _t4=0;switch(a.value){case"dimTo":case"dimRaw":_t4=parseFloat(a.ext);break;case"dimOff":_t4=0;}e._statebuffer[i+":"+s+"."+l]={value:_t4,timestamp:new Date().getTime()},r&&r();}else if("dimUp"==a.value||"dimDown"==a.value){if(l="LEVEL",n&&(o=n.indexOf("<v>"),u=n.indexOf("</v>"),-1!=o&&-1!=u&&o+3<u)){var _t5=n.substr(o+3,u-o-3);_t5&&(_t5=Math.round(1e4*parseFloat(_t5))/100,e._statebuffer[i+":"+s+"."+l]={value:_t5,timestamp:new Date().getTime()});}r&&r();}else"dimOn"==a.value||"toggleTo"==a.value?(l="LEVEL",delete e._statebuffer[i+":"+s+"."+l],setTimeout(function(){r&&r();},3e3)):r&&r();}else r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;if("dimmerLevel"===n.value)r="LEVEL";if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=3e3?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"dimmerLevel":r="LEVEL";break;case"dimmerDirection":r="DIRECTION";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"dimmerLevel":return e=parseFloat(e),Math.round(100*e);case"dimmerDirection":switch(e){case"0":return"none";case"1":return"up";case"2":return"down";case"3":return"undefined";default:return"?";}break;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="dimmerLevel";break;case"DIRECTION":n="dimmerDirection";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},BLIND:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"blindStepUp":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"blindLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+0.1;if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"blindStepDown":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"blindLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-0.1;if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"blindUp":r="LEVEL",s="if(o!=null){o.State(1.0);}\n";break;case"blindDown":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"blindTo":case"blindRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;case"blindStop":r="STOP",s="if(o!=null){o.State(1);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u,i;if(l=t.address,t.channels&&t.channels.BLIND&&(s=t.channels.BLIND.address),l&&s){if("blindTo"==a.value||"blindRaw"==a.value){o="LEVEL";var _t6=0;switch(a.value){case"blindTo":case"blindRaw":_t6=parseInt(a.ext);}e._statebuffer[l+":"+s+"."+o]={value:_t6,timestamp:new Date().getTime()},r&&r();}else if("blindUp"==a.value||"blindDown"==a.value)o="LEVEL",delete e._statebuffer[l+":"+s+"."+o],setTimeout(function(){r&&r();},3e3);else if("blindStop"==a.value)o="LEVEL",delete e._statebuffer[l+":"+s+"."+o],r&&r();else if("blindStepUp"==a.value||"blindStepDown"==a.value){if(o="LEVEL",n&&(u=n.indexOf("<v>"),i=n.indexOf("</v>"),-1!=u&&-1!=i&&u+3<i)){var _t7=n.substr(u+3,i-u-3);_t7&&(_t7=Math.round(1e4*parseFloat(_t7))/100,e._statebuffer[l+":"+s+"."+o]={value:_t7,timestamp:new Date().getTime()});}r&&r();}}else r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;if("blindLevel"===n.value)r="LEVEL";if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=1e4?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"blindLevel":case"blindPosDes":r="LEVEL";break;case"blindDirection":r="DIRECTION";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"blindLevel":case"blindPosDes":e=parseFloat(e);var a=Math.round(100*e);if("blindLevel"==t.value)return a;if("blindPosDes"==t.value)return a<=35?"bottom":a<=65?"middle":a<=100?"top":"?";break;case"blindDirection":switch(e){case"0":return"none";case"1":return"up";case"2":return"down";case"3":return"undefined";default:return"?";}break;default:return"?";}},resolveState:function resolveState(e,t,a){var n,r;switch(t.datapoint){case"LEVEL":var s=[];return n="blindLevel",r=this.handleStatusResponse(a+"",{value:n}),s.push({key:n,value:r}),n="blindPosDes",r=this.handleStatusResponse(a+"",{value:n}),s.push({key:n,value:r}),s;case"DIRECTION":return{key:n="blindDirection",value:r=this.handleStatusResponse(a+"",{value:n})};}return null;}},KEYMATIC:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"keyOpen":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"keyLock":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"keyOpenDo":r="OPEN",s="if(o!=null){o.State(true);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"keyState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e){return"?"==e?e:"true"==e?"open":"lock";},resolveState:function resolveState(e,t,a){var n;return"STATE"===t.datapoint?{key:n="keyState",value:this.handleStatusResponse(a+"",{value:n})}:null;}},WINMATIC:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null;switch(n.value){case"windowUp":r="LEVEL",s="if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n";break;case"windowDown":r="LEVEL",s="if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n";break;case"windowTo":case"windowRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=parseInt(n.ext);}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;case"winLock":r="LEVEL",s="if(o!=null){o.State(-0.005);}\n";break;case"winStop":r="STOP",s="if(o!=null){o.State(1);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){"windowTo"==a.value||"windowRaw"==a.value?setTimeout(function(){r&&r();},3e3):r&&r();},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"winLevel":r="LEVEL";break;case"winDirection":r="DIRECTION";break;case"winError":r="ERROR";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"winLevel":return(e=parseFloat(e))<=-.005?100*e:Math.round(100*e);case"winDirection":switch(e){case"0":return"none";case"1":return"up";case"2":return"down";case"3":return"undefined";default:return"?";}break;case"winError":switch(e){case"0":return"no_error";case"1":return"motor_turn_error";case"2":return"motor_tilt_error";default:return"?";}break;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="winLevel";break;case"DIRECTION":n="winDirection";break;case"ERROR":n="winError";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},CLIMATECONTROL_RT_TRANSCEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"themoTempUp":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"themoSetTemp"})),s=null==o||void 0===o?"if(o!=null){var v=o.State()+1;if(v>30.5){v=30.5;}o.State(v);}\n":"if(o!=null){var v="+o+"+1;if(v>30.5){v=30.5;}o.State(v);}\n",r="SET_TEMPERATURE";break;case"themoTempDown":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"themoSetTemp"})),s=null==o||void 0===o?"if(o!=null){var v=o.State()-1;if(v<4.5){v=4.5;}o.State(v);}\n":"if(o!=null){var v="+o+"-1;if(v<4.5){v=4.5;}o.State(v);}\n",r="SET_TEMPERATURE";break;case"themoTempTo":case"themoTempRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=n.ext;else{if(!n.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))return null;l=parseFloat(n.ext);}r="SET_TEMPERATURE",s="if(o!=null){o.State("+(l=(l=l<4.5?4.5:l)>30.5?30.5:l)+");}\n";break;case"themoTempOff":r="SET_TEMPERATURE",s="if(o!=null){o.State(4.5);}\n";break;case"themoAutoMode":r="AUTO_MODE",s="if(o!=null){o.State(1);}\n";break;case"themoManuMode":if(null!=n.ext&&void 0!==n.ext||(l=24),"number"==typeof n.ext)l=n.ext;else{if(!n.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))return null;l=parseFloat(n.ext);}r="MANU_MODE",s="if(o!=null){var v="+(l=(l=l<4.5?4.5:l)>30.5?30.5:l)+";o.State(v);}\n";break;case"themoBoostMode":r="BOOST_MODE",s="if(o!=null){o.State(1);}\n";break;case"themoComfortMode":r="COMFORT_MODE",s="if(o!=null){o.State(1);}\n";break;case"themoLoweringMode":r="LOWERING_MODE",s="if(o!=null){o.State(1);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u,i,c;if(l=t.address,t.channels&&t.channels.CLIMATECONTROL_RT_TRANSCEIVER&&(s=t.channels.CLIMATECONTROL_RT_TRANSCEIVER.address),l&&s)if("themoAutoMode"==a.value||"themoBoostMode"==a.value||"themoComfortMode"==a.value||"themoLoweringMode"==a.value)switch(o="CONTROL_MODE",a.value){case"themoAutoMode":u="auto",e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()};break;case"themoBoostMode":u="boost",e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()};break;case"themoComfortMode":case"themoLoweringMode":delete e._statebuffer[l+":"+s+"."+o];}else"themoTempUp"==a.value||"themoTempDown"==a.value?(o="SET_TEMPERATURE",n&&(i=n.indexOf("<v>"),c=n.indexOf("</v>"),-1!=i&&-1!=c&&i+3<c&&(u=n.substr(i+3,c-i-3))&&(u=Math.round(100*parseFloat(u))/100,e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()}))):"themoTempTo"==a.value||"themoTempRaw"==a.value?(o="SET_TEMPERATURE",u=parseFloat(a.ext),e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()}):"themoTempOff"==a.value?(o="SET_TEMPERATURE",u=4.5,e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()}):"themoManuMode"==a.value&&(o="SET_TEMPERATURE",n&&(i=n.indexOf("<v>"),c=n.indexOf("</v>"),-1!=i&&-1!=c&&i+3<c&&(u=n.substr(i+3,c-i-3))&&(u=Math.round(100*parseFloat(u))/100,e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()})),o="CONTROL_MODE",u="manu",e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()});r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;switch(n.value){case"themoSetTemp":r="SET_TEMPERATURE";break;case"themoMode":r="CONTROL_MODE";}if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=3e4?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"themoMode":r="CONTROL_MODE";break;case"themoFault":case"themoLowbat":r="FAULT_REPORTING";break;case"themoBattery":r="BATTERY_STATE";break;case"themoValve":r="VALVE_STATE";break;case"themoBoost":r="BOOST_STATE";break;case"themoActualTemp":r="ACTUAL_TEMPERATURE";break;case"themoSetTemp":r="SET_TEMPERATURE";break;case"themoWinState":r="WINDOW_STATE";break;case"themoActualHum":r="ACTUAL_HUMIDITY";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"themoMode":switch(e){case"0":return"auto";case"1":return"manu";case"2":return"party";case"3":return"boost";default:return"?";}break;case"themoFault":switch(e){case"0":return"no_fault";case"1":return"valve_tight";case"2":return"adjusting_range_too_large";case"3":return"adjusting_range_too_small";case"4":return"communication_error";case"6":return"low_bat";case"7":return"valve_error_position";default:return"?";}break;case"themoLowbat":switch(e){case"0":case"1":case"2":case"3":case"4":case"7":return!1;case"6":return!0;default:return"?";}break;case"themoBattery":case"themoActualTemp":case"themoSetTemp":case"themoActualHum":return xnm.aio.hm.Util.formatFloatString(e);case"themoValve":case"themoBoost":return parseInt(e);case"themoWinState":switch(e){case"true":return"open";case"false":return"close";default:return"?";}break;default:return"?";}},resolveState:function resolveState(e,t,a){var n,r;switch(t.datapoint){case"FAULT_REPORTING":var s=[];return n="themoFault",r=this.handleStatusResponse(a+"",{value:n}),s.push({key:n,value:r}),n="themoLowbat",r=this.handleStatusResponse(a+"",{value:n}),s.push({key:n,value:r}),s;case"CONTROL_MODE":n="themoMode";break;case"BATTERY_STATE":n="themoBattery";break;case"VALVE_STATE":n="themoValve";break;case"BOOST_STATE":n="themoBoost";break;case"ACTUAL_TEMPERATURE":n="themoActualTemp";break;case"SET_TEMPERATURE":n="themoSetTemp";break;case"WINDOW_STATE":n="themoWinState";break;case"ACTUAL_HUMIDITY":n="themoActualHum";}return n?{key:n,value:r=this.handleStatusResponse(a+"",{value:n})}:null;}},THERMALCONTROL_TRANSMIT:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"themoTTempUp":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"themoTSetTemp"})),s=null==o||void 0===o?"if(o!=null){var v=o.State()+1;if(v>30.5){v=30.5;}o.State(v);}\n":"if(o!=null){var v="+o+"+1;if(v>30.5){v=30.5;}o.State(v);}\n",r="SET_TEMPERATURE";break;case"themoTTempDown":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"themoTSetTemp"})),s=null==o||void 0===o?"if(o!=null){var v=o.State()-1;if(v<4.5){v=4.5;}o.State(v);}\n":"if(o!=null){var v="+o+"-1;if(v<4.5){v=4.5;}o.State(v);}\n",r="SET_TEMPERATURE";break;case"themoTTempTo":case"themoTTempRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=n.ext;else{if(!n.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))return null;l=parseFloat(n.ext);}r="SET_TEMPERATURE",s="if(o!=null){o.State("+(l=(l=l<4.5?4.5:l)>30.5?30.5:l)+");}\n";break;case"themoTTempOff":r="SET_TEMPERATURE",s="if(o!=null){o.State(4.5);}\n";break;case"themoTAutoMode":r="AUTO_MODE",s="if(o!=null){o.State(1);}\n";break;case"themoTManuMode":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=n.ext;else{if(!n.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))return null;l=parseFloat(n.ext);}r="MANU_MODE",s="if(o!=null){var v="+(l=(l=l<4.5?4.5:l)>30.5?30.5:l)+";o.State(v);}\n";break;case"themoTBoostMode":r="BOOST_MODE",s="if(o!=null){o.State(1);}\n";break;case"themoTComfortMode":r="COMFORT_MODE",s="if(o!=null){o.State(1);}\n";break;case"themoTLoweringMode":r="LOWERING_MODE",s="if(o!=null){o.State(1);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u,i,c;l=t.address,t.channels&&t.channels.THERMALCONTROL_TRANSMIT&&(s=t.channels.THERMALCONTROL_TRANSMIT.address),l&&s&&("themoTTempUp"==a.value||"themoTTempDown"==a.value?(o="SET_TEMPERATURE",n&&(i=n.indexOf("<v>"),c=n.indexOf("</v>"),-1!=i&&-1!=c&&i+3<c&&(u=n.substr(i+3,c-i-3))&&(u=Math.round(100*parseFloat(u))/100,e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()}))):"themoTTempRaw"==a.value||"themoTTempTo"==a.value?(o="SET_TEMPERATURE",u=parseFloat(a.ext),e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()}):"themoTTempOff"==a.value?(o="SET_TEMPERATURE",u=4.5,e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()}):"themoTManuMode"==a.value&&(o="SET_TEMPERATURE",n&&(i=n.indexOf("<v>"),c=n.indexOf("</v>"),-1!=i&&-1!=c&&i+3<c&&(u=n.substr(i+3,c-i-3))&&(u=Math.round(100*parseFloat(u))/100,e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()})))),r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;if("themoTSetTemp"===n.value)r="SET_TEMPERATURE";if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=3e3?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"themoTMode":r="CONTROL_MODE";break;case"themoTLowbat":r="LOWBAT_REPORTING";break;case"themoTComm":r="COMMUNICATION_REPORTING";break;case"themoTWin":r="WINDOW_OPEN_REPORTING";break;case"themoTBattery":r="BATTERY_STATE";break;case"themoTBoost":r="BOOST_STATE";break;case"themoTActualTemp":r="ACTUAL_TEMPERATURE";break;case"themoTActualHum":r="ACTUAL_HUMIDITY";break;case"themoTSetTemp":r="SET_TEMPERATURE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"themoTMode":switch(e){case"0":return"auto";case"1":return"manu";case"2":return"party";case"3":return"boost";default:return"?";}break;case"themoTLowbat":case"themoTComm":return e;case"themoTWin":return"true"==e?"open":"close";case"themoTBattery":case"themoTActualTemp":case"themoTActualHum":return xnm.aio.hm.Util.formatFloatString(e);case"themoTBoost":return parseInt(e);case"themoTSetTemp":return parseFloat(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"CONTROL_MODE":n="themoTMode";break;case"LOWBAT_REPORTING":n="themoTLowbat";break;case"COMMUNICATION_REPORTING":n="themoTComm";break;case"WINDOW_OPEN_REPORTING":n="themoTWin";break;case"BATTERY_STATE":n="themoTBattery";break;case"BOOST_STATE":n="themoTBoost";break;case"ACTUAL_TEMPERATURE":n="themoTActualHum";break;case"SET_TEMPERATURE":n="themoTSetTemp";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},CLIMATECONTROL_REGULATOR:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"themoRTempUp":e._statebuffer&&(o=this.getBufferedState(e._stateBuffer,t,a,{value:"themoRSetTemp"})),s=null==o||void 0===o?"if(o!=null){var v=o.State()+1;if(v>30.0){v=30.0;}o.State(v);}\n":"if(o!=null){var v="+o+"+1;if(v>30.0){v=30.0;}o.State(v);}\n",r="SETPOINT";break;case"themoRTempDown":e._statebuffer&&(o=this.getBufferedState(e._stateBuffer,t,a,{value:"themoRSetTemp"})),s=null==o||void 0===o?"if(o!=null){var v=o.State()-1;if(v<6.0){v=6.0;}o.State(v);}\n":"if(o!=null){var v="+o+"-1;if(v<6.0){v=6.0;}o.State(v);}\n",r="SETPOINT";break;case"themoRTempTo":case"themoRTempRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=n.ext;else{if(!n.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))return null;l=parseFloat(n.ext);}r="SETPOINT",s="if(o!=null){o.State("+(l=(l=l<6?6:l)>30?30:l)+");}\n";break;case"themoRTempClose":r="SETPOINT",s="if(o!=null){o.State(6.0);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u;if(l=t.address,t.channels&&t.channels.CLIMATECONTROL_REGULATOR&&(s=t.channels.CLIMATECONTROL_REGULATOR.address),l&&s)if("themoRTempUp"==a.value||"themoRTempDown"==a.value){if(o="SETPOINT",n){var i=n.indexOf("<v>"),c=n.indexOf("</v>");-1!=i&&-1!=c&&i+3<c&&(u=n.substr(i+3,c-i-3))&&(u=Math.round(100*parseFloat(u))/100,e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()});}}else"themoRTempRaw"==a.value||"themoRTempTo"==a.value?(o="SETPOINT",u=parseFloat(a.ext),e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()}):"themoRTempClose"==a.value&&(o="SETPOINT",u=6,e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()});r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;if("themoRSetTemp"===n.value)r="SETPOINT";if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=3e4?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"themoRSetTemp"!==n.value?null:(r="SETPOINT",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"themoRSetTemp"===t.value?xnm.aio.hm.Util.formatFloatString(e):"?";},resolveState:function resolveState(e,t,a){var n;if("SETPOINT"===t.datapoint)n="themoRSetTemp";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},CLIMATECONTROL_VENT_DRIVE:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"valveState":r="VALVE_STATE";break;case"valveError":r="ERROR";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"valveState":return xnm.aio.hm.Util.formatFloatString(e);case"valveError":switch(e){case"0":return"no_error";case"1":return"valve_drive_blocked";case"2":return"valve_drive_loose";case"3":return"adjusting_range_to_small";case"4":return"low_bat";default:return"?";}break;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"VALVE_STATE":n="valveState";break;case"ERROR":n="valveError";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SIGNAL_LED:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"signalLedOn":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"signalLedOff":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"signalLedToggle":r="STATE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case"setSignalLed":if(!n.ext)return null;if("string"!=typeof n.ext)return null;r="SUBMIT",s='if(o!=null){o.State("'+n.ext+'");}\n';break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"signalLedState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"signalLedState"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="signalLedState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SIGNAL_CHIME:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"signalChimeOn":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"signalChimeOff":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"signalChimeToggle":r="STATE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case"setSignalChime":if(!n.ext)return null;if("string"!=typeof n.ext)return null;r="SUBMIT",s='if(o!=null){o.State("'+n.ext+'");}\n';break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"signalChimeState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"signalChimeState"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="signalChimeState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},WEATHER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"weatherTemp":case"weatherTemp1":case"weatherTemp2":case"weatherTemp3":case"weatherTemp4":switch(r="TEMPERATURE",n.value){case"weatherTemp1":if(1!=a.address)return null;break;case"weatherTemp2":if(2!=a.address)return null;break;case"weatherTemp3":if(3!=a.address)return null;break;case"weatherTemp4":if(4!=a.address)return null;}break;case"weatherHum":r="HUMIDITY";break;case"weatherAirP":r="AIR_PRESSURE";break;case"weatherLowbat":r="LOWBAT";break;case"weatherRaining":r="RAINING";break;case"weatherRainCounter":r="RAIN_COUNTER";break;case"weatherWindS":r="WIND_SPEED";break;case"weatherWindD":case"weatherWindDRaw":r="WIND_DIRECTION";break;case"weatherWindDRRaw":r="WIND_DIRECTION_RANGE";break;case"weatherSunD":r="SUNSHINEDURATION";break;case"weatherBright":r="BRIGHTNESS";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"weatherTemp":case"weatherTemp1":case"weatherTemp2":case"weatherTemp3":case"weatherTemp4":case"weatherRainCounter":case"weatherWindS":return xnm.aio.hm.Util.formatFloatString(e);case"weatherHum":case"weatherAirP":case"weatherWindDRaw":case"weatherWindDRRaw":case"weatherSunD":case"weatherBright":return parseInt(e);case"weatherLowbat":case"weatherRaining":return e;case"weatherWindD":var a=parseInt(e);return a=a<23?"N":a<68?"NO":a<113?"O":a<158?"SO":a<203?"S":a<248?"SW":a<293?"W":a<338?"NW":"N";default:return"?";}},resolveState:function resolveState(e,t,a){if("HM-WDS30-OT2-SM-2"==e.type){var n=t.channel;if(!n)return null;var r=n.indexOf(":");if(-1==r)return null;var s=n.substr(r+1);if("TEMPERATURE"===t.datapoint)"1"==s?l="weatherTemp1":"2"==s?l="weatherTemp2":"3"==s?l="weatherTemp3":"4"==s&&(l="weatherTemp4");return l?{key:l,value:o=this.handleStatusResponse(a+"",{value:l})}:null;}var l,o;switch(t.datapoint){case"TEMPERATURE":l="weatherTemp";break;case"HUMIDITY":l="weatherHum";break;case"AIR_PRESSURE":l="weatherAirP";break;case"LOWBAT":l="weatherLowbat";break;case"RAINING":l="weatherRaining";break;case"RAIN_COUNTER":l="weatherRainCounter";break;case"WIND_SPEED":l="weatherWindS";break;case"WIND_DIRECTION":var u=[];return l="weatherWindD",o=this.handleStatusResponse(a+"",{value:l}),u.push({key:l,value:o}),l="weatherWindDRaw",o=this.handleStatusResponse(a+"",{value:l}),u.push({key:l,value:o}),u;case"WIND_DIRECTION_RANGE":l="weatherWindDRRaw";break;case"SUNSHINEDURATION":l="weatherSunD";break;case"BRIGHTNESS":l="weatherBright";}return l?{key:l,value:o=this.handleStatusResponse(a+"",{value:l})}:null;}},WEATHER_TRANSMIT:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"weatherTTemp":r="TEMPERATURE";break;case"weatherTHum":r="HUMIDITY";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"weatherTTemp":return xnm.aio.hm.Util.formatFloatString(e);case"weatherTHum":return parseInt(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"TEMPERATURE":n="weatherTTemp";break;case"HUMIDITY":n="weatherTHum";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},RAINDETECTOR:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"rainState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"rainState"===t.value?"0"==e?"dry":"rain":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="rainState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},RAINDETECTOR_HEAT:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"rainHeatOn":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"rainHeatOff":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"rainHeatToggle":r="STATE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"rainHeatState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"rainHeatState"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="rainHeatState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},ROTARY_HANDLE_SENSOR:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"handleState":r="STATE";break;case"handleError":r="ERROR";break;case"handleLowbat":r="LOWBAT";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"handleState":switch(e){case"0":return"closed";case"1":return"tilted";case"2":return"open";default:return"?";}break;case"handleError":switch(e){case"0":return"no_error";case"1":return"sabotage";default:return"?";}break;case"handleLowbat":return e;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"STATE":n="handleState";break;case"ERROR":n="handleError";break;case"LOWBAT":n="handleLowbat";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SHUTTER_CONTACT:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"shutterState":r="STATE";break;case"shutterError":r="ERROR";break;case"shutterLowbat":r="LOWBAT";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"shutterState":return 1==e&&(e="true"),0==e&&(e="false"),"true"==e?"open":"closed";case"shutterError":switch(e){case"0":return"no_error";case"1":case"7":return"sabotage";default:return"?";}break;case"shutterLowbat":return e;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"STATE":n="shutterState";break;case"ERROR":n="shutterError";break;case"LOWBAT":n="shutterLowbat";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SENSOR_FOR_CARBON_DIOXIDE:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"co2State"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;if("co2State"!==t.value)return"?";switch(e){case"0":return"normal";case"1":return"added";case"2":return"added_strong";default:return"?";}},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="co2State";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},MOTION_DETECTOR:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"motionBright":r="BRIGHTNESS";break;case"motionState":r="MOTION";break;case"motionError":r="ERROR";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"motionBright":return parseInt(e);case"motionState":return"true"==e?"on":"off";case"motionError":return"0"===e?"no_error":"sabotage";default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"BRIGHTNESS":n="motionBright";break;case"MOTION":n="motionState";break;case"ERROR":n="motionError";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SMOKE_DETECTOR:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"smokeState":r="STATE";break;case"smokeLowbat":r="LOWBAT";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"smokeState":return"true"==e?"on":"off";case"smokeLowbat":return e;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LOWBAT":n="smokeLowbat";break;case"STATE":n="smokeState";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SMOKE_DETECTOR_TEAM:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"smokeGroup1State"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"smokeGroup1State"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="smokeGroup1State";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SMOKE_DETECTOR_TEAM_V2:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"smokeGroupState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"smokeGroupState"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="smokeGroupState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},ALARMACTUATOR:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"alarmOn":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"alarmOff":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"alarmToggle":r="STATE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"alarmState":r="STATE";break;case"alarmErrPower":r="ERROR_POWER";break;case"alarmErrSabo":r="ERROR_SABOTAGE";break;case"alarmErrBat":r="ERROR_BATTERY";break;case"alarmLowbat":r="LOWBAT";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"alarmState":return"true"==e?"on":"off";case"alarmErrPower":switch(e){case"0":return"no_error";case"1":return"power_failure";default:return"?";}break;case"alarmErrSabo":switch(e){case"0":return"no_error";case"1":return"sabotage";default:return"?";}break;case"alarmErrBat":switch(e){case"0":return"no_error";case"1":return"barttery_defect";default:return"?";}break;case"alarmLowbat":return e;default:return null;}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"STATE":n="alarmState";break;case"ERROR_POWER":n="alarmErrPower";break;case"ERROR_SABOTAGE":n="alarmErrSabo";break;case"ERROR_BATTERY":n="alarmErrBat";break;case"LOWBAT":n="alarmLowbat";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},PULSE_SENSOR:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;return"seqOk"!==n.value?null:(r="SEQUENCE_OK",s="if(o!=null){o.State(1);}\n",xnm.aio.hm.Channel.buildCommandScript(t,a,r,s));}},CAPACITIVE_FILLING_LEVEL_SENSOR:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"fillingLevel"!==n.value?null:(r="FILLING_LEVEL",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"fillingLevel"===t.value?parseInt(e):"?";},resolveState:function resolveState(e,t,a){var n;if("FILLING_LEVEL"===t.datapoint)n="fillingLevel";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},TILT_SENSOR:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"tiltState":r="STATE";break;case"tiltLowbat":r="LOWBAT";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"tiltState":return"true"==e?"on":"off";case"tiltLowbat":return e;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"STATE":n="tiltState";break;case"LOWBAT":n="tiltLowbat";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},WATERDETECTIONSENSOR:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"waterState":r="STATE";break;case"waterLowbat":r="LOWBAT";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"waterState":switch(e){case"0":return"dry";case"1":return"wet";case"2":return"water";default:return"?";}break;case"waterLowbat":return e;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"STATE":n="waterState";break;case"LOWBAT":n="waterLowbat";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},AKKU:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"akkuLevel":r="LEVEL";break;case"akkuStatus":r="STATUS";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"akkuLevel":return xnm.aio.hm.Util.formatFloatString(e);case"akkuStatus":switch(e){case"0":return"trickle_charge";case"1":return"charge";case"2":return"discharge";case"3":return"state_unknow";default:return"?";}break;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="akkuLevel";break;case"STATUS":n="akkuStatus";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},DIGITAL_OUTPUT:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"digOutOn":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"digOutOff":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"digOutToggle":r="STATE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"digOutState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"digOutState"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="digOutState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},DIGITAL_ANALOG_OUTPUT:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null;switch(n.value){case"setOutFreq":case"setOutFreqRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=n.ext;else{if(!n.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))return null;l=parseFloat(n.ext);}r="FREQUENCY",s="if(o!=null){o.State("+(l=(l=l<0?0:l)>5e4?5e4:l)+");}\n";break;case"daOutOn":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"daOutOff":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"daOutToggle":r="STATE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"daOutFreq":r="FREQUENCY";break;case"daOutState":r="STATE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"daOutFreq":return xnm.aio.hm.Util.formatFloatString(e);case"daOutState":return"true"==e?"on":"off";default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"FREQUENCY":n="daOutFreq";break;case"STATE":n="daOutState";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},DIGITAL_INPUT:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"digInFreq":r="FREQUENCY";break;case"digInState":r="STATE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"digInFreq":return xnm.aio.hm.Util.formatFloatString(e);case"digInState":return"true"==e?"on":"off";default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"FREQUENCY":n="digInFreq";break;case"STATE":n="digInState";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},DIGITAL_ANALOG_INPUT:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"daInValue":r="VALUE";break;case"daInState":r="STATE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"daInValue":return xnm.aio.hm.Util.formatFloatString(e);case"daInState":return"true"==e?"on":"off";default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"VALUE":n="daInValue";break;case"STATE":n="daInState";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SENSOR:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"sensorState"!==n.value?null:(r="SENSOR",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"sensorState"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("SENSOR"===t.datapoint)n="sensorState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},POWERMETER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"meterBoot":r="BOOT";break;case"meterEnergyCounter":r="ENERGY_COUNTER";break;case"meterPower":r="POWER";break;case"meterCurrent":r="CURRENT";break;case"meterVoltage":r="VOLTAGE";break;case"meterFrequency":r="FREQUENCY";break;default:return null;}var s='o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,r)+'");';return s+='if(o!=null){states=states#o.Value();}else{states=states#"?";}';},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"meterBoot":return e;case"meterEnergyCounter":case"meterPower":case"meterCurrent":case"meterVoltage":case"meterFrequency":return xnm.aio.hm.Util.formatFloatString(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"BOOT":n="meterBoot";break;case"ENERGY_COUNTER":n="meterEnergyCounter";break;case"POWER":n="meterPower";break;case"CURRENT":n="meterCurrent";break;case"VOLTAGE":n="meterVoltage";break;case"FREQUENCY":n="meterFrequency";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},STATUS_INDICATOR:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"statusIndiOn":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"statusIndiOff":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"statusIndiToggle":r="STATE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"statusIndiState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"statusIndiState"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="statusIndiState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},POWERMETER_IGL:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"iglBoot":r="BOOT";break;case"iglGasEnergy":r="GAS_ENERGY_COUNTER";break;case"iglGasPower":r="GAS_POWER";break;case"iglEnergy":r="ENERGY_COUNTER";break;case"iglPower":r="POWER";break;default:return null;}var s='o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,r)+'");';return s+='if(o!=null){states=states#o.Value();}else{states=states#"?";}';},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"iglBoot":return e;case"iglGasEnergy":return parseFloat(e).toFixed(3);case"iglGasPower":case"iglPower":return parseFloat(e).toFixed(2);case"iglEnergy":return parseFloat(e).toFixed(1);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"BOOT":n="iglBoot";break;case"GAS_ENERGY_COUNTER":n="iglGasEnergy";break;case"GAS_POWER":n="iglGasPower";break;case"ENERGY_COUNTER":n="iglEnergy";break;case"POWER":n="iglPower";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},RGBW_COLOR:{_RGBToHSV:function _RGBToHSV(e,t,a){e/=255,t/=255,a/=255;var n=Math.min(e,Math.min(t,a)),r=Math.max(e,Math.max(t,a));return n==r?[0,0,n]:[60*((e==n?3:a==n?1:5)-(e==n?t-a:a==n?e-t:a-e)/(r-n)),(r-n)/r,r];},buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null;switch(n.value){case"color":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="COLOR",s="if(o!=null){o.State("+(l=(l=l<0?0:l)>255?255:l)+");}\n";break;case"white":r="COLOR",s="if(o!=null){o.State(200);}\n";break;case"rgb":if(!n.ext||n.ext.length<6)return null;var o=parseInt(n.ext.substr(0,2),16),u=parseInt(n.ext.substr(2,2),16),i=parseInt(n.ext.substr(4,2),16),c=this._RGBToHSV(o,u,i);r="COLOR",s="if(o!=null){o.State("+(c[1]<.1?200:Math.round(c[0]/1.8))+");}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"colorState"!==n.value?null:(r="COLOR",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"colorState"===t.value?parseInt(e):"?";},resolveState:function resolveState(e,t,a){var n;if("COLOR"===t.datapoint)n="colorState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},RGBW_AUTOMATIC:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null;if("program"!==n.value)return null;if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}return r="PROGRAM",s="if(o!=null){o.State("+(l=(l=l<0?0:l)>255?255:l)+");}\n",xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"programState"!==n.value?null:(r="PROGRAM",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"programState"===t.value?parseInt(e):"?";},resolveState:function resolveState(e,t,a){var n;if("PROGRAM"===t.datapoint)n="programState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},MAINTENANCE:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"maintLowbat"!==n.value?null:(r="LOWBAT",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e||"maintLowbat"===t.value?e:"?";},resolveState:function resolveState(e,t,a){var n;if("LOWBAT"===t.datapoint)n="maintLowbat";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},LUXMETER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"luxState"!==n.value?null:(r="LUX",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"luxState"===t.value?parseFloat(e).toFixed(2):"?";},resolveState:function resolveState(e,t,a){var n;if("LUX"===t.datapoint)n="luxState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SWITCH_SENSOR:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"switchSensorInOn":r="STATE",{address:1},s="if(o!=null){o.State(1);}\n";break;case"switchSensorInOff":r="STATE",{address:1},s="if(o!=null){o.State(0);}\n";break;case"switchSensorInToggle":r="STATE",{address:1},s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case"switchSensorExOn":r="STATE",{address:2},s="if(o!=null){o.State(1);}\n";break;case"switchSensorExOff":r="STATE",{address:2},s="if(o!=null){o.State(0);}\n";break;case"switchSensorExToggle":r="STATE",{address:2},s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"switchSensorInState":r="STATE",{address:1};break;case"switchSensorExState":r="STATE",{address:2};break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"switchSensorInState":case"switchSensorExState":return"true"==e?"on":"off";default:return"?";}},resolveState:function resolveState(e,t,a){var n=t.channel;if(!n)return null;var r=n.indexOf(":");if(-1==r)return null;var s,l=n.substr(r+1);if("STATE"===t.datapoint)"1"==l?s="switchSensorInState":"2"==l&&(s="switchSensorExState");return s?{key:s,value:this.handleStatusResponse(a+"",{value:s})}:null;}},SWITCH_PANIC:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"switchPanicOn":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"switchPanicOff":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"switchPanicToggle":r="STATE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"switchPanicState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"switchPanicState"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="switchPanicState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},ARMING:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"armingDisarm":r="ARMSTATE",s='if(o!=null){o.State("0");}\n';break;case"armingIntern":r="ARMSTATE",s='if(o!=null){o.State("1");}\n';break;case"armingAll":r="ARMSTATE",s='if(o!=null){o.State("2");}\n';break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"armingState":r="ARMSTATE";break;case"armingErrSabo":r="ERROR_SABOTAGE";break;case"armingLowbat":r="LOWBAT";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"armingState":return 0==e?e="disarmed":1==e?e="internal_armed":2==e?e="all_armed":3==e&&(e="alarm_blocked"),e;case"armingErrSabo":switch(e){case"0":return"no_error";case"1":return"sabotage";default:return"?";}break;case"armingLowbat":return e;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"ARMSTATE":n="armingState";break;case"ERROR_SABOTAGE":n="armingErrSabo";break;case"LOWBAT":n="armingLowbat";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},JALOUSIE:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"jalStepUp":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"jalLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+0.05;if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+0.05;if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"jalStepDown":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"jalLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-0.05;if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-0.05;if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"jalUp":r="LEVEL",s="if(o!=null){o.State(1.0);}\n";break;case"jalDown":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"jalRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;case"jalStop":r="STOP",s="if(o!=null){o.State(1);}\n";break;case"jalLmlStepUp":var u=n.ext;void 0!==u&&null!=u&&u||(u=5),isNaN(parseInt(u))&&(u=5),u/=100,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"jalLmlLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+"+u+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+"+u+";if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL_SLATS";break;case"jalLmlStepDown":var i=n.ext;void 0!==i&&null!=i&&i||(i=5),isNaN(parseInt(i))&&(i=5),i/=100,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"jalLmlLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-"+i+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-"+i+";if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL_SLATS";break;case"jalLmlUp":r="LEVEL_SLATS",s="if(o!=null){o.State(1.0);}\n";break;case"jalLmlDown":r="LEVEL_SLATS",s="if(o!=null){o.State(0.0);}\n";break;case"jalLmlRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL_SLATS",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u,i;if(l=t.address,t.channels&&t.channels.JALOUSIE&&(s=t.channels.JALOUSIE.address),l&&s){if("jalRaw"==a.value){o="LEVEL";var _t8=parseInt(a.ext);e._statebuffer[l+":"+s+"."+o]={value:_t8,timestamp:new Date().getTime()},r&&r();}else if("jalUp"==a.value||"jalDown"==a.value)o="LEVEL",delete e._statebuffer[l+":"+s+"."+o],setTimeout(function(){r&&r();},3e3);else if("jalStop"==a.value)delete e._statebuffer[l+":"+s+".LEVEL"],delete e._statebuffer[l+":"+s+".LEVEL_SLATS"],r&&r();else if("jalStepUp"==a.value||"jalStepDown"==a.value){if(o="LEVEL",n&&(u=n.indexOf("<v>"),i=n.indexOf("</v>"),-1!=u&&-1!=i&&u+3<i)){var _t9=n.substr(u+3,i-u-3);_t9&&(_t9=Math.round(1e4*parseFloat(_t9))/100,e._statebuffer[l+":"+s+"."+o]={value:_t9,timestamp:new Date().getTime()});}r&&r();}else if("jalLmlRaw"==a.value){o="LEVEL_SLATS";var _t10=parseInt(a.ext);e._statebuffer[l+":"+s+"."+o]={value:_t10,timestamp:new Date().getTime()},r&&r();}else if("jalLmlUp"==a.value||"jalLmlDown"==a.value)o="LEVEL_SLATS",delete e._statebuffer[l+":"+s+"."+o],setTimeout(function(){r&&r();},3e3);else if("jalLmlStepUp"==a.value||"jalLmlStepDown"==a.value){if(o="LEVEL_SLATS",n&&(u=n.indexOf("<v>"),i=n.indexOf("</v>"),-1!=u&&-1!=i&&u+3<i)){var _t11=n.substr(u+3,i-u-3);_t11&&(_t11=Math.round(1e4*parseFloat(_t11))/100,e._statebuffer[l+":"+s+"."+o]={value:_t11,timestamp:new Date().getTime()});}r&&r();}}else r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;switch(n.value){case"jalLevel":r="LEVEL";break;case"jalLmlLevel":r="LEVEL_SLATS";}if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=1e4?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"jalLevel":case"jalPosDes":r="LEVEL";break;case"jalDirection":r="DIRECTION";break;case"jalLmlLevel":r="LEVEL_SLATS";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"jalLevel":case"jalPosDes":e=parseFloat(e);var a=Math.round(100*e);if("jalLevel"==t.value)return a;if("jalPosDes"==t.value)return a<=35?"bottom":a<=65?"middle":a<=100?"top":"?";break;case"jalDirection":switch(e){case"0":return"none";case"1":return"up";case"2":return"down";case"3":return"undefined";default:return"?";}break;case"jalLmlLevel":return e=parseFloat(e),Math.round(100*e);default:return"?";}},resolveState:function resolveState(e,t,a){var n,r;switch(t.datapoint){case"LEVEL":var s=[];return n="jalLevel",r=this.handleStatusResponse(a+"",{value:n}),s.push({key:n,value:r}),n="jalPosDes",r=this.handleStatusResponse(a+"",{value:n}),s.push({key:n,value:r}),s;case"DIRECTION":return{key:n="jalDirection",value:r=this.handleStatusResponse(a+"",{value:n})};case"LEVEL_SLATS":return{key:n="jalLmlLevel",value:r=this.handleStatusResponse(a+"",{value:n})};}return null;}},POWERMETER_IEC1:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"iec1Boot":r="BOOT";break;case"iec1GasEnergy":r="GAS_ENERGY_COUNTER";break;case"iec1GasPower":r="GAS_POWER";break;case"iec1Energy":r="ENERGY_COUNTER";break;case"iec1Power":r="POWER";break;case"iec1IecEnergy":r="IEC_ENERGY_COUNTER";break;case"iec1IecPower":r="IEC_POWER";break;default:return null;}var s='o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,r)+'");';return s+='if(o!=null){states=states#o.Value();}else{states=states#"?";}';},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"iec1Boot":return e;case"iec1GasEnergy":return parseFloat(e).toFixed(3);case"iec1GasPower":case"iec1Power":case"iec1IecPower":return parseFloat(e).toFixed(2);case"iec1Energy":case"iec1IecEnergy":return parseFloat(e).toFixed(1);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"BOOT":n="iec1Boot";break;case"GAS_ENERGY_COUNTER":n="iec1GasEnergy";break;case"GAS_POWER":n="iec1GasPower";break;case"ENERGY_COUNTER":n="iec1Energy";break;case"POWER":n="iec1Power";break;case"IEC_ENERGY_COUNTER":n="iec1IecEnergy";break;case"IEC_POWER":n="iec1IecPower";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},POWERMETER_IEC2:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"iec2Boot":r="BOOT";break;case"iec2GasEnergy":r="GAS_ENERGY_COUNTER";break;case"iec2GasPower":r="GAS_POWER";break;case"iec2Energy":r="ENERGY_COUNTER";break;case"iec2Power":r="POWER";break;case"iec2IecEnergy":r="IEC_ENERGY_COUNTER";break;case"iec2IecPower":r="IEC_POWER";break;default:return null;}var s='o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,r)+'");';return s+='if(o!=null){states=states#o.Value();}else{states=states#"?";}';},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"iec2Boot":return e;case"iec2GasEnergy":return parseFloat(e).toFixed(3);case"iec2GasPower":case"iec2Power":case"iec2IecPower":return parseFloat(e).toFixed(2);case"iec2Energy":case"iec2IecEnergy":return parseFloat(e).toFixed(1);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"BOOT":n="iec2Boot";break;case"GAS_ENERGY_COUNTER":n="iec2GasEnergy";break;case"GAS_POWER":n="iec2GasPower";break;case"ENERGY_COUNTER":n="iec2Energy";break;case"POWER":n="iec2Power";break;case"IEC_ENERGY_COUNTER":n="iec2IecEnergy";break;case"IEC_POWER":n="iec2IecPower";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},MOD_EM8BIT_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"state8bit":r="STATE";break;case"lowbat":r="LOWBAT";break;default:return null;}var s='o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,r)+'");';return s+='if(o!=null){states=states#o.Value();}else{states=states#"?";}';},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"lowbat":return e;case"state8bit":return parseInt(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"STATE":n="state8bit";break;case"LOWBAT":n="lowbat";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},DUAL_WHITE_BRIGHTNESS:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"dualWBOn":r="OLD_LEVEL",s="if(o!=null){o.State(1);}\n";break;case"dualWBOff":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"dualWBUp":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"dualWBLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+0.1;if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"dualWBDown":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"dualWBLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-0.1;if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"dualWBTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;case"dualWBToggleTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if("string"!=typeof n.ext)return null;l=n.ext.replace("%",""),l=parseInt(l);}r="LEVEL",s="if(o!=null){real des = 0.0+o.Value(); if(des == 0.0){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l).toFixed(2)+");}else{o.State(0.0);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u,i=t.address;if(t.channels&&t.channels.DIMMER&&(s=t.channels.DIMMER.address),i&&s){if("dualWBToggleTo"==a.value||"dualWBOff"==a.value){l="LEVEL";var c=0;switch(a.value){case"dualWBToggleTo":c=parseFloat(a.ext);break;case"dualWBOff":c=0;}e._statebuffer[i+":"+s+"."+l]={value:c,timestamp:new Date().getTime()},r&&r();}else if("dualWBUp"==a.value||"dualWBDown"==a.value){if(l="LEVEL",n&&(o=n.indexOf("<v>"),u=n.indexOf("</v>"),-1!=o&&-1!=u&&o+3<u)){var _t12=n.substr(o+3,u-o-3);_t12&&(_t12=Math.round(1e4*parseFloat(_t12))/100,e._statebuffer[i+":"+s+"."+l]={value:_t12,timestamp:new Date().getTime()});}r&&r();}else"dualWBOn"==a.value||"dualWBToggleTo"==a.value?(l="LEVEL",delete e._statebuffer[i+":"+s+"."+l],setTimeout(function(){r&&r();},3e3)):r&&r();}else r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;if("dualWBLevel"===n.value)r="LEVEL";if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=3e3?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"dualWBLevel":r="LEVEL";break;case"dualWBDirection":r="DIRECTION";break;case"dualWBErrHeat":r="ERROR_OVERHEAT";break;case"dualWBErrReduced":r="ERROR_REDUCED";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"dualWBLevel":return e=parseFloat(e),Math.round(100*e);case"dualWBDirection":switch(e){case"0":return"none";case"1":return"up";case"2":return"down";case"3":return"undefined";default:return"?";}break;case"dualWBErrHeat":switch(e){case"0":return"no_error";case"1":return"over_heat";default:return"?";}break;case"dualWBErrReduced":switch(e){case"0":return"no_error";case"1":return"reduced";default:return"?";}break;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="dualWBLevel";break;case"DIRECTION":n="dualWBDirection";break;case"ERROR_OVERHEAT":n="dualWBErrHeat";break;case"ERROR_REDUCED":n="dualWBErrReduced";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},DUAL_WHITE_COLOR:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"dualWCOn":r="OLD_LEVEL",s="if(o!=null){o.State(1);}\n";break;case"dualWCOff":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"dualWCUp":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"dualWCLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+0.1;if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"dualWCDown":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"dualWCLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-0.1;if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"dualWCTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;case"dualWCToggleTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if("string"!=typeof n.ext)return null;l=n.ext.replace("%",""),l=parseInt(l);}r="LEVEL",s="if(o!=null){real des = 0.0+o.Value(); if(des == 0.0){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l).toFixed(2)+");}else{o.State(0.0);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u,i=t.address;if(t.channels&&t.channels.DIMMER&&(s=t.channels.DIMMER.address),i&&s){if("dualWCOff"==a.value){l="LEVEL";var _t13=0;e._statebuffer[i+":"+s+"."+l]={value:_t13,timestamp:new Date().getTime()},r&&r();}else if("dualWCUp"==a.value||"dualWCDown"==a.value){if(l="LEVEL",n&&(o=n.indexOf("<v>"),u=n.indexOf("</v>"),-1!=o&&-1!=u&&o+3<u)){var _t14=n.substr(o+3,u-o-3);_t14&&(_t14=Math.round(1e4*parseFloat(_t14))/100,e._statebuffer[i+":"+s+"."+l]={value:_t14,timestamp:new Date().getTime()});}r&&r();}else"dualWCOn"==a.value?(l="LEVEL",delete e._statebuffer[i+":"+s+"."+l],setTimeout(function(){r&&r();},3e3)):r&&r();}else r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;if("dualWCLevel"===n.value)r="LEVEL";if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=3e3?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"dualWCLevel":r="LEVEL";break;case"dualWCDirection":r="DIRECTION";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"dualWCLevel":return e=parseFloat(e),Math.round(100*e);case"dualWCDirection":switch(e){case"0":return"none";case"1":return"up";case"2":return"down";case"3":return"undefined";default:return"?";}break;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="dualWCLevel";break;case"DIRECTION":n="dualWCDirection";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},CARBON_DIOXIDE_RECEIVER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r={co2:"CONCENTRATION",co2SensorStatus:"CONCENTRATION_STATUS"}[n.value];return r?xnm.aio.hm.Channel.buildStateScript(t,a,r):null;},getBufferedState:function getBufferedState(e,t,a,n){var r=t.address,s=a.address,l=null;if("co2"===n.value)l="CONCENTRATION";if(r&&s&&l&&e){var o=r+":"+s+"."+l,u=e[o];return u&&null!=u.value&&void 0!==u.value?new Date().getTime()-u.timestamp>=3e3?(delete e[o],null):u.value:null;}return null;},handleStatusResponse:function handleStatusResponse(e,t){if("?"===e)return e;switch(t.value){case"co2":return parseInt(e,10);case"co2SensorStatus":switch(e){case"0":return"normal";case"1":return"unknown";case"2":return"overflow";}}return"?";},resolveState:function resolveState(e,t,a){var n={CONCENTRATION:"co2",CONCENTRATION_STATUS:"co2SensorStatus"}[t.datapoint];return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},DOOR_LOCK_STATE_TRANSMITTER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"lock":s="if(o!=null){o.State(0);}\n",r="LOCK_TARGET_LEVEL";break;case"unlock":s="if(o!=null){o.State(1);}\n",r="LOCK_TARGET_LEVEL";break;case"open":s="if(o!=null){o.State(2);}\n",r="LOCK_TARGET_LEVEL";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r={activityState:"ACTIVITY_STATE",lockState:"LOCK_STATE"}[n.value];return r?xnm.aio.hm.Channel.buildStateScript(t,a,r):null;},handleStatusResponse:function handleStatusResponse(e,t){if("?"===e)return e;switch(t.value){case"activityState":switch(e){case"0":return"unknown";case"1":return"up";case"2":return"down";case"3":return"stable";}break;case"lockState":switch(e){case"0":return"unknown";case"1":return"locked";case"2":return"unlocked";}}return"?";},resolveState:function resolveState(e,t,a){var n={ACTIVITY_STATE:"activityState",LOCK_STATE:"lockState"}[t.datapoint];return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},DOOR_LOCK_STATE_TRANSCEIVER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r={activityState:"ACTIVITY_STATE",lockState:"LOCK_STATE"}[n.value];return r?xnm.aio.hm.Channel.buildStateScript(t,a,r):null;},handleStatusResponse:function handleStatusResponse(e,t){if("?"===e)return e;switch(t.value){case"activityState":switch(e){case"0":return"unknown";case"1":return"up";case"2":return"down";case"3":return"stable";}break;case"lockState":switch(e){case"0":return"unknown";case"1":return"locked";case"2":return"unlocked";}}return"?";},resolveState:function resolveState(e,t,a){var n={ACTIVITY_STATE:"activityState",LOCK_STATE:"lockState"}[t.datapoint];return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},ACCESS_RECEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"accessAuthDisable":s="if(o!=null){o.State(0);}\n",r="ACCESS_AUTHORIZATION";break;case"accessAuthEnable":s="if(o!=null){o.State(1);}\n",r="ACCESS_AUTHORIZATION";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r={accessAuthState:"STATE"}[n.value];return r?xnm.aio.hm.Channel.buildStateScript(t,a,r):null;},handleStatusResponse:function handleStatusResponse(e,t){if("?"===e)return e;if("accessAuthState"===t.value)switch(e){case"0":return"off";case"1":return"on";}return"?";},resolveState:function resolveState(e,t,a){var n={STATE:"accessAuthState"}[t.datapoint];return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}}},xnm.aio.hm.SysVar={BINARY:{buildCommandScript:function buildCommandScript(e,t,a){if(!t.address)return null;if(!a.value)return null;var n="var o;";switch(n+='o=dom.GetObject("'+t.address+'");',a.value){case"binaryOn":n+="if(o!=null){o.State(1);}\n";break;case"binaryOff":n+="if(o!=null){o.State(0);}\n";break;case"binaryToggle":n+="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null;}return n+='o="";\n';},buildStateScript:function buildStateScript(e,t,a){if(!t.address)return null;var n='o=dom.GetObject("'+t.address+'");';return a&&a.value&&"mappedState"==a.value?n+='if(o!=null){if(o.Value()){states=states#o.ValueName1();}else{states=states#o.ValueName0();}}else{states=states#"?";}':n+='if(o!=null){states=states#o.Value().ToString();}else{states=states#"?";}',n;},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e||t&&t.value&&"mappedState"==t.value?e:"true"==e?"on":"false"==e?"off":"?";}},FLOAT:{buildCommandScript:function buildCommandScript(e,t,a){if(!t.address)return null;if(!a.value)return null;var n="var o;";n+='o=dom.GetObject("'+t.address+'");';switch(a.value){case"setFloatValue":case"rawFloatValue":if(null==a.ext||null==a.ext)return null;if("number"==typeof a.ext)a.ext;else{if(!a.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))return null;a.ext;}n+="if(o!=null){o.State("+a.ext+");}\n";break;default:return null;}return n+='o="";\n';},buildStateScript:function buildStateScript(e,t){if(!t.address)return null;var a='o=dom.GetObject("'+t.address+'");';return a+='if(o!=null){states=states#o.Value();}else{states=states#"?";}';},handleStatusResponse:function handleStatusResponse(e){return"?"==e?e:parseFloat(e);}},INTEGER:{buildCommandScript:function buildCommandScript(e,t,a){if(!t.address)return null;if(!a.value)return null;var n="var o;";n+='o=dom.GetObject("'+t.address+'");';var r=null;switch(a.value){case"setIntegerValue":case"rawIntValue":if(null==a.ext||null==a.ext)return null;if("number"==typeof a.ext)r=parseInt(a.ext);else{if(!a.ext.match(/^[-+]?[0-9]+$/))return null;r=a.ext;}n+="if(o!=null){o.State("+r+");}\n";break;default:return null;}return n+='o="";\n';},buildStateScript:function buildStateScript(e,t,a){if(!t.address)return null;var n='o=dom.GetObject("'+t.address+'");';return a&&a.value&&"mappedState"==a.value?n+='if(o!=null){states=states#o.ValueList().StrValueByIndex(";", o.Value());}else{states=states#"?";}':n+='if(o!=null){states=states#o.Value();}else{states=states#"?";}',n;},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e||t&&t.value&&"mappedState"==t.value?e:parseInt(e);}},STRING:{buildCommandScript:function buildCommandScript(e,t,a){if(!t.address)return null;if(!a.value)return null;var n="var o;";n+='o=dom.GetObject("'+t.address+'");';var r=null;if("rawStringValue"!==a.value)return null;if(null==a.ext||null==a.ext)return null;if("string"!=typeof a.ext)return null;r="";for(var s=0;s<a.ext.length;s++){var l=a.ext[s],o=l.charCodeAt(0);r+=o>127||"\\"===l||'"'===l?"&#"+o+";":l;}return n+='if(o!=null){o.State("'+r+'");}\n',n+='o="";\n';},buildStateScript:function buildStateScript(e,t){if(!t.address)return null;var a='o=dom.GetObject("'+t.address+'");';return a+='if(o!=null){states=states#o.Value();}else{states=states#"?";}';},handleStatusResponse:function handleStatusResponse(e){return"string"==typeof e&&(e=(e=e.replace(/&apos;/g,"'")).replace(/&#[0-9]+;/g,function(e){return e=e.substring(2,e.length-1),String.fromCharCode(e);})),e;}}},xnm.aio.hm.Prog={buildCommandScript:function buildCommandScript(e,t,a){if(!t.address)return null;if(!a.value)return null;var n="var o;";return n+='o=dom.GetObject("'+t.address+'");',"progExec"!==a.value?null:(n+="if(o!=null){o.ProgramExecute();}\n",n+='o="";\n');}},xnm.aio.hm.CUxDChannel={KEY:{buildCommandScript:function buildCommandScript(e,t,a,n){var r=xnm.aio.hm.Channel.KEY.buildCommandScript(e,t,a,n);if(r)return r;if(!t.channels)return null;if(!n.value)return null;var s=null;switch(n.value){case"cmdShort":s="CMD_RUNS",r="if(o!=null){o.State(1);}\n";break;case"cmdLong":s="CMD_RUNL",r="if(o!=null){o.State(1);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,s,r);}},SWITCH:{buildCommandScript:function buildCommandScript(e,t,a,n){var r=xnm.aio.hm.Channel.SWITCH.buildCommandScript(e,t,a,n);if(r)return r;if(!t.channels)return null;if(!n.value)return null;var s=null;switch(n.value){case"switchNightOn":s="NIGHT_MODE",r="if(o!=null){o.State(1);}\n";break;case"switchNightOff":s="NIGHT_MODE",r="if(o!=null){o.State(0);}\n";break;case"switchNightToggle":s="NIGHT_MODE",r="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case"switchLedOff":s="INFO_LED",r="if(o!=null){o.State(0);}\n";break;case"switchLedGreen":s="INFO_LED",r="if(o!=null){o.State(1);}\n";break;case"switchLedOrange":s="INFO_LED",r="if(o!=null){o.State(2);}\n";break;case"switchLedRed":s="INFO_LED",r="if(o!=null){o.State(3);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,s,r);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"switchState":r="STATE";break;case"switchPower":r="POWER";break;case"switchEnergyCount":r="ENERGY_COUNTER";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"switchState":return"true"==e?"on":"off";case"switchPower":case"switchEnergyCount":return parseFloat(e);default:return"?";}}},DIMMER:{buildCommandScript:function buildCommandScript(e,t,a,n){var r=xnm.aio.hm.Channel.DIMMER.buildCommandScript(e,t,a,n);if(r)return r;if(!t.channels)return null;if(!n.value)return null;var s,l=null;switch(n.value){case"dimToggle":l="TOGGLE",r="if(o!=null){o.State(1);}\n";break;case"valveOn":l="OLD_LEVEL",r="if(o!=null){o.State(1);}\n";break;case"valveOff":l="LEVEL",r="if(o!=null){o.State(0.0);}\n";break;case"valveUp":l="LEVEL",r="if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n";break;case"valveDown":l="LEVEL",r="if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n";break;case"valveTo":case"valveRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)s=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;s=n.ext;}l="LEVEL",r="if(o!=null){o.State("+(s=(s=(s/=100)<0?0:s)>1?1:s)+");}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,l,r);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){"dimTo"==a.value||"dimRaw"==a.value||"dimOn"==a.value||"dimOff"==a.value||"dimToggle"==a.value||"valveTo"==a.value||"valveRaw"==a.value||"valveOn"==a.value||"valveOff"==a.value?setTimeout(function(){r&&r();},3e3):r&&r();},buildStateScript:function buildStateScript(e,t,a,n){var r=xnm.aio.hm.Channel.DIMMER.buildStateScript(e,t,a,n);if(r)return r;if(!t.channels)return null;if(!n.value)return null;var s=null;switch(n.value){case"valveLevel":s="LEVEL";break;case"dimPower":s="POWER";break;case"dimEnergyCount":s="ENERGY_COUNTER";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,s);},handleStatusResponse:function handleStatusResponse(e,t){var a=xnm.aio.hm.Channel.DIMMER.handleStatusResponse(e,t);if(null!=a&&void 0!==a&&"?"!=a)return a;if("?"==e)return e;switch(t.value){case"valveLevel":return xnm.aio.hm.Util.formatFloatString(100*e);case"dimPower":case"dimEnergyCount":return xnm.aio.hm.Util.formatFloatString(e);default:return"?";}}},"VIR-LG-RGBW-DIM-CH":{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r,s=null;switch(n.value){case"on":case"off":case"toggle":return xnm.aio.hm.Channel.SWITCH.buildCommandScript(e,t,a,n);case"dimOn":case"dimOff":case"dimUp":case"dimDown":case"dimRaw":return xnm.aio.hm.Channel.DIMMER.buildCommandScript(e,t,a,n);case"dimToggle":s="TOGGLE",script="if(o!=null){o.State(1);}\n";break;case"dimStop":s="STOP",script="if(o!=null){o.State(1);}\n";break;case"dimColor":case"dimColorS":if(null==n.ext||void 0===n.ext)return null;r=n.ext;var l=parseInt(r.substr(0,2),16),o=parseInt(r.substr(2,2),16),u=parseInt(r.substr(4,2),16),i=parseInt(r.substr(6,2),16);if(isNaN(l)||isNaN(o)||isNaN(u))return null;l>255&&(l=255),o>255&&(o=255),u>255&&(u=255),isNaN(i)&&(i=255),s="RGBW",r=l+","+o+","+u+","+i,script='if(o!=null){o.State("'+r+'");}\n';break;case"dimColorTemp":if(null==n.ext||void 0===n.ext)return null;if(r=parseFloat(n.ext),isNaN(r))return null;s="WHITE",script="if(o!=null){o.State("+r+");}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,s,script);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){"dimTo"==a.value||"dimRaw"==a.value||"dimOn"==a.value||"dimOff"==a.value||"dimToggle"==a.value||"dimColor"==a.value||"dimColorTemp"==a.value?setTimeout(function(){r&&r();},3e3):r&&r();},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"switchState":return xnm.aio.hm.Channel.SWITCH.buildStateScript(e,t,a,n);case"dimmerLevel":return xnm.aio.hm.Channel.DIMMER.buildStateScript(e,t,a,n);case"dimmerColor":r="RGBW";break;case"dimmerColorTemp":r="WHITE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"switchState":return xnm.aio.hm.Channel.SWITCH.handleStatusResponse(e,t);case"dimmerLevel":return xnm.aio.hm.Channel.DIMMER.handleStatusResponse(e,t);case"dimmerColor":if(!e)return"?";if("rgb("!=e.substr(0,4))return"?";e=e.substring(4,e.length-1);try{var a=e.split(","),n=parseInt(a[0]).toString(16);2!=n.length&&(n="0"+n);var r=parseInt(a[1]).toString(16);2!=r.length&&(r="0"+r);var s=parseInt(a[2]).toString(16);2!=s.length&&(s="0"+s);var l=parseInt(a[3]).toString(16);return 2!=l.length&&(l="0"+l),n.toUpperCase()+r.toUpperCase()+s.toUpperCase()+l.toUpperCase();}catch(e){return"?";}break;case"dimmerColorTemp":return xnm.aio.hm.Util.formatFloatString(e);default:return"?";}}},CLIMATECONTROL_REGULATOR:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null;switch(n.value){case"themoRTempUp":r="SETPOINT",s="if(o!=null){var v=o.Value()+2;if(v>99.5){v=99.5;}o.State(v);}\n";break;case"themoRTempDown":r="SETPOINT",s="if(o!=null){var v=o.Value()-2;if(v<0.0){v=0.0;}o.State(v);}\n";break;case"themoRTempTo":case"themoRTempRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=n.ext;else{if(!n.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))return null;l=parseFloat(n.ext);}r="SETPOINT",s="if(o!=null){o.State("+(l=(l=l<0?0:l)>99.5?99.5:l)+");}\n";break;case"themoRTempClose":r="SETPOINT",s="if(o!=null){o.State(5.5);}\n";break;case"themoRTempOpen":r="SETPOINT",s="if(o!=null){o.State(30.5);}\n";break;case"themoRValveOpen":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"themoRValveClose":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"themoRModeAuto":r="MODE_TEMPERATUR_REGULATOR",s="if(o!=null){o.State(0);}\n";break;case"themoRModeManu":r="MODE_TEMPERATUR_REGULATOR",s="if(o!=null){o.State(1);}\n";break;case"themoRComfortTempTo":case"themoRComfortTempRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=n.ext;else{if(!n.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))return null;l=parseFloat(n.ext);}r="TEMPERATUR_COMFORT_VALUE",s="if(o!=null){o.State("+(l=(l=l<0?0:l)>99.5?99.5:l)+");}\n";break;case"themoRLowerTempTo":case"themoRLowerTempRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=n.ext;else{if(!n.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))return null;l=parseFloat(n.ext);}r="TEMPERATUR_LOWERING_VALUE",s="if(o!=null){o.State("+(l=(l=l<0?0:l)>99.5?99.5:l)+");}\n";break;case"themoRWinTempTo":case"themoRWinTempRaw":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=n.ext;else{if(!n.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))return null;l=parseFloat(n.ext);}r="TEMPERATUR_WINDOW_OPEN_VALUE",s="if(o!=null){o.State("+(l=(l=l<0?0:l)>99.5?99.5:l)+");}\n";break;case"themoRSetPartyEnd":if(null==n.ext||void 0===n.ext)return null;r="PARTY_END_TIME",s="if(o!=null){o.State('"+(l=n.ext)+"');}\n";break;case"themoRValveState":if(null==n.ext||null==n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="VALVE_STATE",s+="if(o!=null){o.State("+l+");}\n";break;case"themoRSummerOn":r="SUMMER_MODE",s="if(o!=null){o.State(1);}\n";break;case"themoRSummerOff":r="SUMMER_MODE",s="if(o!=null){o.State(0);}\n";break;case"themoRSummerToggle":r="SUMMER_MODE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"themoRSetTemp":r="SETPOINT";break;case"themoRComfortTemp":r="TEMPERATUR_COMFORT_VALUE";break;case"themoRLowerTemp":r="TEMPERATUR_LOWERING_VALUE";break;case"themoRWinTemp":r="TEMPERATUR_WINDOW_OPEN_VALUE";break;case"themoRMode":r="MODE_TEMPERATUR_REGULATOR";break;case"themoRPartyEnd":r="PARTY_END_TIME";break;case"themoRSummer":r="SUMMER_MODE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"themoRSetTemp":case"themoRComfortTemp":case"themoRLowerTemp":case"themoRWinTemp":return xnm.aio.hm.Util.formatFloatString(e);case"themoRMode":switch(e){case"0":return"auto";case"1":return"manu";case"2":return"party";default:return"?";}break;case"themoRPartyEnd":return e;case"themoRSummer":return"true"==e?"on":"off";default:return"?";}}},CLIMATECONTROL_VENT_DRIVE:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"valveState":r="VALVE_STATE";break;case"valveOffset":r="VALVE_OFFSET_VALUE";break;case"valveTemperature":r="TEMPERATURE";break;case"valveAlamr":r="ALARM";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"valveState":case"valveOffset":return parseInt(e);case"valveTemperature":return xnm.aio.hm.Util.formatFloatString(e);case"valveAlamr":return"true"==e?"alarm":"ok";default:return"?";}}},WEATHER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"weatherMinTemp":r="TEMP_MIN_24H";break;case"weatherMaxTemp":r="TEMP_MAX_24H";break;case"weatherMinHum":r="HUM_MIN_24H";break;case"weatherMaxHum":r="HUM_MAX_24H";break;case"weatherTemp":r="TEMPERATURE";break;case"weatherHum":r="HUMIDITY";break;case"weatherHumF":r="HUMIDITYF";break;case"weatherDew":r="DEW_POINT";break;case"weatherRaining":r="RAINING";break;case"weatherRainCounter":r="RAIN_CTR";break;case"weatherWindS":r="WIND_SPEED";break;case"weatherHumAbs":r="ABS_HUMIDITY";break;case"weatherBright":r="BRIGHTNESS";break;case"weatherBatVolt":r="BAT_VOLTAGE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"weatherMinTemp":case"weatherMaxTemp":case"weatherMinHum":case"weatherMaxHum":return parseFloat(e).toFixed(2);case"weatherTemp":case"weatherBatVolt":case"weatherHumF":case"weatherDew":case"weatherRainCounter":case"weatherWindS":case"weatherHumAbs":return xnm.aio.hm.Util.formatFloatString(e);case"weatherHum":case"weatherBright":return parseInt(e);case"weatherRaining":return e;default:return"?";}}},MOTION_DETECTOR:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"motionState":r="MOTION";break;case"motionBright":r="BRIGHTNESS";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"motionState":return"true"==e?"on":"off";case"motionBright":return parseFloat(e);default:return"?";}}},CAPACITIVE_FILLING_LEVEL_SENSOR:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"fillingLevel"!==n.value?null:(r="FILLING_LEVEL",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"fillingLevel"===t.value?xnm.aio.hm.Util.formatFloatString(e):"?";}},SENSOR:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"sensorSumReset":r="SUM_RESET",s="if(o!=null){o.State(1);}\n";break;case"sensModeAuto":r="MODE",s="if(o!=null){o.State(0);}\n";break;case"sensModeHeat":r="MODE",s="if(o!=null){o.State(1);}\n";break;case"sensModeCool":r="MODE",s="if(o!=null){o.State(3);}\n";break;case"sensModeFanOnly":r="MODE",s="if(o!=null){o.State(9);}\n";break;case"sensModeDry":r="MODE",s="if(o!=null){o.State(14);}\n";break;case"sensSwingV":r="VANE",s="if(o!=null){o.State(11);}\n";break;case"sensSwingH":r="VANE",s="if(o!=null){o.State(12);}\n";break;case"sensSwingVH":r="VANE",s="if(o!=null){o.State(13);}\n";break;case"sensSwingS":r="VANE",s="if(o!=null){o.State(14);}\n";break;case"sensSpeedAuto":r="SPEED",s="if(o!=null){o.State(0);}\n";break;case"sensSpeedLow":r="SPEED",s="if(o!=null){o.State(1);}\n";break;case"sensSpeedMid1":r="SPEED",s="if(o!=null){o.State(2);}\n";break;case"sensSpeedMid2":r="SPEED",s="if(o!=null){o.State(3);}\n";break;case"sensSpeedMid3":r="SPEED",s="if(o!=null){o.State(4);}\n";break;case"sensSpeedHigh":r="SPEED",s="if(o!=null){o.State(5);}\n";break;case"sensRoomOccu":r="ROOM",s="if(o!=null){o.State(0);}\n";break;case"sensRoomStandby":r="ROOM",s="if(o!=null){o.State(1);}\n";break;case"sensRoomUnoccu":r="ROOM",s="if(o!=null){o.State(2);}\n";break;case"sensRoomOff":r="ROOM",s="if(o!=null){o.State(3);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"sensorState":case"hmsContactState":case"fhtContactState":case"securityState":r="STATE";break;case"sensorSum":r="SUM";break;case"sensorMean5min":r="MEAN5MINUTES";break;case"sensorMax5min":r="MAX5MINUTES";break;case"sensorSum1h":r="SUM_1H";break;case"sensorMax1h":r="MAX_1H";break;case"sensorSum24h":r="SUM_24H";break;case"sensorMax24h":r="MAX_24H";break;case"sensorMeter":r="METER";break;case"sensorDistance":r="DISTANCE";break;case"sensorFPercent":r="F_PERCENT";break;case"sensorFLevel":r="F_LEVEL";break;case"sensorFVolume":r="F_VOLUME";break;case"sensorRelais1":r="RELAIS1";break;case"sensorRelais2":r="RELAIS2";break;case"sensorInfo":r="INFO";break;case"sensorSumDate":r="SUM_DATE";break;case"sensMode":r="MODE";break;case"sensSwing":r="VANE";break;case"sensSpeed":r="SPEED";break;case"sensRoom":r="ROOM";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"sensorSum":case"sensorMean5min":case"sensorMax5min":case"sensorSum1h":case"sensorMax1h":case"sensorSum24h":case"sensorMax24h":case"sensorMeter":case"sensorDistance":case"sensorFLevel":case"sensorFVolume":return xnm.aio.hm.Util.formatFloatString(e);case"sensorFPercent":return parseInt(e);case"sensorState":case"sensorRelais1":case"sensorRelais2":case"sensorInfo":case"sensorSumDate":return e;case"hmsContactState":case"fhtContactState":return"true"==e?"open":"close";case"securityState":return"true"==e?"danger":"ok";case"sensMode":switch(e){case"0":return"auto";case"1":return"heat";case"3":return"cool";case"9":return"fan_only";case"14":return"dry";default:return"?";}break;case"sensSwing":switch(e){case"11":return"vertical";case"12":return"horizontal";case"13":return"both";case"14":return"stop";default:return"?";}break;case"sensSpeed":switch(e=parseInt(e)){case 0:return"auto";case 1:return"low";case 2:return"mid1";case 3:return"mid2";case 4:return"mid3";default:return e>=5&&e<=14?"high":"?";}break;case"sensRoom":switch(e){case"0":return"occupied";case"1":return"standby";case"2":return"unoccupied";case"3":return"off";default:return"?";}break;default:return"?";}}},POWERMETER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"powerMeterPower":r="POWER";break;case"powerMeterECount":r="ENERGY_COUNTER";break;case"powerMeterSum1h":r="SUM_1H";break;case"powerMeterSum24h":r="SUM_24H";break;case"powerMeterVoltage":r="VOLTAGE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"powerMeterPower":case"powerMeterECount":case"powerMeterSum1h":case"powerMeterSum24h":case"powerMeterVoltage":return xnm.aio.hm.Util.formatFloatString(e);default:return"?";}}},DANGER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"dangerState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"dangerState"===t.value?"true"==e?"danger":"ok":"?";}},EVENT_INTERFACE:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;return"evntIntfPress"!==n.value?null:(r="STATE",s="if(o!=null){o.State(1);}\n",xnm.aio.hm.Channel.buildCommandScript(t,a,r,s));}},RELAIS:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"relaisOn":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"relaisOff":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"relaisToggle":r="STATE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"relaisState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"relaisState"===t.value?"true"==e?"on":"off":"?";}},WRAPPER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"wrapperValue":if(!(r=function(e){for(var t=0;t<e.length;t++){var a=e[t];if("MEDIAN"!=a&&"MEAN"!=a&&"SET_STATE"!=a&&"RESET"!=a&&"INSTALL_TEST"!=a)return a;}return null;}(t.channels.WRAPPER.datapoints)))return null;break;case"wrapperMedian":r="MEDIAN";break;case"wrapperMean":r="MEAN";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"wrapperValue":case"wrapperMedian":case"wrapperMean":return xnm.aio.hm.Util.formatFloatString(e);default:return"?";}}},SYSTEM:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;return"systemPress"!==n.value?null:(r="STATE",s="if(o!=null){o.State(1);}\n",xnm.aio.hm.Channel.buildCommandScript(t,a,r,s));}},POWER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"powBatVolt"!==n.value?null:(r="BAT_VOLTAGE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"powBatVolt"===t.value?xnm.aio.hm.Util.formatFloatString(e):"?";}},ENOCEAN_WEATHER2:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"eoWeather2BrightW":r="BRIGHTNESS_WEST";break;case"eoWeather2BrightS":r="BRIGHTNESS_SOUTH";break;case"eoWeather2BrightE":r="BRIGHTNESS_EAST";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"eoWeather2BrightW":case"eoWeather2BrightS":case"eoWeather2BrightE":return parseInt(e);default:return"?";}}},ENOCEAN_SENSOR_ERROR:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"eoSensorErr"!==n.value?null:(r="ERROR",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e||"eoSensorErr"===t.value?e:"?";}},ENOCEAN_Bidi_Switch2:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"bidiSwitch2State"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"bidiSwitch2State"===t.value?"true"==e?"on":"off":"?";}}},xnm.aio.hm.HmIPChannel={MAINTENANCE:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"errorBat":r="LOW_BAT";break;case"errorBatVoltage":r="OPERATING_VOLTAGE";break;case"errorComm":r="UNREACH";break;case"errorSabo":r="SABOTAGE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"errorBat":case"errorComm":case"errorSabo":return e;case"errorBatVoltage":return parseFloat(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LOW_BAT":n="errorBat";break;case"UNREACH":n="errorComm";break;case"SABOTAGE":n="errorSabo";break;case"OPERATING_VOLTAGE":n="errorBatVoltage";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},MAINTENANCE_SD:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"errorSdBat":r="LOW_BAT";break;case"errorSdComm":r="UNREACH";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"errorSdBat":case"errorSdComm":return e;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LOW_BAT":n="errorSdBat";break;case"UNREACH":n="errorSdComm";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},MAINTENANCE_BAT_BL:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r={maintBatBlDutyCycle:"DUTY_CYCLE",maintBatBlBat:"LOW_BAT",maintBatBlVoltage:"OPERATING_VOLTAGE",maintBatBlComm:"UNREACH"}[n.value]||null;return r?xnm.aio.hm.Channel.buildStateScript(t,a,r):null;},handleStatusResponse:function handleStatusResponse(e,t){if("?"===e)return e;switch(t.value){case"maintBatBlDutyCycle":case"maintBatBlBat":case"maintBatBlComm":return e;case"maintBatBlVoltage":return parseFloat(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n={DUTY_CYCLE:"maintBatBlDutyCycle",LOW_BAT:"maintBatBlBat",OPERATING_VOLTAGE:"maintBatBlVoltage",UNREACH:"maintBatBlComm"}[t.datapoint]||null;return n?{key:n,value:this.handleStatusResponse(String(a),{value:n})}:null;}},MAINTENANCE_BAT_EL:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"errorBatElDutyCycle":r="DUTY_CYCLE";break;case"errorBatElCode":r="ERROR_CODE";break;case"errorBatElBat":r="LOW_BAT";break;case"errorBatElVoltage":r="OPERATING_VOLTAGE";break;case"errorBatElSensor":r="SENSOR_ERROR";break;case"errorBatElComm":r="UNREACH";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"errorBatElDutyCycle":case"errorBatElBat":case"errorBatElSensor":case"errorBatElComm":return e;case"errorBatElCode":return parseInt(e);case"errorBatElVoltage":return parseFloat(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"DUTY_CYCLE":n="errorBatElDutyCycle";break;case"ERROR_CODE":n="errorBatElCode";break;case"LOW_BAT":n="errorBatElBat";break;case"OPERATING_VOLTAGE":n="errorBatElVoltage";break;case"SENSOR_ERROR":n="errorBatElSensor";break;case"UNREACH":n="errorBatElComm";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},KEY_TRANSCEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"pressShort":r="PRESS_SHORT",s="if(o!=null){o.State(1);}\n";break;case"pressLong":r="PRESS_LONG",s="if(o!=null){o.State(1);}\n";break;default:return null;}if("HmIP-RCV-50"==t.type){var l="var o;";if(l+='o=dom.GetObject("'+("HmIP-RF."+t.address+":"+a.address+"."+r)+'");\n',"HmIP-RCV"!=t.address.substr(0,8))l+='if(!o){o=dom.GetObject("'+("HmIP-RF.HmIP-RCV-1:"+a.address+"."+r)+'");}\n';return l+=s,l+='o="";\n';}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"pressShort":case"pressLong":return!0;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"PRESS_SHORT":n="pressShort";break;case"PRESS_LONG":n="pressLong";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;},getIPEvtMap:function getIPEvtMap(e){if(e&&0!=e.length&&1!=e.length){for(var t={ipevt:[]},a=1;a<=e.length;a++){t.ipevt.push({type:"enum",name:"button "+a+" short press",ref:{value:"btn"+a+"pressShort",options:["true"]}}),t.ipevt.push({type:"enum",name:"button "+a+" long press",ref:{value:"btn"+a+"pressLong",options:["true"]}});}return t;}return{ipevt:[{type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}}]};}},SWITCH_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"switchTState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"switchTState"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="switchTState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SWITCH_VIRTUAL_RECEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"on":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"off":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"toggle":r="STATE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case"onFor":return void 0===n.ext||null==n.ext?null:(s="var o;",s+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.ON_TIME");\n',s+="if(o!=null){o.State("+parseFloat(n.ext)+");}\n",s+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.STATE");\n',s+="if(o!=null){o.State(1.0);}\n",s+='o="";\n');case"setProfile":return void 0===n.ext||null==n.ext?null:t.device?s:null;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"switchState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"switchState"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="switchState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SWITCH_WEEK_PROFILE:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!a||!a.address)return null;if(!n.value)return null;var r=null;if("setProfile"===n.value){if(!n.ext)return null;for(var s=null,l=null,o=0;o<n.ext.length;o++){var u=n.ext[o];if(u)switch(u.value){case"mode":s=u.ext;break;case"channels":l=u.ext;}}if(void 0===s||null==s||void 0===l||null==l)return null;var i=2;return"manu"==s&&(i=0),r="var o;",r+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.WEEK_PROGRAM_TARGET_CHANNEL_LOCKS");\n',r+="if(o!=null){o.State("+l+");}\n",r+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.WEEK_PROGRAM_TARGET_CHANNEL_LOCK");\n',r+="if(o!=null){o.State("+parseInt(i)+");}\n",r+='o="";\n';}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"profile"!==n.value?null:(r="WEEK_PROGRAM_CHANNEL_LOCKS",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"profile"===t.value?parseInt(e):"?";},resolveState:function resolveState(e,t,a){var n;if("WEEK_PROGRAM_CHANNEL_LOCKS"===t.datapoint)n="profile";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SHUTTER_CONTACT:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"shutterState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"shutterState"===t.value?1==e?"open":"closed":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="shutterState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SHUTTER_CONTACT_TRANSCEIVER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"shutterTState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"shutterTState"===t.value?1==e?"open":"closed":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="shutterTState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},HEATING_CLIMATECONTROL_TRANSCEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"themoProf":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=n.ext;else{if(!n.ext.match(/^\d+$/))return null;l=parseInt(n.ext);}r="ACTIVE_PROFILE",s="if(o!=null){o.State("+l+");}\n";break;case"themoBoostOn":r="BOOST_MODE",s="if(o!=null){o.State(1);}\n";break;case"themoBoostOff":r="BOOST_MODE",s="if(o!=null){o.State(0);}\n";break;case"themoAutoMode":r="CONTROL_MODE",s="if(o!=null){o.State(0);}\n";break;case"themoManuMode":r="CONTROL_MODE",s="if(o!=null){o.State(1);}\n";break;case"themoTempUp":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"themoTemp"})),s=null==o||void 0===o?"if(o!=null){var v=o.State()+0.5;if(v>30.5){v=30.5;}o.State(v);}\n":"if(o!=null){var v="+o+"+0.5;if(v>30.5){v=30.5;}o.State(v);}\n",r="SET_POINT_TEMPERATURE";break;case"themoTempDown":e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"themoTemp"})),s=null==o||void 0===o?"if(o!=null){var v=o.State()-0.5;if(v<4.5){v=4.5;}o.State(v);}\n":"if(o!=null){var v="+o+"-0.5;if(v<4.5){v=4.5;}o.State(v);}\n",r="SET_POINT_TEMPERATURE";break;case"themoTemp":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=n.ext;else{if(!n.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))return null;l=parseFloat(n.ext);}r="SET_POINT_TEMPERATURE",s="if(o!=null){o.State("+(l=(l=l<4.5?4.5:l)>30.5?30.5:l)+");}\n";break;case"themoTempOn":r="SET_POINT_TEMPERATURE",s="if(o!=null){o.State(30.5);}\n";break;case"themoTempOff":r="SET_POINT_TEMPERATURE",s="if(o!=null){o.State(4.5);}\n";break;case"themoValveLevel":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=n.ext;else{if(!n.ext.match(/^\d+$/))return null;l=parseInt(n.ext);}l<0&&(l=0),l>100&&(l=100),r="LEVEL",s="if(o!=null){o.State("+(l/=100)+");}\n";break;case"themoWinOpen":r="WINDOW_STATE",s="if(o!=null){o.State(1);}\n";break;case"themoWinClose":r="WINDOW_STATE",s="if(o!=null){o.State(0);}\n";break;case"themoModeHeating":r="HEATING_COOLING",s="if(o!=null){o.State(0);}\n";break;case"themoModeCooling":r="HEATING_COOLING",s="if(o!=null){o.State(1);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u,i,c;l=t.address,t.channels&&t.channels.HEATING_CLIMATECONTROL_TRANSCEIVER&&(s=t.channels.HEATING_CLIMATECONTROL_TRANSCEIVER.address),l&&s&&("themoTempUp"==a.value||"themoTempDown"==a.value?(o="SET_POINT_TEMPERATURE",n&&(i=n.indexOf("<v>"),c=n.indexOf("</v>"),-1!=i&&-1!=c&&i+3<c&&(u=n.substr(i+3,c-i-3))&&(u=parseFloat(u).toFixed(1),e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()}))):"themoTemp"==a.value?(o="SET_POINT_TEMPERATURE",u=parseFloat(a.ext),e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()}):"themoTempOff"==a.value?(o="SET_POINT_TEMPERATURE",u=4.5,e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()}):"themoTempOn"==a.value&&(o="SET_POINT_TEMPERATURE",u=30.5,e._statebuffer[l+":"+s+"."+o]={value:u,timestamp:new Date().getTime()})),r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;if("themoTemp"===n.value)r="SET_POINT_TEMPERATURE";if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=5e3?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"themoProf":r="ACTIVE_PROFILE";break;case"themoActualTemp":r="ACTUAL_TEMPERATURE";break;case"themoBoostMode":r="BOOST_MODE";break;case"themoFrost":r="FROST_PROTECTION";break;case"themoHum":r="HUMIDITY";break;case"themoMode":r="SET_POINT_MODE";break;case"themoTemp":r="SET_POINT_TEMPERATURE";break;case"themoValveLevel":r="LEVEL";break;case"themoWinState":r="WINDOW_STATE";break;case"themoHeatingCooling":r="HEATING_COOLING";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"themoProf":case"themoHum":return parseInt(e);case"themoActualTemp":case"themoTemp":return parseFloat(e).toFixed(1);case"themoBoostMode":case"themoFrost":return"true"==e?"on":"off";case"themoMode":switch(e){case"0":return"auto";case"1":return"manu";default:return"?";}break;case"themoValveLevel":return Math.round(100*parseFloat(e));case"themoWinState":switch(e){case"1":case"2":return"open";case"0":return"closed";default:return"?";}break;case"themoHeatingCooling":switch(e){case"0":return"heating";case"1":return"cooling";default:return"?";}break;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"ACTIVE_PROFILE":n="themoProf";break;case"ACTUAL_TEMPERATURE":n="themoActualTemp";break;case"BOOST_MODE":n="themoBoostMode";break;case"FROST_PROTECTION":n="themoFrost";break;case"HUMIDITY":n="themoHum";break;case"SET_POINT_MODE":n="themoMode";break;case"SET_POINT_TEMPERATURE":n="themoTemp";break;case"LEVEL":n="themoValveLevel";break;case"WINDOW_STATE":n="themoWinState";break;case"HEATING_COOLING":n="themoHeatingCooling";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},MOTIONDETECTOR_TRANSCEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"motionOn":r="MOTION_DETECTION_ACTIVE",s="if(o!=null){o.State(1);}\n";break;case"motionOff":r="MOTION_DETECTION_ACTIVE",s="if(o!=null){o.State(0);}\n";break;case"motionToggle":r="MOTION_DETECTION_ACTIVE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case"motionReset":r="RESET_MOTION",s="if(o!=null){o.State(1);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"motionIllu":r="ILLUMINATION";break;case"motionState":r="MOTION";break;case"motionActivate":r="MOTION_DETECTION_ACTIVE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"motionIllu":return parseFloat(e).toFixed(2);case"motionState":case"motionActivate":return"true"==e?"on":"off";default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"ILLUMINATION":n="motionIllu";break;case"MOTION":n="motionState";break;case"MOTION_DETECTION_ACTIVE":n="motionActivate";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},ENERGIE_METER_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"meterEnergyCounter":r="ENERGY_COUNTER";break;case"meterPower":r="POWER";break;case"meterCurrent":r="CURRENT";break;case"meterVoltage":r="VOLTAGE";break;case"meterFrequency":r="FREQUENCY";break;default:return null;}var s='o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,r)+'");';return s+='if(o!=null){states=states#o.Value();}else{states=states#"?";}';},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"meterEnergyCounter":case"meterPower":case"meterCurrent":case"meterVoltage":case"meterFrequency":return xnm.aio.hm.Util.formatFloatString(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"ENERGY_COUNTER":n="meterEnergyCounter";break;case"POWER":n="meterPower";break;case"CURRENT":n="meterCurrent";break;case"VOLTAGE":n="meterVoltage";break;case"FREQUENCY":n="meterFrequency";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;},getCommandStatusMap:function getCommandStatusMap(e){var t={status:[{type:"float",name:"voltage",ref:{value:"meterVoltage",extMeta:"0.0-409.5",scale:"0.1",unit:"V"}},{type:"float",name:"energy counter",ref:{value:"meterEnergyCounter",extMeta:"0.0-838859.1",scale:"0.1",unit:"Wh"}},{type:"float",name:"power",ref:{value:"meterPower",extMeta:"0.0-163830.0",scale:"0.1",unit:"W"}},{type:"float",name:"current",ref:{value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1",unit:"mA"}}]};return e&&"HMIP-USBSM"===String(e.type).toUpperCase()||t.status.push({type:"float",name:"frequency",ref:{value:"meterFrequency",extMeta:"29.52-70.47",scale:"0.01",unit:"Hz"}}),t;},getIPEvtMap:function getIPEvtMap(e){return{ipevt:this.getCommandStatusMap(e).status};}},SMOKE_DETECTOR:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"intrusionAlarmOff":r="SMOKE_DETECTOR_COMMAND",s="if(o!=null){o.State(1);}\n";break;case"intrusionAlarmOn":r="SMOKE_DETECTOR_COMMAND",s="if(o!=null){o.State(2);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"smokeState":case"smokeAlarmDetail":r="SMOKE_DETECTOR_ALARM_STATUS";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"smokeState":return 0==e?"off":"on";case"smokeAlarmDetail":if(0==e)return"off";if(1==e)return"primary_alarm";if(2==e)return"intrusion_alarm";if(3==e)return"secondary_alarm";break;default:return"?";}},resolveState:function resolveState(e,t,a){var n;if("SMOKE_DETECTOR_ALARM_STATUS"===t.datapoint){var r=[];return n="smokeState",s=this.handleStatusResponse(a+"",{value:n}),r.push({key:n,value:s}),n="smokeAlarmDetail",s=this.handleStatusResponse(a+"",{value:n}),r.push({key:n,value:s}),r;}if(!n)return null;var s=this.handleStatusResponse(a+"",{value:n});return{key:n,value:s};}},DIMMER_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!n.value)return null;var r=null;switch(n.value){case"dimmerTLevel":r="LEVEL";break;case"dimmerTColor":r="COLOR";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"dimmerTLevel":var _t15=parseFloat(e);return Math.round(100*_t15);case"dimmerTColor":return["off","blue","green","torqoise","red","purple","yellow","white"][parseInt(e)];default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="dimmerTLevel";break;case"COLOR":n="dimmerTColor";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},DIMMER_VIRTUAL_RECEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"dimOn":r="LEVEL",s="if(o!=null){o.State(1.005);}\n";break;case"dimOff":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"dimUp":l=null==n.ext||void 0===n.ext?.1:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.1,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"dimmerLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+"+l+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+"+l+";if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"dimDown":l=null==n.ext||void 0===n.ext?.1:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.1,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"dimmerLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-"+l+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-"+l+";if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"dimTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;case"toggleTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if("string"!=typeof n.ext)return null;l=n.ext.replace("%",""),l=parseInt(l);}r="LEVEL",s="if(o!=null){var v=0.0;real des = 0.0+o.Value(); if(des == 0.0){v="+(l=(l=(l/=100)<0?0:l)>1?1:l).toFixed(2)+";o.State(v);}else{o.State(v);}}\n";break;case"color":if(null==n.ext||void 0===n.ext)return null;switch(n.ext){case"off":l=0;break;case"blue":l=1;break;case"green":l=2;break;case"torqoise":l=3;break;case"red":l=4;break;case"purple":l=5;break;case"yellow":l=6;break;case"white":l=7;}r="COLOR",s="if(o!=null){o.State("+l+");}\n";break;case"colorPlay":case"colorPlayList":var u,i,c,m,p,f,E=[],d=[];if(!n.ext)return null;for(var h=0;h<n.ext.length;h++){var T=n.ext[h];if(T)switch(T.value){case"colorList":u=T.ext;break;case"colorOnTime":f=T.ext;break;case"colorLevel":i=parseInt(T.ext);break;case"colorDur":m=parseInt(T.ext);break;case"colorDurUnit":c=T.ext;break;case"colorRepeat":p=parseInt(T.ext);}}if(void 0===u||null==u||void 0===i||null==i||void 0===m||null==m||void 0===c||null==c||void 0===p||null==p||void 0===f||null==f)return null;if("colorPlay"==n.value)d.push(["100MS","200MS","300MS","400MS","500MS","700MS","1S","2S","3S","5S","7S","10S","20S","40S","50S","ALWAYS"].indexOf(f)),E.push(["off","blue","green","torqoise","red","purple","yellow","white"].indexOf(u));else{var S=u.split(",");S.forEach(function(e){E.push(["off","blue","green","torqoise","red","purple","yellow","white"].indexOf(e));}),(S=f.split(",")).forEach(function(e){d.push(["100MS","200MS","300MS","400MS","500MS","700MS","1S","2S","3S","5S","7S","10S","20S","40S","50S","ALWAYS"].indexOf(e));});}if(c=["S","M","H","10MS"].indexOf(c),i/=100,0==E.length)return null;s="";var v=null;s+='(datapoints.Get("'+(v=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"DURATION_UNIT"))+'")).State('+c+");\n",s+='(datapoints.Get("'+(v=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"LEVEL"))+'")).State('+i+");\n",s+='(datapoints.Get("'+(v=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"RAMP_TIME_UNIT"))+'")).State(0);\n',s+='(datapoints.Get("'+(v=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"RAMP_TIME_VALUE"))+'")).State(0);\n',s+='(datapoints.Get("'+(v=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"OUTPUT_SELECT_SIZE"))+'")).State('+E.length+");\n",s+='(datapoints.Get("'+(v=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"REPETITIONS"))+'")).State('+p+");\n";for(var _e5=1;_e5<=E.length;_e5++){v=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"COLOR_LIST_"+_e5),s+='(datapoints.Get("'+v+'")).State('+E[_e5-1]+");\n",v=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"ON_TIME_LIST_"+_e5),s+='(datapoints.Get("'+v+'")).State('+d[_e5-1]+");\n";}return s+='(datapoints.Get("'+(v=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"DURATION_VALUE"))+'")).State('+m+");\n";default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u,i,c=t.address;if(t.channels&&t.channels.DIMMER&&(s=t.channels.DIMMER.address),c&&s){if("dimTo"==a.value||"dimOff"==a.value){switch(l="LEVEL",a.value){case"dimTo":i=parseFloat(a.ext);break;case"dimOff":i=0;}e._statebuffer[c+":"+s+"."+l]={value:i,timestamp:new Date().getTime()},r&&r();}else"dimUp"==a.value||"dimDown"==a.value?(l="LEVEL",n&&(o=n.indexOf("<v>"),u=n.indexOf("</v>"),-1!=o&&-1!=u&&o+3<u&&(i=n.substr(o+3,u-o-3))&&(i=Math.round(100*parseFloat(i)),e._statebuffer[c+":"+s+"."+l]={value:i,timestamp:new Date().getTime()})),r&&r()):"toggleTo"==a.value?(l="LEVEL",delete e._statebuffer[c+":"+s+"."+l],setTimeout(function(){r&&r();},3e3)):r&&r();}else r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;if("dimmerLevel"===n.value)r="LEVEL";if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=3e3?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"dimmerLevel"!==n.value?null:(r="LEVEL",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"dimmerLevel"===t.value?(e=parseFloat(e),Math.round(100*e)):"?";},resolveState:function resolveState(e,t,a){var n;if("LEVEL"===t.datapoint)n="dimmerLevel";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},DIMMER_WEEK_PROFILE:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!a||!a.address)return null;if(!n.value)return null;var r=null;if("setProfile"===n.value){if(!n.ext)return null;for(var s=null,l=null,o=0;o<n.ext.length;o++){var u=n.ext[o];if(u)switch(u.value){case"mode":s=u.ext;break;case"channels":l=u.ext;}}if(void 0===s||null==s||void 0===l||null==l)return null;var i=2;return"manu"==s&&(i=0),r="var o;",r+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.WEEK_PROGRAM_TARGET_CHANNEL_LOCKS");\n',r+="if(o!=null){o.State("+l+");}\n",r+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.WEEK_PROGRAM_TARGET_CHANNEL_LOCK");\n',r+="if(o!=null){o.State("+parseInt(i)+");}\n",r+='o="";\n';}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"profile"!==n.value?null:(r="WEEK_PROGRAM_CHANNEL_LOCKS",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"profile"===t.value?parseInt(e):"?";},resolveState:function resolveState(e,t,a){var n;if("WEEK_PROGRAM_CHANNEL_LOCKS"===t.datapoint)n="profile";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},ALARM_SWITCH_VIRTUAL_RECEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;if("alarmTrigger"===n.value){var r,s,l,o;if(!n.ext)return null;for(var u=0;u<n.ext.length;u++){var i=n.ext[u];if(i)switch(i.value){case"alarmAudio":r=i.ext;break;case"alarmVisual":s=i.ext;break;case"alarmDur":o=i.ext;break;case"alarmDurUnit":l=i.ext;}}if(void 0===r||null==r||void 0===s||null==s||void 0===o||null==o||void 0===l||null==l)return null;-1==(r=["DISABLE_ACOUSTIC_SIGNAL","FREQUENCY_RISING","FREQUENCY_FALLING","FREQUENCY_RISING_AND_FALLING","FREQUENCY_ALTERNATING_LOW_HIGH","FREQUENCY_ALTERNATING_LOW_MID_HIGH","FREQUENCY_HIGHON_OFF","FREQUENCY_HIGHON_LONGOFF","FREQUENCY_LOWON_OFF_HIGHON_OFF","FREQUENCY_LOWON_LONGOFF_HIGHON_LONGOFF","LOW_BATTERY","DISARMED","INTERNALLY_ARMED","EXTERNALLY_ARMED","DELAYED_INTERNALLY_ARMED","DELAYED_EXTERNALLY_ARMED","EVENT","ERROR"].indexOf(r))&&(r=0),-1==(s=["DISABLE_OPTICAL_SIGNAL","BLINKING_ALTERNATELY_REPEATING","BLINKING_BOTH_REPEATING","DOUBLE_FLASHING_REPEATING","FLASHING_BOTH_REPEATING","CONFIRMATION_SIGNAL_0","CONFIRMATION_SIGNAL_1","CONFIRMATION_SIGNAL_2"].indexOf(s))&&(s=0),-1==(l=["S","M","H","D"].indexOf(l))&&(l=0);var c="var o;",m=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"ACOUSTIC_ALARM_SELECTION");return c+='o=dom.GetObject("'+m+'");',c+="o.State("+r+")",c+='o=dom.GetObject("'+(m=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"OPTICAL_ALARM_SELECTION"))+'");',c+="o.State("+s+")",c+='o=dom.GetObject("'+(m=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"DURATION_VALUE"))+'");',c+="o.State("+o+")",c+='o=dom.GetObject("'+(m=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"DURATION_UNIT"))+'");',c+="o.State("+l+")",c+='o="";\n';}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"alarmState":r="STATE";break;case"alarmAudioState":r="ACOUSTIC_ALARM_ACTIVE";break;case"alarmVisualState":r="OPTICAL_ALARM_ACTIVE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"alarmState":case"alarmAudioState":case"alarmVisualState":return"true"==e?"on":"off";default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"STATE":n="alarmState";break;case"ACOUSTIC_ALARM_ACTIVE":n="alarmAudioState";break;case"OPTICAL_ALARM_ACTIVE":n="alarmVisualState";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},ROTARY_HANDLE_TRANSCEIVER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"handleState"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;if("handleState"!==t.value)return"?";switch(e){case"0":return"closed";case"1":return"tilted";case"2":return"open";default:return"?";}},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="handleState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SHUTTER_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!n.value)return null;var r=null;return"blindTLevel"!==n.value?null:(r="LEVEL",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;if("blindTLevel"===t.value){var a=parseFloat(e);return Math.round(100*a);}return"?";},resolveState:function resolveState(e,t,a){var n;if("LEVEL"===t.datapoint)n="blindTLevel";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SHUTTER_VIRTUAL_RECEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"stop":r="STOP",s="if(o!=null){o.State(1);}\n";break;case"moveUp":r="LEVEL",s="if(o!=null){o.State(1.0);}\n";break;case"moveDown":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"stepUp":l=null==n.ext||void 0===n.ext?.05:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.05,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"blindLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+"+l+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+"+l+";if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"stepDown":l=null==n.ext||void 0===n.ext?.05:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.05,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"blindLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-"+l+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-"+l+";if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"moveTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u,i,c=t.address;(t.channels&&t.channels.SHUTTER_TRANSMITTER&&(s=t.channels.SHUTTER_TRANSMITTER.address),c&&s)?"moveTo"==a.value?(l="LEVEL",i=parseFloat(a.ext),e._statebuffer[c+":"+s+"."+l]={value:i,timestamp:new Date().getTime()},r&&r()):"stepUp"==a.value||"stepDown"==a.value?(l="LEVEL",n&&(o=n.indexOf("<v>"),u=n.indexOf("</v>"),-1!=o&&-1!=u&&o+3<u&&(i=n.substr(o+3,u-o-3))&&(i=Math.round(100*parseFloat(i)),e._statebuffer[c+":"+s+"."+l]={value:i,timestamp:new Date().getTime()})),r&&r()):r&&r():r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;if("blindLevel"===n.value)r="LEVEL";if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=3e3?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"blindLevel"!==n.value?null:(r="LEVEL",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"blindLevel"===t.value?(e=parseFloat(e),Math.round(100*e)):"?";},resolveState:function resolveState(e,t,a){var n;if("LEVEL"===t.datapoint)n="blindLevel";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},BLIND_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!n.value)return null;var r=null;switch(n.value){case"blindTPos":r="LEVEL";break;case"lamellaTPos":r="LEVEL_2";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"blindTPos":case"lamellaTPos":var a=parseFloat(e);return Math.round(100*a);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="blindTPos";break;case"LEVEL_2":n="lamellaTPos";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},BLIND_VIRTUAL_RECEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"stop":r="STOP",s="if(o!=null){o.State(1);}\n";break;case"moveUp":return s="var o;",s+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL_2");\n',s+="if(o!=null){o.State(1.0);}\n",s+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL");\n',s+="if(o!=null){o.State(1.0);}\n",s+='o="";\n';case"moveDown":return s="var o;",s+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL_2");\n',s+="if(o!=null){o.State(0.0);}\n",s+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL");\n',s+="if(o!=null){o.State(0.0);}\n",s+='o="";\n';case"lamellaUp":return s="var o;",s+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL_2");\n',s+="if(o!=null){o.State(1.0);}\n",s+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL");\n',s+="if(o!=null){o.State(o.Value());}\n",s+='o="";\n';case"lamellaDown":return s="var o;",s+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL_2");\n',s+="if(o!=null){o.State(0.0);}\n",s+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL");\n',s+="if(o!=null){o.State(o.Value());}\n",s+='o="";\n';case"stepUp":l=null==n.ext||void 0===n.ext?.05:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.05,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"blindPos"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+"+l+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+"+l+";if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"stepDown":l=null==n.ext||void 0===n.ext?.05:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.05,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"blindPos"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-"+l+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-"+l+";if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"moveTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;case"lamellaStepUp":return l=null==n.ext||void 0===n.ext?.05:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.05,s='var s=dom.GetObject("'+t["interface"]+"."+t.address+":"+(a.stateAddress?a.stateAddress:a.address)+'.LEVEL");\n',s+='var o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL_2");\n',s+="if(o!=null){var v=o.Value()+"+l+";if(v>1){v=1.0;}o.State(v);}\n",s+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL");\n',s+="if(o!=null){o.State(s.Value());}\n",s+='o="";s="";\n';case"lamellaStepDown":return l=null==n.ext||void 0===n.ext?.05:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.05,s='var s=dom.GetObject("'+t["interface"]+"."+t.address+":"+(a.stateAddress?a.stateAddress:a.address)+'.LEVEL");\n',s+='var o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL_2");\n',s+="if(o!=null){var v=o.Value()-"+l+";if(v<0){v=0.0;}o.State(v);}\n",s+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL");\n',s+="if(o!=null){o.State(s.Value());}\n",s+='o="";s="";\n';case"lamellaTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}return l=(l=(l/=100)<0?0:l)>1?1:l,s='var s=dom.GetObject("'+t["interface"]+"."+t.address+":"+(a.stateAddress?a.stateAddress:a.address)+'.LEVEL");\n',s+='var o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL_2");\n',s+="if(o!=null){o.State("+l+");}\n",s+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.LEVEL");\n',s+="if(o!=null){o.State(s.Value());}\n",s+='o="";s="";\n';default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u,i,c=t.address;(t.channels&&t.channels.BLIND_TRANSMITTER&&(s=t.channels.BLIND_TRANSMITTER.address),c&&s)?"moveTo"==a.value?(l="LEVEL",i=parseFloat(a.ext),e._statebuffer[c+":"+s+"."+l]={value:i,timestamp:new Date().getTime()},r&&r()):"lamellaTo"==a.value?(l="LEVEL_2",i=parseFloat(a.ext),e._statebuffer[c+":"+s+"."+l]={value:i,timestamp:new Date().getTime()},r&&r()):"stepUp"==a.value||"stepDown"==a.value?(l="LEVEL",n&&(o=n.indexOf("<v>"),u=n.indexOf("</v>"),-1!=o&&-1!=u&&o+3<u&&(i=n.substr(o+3,u-o-3))&&(i=Math.round(100*parseFloat(i)),e._statebuffer[c+":"+s+"."+l]={value:i,timestamp:new Date().getTime()})),r&&r()):"lamellaStepUp"==a.value||"lamellaStepDown"==a.value?(l="LEVEL_2",n&&(o=n.indexOf("<v>"),u=n.indexOf("</v>"),-1!=o&&-1!=u&&o+3<u&&(i=n.substr(o+3,u-o-3))&&(i=Math.round(100*parseFloat(i)),e._statebuffer[c+":"+s+"."+l]={value:i,timestamp:new Date().getTime()})),r&&r()):r&&r():r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;switch(n.value){case"blindPos":r="LEVEL";break;case"lamellaPos":r="LEVEL_2";}if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=3e3?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"blindPos":r="LEVEL";break;case"lamellaPos":r="LEVEL_2";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"blindPos":case"lamellaPos":return e=parseFloat(e),Math.round(100*e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="blindPos";break;case"LEVEL_2":n="lamellaPos";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},BLIND_WEEK_PROFILE:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!a||!a.address)return null;if(!n.value)return null;var r=null;if("setProfile"===n.value){if(!n.ext)return null;for(var s=null,l=null,o=0;o<n.ext.length;o++){var u=n.ext[o];if(u)switch(u.value){case"mode":s=u.ext;break;case"channels":l=u.ext;}}if(void 0===s||null==s||void 0===l||null==l)return null;var i=2;return"manu"==s&&(i=0),r="var o;",r+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.WEEK_PROGRAM_TARGET_CHANNEL_LOCKS");\n',r+="if(o!=null){o.State("+l+");}\n",r+='o=dom.GetObject("'+t["interface"]+"."+t.address+":"+a.address+'.WEEK_PROGRAM_TARGET_CHANNEL_LOCK");\n',r+="if(o!=null){o.State("+parseInt(i)+");}\n",r+='o="";\n';}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"profile"!==n.value?null:(r="WEEK_PROGRAM_CHANNEL_LOCKS",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"profile"===t.value?parseInt(e):"?";},resolveState:function resolveState(e,t,a){var n;if("WEEK_PROGRAM_CHANNEL_LOCKS"===t.datapoint)n="profile";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},PRESENCEDETECTOR_TRANSCEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"presenceOn":r="PRESENCE_DETECTION_ACTIVE",s="if(o!=null){o.State(1);}\n";break;case"presenceOff":r="PRESENCE_DETECTION_ACTIVE",s="if(o!=null){o.State(0);}\n";break;case"presenceToggle":r="PRESENCE_DETECTION_ACTIVE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case"presenceReset":r="RESET_PRESENCE",s="if(o!=null){o.State(1);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"presenceIllu":r="ILLUMINATION";break;case"presenceState":r="PRESENCE_DETECTION_STATE";break;case"presenceActivate":r="PRESENCE_DETECTION_ACTIVE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"presenceIllu":return parseFloat(e).toFixed(2);case"presenceState":case"presenceActivate":return"true"==e?"on":"off";default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"ILLUMINATION":n="presenceIllu";break;case"PRESENCE_DETECTION_STATE":n="presenceState";break;case"PRESENCE_DETECTION_ACTIVE":n="presenceActivate";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},CLIMATECONTROL_FLOOR_PUMP_TRANSCEIVER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"cl_fp_humidityLimiter":r="HUMIDITY_LIMITER";break;case"cl_fp_emergencyOP":r="EMERGENCY_OPERATION";break;case"cl_fp_frostProtection":r="FROST_PROTECTION";break;case"cl_fp_state":r="STATE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"cl_fp_humidityLimiter":case"cl_fp_emergencyOP":case"cl_fp_frostProtection":return e;case"cl_fp_state":return"true"==e?"on":"off";default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"HUMIDITY_LIMITER":n="cl_fp_humidityLimiter";break;case"EMERGENCY_OPERATION":n="cl_fp_emergencyOP";break;case"FROST_PROTECTION":n="cl_fp_frostProtection";break;case"STATE":n="cl_fp_state";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},CLIMATECONTROL_FLOOR_TRANSCEIVER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"cl_f_humidityLimiter":r="HUMIDITY_LIMITER";break;case"cl_f_emergencyOP":r="EMERGENCY_OPERATION";break;case"cl_f_frostProtection":r="FROST_PROTECTION";break;case"cl_f_state":r="STATE";break;case"cl_valve_level":r="LEVEL";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"cl_f_humidityLimiter":case"cl_f_emergencyOP":case"cl_f_frostProtection":return e;case"cl_f_state":return"true"==e?"on":"off";case"cl_valve_level":return 100*parseFloat(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"HUMIDITY_LIMITER":n="cl_f_humidityLimiter";break;case"EMERGENCY_OPERATION":n="cl_f_emergencyOP";break;case"FROST_PROTECTION":n="cl_f_frostProtection";break;case"STATE":n="cl_f_state";break;case"LEVEL":n="cl_valve_level";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},WEATHER_TRANSMIT:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null;switch(n.value){case"weatherActualTemp":r="ACTUAL_TEMPERATURE";break;case"weatherHum":r="HUMIDITY";break;case"weatherIllu":r="ILLUMINATION";break;case"weatherSunD":r="SUNSHINEDURATION";break;case"weatherSunDOF":r="SUNSHINEDURATION_OVERFLOW";break;case"weatherSunTOR":r="SUNSHINE_THRESHOLD_OVERRUN";break;case"weatherWindS":r="WIND_SPEED";break;case"weatherWindTOR":r="WIND_THRESHOLD_OVERRUN";break;case"weatherRain":r="RAINING";break;case"weatherRainC":r="RAIN_COUNTER";break;case"weatherRainCOF":r="RAIN_COUNTER_OVERFLOW";break;case"weatherWindD":r="WIND_DIR";break;case"weatherWindDR":r="WIND_DIR_RANGE";break;case"weatherRainCounterToday":r="RAIN_COUNTER",s="svHmIPRainCounterToday",l="rainT";break;case"weatherRainCounterYesterday":r="RAIN_COUNTER",s="svHmIPRainCounterYesterday",l="rainY";break;case"weatherSunDToday":r="SUNSHINEDURATION",s="svHmIPSunshineCounterToday",l="sunT";break;case"weatherSunDYesterday":r="SUNSHINEDURATION",s="svHmIPSunshineCounterYesterday",l="sunY";break;default:return null;}if(r&&s&&l){var o="object "+l+'=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,r)+'");';return o+='o=dom.GetObject("'+s+'_" # '+l+".Device());",o+='if(o!=null){states=states#o.Value();}else{states=states#"?";}';}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"weatherActualTemp":case"weatherIllu":case"weatherWindS":case"weatherRainC":case"weatherRainCounterToday":case"weatherRainCounterYesterday":case"weatherWindD":case"weatherWindDR":return parseFloat(parseFloat(e).toFixed(1));case"weatherHum":case"weatherSunD":case"weatherSunDToday":case"weatherSunDYesterday":return parseInt(e);case"weatherSunDOF":case"weatherSunTOR":case"weatherWindTOR":case"weatherRain":case"weatherRainCOF":return e;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"ACTUAL_TEMPERATURE":n="weatherActualTemp";break;case"HUMIDITY":n="weatherHum";break;case"ILLUMINATION":n="weatherIllu";break;case"SUNSHINEDURATION":n="weatherSunD";break;case"SUNSHINEDURATION_OVERFLOW":n="weatherSunDOF";break;case"SUNSHINE_THRESHOLD_OVERRUN":n="weatherSunTOR";break;case"WIND_SPEED":n="weatherWindS";break;case"WIND_THRESHOLD_OVERRUN":n="weatherWindTOR";break;case"RAINING":n="weatherRain";break;case"RAIN_COUNTER":n="weatherRainC";break;case"RAIN_COUNTER_OVERFLOW":n="weatherRainCOF";break;case"WIND_DIR":n="weatherWindD";break;case"WIND_DIR_RANGE":n="weatherWindDR";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},CLIMATE_TRANSCEIVER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"climateActualTemp":r="ACTUAL_TEMPERATURE";break;case"climateHum":r="HUMIDITY";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"climateActualTemp":return parseFloat(parseFloat(e).toFixed(1));case"climateHum":return parseInt(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"ACTUAL_TEMPERATURE":n="climateActualTemp";break;case"HUMIDITY":n="climateHum";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},PASSAGE_DETECTOR_DIRECTION_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"passageCurrentDirection":case"passageLastDirection":var s="CURRENT_PASSAGE_DIRECTION";"passageLastDirection"==n.value&&(s="LAST_PASSAGE_DIRECTION");var l=xnm.aio.hm.MHMCCU._getDataPointAddress(t,{address:2},s),o='o=dom.GetObject("'+l+'");';return o+='if(o!=null){states=states#o.Value();}else{states=states#"?";}',o+='states=states#"-";',o+='o=dom.GetObject("'+(l=xnm.aio.hm.MHMCCU._getDataPointAddress(t,{address:3},s))+'");',o+='if(o!=null){states=states#o.Value();}else{states=states#"?";}';case"passageCurrent":r="CURRENT_PASSAGE_DIRECTION";break;case"passageLast":r="LAST_PASSAGE_DIRECTION";break;case"passageCOF":r="PASSAGE_COUNTER_OVERFLOW";break;case"passageC":r="PASSAGE_COUNTER_VALUE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;var a=null;switch(t.value){case"passageCurrentDirection":case"passageLastDirection":return(a=e.split("-")).length<2?"?":"true"==a[0]?"right_to_left":"left_to_right";case"passageCurrent":case"passageLast":case"passageCOF":return e;case"passageC":return parseInt(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"CURRENT_PASSAGE_DIRECTION":n="passageCurrent";break;case"LAST_PASSAGE_DIRECTION":n="passageLast";break;case"PASSAGE_COUNTER_OVERFLOW":n="passageCOF";break;case"PASSAGE_COUNTER_VALUE":n="passageC";}if(!n)return null;var r=this.handleStatusResponse(a+"",{value:n});switch(t.datapoint){case"CURRENT_PASSAGE_DIRECTION":n="passageCurrentDirection",r=t&&-1!=t.channel.indexOf(":2")?"right_to_left":"left_to_right";break;case"LAST_PASSAGE_DIRECTION":n="passageLastDirection",r=t&&-1!=t.channel.indexOf(":2")?"right_to_left":"left_to_right";break;case"PASSAGE_COUNTER_OVERFLOW":n="passageCOF";break;case"PASSAGE_COUNTER_VALUE":n="passageC";}return{key:n,value:r};}},GENERIC_INPUT_TRANSMITER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"genInputChangeOver":r="CHANGE_OVER";break;case"genInputExtClock":r="EXTERNAL_CLOCK";break;case"genInputHumidityLimiter":r="HUMIDITY_LIMITER";break;case"genInputState":r="STATE";break;case"genInputTactileSwitch":r="TACTILE_SWITCH";break;case"genInputTempLimiter":r="TEMPERATURE_LIMITER";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"genInputChangeOver":case"genInputExtClock":case"genInputHumidityLimiter":case"genInputState":case"genInputTactileSwitch":case"genInputTempLimiter":return e;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"CHANGE_OVER":n="genInputChangeOver";break;case"EXTERNAL_CLOCK":n="genInputExtClock";break;case"HUMIDITY_LIMITER":n="genInputHumidityLimiter";break;case"STATE":n="genInputState";break;case"TACTILE_SWITCH":n="genInputTactileSwitch";break;case"TEMPERATURE_LIMITER":n="genInputTempLimiter";}return{key:n,value:value};}},ANALOG_OUTPUT_TRANSCEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"analogOutputOff":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"analogOutputUp":l=null==n.ext||void 0===n.ext?.1:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.1,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"analogOutputLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+"+l+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+"+l+";if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"analogOutputDown":l=null==n.ext||void 0===n.ext?.1:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.1,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"analogOutputLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-"+l+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-"+l+";if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"analogOutputTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},handleCommandResponse:function handleCommandResponse(e,t,a,n,r){var s,l,o,u,i,c=t.address;if(t.channels&&t.channels.DIMMER&&(s=t.channels.DIMMER.address),c&&s){if("analogOutputTo"==a.value||"analogOutputOff"==a.value){switch(l="LEVEL",a.value){case"analogOutputTo":i=parseFloat(a.ext);break;case"analogOutputOff":i=0;}e._statebuffer[c+":"+s+"."+l]={value:i,timestamp:new Date().getTime()},r&&r();}else"analogOutputUp"==a.value||"analogOutputDown"==a.value?(l="LEVEL",n&&(o=n.indexOf("<v>"),u=n.indexOf("</v>"),-1!=o&&-1!=u&&o+3<u&&(i=n.substr(o+3,u-o-3))&&(i=Math.round(100*parseFloat(i)),e._statebuffer[c+":"+s+"."+l]={value:i,timestamp:new Date().getTime()})),r&&r()):r&&r();}else r&&r();},getBufferedState:function getBufferedState(e,t,a,n){var r,s=t.address,l=a.address;if("analogOutputLevel"===n.value)r="LEVEL";if(s&&l&&r&&e){var o=e[s+":"+l+"."+r];return o&&null!=o.value&&void 0!==o.value?new Date().getTime()-o.timestamp>=3e3?(delete e[s+":"+l+"."+r],null):o.value:null;}return null;},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"analogOutputLevel"!==n.value?null:(r="LEVEL",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"analogOutputLevel"===t.value?(e=parseFloat(e),Math.round(100*e)):"?";},resolveState:function resolveState(e,t,a){var n;if("LEVEL"===t.datapoint)n="analogOutputLevel";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},MULTI_MODE_INPUT_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"state"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"state":return"true"==e?"on":"off";case"pressShort":case"pressLong":return!0;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"STATE":n="state";break;case"PRESS_SHORT":n="pressShort";break;case"PRESS_LONG":n="pressLong";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},WATER_DETECTION_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"waterAlarmState":r="ALARMSTATE";break;case"waterMoistureDetected":r="MOISTURE_DETECTED";break;case"waterWaterDetected":r="WATERLEVEL_DETECTED";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"waterAlarmState":return"true"==e?"on":"off";case"waterMoistureDetected":case"waterWaterDetected":return e;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"ALARMSTATE":n="waterAlarmState";break;case"MOISTURE_DETECTED":n="waterMoistureDetected";break;case"WATERLEVEL_DETECTED":n="waterWaterDetected";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},ACCELERATION_TRANSCEIVER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"acceAngle":r="ABSOLUTE_ANGLE";break;case"acceMotion":r="MOTION";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"===e)return e;switch(t.value){case"acceAngle":case"acceMotion":return e;}return"?";},resolveState:function resolveState(e,t,a){var n=null;switch(t.datapoint){case"ABSOLUTE_ANGLE":n="acceAngle";break;case"MOTION":n="acceMotion";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},DOOR_RECEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"open":r="DOOR_COMMAND",s="if(o!=null){o.State(1);}\n";break;case"stop":r="DOOR_COMMAND",s="if(o!=null){o.State(2);}\n";break;case"close":r="DOOR_COMMAND",s="if(o!=null){o.State(3);}\n";break;case"partialOpen":r="DOOR_COMMAND",s="if(o!=null){o.State(4);}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"doorState"!==n.value?null:(r="DOOR_STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"doorState"===t.value?0==(e=parseInt(e))?"closed":1==e?"open":2==e?"ventilation":"unknown":"?";},resolveState:function resolveState(e,t,a){var n;if("DOOR_STATE"===t.datapoint)n="doorState";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},SIMPLE_SWITCH_RECEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"on":r="STATE",s="if(o!=null){o.State(1);}\n";break;case"off":r="STATE",s="if(o!=null){o.State(0);}\n";break;case"toggle":r="STATE",s="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"state"!==n.value?null:(r="STATE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"state"===t.value?"true"==e?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;if("STATE"===t.datapoint)n="state";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},BRIGHTNESS_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"briAvgIllu":r="AVERAGE_ILLUMINATION";break;case"briAvgIlluSta":r="AVERAGE_ILLUMINATION_STATUS";break;case"briIllu":r="CURRENT_ILLUMINATION";break;case"briIlluSta":r="CURRENT_ILLUMINATION_STATUS";break;case"briMaxIllu":r="HIGHEST_ILLUMINATION";break;case"briMaxIlluSta":r="HIGHEST_ILLUMINATION_STATUS";break;case"briMinIllu":r="LOWEST_ILLUMINATION";break;case"briMinIlluSta":r="LOWEST_ILLUMINATION_STATUS";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"briAvgIllu":case"briIllu":case"briMaxIllu":case"briMinIllu":return parseFloat(parseFloat(e).toFixed(2));case"briAvgIlluSta":case"briIlluSta":case"briMaxIlluSta":case"briMinIlluSta":return["normal","unknown","overflow"][parseInt(e)];default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"AVERAGE_ILLUMINATION":n="briAvgIllu";break;case"AVERAGE_ILLUMINATION_STATUS":n="briAvgIlluSta";break;case"CURRENT_ILLUMINATION":n="briIllu";break;case"CURRENT_ILLUMINATION_STATUS":n="briIlluSta";break;case"HIGHEST_ILLUMINATION":n="briMaxIllu";break;case"HIGHEST_ILLUMINATION_STATUS":n="briMaxIlluSta";break;case"LOWEST_ILLUMINATION":n="briMinIllu";break;case"LOWEST_ILLUMINATION_STATUS":n="briMinIlluSta";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},POWER_MAINS_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"powerMainsFailure"!==n.value?null:(r="POWER_MAINS_FAILURE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e||"powerMainsFailure"===t.value?e:"?";},resolveState:function resolveState(e,t,a){var n;if("POWER_MAINS_FAILURE"===t.datapoint)n="powerMainsFailure";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},ACOUSTIC_SIGNAL_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"acousticTLevel":r="LEVEL";break;case"acousticTSoundfile":r="SOUNDFILE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"acousticTLevel":var a=parseFloat(e);return Math.round(100*a);case"acousticTSoundfile":return parseInt(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="acousticTLevel";break;case"SOUNDFILE":n="acousticTSoundfile";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},ACOUSTIC_SIGNAL_VIRTUAL_RECEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r,s,l,o,u,i=[];switch(n.value){case"acousticPlay":case"acousticPlayList":if(!n.ext)return null;for(var c=0;c<n.ext.length;c++){var m=n.ext[c];if(m)switch(m.value){case"acousticSound":case"acousticSoundList":r=m.ext;break;case"acousticLevel":s=parseInt(m.ext);break;case"acousticDur":o=parseInt(m.ext);break;case"acousticDurUnit":l=m.ext;break;case"acousticRepeat":u=parseInt(m.ext);}}if(void 0===r||null==r||void 0===s||null==s||void 0===o||null==o||void 0===l||null==l||void 0===u||null==u)return null;"acousticPlay"==n.value?i.push(r):i=r.split(","),l=["S","M","H","10MS"].indexOf(l),s/=100;break;default:return null;}if(0==i.length)return null;var p="",f=null;p+='(datapoints.Get("'+(f=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"DURATION_UNIT"))+'")).State('+l+");\n",p+='(datapoints.Get("'+(f=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"RAMP_TIME_UNIT"))+'")).State(0);\n',p+='(datapoints.Get("'+(f=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"RAMP_TIME_VALUE"))+'")).State(0);\n',p+='(datapoints.Get("'+(f=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"LEVEL"))+'")).State('+s+");\n",p+='(datapoints.Get("'+(f=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"OUTPUT_SELECT_SIZE"))+'")).State('+i.length+");\n",p+='(datapoints.Get("'+(f=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"REPETITIONS"))+'")).State('+u+");\n";for(var _e6=1;_e6<=i.length;_e6++){f=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"SOUNDFILE_LIST_"+_e6),p+='(datapoints.Get("'+f+'")).State('+i[_e6-1]+");\n";}return p+='(datapoints.Get("'+(f=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"DURATION_VALUE"))+'")).State('+o+");\n";},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"acousticLevel":r="LEVEL";break;case"acousticSoundfile":r="SOUNDFILE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"acousticLevel":var a=parseFloat(e);return Math.round(100*a);case"acousticSoundfile":return parseInt(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="acousticLevel";break;case"SOUNDFILE":n="acousticSoundfile";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},ACOUSTIC_DISPLAY_RECEIVER:{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r,s,l,o,u,i,c,m,p;var f=null,E=null;switch(n.value){case"setLine":if(!n.ext)return null;for(var d=0;d<n.ext.length;d++){var h=n.ext[d];if(h)switch(h.value){case"line":r=h.ext;break;case"text":s=h.ext;break;case"textAlign":l=h.ext;break;case"textColor":o=h.ext;break;case"bgColor":u=h.ext;break;case"icon":i=parseInt(h.ext);}}return r&&l&&o&&u&&!isNaN(i)?(l=l.toUpperCase(),o=o.toUpperCase(),f="{DDBC="+(u=u.toUpperCase())+",DDTC="+o+",DDI="+i+",DDA="+l+",DDS="+s+",DDID="+r+",DDC=true}",E=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"COMBINED_PARAMETER"),'dom.GetObject("'+E+'").State("'+f+'");\n'):null;case"setSound":if(!n.ext)return null;for(var _e7=0;_e7<n.ext.length;_e7++){var _t16=n.ext[_e7];if(_t16)switch(_t16.value){case"sound":c=parseInt(_t16.ext);break;case"repeat":m=parseInt(_t16.ext);break;case"interval":p=parseInt(_t16.ext);}}return isNaN(c)||isNaN(m)||isNaN(p)?null:(f="{R="+m+",IN="+p+",ANS="+c+"}",E=xnm.aio.hm.MHMCCU._getDataPointAddress(t,a,"COMBINED_PARAMETER"),'dom.GetObject("'+E+'").State("'+f+'");\n');default:return null;}}},ANALOG_INPUT_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"analogInputVoltage"!==n.value?null:(r="VOLTAGE",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"analogInputVoltage"===t.value?parseFloat(e):"?";},resolveState:function resolveState(e,t,a){var n;if("VOLTAGE"===t.datapoint)n="analogInputVoltage";return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},RAIN_DETECTION_TRANSMITTER:{buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r={temperature:"ACTUAL_TEMPERATURE",sensorHeater:"HEATER_STATE",raining:"RAINING"}[n.value];return r?xnm.aio.hm.Channel.buildStateScript(t,a,r):null;},handleStatusResponse:function handleStatusResponse(e,t){if("?"===e)return e;var a="?";switch(t.value){case"temperature":a=parseFloat(e);break;case"sensorHeater":"true"==e?a="on":"false"==e&&(a="off");break;case"raining":a=e;}return a;},resolveState:function resolveState(e,t,a){var n={ACTUAL_TEMPERATURE:"temperature",HEATER_STATE:"sensorHeater",RAINING:"raining"}[t.datapoint];return n?{key:n,value:this.handleStatusResponse(String(a),{value:n})}:null;}}},xnm.aio.hm.BidCosDevice=function(){var HM_MOD_EM_8Bit=function HM_MOD_EM_8Bit(){};return HM_MOD_EM_8Bit.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"ch.1 short press",ref:{value:"ch1pressShort"}},{type:"enum",name:"ch.1 long press",ref:{value:"ch1pressLong"}},{type:"enum",name:"ch.2 short press",ref:{value:"ch2pressShort"}},{type:"enum",name:"ch.2 long press",ref:{value:"ch2pressLong"}}],status:[{type:"int",name:"state",ref:{value:"state8bit",extMeta:"0-255"}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","off"]}}]};},HM_MOD_EM_8Bit.prototype.getIPEvtMap=function(){return{ipevt:[{type:"int",name:"state",ref:{value:"state8bit",extMeta:"0-255"}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","off"]}},{type:"enum",name:"ch.1 short press",ref:{value:"ch1pressShort",options:["true"]}},{type:"enum",name:"ch.1 long press",ref:{value:"ch1pressLong",options:["true"]}},{type:"enum",name:"ch.2 short press",ref:{value:"ch2pressShort",options:["true"]}},{type:"enum",name:"ch.2 long press",ref:{value:"ch2pressLong",options:["true"]}}]};},HM_MOD_EM_8Bit.prototype.executeCommand=function(e,t,a,n){if(a){var r=null;switch(a.value){case"ch1pressShort":r=xnm.aio.hm.Channel.KEY.buildCommandScript(e,t,{address:1},{value:"pressShort"});break;case"ch1pressLong":r=xnm.aio.hm.Channel.KEY.buildCommandScript(e,t,{address:1},{value:"pressLong"});break;case"ch2pressShort":r=xnm.aio.hm.Channel.KEY.buildCommandScript(e,t,{address:2},{value:"pressShort"});break;case"ch2pressLong":r=xnm.aio.hm.Channel.KEY.buildCommandScript(e,t,{address:2},{value:"pressLong"});}r?e._doRequestMarked(r,!0,{execute:function execute(e,t){n&&n(e);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},HM_MOD_EM_8Bit.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"state8bit":n=xnm.aio.hm.Channel.MOD_EM8BIT_TRANSMITTER.buildStateScript(e,t,{address:3},{value:"state8bit"});break;case"lowbat":n=xnm.aio.hm.Channel.MOD_EM8BIT_TRANSMITTER.buildStateScript(e,t,{address:3},{value:"lowbat"});}return n;},HM_MOD_EM_8Bit.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"state8bit":case"lowbat":return xnm.aio.hm.Channel.MOD_EM8BIT_TRANSMITTER.handleStatusResponse(e,t);default:return"?";}},HM_MOD_EM_8Bit.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"1":case"2":s=xnm.aio.hm.Channel.KEY.resolveState(e,t,a),"1"==r?s.key="ch1"+s.key:"2"==r&&(s.key="ch2"+s.key);break;case"3":s=xnm.aio.hm.Channel.MOD_EM8BIT_TRANSMITTER.resolveState(e,t,a);}return s;},{"HM-MOD-EM-8Bit":new HM_MOD_EM_8Bit(),parseDevice:function parseDevice(e){if(!e["interface"])return null;if(!e.channels||!e.hsstype)return null;switch(e.hsstype){case"HM-Sec-Sir-WM":return this._parseHMSecSirWM(e);case"HM-WDS30-OT2-SM-2":return this._parseHM_WDS30_OT2_SM_2(e);case"HM-ES-TX-WM":return this._parseHM_ES_TX_WM(e);case"HM-MOD-EM-8Bit":return this._parseHM_MOD_EM_8BIT(e);case"HM-LC-RGBW-WM":return null;default:var t=!1,a=[],n=["DIMMER","VIRTUAL_DIMMER"];for(var r in e.channels){var s=e.channels[r];s&&s.hsstype&&-1!=n.indexOf(s.hsstype)&&(-1==a.indexOf(s.hsstype)?a.push(s.hsstype):t=!0);}return a.length>0?this._parseDevice(e,a,t):null;}},_parseDevice:function _parseDevice(e,t,a){var n=[],r=null,s=null;for(var l in e.channels){var o=e.channels[l];if(o&&o.address&&o.hsstype){var u=o.address.indexOf(":");if(-1!==u){var i=o.address.substring(u+1),c={id:o.name,address:i,room:o.room,group:o.func,datapoints:[]};if(0==i&&(r=o.hsstype,s=c),-1!=t.indexOf(o.hsstype)){var _t17=this._parseGeneralInfo(e);if(_t17.channels[o.hsstype]=c,!a){n.push(_t17);break;}_t17.id+=":"+i,_t17.address+=":"+i,n.push(_t17);}}}}if(s&&r)for(var _e8=0;_e8<n.length;_e8++){var _t18=n[_e8];_t18&&(_t18.channels[r]=s);}return n;},_parseHMSecSirWM:function _parseHMSecSirWM(e){var t,a=this._parseGeneralInfo(e);(a={}).sys=xnm.aio.hm.DM.SYS,a.id=e.name,a.type=e.hsstype,a.address=e.address,a.rfAddr=e.rfAddr,a["interface"]=e["interface"],a.channels={};var n=e.channels;for(var r in n){if(n.hasOwnProperty(r)){if(!(t=e.channels[r]).address)continue;var s=t.address.indexOf(":");if(-1===s)continue;var l=t.address.substring(s+1);if(0==l)continue;if(!t.hsstype)continue;var o={id:t.name,address:l,room:t.room,group:t.func,datapoints:[]};1==l?a.channels.SWITCH_SENSOR_1=o:2==l?a.channels.SWITCH_SENSOR_2=o:3==l?a.channels.SWITCH_PANIC=o:4==l&&(a.channels.ARMING=o);}}return[a];},_parseHM_WDS30_OT2_SM_2:function _parseHM_WDS30_OT2_SM_2(e){var t,a=this._parseGeneralInfo(e),n=e.channels;for(var r in n){if(n.hasOwnProperty(r)){if(!(t=e.channels[r]).address)continue;var s=t.address.indexOf(":");if(-1===s)continue;var l=t.address.substring(s+1);if(!t.hsstype)continue;var o={id:t.name,address:l,room:t.room,group:t.func,datapoints:[]};0==l?a.channels[t.hsstype]=o:1==l?a.channels.WEATHER_1=o:2==l?a.channels.WEATHER_2=o:3==l?a.channels.WEATHER_3=o:4==l&&(a.channels.WEATHER_4=o);}}return[a];},_parseHM_ES_TX_WM:function _parseHM_ES_TX_WM(e){var t,a=this._parseGeneralInfo(e),n=e.channels;for(var r in n){if(n.hasOwnProperty(r)){if(!(t=e.channels[r]).address)continue;var s=t.address.indexOf(":");if(-1===s)continue;var l=t.address.substring(s+1);if(0==l)continue;if(!t.hsstype)continue;var o={id:t.name,address:l,room:t.room,group:t.func,datapoints:[]};a.channels[t.hsstype]=o;}}return[a];},_parseHM_MOD_EM_8BIT:function _parseHM_MOD_EM_8BIT(e){var t,a=this._parseGeneralInfo(e),n=e.channels;for(var r in n){if(n.hasOwnProperty(r)){if(!(t=e.channels[r]).address)continue;var s=t.address.indexOf(":");if(-1===s)continue;var l=t.address.substring(s+1);if(0==l)continue;if(!t.hsstype)continue;var o={id:t.name,address:l,room:t.room,group:t.func,datapoints:[]};1==l?a.channels.KEY_1=o:2==l?a.channels.KEY_2=o:3==l&&(a.channels.MOD_EM8BIT_TRANSMITTER=o);}}return[a];},_parseGeneralInfo:function _parseGeneralInfo(e){var t={};return t.sys=xnm.aio.hm.DM.SYS,t.id=e.name,t.type=e.hsstype,t.address=e.address,t.rfAddr=e.rfAddr,t["interface"]=e["interface"],t.channels={},t;}};}(),xnm.aio.hm.HmIPDevice=function(){var e=function(){var T_KEY=function T_KEY(){this._type=null,this._address=null,this._chMaintenance=0,this._chMaintenanaceHsstype=null,this._chKeyTransceivers=[];};return T_KEY.prototype.getAddress=function(){var e=this._address.indexOf(":");return-1!=e?this._address.substr(0,e):this._address;},T_KEY.prototype.getCommandStatusMap=function(){var e={status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}}]};return"HmIP-BRC2"!=this._type&&"HmIP-MOD-OC"!=this._type.substr(0,11)||(e.status=[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]),"HmIP-RCV-50"==this._type&&(e.command=[{type:"enum",name:"short press",ref:{value:"pressShort"}},{type:"enum",name:"long press",ref:{value:"pressLong"}}]),e;},T_KEY.prototype.getIPEvtMap=function(){var e={ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorLowbat",options:["false","true"]}}]};if("HmIP-BRC2"!=this._type&&"HmIP-MOD-OC"!=this._type.substr(0,11)||(e.ipevt=[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]),1==this._chKeyTransceivers.length)e.ipevt.push({type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}}),e.ipevt.push({type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}});else for(var t=0;t<this._chKeyTransceivers.length;t++){var a=this._chKeyTransceivers[t];a&&(e.ipevt.push({type:"enum",name:"button "+a+" short press",ref:{value:"btn"+a+"pressShort",options:["true"]}}),e.ipevt.push({type:"enum",name:"button "+a+" long press",ref:{value:"btn"+a+"pressLong",options:["true"]}}));}return e;},T_KEY.prototype.executeCommand=function(e,t,a,n){if(a){var r=null,s={"interface":t["interface"],address:this.getAddress(),channels:t.channels,type:t.type};if(1==this._chKeyTransceivers.length)r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.buildCommandScript(e,s,{address:this._chKeyTransceivers[0]},a);else if("btn"==a.value.substr(0,3)){var l=a.value.indexOf("press"),o=a.value.substr(3,l);o=parseInt(o),-1!=this._chKeyTransceivers.indexOf(o)&&(r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.buildCommandScript(e,s,{address:o},{value:a.value.substr(l)}));}r?e._doRequestMarked(r,!0,{execute:function execute(e,t){setTimeout(function(){n&&n(e);},200);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},T_KEY.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":case"errorBat":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);}return n;},T_KEY.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":case"errorBat":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);default:return"?";}},T_KEY.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;if("0"===r)s=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);else-1!=this._chKeyTransceivers.indexOf(parseInt(r))&&(s=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a),this._chKeyTransceivers.length>1&&s&&("pressShort"==s.key?s.key="btn"+r+"pressShort":"pressLong"==s.key&&(s.key="btn"+r+"pressLong")));return s;},T_KEY.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var t=new T_KEY();for(var a in t._type=e.type,t._address=e.address,e.channels){var n=e.channels[a];0==n.address?t._chMaintenanaceHsstype=a:"KEY_TRANSCEIVER"==a&&t._chKeyTransceivers.push(parseInt(n.address));}return t;},T_KEY;}(),t=function(){var T_SWITCH=function T_SWITCH(){this._switchIdx=0,this._type=null,this._address=null,this._chMaintenance=0,this._chMaintenanceHsstype=null,this._chKeyTransceivers=[],this._chSwitchTransmitter=1,this._chSwitchVirtualReceiver1=2,this._chSwitchVirtualReceiver2=3,this._chSwitchVirtualReceiver3=4,this._chSwitchWeekProfile=17;};return T_SWITCH.prototype._getCommonMap=function(){var e={command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}}]},t=[this._chSwitchVirtualReceiver1,this._chSwitchVirtualReceiver2,this._chSwitchVirtualReceiver3];for(var _a=0;_a<t.length;_a++){var _n4=t[_a];e.command.push({type:"enum",name:"ch.".concat(_n4," on"),ref:{value:"ch".concat(_n4,"on")}},{type:"enum",name:"ch.".concat(_n4," off"),ref:{value:"ch".concat(_n4,"off")}},{type:"enum",name:"ch.".concat(_n4," toggle"),ref:{value:"ch".concat(_n4,"toggle")}},{type:"float",name:"ch.".concat(_n4," on for"),ref:{value:"ch".concat(_n4,"onFor"),ext:"%f",unit:"s"}}),e.status.push({type:"enum",name:"ch.".concat(_n4," status"),ref:{value:"ch".concat(_n4,"State"),options:["off","on"]}});}return e;},T_SWITCH.prototype.getAddress=function(){var e=this._address.indexOf(":");return e>-1?this._address.substr(0,e):this._address;},T_SWITCH.prototype.getCommandStatusMap=function(){var e=JSON.parse(JSON.stringify(this._getCommonMap()));return this._chSwitchWeekProfile&&(e.command.push({type:"enum",name:"set profile",ref:{value:"setProfile",ext:"%e",extMeta:["auto","manu"]}}),e.status.push({type:"enum",name:"profile",ref:{value:"profile",extMeta:["auto","manu"]}})),"HmIP-PCBS"===this._type.substr(0,9)&&e.status.push({type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}),e;},T_SWITCH.prototype.getIPEvtMap=function(){var e={ipevt:JSON.parse(JSON.stringify(this._getCommonMap())).status};if("HmIP-PCBS"===this._type.substr(0,9)&&e.ipevt.push({type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}),this._chKeyTransceivers&&this._chKeyTransceivers.length>0){var _t19=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.getIPEvtMap(this._chKeyTransceivers);_t19&&_t19.ipevt&&(e.ipevt=e.ipevt.concat(_t19.ipevt));}return e;},T_SWITCH.prototype.useStateBuffer=function(){return"HmIPW-DRS"==this._type.substr(0,9)||"HmIP-DRSI"==this._type.substr(0,9)||"HmIP-PCBS"==this._type.substr(0,9)||"HmIP-MOD-OC"==this._type.substr(0,11);},T_SWITCH.prototype.executeCommand=function(e,t,a,n){var _this=this;if(!a)return void(n&&n(new Error("command is null")));var r=null;var s={"interface":t["interface"],address:this.getAddress(),channels:t.channels};if("setProfile"===a.value){if(this._chSwitchWeekProfile){var _t20={value:"setProfile",ext:[{value:"mode",ext:a.ext},{value:"channels",ext:1<<3*this._switchIdx}]};r=xnm.aio.hm.HmIPChannel.SWITCH_WEEK_PROFILE.buildCommandScript(e,s,{address:this._chSwitchWeekProfile},_t20);}}else{var _t21=this._chSwitchVirtualReceiver1;var _n5=JSON.parse(JSON.stringify(a));if(a.value.startsWith("ch")){var _e9="ch"+this._chSwitchVirtualReceiver1,_r="ch"+this._chSwitchVirtualReceiver2,_s="ch"+this._chSwitchVirtualReceiver3;a.value.substr(0,_e9.length)==_e9?(_t21=this._chSwitchVirtualReceiver1,_n5.value=a.value.substr(_e9.length)):a.value.substr(0,_r.length)==_r?(_t21=this._chSwitchVirtualReceiver2,_n5.value=a.value.substr(_r.length)):a.value.substr(0,_s.length)==_s&&(_t21=this._chSwitchVirtualReceiver3,_n5.value=a.value.substr(_s.length));}r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,s,{address:_t21},_n5);}r?e._doRequestMarked(r,!0,{execute:function execute(r,s){r||_this._handleCommandResponse(e,t,a,s),n&&n(r);}}):n&&n(new Error("invalid command"));},T_SWITCH.prototype._handleCommandResponse=function(e,t,a,n){if(!this.useStateBuffer())return;var r=this.getAddress()+":"+this._chSwitchTransmitter+".STATE",s={timestamp:new Date().getTime(),expire:4e3};switch(a.value){case"on":s.value="on";break;case"off":s.value="off";break;case"toggle":var _t22=e._statebuffer[r];_t22&&_t22.value&&(s.value="on"===_t22.value?"off":"on");break;case"onFor":s.expire=1e3*parseFloat(a.ext),s.value="on";}s.value&&(e._statebuffer[r]=s);},T_SWITCH.prototype.getBufferedState=function(e,t,a){if(!this.useStateBuffer())return null;if(!a||!a.value||"switchState"!==a.value)return null;var n=this.getAddress()+":"+this._chSwitchTransmitter+".STATE";if(!e._statebuffer[n])return null;var r=e._statebuffer[n];if(void 0===r.value||null==r.value||!r.timestamp)return delete e._statebuffer[n],null;var s=r.expire;s||(s=1e3);var l=r.timestamp;return new Date().getTime()>l+s?(delete e._statebuffer[n],null):r.value;},T_SWITCH.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;var r={"interface":t["interface"],address:this.getAddress(),channels:t.channels};switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,r,{address:this._chMaintenance},a);break;case"errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,r,{address:this._chMaintenance},a);break;case"switchState":n=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.buildStateScript(e,r,{address:this._chSwitchTransmitter},{value:"switchTState"});break;case"ch"+this._chSwitchVirtualReceiver1+"State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,r,{address:this._chSwitchVirtualReceiver1},{value:"switchState"});break;case"ch"+this._chSwitchVirtualReceiver2+"State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,r,{address:this._chSwitchVirtualReceiver2},{value:"switchState"});break;case"ch"+this._chSwitchVirtualReceiver3+"State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,r,{address:this._chSwitchVirtualReceiver3},{value:"switchState"});break;case"profile":n=xnm.aio.hm.HmIPChannel.SWITCH_WEEK_PROFILE.buildStateScript(e,r,{address:this._chSwitchWeekProfile},{value:"profile"});}return n;},T_SWITCH.prototype.handleStatusResponse=function(e,t,a){if("?"===e)return e;var n="?";switch(t.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);break;case"errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,t);break;case"switchState":if(n=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.handleStatusResponse(e,{value:"switchTState"}),this.useStateBuffer()){var _e10=this.getAddress()+":"+this._chSwitchTransmitter+".STATE";a._statebuffer[_e10]={value:n,timestamp:new Date().getTime(),expire:1e3};}break;case"ch"+this._chSwitchVirtualReceiver1+"State":case"ch"+this._chSwitchVirtualReceiver2+"State":case"ch"+this._chSwitchVirtualReceiver3+"State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.handleStatusResponse(e,{value:"switchState"});break;case"profile":if(n=xnm.aio.hm.HmIPChannel.SWITCH_WEEK_PROFILE.handleStatusResponse(e,{value:"profile"}),"?"!==n){n=n>>3*this._switchIdx&1?"manu":"auto";}}return n;},T_SWITCH.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(parseInt(r)){case this._chMaintenance:s="HmIP-PCBS"==this._type.substr(0,9)?xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,t,a):xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case this._chSwitchTransmitter:(s=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.resolveState(e,t,a))&&(s.key="switchState");break;case this._chSwitchVirtualReceiver1:case this._chSwitchVirtualReceiver2:case this._chSwitchVirtualReceiver3:(s=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.resolveState(e,t,a))&&(s.key="ch"+r+"State");break;case this._chSwitchWeekProfile:if(s=xnm.aio.hm.HmIPChannel.SWITCH_WEEK_PROFILE.resolveState(e,t,a)){var l=s.profile;if("?"!=l){var o=l>>3*this._switchIdx&1;s.profile=o?"manu":"auto";}}break;default:-1!=this._chKeyTransceivers.indexOf(parseInt(r))&&(s=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a),this._chKeyTransceivers.length>1&&s&&("pressShort"==s.key?s.key="btn"+r+"pressShort":"pressLong"==s.key&&(s.key="btn"+r+"pressLong")));}return s;},T_SWITCH.parseJSON=function(e,t,a,n){if(!e||!e.type||!e.channels)return null;var r=new T_SWITCH();r._type=e.type,r._address=e.address,r._chSwitchWeekProfile=0;var s=0;for(var _t23 in e.channels){var _a2=e.channels[_t23],_l=parseInt(_a2.address,10);_t23.startsWith("KEY_TRANSCEIVER")?n&&r._chKeyTransceivers.push(_l):_t23.startsWith("SWITCH_TRANSMITTER")?r._chSwitchTransmitter=_l:_t23.startsWith("SWITCH_VIRTUAL_RECEIVER")?(s++,1===s?r._chSwitchVirtualReceiver1=_l:2===s?r._chSwitchVirtualReceiver2=_l:3===s&&(r._chSwitchVirtualReceiver3=_l)):_t23.startsWith("SWITCH_WEEK_PROFILE")&&(r._chSwitchWeekProfile=_l);}if(t&&a&&r._chSwitchTransmitter){var _e11=[];for(var _n7=0;_n7<a;_n7++){_e11.push(t+4*_n7);}var _n6=_e11.indexOf(r._chSwitchTransmitter);_n6>-1&&(r._switchIdx=_n6);}return r;},T_SWITCH;}(),a=function(){var T_POWERSWITCH=function T_POWERSWITCH(e){t.call(this),this._device=e,this._chEnergieMeterTransmitter=0;};return(T_POWERSWITCH.prototype=new t()).constructor=T_POWERSWITCH,T_POWERSWITCH.prototype.getCommandStatusMap=function(){var e=t.prototype.getCommandStatusMap.call(this);if(!e)return null;var a=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.getCommandStatusMap(this._device);return a&&a.status&&(e.status?e.status=e.status.concat(a.status):e.status=a.status),e;},T_POWERSWITCH.prototype.getIPEvtMap=function(){var e=t.prototype.getIPEvtMap.call(this);if(!e)return null;var a=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.getIPEvtMap(this._device);return a&&a.ipevt&&(e.ipevt?e.ipevt=e.ipevt.concat(a.ipevt):e.ipevt=a.ipevt),e;},T_POWERSWITCH.prototype.buildStateScript=function(e,a,n){if(!n)return null;var r=null;switch(n.value){case"meterVoltage":case"meterEnergyCounter":case"meterFrequency":case"meterPower":case"meterCurrent":r=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.buildStateScript(e,a,{address:this._chEnergieMeterTransmitter},n);break;default:r=t.prototype.buildStateScript.call(this,e,a,n);}return r;},T_POWERSWITCH.prototype.handleStatusResponse=function(e,a,n){if("?"==e)return e;switch(a.value){case"meterVoltage":case"meterEnergyCounter":case"meterFrequency":case"meterPower":case"meterCurrent":return xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.handleStatusResponse(e,a);default:return t.prototype.handleStatusResponse.call(this,e,a,n);}},T_POWERSWITCH.prototype.resolveState=function(e,a,n){if(!a||!a.channel)return null;var r=a.channel.indexOf(":");if(-1==r)return null;var s=a.channel.substr(r+1);return parseInt(s)!==this._chEnergieMeterTransmitter?t.prototype.resolveState.call(this,e,a,n):xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.resolveState(e,a,n);},T_POWERSWITCH.parseJSON=function(e,a){if(!e||!e.type||!e.channels)return null;var n=t.parseJSON(e,null,null,a);if(!n)return null;var r=new T_POWERSWITCH(e);for(var s in r._switchIdx=n._switchIdx,r._type=n._type,r._address=n._address,r._chMaintenance=n._chMaintenance,r._chMaintenanceHsstype=n._chMaintenanceHsstype,r._chKeyTransceivers=n._chKeyTransceivers,r._chSwitchTransmitter=n._chSwitchTransmitter,r._chSwitchVirtualReceiver1=n._chSwitchVirtualReceiver1,r._chSwitchVirtualReceiver2=n._chSwitchVirtualReceiver2,r._chSwitchVirtualReceiver3=n._chSwitchVirtualReceiver3,r._chSwitchWeekProfile=n._chSwitchWeekProfile,e.channels){"ENERGIE_METER_TRANSMITTER"==s.substr(0,25)&&(r._chEnergieMeterTransmitter=parseInt(e.channels[s].address));}return r;},T_POWERSWITCH;}(),n=function(){var T_DIMMER=function T_DIMMER(){this._dimmerIdx=0,this._type=null,this._address=null,this._chMaintenance=0,this._chMaintenanceHsstype=null,this._chDimmerTransmitter=1,this._chDimmerVirtualReceiver1=2,this._chDimmerVirtualReceiver2=3,this._chDimmerVirtualReceiver3=4,this._chDimmerWeekProfile=13;};return T_DIMMER.prototype._getCommonMap=function(){var _addChToMap=function _addChToMap(e,t){e.command.push({type:"enum",name:"ch."+t+" on",ref:{value:"ch"+t+"dimOn"}}),e.command.push({type:"enum",name:"ch."+t+" off",ref:{value:"ch"+t+"dimOff"}}),e.command.push({type:"int",name:"ch."+t+" dim up",ref:{value:"ch"+t+"dimUp",ext:"%d",extMeta:"1-100",unit:"%"}}),e.command.push({type:"int",name:"ch."+t+" dim down",ref:{value:"ch"+t+"dimDown",ext:"%d",extMeta:"1-100",unit:"%"}}),e.command.push({type:"int",name:"ch."+t+" dim to",ref:{value:"ch"+t+"dimTo",ext:"%d",extMeta:"1-100",unit:"%"}}),e.command.push({type:"int",name:"ch."+t+" toggle to",ref:{value:"ch"+t+"toggleTo",ext:"%d",extMeta:"1-100",unit:"%"}}),e.status.push({type:"int",name:"ch."+t+" status",ref:{value:"ch"+t+"Level",extMeta:"0-100",unit:"%"}});},e={command:[{type:"enum",name:"on",ref:{value:"dimOn"}},{type:"enum",name:"off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"int",name:"dimmer status",ref:{value:"dimmerTLevel",extMeta:"0-100",unit:"%"}}]};return _addChToMap(e,this._chDimmerVirtualReceiver1),_addChToMap(e,this._chDimmerVirtualReceiver2),_addChToMap(e,this._chDimmerVirtualReceiver3),e;},T_DIMMER.prototype.getAddress=function(){var e=this._address.indexOf(":");return-1!=e?this._address.substr(0,e):this._address;},T_DIMMER.prototype.getCommandStatusMap=function(){var e=this._getCommonMap();return this._chDimmerWeekProfile&&(e.command.push({type:"enum",name:"set profile",ref:{value:"setProfile",ext:"%e",extMeta:["auto","manu"]}}),e.status.push({type:"enum",name:"profile",ref:{value:"profile",extMeta:["auto","manu"]}})),e;},T_DIMMER.prototype.getIPEvtMap=function(){return{ipevt:this._getCommonMap().status};},T_DIMMER.prototype.useStateBuffer=function(){return"HmIPW-DRD"==this._type.substr(0,9)||"HmIP-DRDI"==this._type.substr(0,9);},T_DIMMER.prototype.executeCommand=function(e,t,a,n){if(!a)return void(n&&n(new Error("command is null")));var r={value:a.value,ext:a.ext},s=this._chDimmerVirtualReceiver1;if("ch"==a.value.substr(0,2)){var l=a.value.indexOf("dim");if(-1==l&&(l=a.value.indexOf("toggle")),-1==l)return void(n&&n(new Error("invalid command")));if(s=parseInt(a.value.substr(2,l)),r.value=a.value.substr(l),s!=this._chDimmerVirtualReceiver1&&s!=this._chDimmerVirtualReceiver2&&s!=this._chDimmerVirtualReceiver3)return void(n&&n(new Error("invalid command")));}var o=null,u={"interface":t["interface"],address:this.getAddress(),channels:t.channels};if("setProfile"==a.value?this._chDimmerWeekProfile&&(r={value:"setProfile",ext:[{value:"mode",ext:a.ext},{value:"channels",ext:1<<3*this._dimmerIdx}]},o=xnm.aio.hm.HmIPChannel.DIMMER_WEEK_PROFILE.buildCommandScript(e,u,{address:this._chDimmerWeekProfile},r)):o=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,u,{address:s},r),o){var i=this;e._doRequestMarked(o,!0,{execute:function execute(r,s){r||i._handleCommandResponse(e,t,a,s),n&&n(r);}});}else n&&n(new Error("invalid command"));},T_DIMMER.prototype._handleCommandResponse=function(e,t,a,n){if(this.useStateBuffer()){var r=null,s=n.indexOf("<v>");if(-1!=s){var l=n.indexOf("</v>");if(-1!=l){var o=n.substring(s+3,l);r=Math.round(100*parseFloat(o));}}var u=this.getAddress()+":"+this._chDimmerTransmitter+".LEVEL";switch(a.value){case"dimOn":delete e._statebuffer[u];break;case"dimOff":e._statebuffer[u]={value:0,timestamp:new Date().getTime(),expire:3e3};break;case"dimUp":case"dimDown":case"toggleTo":null!=r&&(e._statebuffer[u]={value:r,timestamp:new Date().getTime(),expire:3e3});break;case"dimTo":null!=(r=parseInt(a.ext))&&(e._statebuffer[u]={value:r,timestamp:new Date().getTime(),expire:3e3});}}},T_DIMMER.prototype.getBufferedState=function(e,t,a){if(!this.useStateBuffer())return null;if(!a||!a.value||"dimmerTLevel"!=a.value)return null;var n=this.getAddress()+":"+this._chDimmerTransmitter+".LEVEL";if(!e._statebuffer[n])return null;var r=e._statebuffer[n];if(void 0===r.value||null==r.value||!r.timestamp)return delete e._statebuffer[n],null;var s=r.timestamp,l=r.expire;return l||(l=1e3),new Date().getTime()>s+l?(delete e._statebuffer[n],null):r.value;},T_DIMMER.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null,r={"interface":t["interface"],address:this.getAddress(),channels:t.channels};switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,r,{address:this._chMaintenance},a);break;case"dimmerTLevel":n=("HmIPW-DRD"===this._type.substr(0,9)||"HmIP-DRDI"===this._type.substr(0,9))&&"number"==typeof this._chDimmerVirtualReceiver1?xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,r,{address:this._chDimmerVirtualReceiver1},{value:"dimmerLevel"}):xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.buildStateScript(e,r,{address:this._chDimmerTransmitter},{value:"dimmerTLevel"});break;case"ch"+this._chDimmerVirtualReceiver1+"Level":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:this._chDimmerVirtualReceiver1},{value:"dimmerLevel"});break;case"ch"+this._chDimmerVirtualReceiver2+"Level":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:this._chDimmerVirtualReceiver2},{value:"dimmerLevel"});break;case"ch"+this._chDimmerVirtualReceiver3+"Level":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:this._chDimmerVirtualReceiver3},{value:"dimmerLevel"});break;case"profile":n=xnm.aio.hm.HmIPChannel.DIMMER_WEEK_PROFILE.buildStateScript(e,r,{address:this._chDimmerWeekProfile},{value:"profile"});}return n;},T_DIMMER.prototype.handleStatusResponse=function(e,t,a){if("?"==e)return e;var n=null;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"dimmerTLevel":if(n=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.handleStatusResponse(e,{value:"dimmerTLevel"}),this.useStateBuffer()){var r=this.getAddress()+":"+this._chDimmerTransmitter+".LEVEL";a._statebuffer[r]={value:n,timestamp:new Date().getTime(),expire:1e3};}return n;case"ch"+this._chDimmerVirtualReceiver1+"Level":case"ch"+this._chDimmerVirtualReceiver2+"Level":case"ch"+this._chDimmerVirtualReceiver3+"Level":return xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.handleStatusResponse(e,{value:"dimmerLevel"});case"profile":if(n=xnm.aio.hm.HmIPChannel.DIMMER_WEEK_PROFILE.handleStatusResponse(e,{value:"profile"}),"?"!=n)n=n>>3*this._dimmerIdx&1?"manu":"auto";return n;default:return"?";}},T_DIMMER.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(parseInt(r)){case this._chMaintenance:s=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case this._chDimmerTransmitter:s=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.resolveState(e,t,a);break;case this._chDimmerVirtualReceiver1:case this._chDimmerVirtualReceiver2:case this._chDimmerVirtualReceiver3:(s=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.resolveState(e,t,a))&&(s.key="ch"+r+"Level");break;case this._chDimmerWeekProfile:if(s=xnm.aio.hm.HmIPChannel.DIMMER_WEEK_PROFILE.resolveState(e,t,a)){var l=s.profile;if("?"!=l){var o=l>>3*this._dimmerIdx&1;s.profile=o?"manu":"auto";}}}return s;},T_DIMMER.parseJSON=function(e,t,a){if(!e||!e.type||!e.channels)return null;var n=new T_DIMMER();n._type=e.type,n._address=e.address,n._chDimmerWeekProfile=0;var r=0;for(var s in e.channels){"DIMMER_TRANSMITTER"==s.substr(0,18)?n._chDimmerTransmitter=parseInt(e.channels[s].address):"DIMMER_VIRTUAL_RECEIVER"==s.substr(0,23)?1==++r?n._chDimmerVirtualReceiver1=parseInt(e.channels[s].address):2==r?n._chDimmerVirtualReceiver2=parseInt(e.channels[s].address):3==r&&(n._chDimmerVirtualReceiver3=parseInt(e.channels[s].address)):"DIMMER_WEEK_PROFILE"==s.substr(0,19)&&(n._chDimmerWeekProfile=parseInt(e.channels[s].address));}if(t&&a&&n._chSwitchTransmitter){for(var l=[],o=0;o<a;o++){l.push(t+4*o);}var u=l.indexOf(n._chDimmerTransmitter);-1!=u&&(n._dimmerIdx=u);}return n;},T_DIMMER;}(),r=function(){var T_BLIND=function T_BLIND(){this._blindIdx=0,this._type=null,this._address=null,this._chMaintenance=0,this._chBlindTransmitter=1,this._chBlindVirtualReceiver1=2,this._chBlindVirtualReceiver2=3,this._chBlindVirtualReceiver3=4,this._chBlindWeekProfile=17;};return T_BLIND.prototype._getCommonMap=function(){return{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella step up",ref:{value:"lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella step down",ref:{value:"lamellaStepDown",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"int",name:"blind status",ref:{value:"blindTPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"lamella status",ref:{value:"lamellaTPos",extMeta:"0-100",unit:"%"}}]};},T_BLIND.prototype.getAddress=function(){var e=this._address.indexOf(":");return-1!=e?this._address.substr(0,e):this._address;},T_BLIND.prototype.getCommandStatusMap=function(){var e=this._getCommonMap(),t=String(this._type).toUpperCase();if("HMIP-DRBLI4"===t||"HMIPW-DRBL4"===t){var _t24=[this._chBlindVirtualReceiver1,this._chBlindVirtualReceiver2,this._chBlindVirtualReceiver3];e.command=[],_t24.forEach(function(t){var a=[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella step up",ref:{value:"lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella step down",ref:{value:"lamellaStepDown",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100",unit:"%"}}];a.forEach(function(e){e.name="ch. "+t+": "+e.name,e.ref.value_t="ch"+t+e.ref.value,e.ref.value="ch"+t+"_"+e.ref.value;});var n=[{type:"int",name:"blind status",ref:{value:"blindTPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"lamella status",ref:{value:"lamellaTPos",extMeta:"0-100",unit:"%"}}];n.forEach(function(e){e.name="ch. "+t+": "+e.name,e.ref.value_t="ch"+t+e.ref.value,e.ref.value="ch"+t+"_"+e.ref.value;}),e.command=e.command.concat(a),e.status=e.status.concat(n);});}return this._chBlindWeekProfile&&(e.command.push({type:"enum",name:"set profile",ref:{value:"setProfile",ext:"%e",extMeta:["auto","manu"]}}),e.status.push({type:"enum",name:"profile",ref:{value:"profile",extMeta:["auto","manu"]}})),e;},T_BLIND.prototype.getIPEvtMap=function(){return{ipevt:this._getCommonMap().status};},T_BLIND.prototype.executeCommand=function(e,t,a,n){if(!a)return void(n&&n(new Error("command is null")));var r=null;if("setProfile"==a.value){if(this._chBlindWeekProfile){var s={value:"setProfile",ext:[{value:"mode",ext:a.ext},{value:"channels",ext:1<<3*this._blindIdx}]};r=xnm.aio.hm.HmIPChannel.BLIND_WEEK_PROFILE.buildCommandScript(e,{"interface":t["interface"],address:this.getAddress(),channels:t.channels},{address:this._chBlindWeekProfile},s);}}else{var _n8=this._chBlindVirtualReceiver1,_s2=a.value;var _l2=String(this._type).toUpperCase();if(["HMIP-DRBLI4","HMIPW-DRBL4"].includes(_l2)&&a.value.startsWith("ch")){var _e12=a.value.match(/^ch([0-9]+)_/);_e12&&(_n8=_e12[1],_s2=a.value.replace(/^ch([0-9]+)_/,""));}r=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildCommandScript(e,{"interface":t["interface"],address:this.getAddress(),channels:t.channels},{address:_n8},{value:_s2,ext:a.ext});}r?e._doRequestMarked(r,!0,{execute:function execute(e,t){setTimeout(function(){n&&n(e);},200);}}):n&&n(new Error("invalid command"));},T_BLIND.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null,r={"interface":t["interface"],address:this.getAddress(),channels:t.channels};var s=this._chBlindTransmitter,l=a.value;var o=String(this._type).toUpperCase();if(["HMIP-DRBLI4","HMIPW-DRBL4"].includes(o)){var _e13=a.value.match(/^ch([0-9]+)_/);_e13&&(s=_e13[1],l=a.value.replace(/^ch([0-9]+)_/,""));}switch(l){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,r,{address:this._chMaintenance},a);break;case"blindTPos":n=xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.buildStateScript(e,r,{address:s},{value:"blindTPos"});break;case"lamellaTPos":n=xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.buildStateScript(e,r,{address:s},{value:"lamellaTPos"});break;case"profile":n=xnm.aio.hm.HmIPChannel.BLIND_WEEK_PROFILE.buildStateScript(e,r,{address:this._chBlindWeekProfile},{value:"profile"});}return n;},T_BLIND.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;var a=t.value;var n=String(this._type).toUpperCase();if(["HMIP-DRBLI4","HMIPW-DRBL4"].includes(n)){t.value.match(/^ch([0-9]+)_/)&&(a=t.value.replace(/^ch([0-9]+)_/,""));}switch(a){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"blindTPos":return xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.handleStatusResponse(e,{value:"blindTPos"});case"lamellaTPos":return xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.handleStatusResponse(e,{value:"lamellaTPos"});case"profile":var r=xnm.aio.hm.HmIPChannel.BLIND_WEEK_PROFILE.handleStatusResponse(e,{value:"profile"});if("?"!=r)r=r>>3*this._blindIdx&1?"manu":"auto";return r;default:return"?";}},T_BLIND.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(parseInt(r)){case this._chMaintenance:s=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case this._chBlindTransmitter:s=xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.resolveState(e,t,a);break;case this._chBlindWeekProfile:if(s=xnm.aio.hm.HmIPChannel.BLIND_WEEK_PROFILE.resolveState(e,t,a)){var l=s.profile;if("?"!=l){var o=l>>3*this._blindIdx&1;s.profile=o?"manu":"auto";}}}return s;},T_BLIND.parseJSON=function(e,t,a){if(!e||!e.type||!e.channels)return null;var n=new T_BLIND();n._type=e.type,n._address=e.address,n._chBlindWeekProfile=0;var r=0;for(var s in e.channels){"BLIND_TRANSMITTER"==s.substr(0,17)?n._chBlindTransmitter=parseInt(e.channels[s].address):"BLIND_VIRTUAL_RECEIVER"==s.substr(0,22)?1==++r?n._chBlindVirtualReceiver1=parseInt(e.channels[s].address):2==r?n._chBlindVirtualReceiver2=parseInt(e.channels[s].address):3==r&&(n._chBlindVirtualReceiver3=parseInt(e.channels[s].address)):"BLIND_WEEK_PROFILE"==s.substr(0,18)&&(n._chBlindWeekProfile=parseInt(e.channels[s].address));}if(t&&a&&n._chBlindTransmitter){for(var l=[],o=0;o<a;o++){l.push(t+4*o);}var u=l.indexOf(n._chBlindTransmitter);-1!=u&&(n._blindIdx=u);}return n;},T_BLIND;}(),s=function(){var T_INPUT=function T_INPUT(){this._type=null,this._address=null,this._chMaintenance=0,this._chMaintenanceHsstype=null,this._chInputTransmitter=1;};return T_INPUT.prototype.getCommandStatusMap=function(){var e;return(e="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?{status:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]}:{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]}).status.push({type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}),e;},T_INPUT.prototype.getIPEvtMap=function(){var e;return(e="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]}:{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]}).ipevt.push({type:"enum",name:"status",ref:{value:"state",options:["off","on"]}}),e.ipevt.push({type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}}),e.ipevt.push({type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}}),e;},T_INPUT.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:this._chMaintenance},a);break;case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,t,{address:this._chMaintenance},a);break;case"state":n=xnm.aio.hm.HmIPChannel.MULTI_MODE_INPUT_TRANSMITTER.buildStateScript(e,t,{address:this._chInputTransmitter},{value:"state"});}return n;},T_INPUT.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,t);case"state":return xnm.aio.hm.HmIPChannel.MULTI_MODE_INPUT_TRANSMITTER.handleStatusResponse(e,{value:"state"});default:return"?";}},T_INPUT.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(parseInt(r)){case this._chMaintenance:s="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,t,a):xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case this._chInputTransmitter:s=xnm.aio.hm.HmIPChannel.MULTI_MODE_INPUT_TRANSMITTER.resolveState(e,t,a);}return s;},T_INPUT.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var t=new T_INPUT();for(var a in t._type=e.type,t._address=e.address,"HmIP-FCI"!=e.type.substr(0,8)&&"HmIP-MOD-RC"!=e.type.substr(0,11)||(t._chMaintenanceHsstype="MAINTENANCE_BAT_EL"),e.channels){("MULTI_MODE_INPUT_TRANSMITTER"==a.substr(0,28)||"KEY_TRANSCEIVER"==a.substr(0,15)&&"HmIP-MOD-RC"==e.type.substr(0,11))&&(t._chInputTransmitter=parseInt(e.channels[a].address));}return t;},T_INPUT;}(),l=function(){var T_CONTACT=function T_CONTACT(){this._type=null,this._address=null,this._chMaintenance=0,this._chMaintenanceHsstype=null,this._chShutterContact=1,this._chShutterContactHsstype=null;};return T_CONTACT.prototype.getCommandStatusMap=function(){var e;return e="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?{status:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]}:{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]},"SHUTTER_CONTACT_TRANSCEIVER"==this._chShutterContactHsstype?e.status.push({type:"enum",name:"status",ref:{value:"shutterTState",value_t:"contactState",options:["open","closed"]}}):e.status.push({type:"enum",name:"status",ref:{value:"shutterState",value_t:"contactState",options:["open","closed"]}}),e;},T_CONTACT.prototype.getIPEvtMap=function(){var e;return e="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]}:{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]},"SHUTTER_CONTACT_TRANSCEIVER"==this._chShutterContactHsstype?e.ipevt.push({type:"enum",name:"status",ref:{value:"shutterTState",value_t:"contactState",options:["open","closed"]}}):e.ipevt.push({type:"enum",name:"status",ref:{value:"shutterState",value_t:"contactState",options:["open","closed"]}}),e;},T_CONTACT.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:this._chMaintenance},a);break;case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,t,{address:this._chMaintenance},a);break;case"shutterState":n=xnm.aio.hm.HmIPChannel.SHUTTER_CONTACT.buildStateScript(e,t,{address:this._chShutterContact},{value:"shutterState"});break;case"shutterTState":n=xnm.aio.hm.HmIPChannel.SHUTTER_CONTACT_TRANSCEIVER.buildStateScript(e,t,{address:this._chShutterContact},{value:"shutterTState"});}return n;},T_CONTACT.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,t);case"shutterState":return xnm.aio.hm.HmIPChannel.SHUTTER_CONTACT.handleStatusResponse(e,{value:"shutterState"});case"shutterTState":return xnm.aio.hm.HmIPChannel.SHUTTER_CONTACT_TRANSCEIVER.handleStatusResponse(e,{value:"shutterTState"});default:return"?";}},T_CONTACT.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(parseInt(r)){case this._chMaintenance:s="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,t,a):xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case this._chShutterContact:s="SHUTTER_CONTACT_TRANSCEIVER"==this._chShutterContactHsstype?xnm.aio.hm.HmIPChannel.SHUTTER_CONTACT_TRANSCEIVER.resolveState(e,t,a):xnm.aio.hm.HmIPChannel.SHUTTER_CONTACT.resolveState(e,t,a);}return s;},T_CONTACT.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var t=new T_CONTACT();for(var a in t._type=e.type,t._address=e.address,"HmIP-SCI"==e.type.substr(0,8)&&(t._chMaintenanceHsstype="MAINTENANCE_BAT_EL"),e.channels){"SHUTTER_CONTACT_TRANSCEIVER"==a.substr(0,27)?(t._chShutterContact=parseInt(e.channels[a].address),t._chShutterContactHsstype="SHUTTER_CONTACT_TRANSCEIVER"):"SHUTTER_CONTACT"==a.substr(0,15)&&(t._chShutterContact=parseInt(e.channels[a].address),t._chShutterContactHsstype="SHUTTER_CONTACT");}return t;},T_CONTACT;}(),o=function(){var T_HEATER=function T_HEATER(){this._type=null,this._address=null,this._chMaintenance=0,this._chMaintenanceHsstype=null,this._chHeatingClimateControlTransceiver=1;};return T_HEATER.prototype.getCommandStatusMap=function(){var e={command:[{type:"int",name:"set profile",ref:{value:"themoProf",ext:"%d",extMeta:"1-6",scale:"1"}},{type:"enum",name:"boost on",ref:{value:"themoBoostOn"}},{type:"enum",name:"boost off",ref:{value:"themoBoostOff"}},{type:"enum",name:"set auto mode",ref:{value:"themoAutoMode"}},{type:"enum",name:"set manu mode",ref:{value:"themoManuMode"}},{type:"float",name:"set temperature",ref:{value:"themoTemp",ext:"%f",extMeta:"4.5-30.5",scale:"0.5"}},{type:"enum",name:"on",ref:{value:"themoTempOn"}},{type:"enum",name:"off",ref:{value:"themoTempOff"}},{type:"enum",name:"temperature up",ref:{value:"themoTempUp"}},{type:"enum",name:"temperature down",ref:{value:"themoTempDown"}},{type:"enum",name:"set heating mode",ref:{value:"themoModeHeating"}},{type:"enum",name:"set cooling mode",ref:{value:"themoModeCooling"}}],status:[{type:"int",name:"profile",ref:{value:"themoProf"}},{type:"float",name:"actual temperature",ref:{value:"themoActualTemp",extMeta:"-10.0-56.0",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"themoBoostMode",options:["off","on"]}},{type:"enum",name:"frost protection",ref:{value:"themoFrost",options:["off","on"]}},{type:"int",name:"humidity",ref:{value:"themoHum"}},{type:"enum",name:"mode",ref:{value:"themoMode",options:["auto","manu"]}},{type:"float",name:"set temperature",ref:{value:"themoTemp",extMeta:"4.5-30.5",scale:"0.5"}},{type:"enum",name:"heating/cooling state",ref:{value:"themoHeatingCooling",options:["heating","cooling"]}}]};return"HmIP-WTH-B"!=this._type&&(e.command.push({type:"enum",name:"set window open",ref:{value:"themoWinOpen"}}),e.command.push({type:"enum",name:"set window close",ref:{value:"themoWinClose"}}),e.status.push({type:"enum",name:"window state",ref:{value:"themoWinState",options:["open","closed"]}})),"MAINTENANCE_BAT_CL"==this._chMaintenanceHsstype?e.status=e.status.concat([{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]):e.status=e.status.concat([{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]),e;},T_HEATER.prototype.getIPEvtMap=function(){var e={ipevt:[{type:"int",name:"profile",ref:{value:"themoProf"}},{type:"float",name:"actual temperature",ref:{value:"themoActualTemp",extMeta:"-10.0-56.0",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"themoBoostMode",options:["off","on"]}},{type:"enum",name:"frost protection",ref:{value:"themoFrost",options:["off","on"]}},{type:"int",name:"humidity",ref:{value:"themoHum"}},{type:"enum",name:"mode",ref:{value:"themoMode",options:["auto","manu"]}},{type:"float",name:"set temperature",ref:{value:"themoTemp",extMeta:"4.5-30.5",scale:"0.5"}},{type:"enum",name:"window state",ref:{value:"themoWinState",options:["open","closed"]}},{type:"enum",name:"heating/cooling state",ref:{value:"themoHeatingCooling",options:["heating","cooling"]}}]};return"HmIP-WTH-B"!=this._type&&e.ipevt.push({type:"enum",name:"window state",ref:{value:"themoWinState",options:["open","closed"]}}),"MAINTENANCE_BAT_CL"==this._chMaintenanceHsstype?e.ipevt=e.ipevt.concat([{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]):e.ipevt=e.ipevt.concat([{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]),e;},T_HEATER.prototype.executeCommand=function(e,t,a,n){a?(script=xnm.aio.hm.HmIPChannel.HEATING_CLIMATECONTROL_TRANSCEIVER.buildCommandScript(e,{"interface":t["interface"],address:this._address,channels:t.channels},{address:this._chHeatingClimateControlTransceiver},{value:a.value,ext:a.ext}),script?e._doRequestMarked(script,!0,{execute:function execute(e,t){setTimeout(function(){n&&n(e);},200);}}):n&&n(new Error("invalid command"))):n&&n(new Error("command is null"));},T_HEATER.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:this._chMaintenance},a);break;case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,t,{address:this._chMaintenance},a);break;case"themoProf":case"themoActualTemp":case"themoBoostMode":case"themoFrost":case"themoHum":case"themoMode":case"themoTemp":case"themoValveLevel":case"themoWinState":case"themoHeatingCooling":n=xnm.aio.hm.HmIPChannel.HEATING_CLIMATECONTROL_TRANSCEIVER.buildStateScript(e,t,{address:this._chHeatingClimateControlTransceiver},{value:a.value});}return n;},T_HEATER.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,t);case"themoProf":case"themoActualTemp":case"themoBoostMode":case"themoFrost":case"themoHum":case"themoMode":case"themoTemp":case"themoValveLevel":case"themoWinState":case"themoHeatingCooling":return xnm.aio.hm.HmIPChannel.HEATING_CLIMATECONTROL_TRANSCEIVER.handleStatusResponse(e,t);default:return"?";}},T_HEATER.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(parseInt(r)){case this._chMaintenance:s="MAINTENANCE_BAT_CL"==this._chMaintenanceHsstype?xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,t,a):xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case this._chHeatingClimateControlTransceiver:s=xnm.aio.hm.HmIPChannel.HEATING_CLIMATECONTROL_TRANSCEIVER.resolveState(e,t,a);}return s;},T_HEATER.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var t=new T_HEATER();return t._type=e.type,t._address=e.address,t._chMaintenanceHsstype="MAINTENANCE","HmIP-WTH-B"==e.type&&(t._chMaintenanceHsstype="MAINTENANCE_BAT_CL"),t;},T_HEATER;}(),u=function(){var T_MOTION=function T_MOTION(){this._type=null,this._address=null,this._chMaintenance=0,this._chMaintenanceHsstype="MAINTENANCE",this._chMotionDetectorTransceiver=1,this._chKeyTransceivers=[];};return T_MOTION.prototype.getCommandStatusMap=function(){var e={command:[{type:"enum",name:"reset",ref:{value:"motionReset"}},{type:"enum",name:"activate detection",ref:{value:"motionOn"}},{type:"enum",name:"deactivate detection",ref:{value:"motionOff"}},{type:"enum",name:"toggle detection",ref:{value:"motionToggle"}}],status:[{type:"float",name:"illumination",ref:{value:"motionIllu"}},{type:"enum",name:"state",ref:{value:"motionState",options:["on","off"]}},{type:"enum",name:"detection activated",ref:{value:"motionActivate",options:["off","on"]}}]};return"MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?e.status=e.status.concat([{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]):e.status=e.status.concat([{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]),e;},T_MOTION.prototype.getIPEvtMap=function(){var e={ipevt:[{type:"float",name:"illumination",ref:{value:"motionIllu"}},{type:"enum",name:"state",ref:{value:"motionState",options:["on","off"]}},{type:"enum",name:"detection activated",ref:{value:"motionActivate",options:["off","on"]}}]};if("MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?e.ipevt=e.ipevt.concat([{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]):e.ipevt=e.ipevt.concat([{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]),1==this._chKeyTransceivers.length)e.ipevt.push({type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}}),e.ipevt.push({type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}});else for(var t=0;t<this._chKeyTransceivers.length;t++){var a=this._chKeyTransceivers[t];a&&(e.ipevt.push({type:"enum",name:"button "+a+" short press",ref:{value:"btn"+a+"pressShort",options:["true"]}}),e.ipevt.push({type:"enum",name:"button "+a+" long press",ref:{value:"btn"+a+"pressLong",options:["true"]}}));}return e;},T_MOTION.prototype.executeCommand=function(e,t,a,n){a?(script=xnm.aio.hm.HmIPChannel.MOTIONDETECTOR_TRANSCEIVER.buildCommandScript(e,{"interface":t["interface"],address:this._address,channels:t.channels},{address:this._chMotionDetectorTransceiver},{value:a.value,ext:a.ext}),script?e._doRequestMarked(script,!0,{execute:function execute(e,t){setTimeout(function(){n&&n(e);},200);}}):n&&n(new Error("invalid command"))):n&&n(new Error("command is null"));},T_MOTION.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:this._chMaintenance},a);break;case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,t,{address:this._chMaintenance},a);break;default:n=xnm.aio.hm.HmIPChannel.MOTIONDETECTOR_TRANSCEIVER.buildStateScript(e,t,{address:this._chMotionDetectorTransceiver},{value:a.value});}return n;},T_MOTION.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,t);case"motionIllu":case"motionState":case"motionActivate":return xnm.aio.hm.HmIPChannel.MOTIONDETECTOR_TRANSCEIVER.handleStatusResponse(e,t);default:return"?";}},T_MOTION.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(parseInt(r)){case this._chMaintenance:s="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,t,a):xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case this._chMotionDetectorTransceiver:s=xnm.aio.hm.HmIPChannel.MOTIONDETECTOR_TRANSCEIVER.resolveState(e,t,a);break;default:-1!=this._chKeyTransceivers.indexOf(parseInt(r))&&(s=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a),this._chKeyTransceivers.length>1&&s&&("pressShort"==s.key?s.key="btn"+r+"pressShort":"pressLong"==s.key&&(s.key="btn"+r+"pressLong")));}return s;},T_MOTION.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var t=new T_MOTION();return t._type=e.type,t._address=e.address,"HmIP-SMI55"==e.type&&(t._chMaintenanceHsstype="MAINTENANCE_BAT_EL"),-1!=e.type.indexOf("SMI55")&&(t._chKeyTransceivers=[1,2],t._chMotionDetectorTransceiver=3),t;},T_MOTION;}(),i=function(){var T_PRESENCE=function T_PRESENCE(){this._type=null,this._address=null,this._chMaintenance=0,this._chMaintenanceHsstype="MAINTENANCE",this._chPresenceDetectorTransceiver=1;};return T_PRESENCE.prototype.getCommandStatusMap=function(){var e={command:[{type:"enum",name:"reset",ref:{value:"presenceReset"}},{type:"enum",name:"activate detection",ref:{value:"presenceOn"}},{type:"enum",name:"deactivate detection",ref:{value:"presenceOff"}},{type:"enum",name:"toggle detection",ref:{value:"presenceToggle"}}],status:[{type:"float",name:"illumination",ref:{value:"presenceIllu"}},{type:"enum",name:"state",ref:{value:"presenceState",options:["on","off"]}},{type:"enum",name:"detection activated",ref:{value:"presenceActivate",options:["off","on"]}}]};return"MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?e.status=e.status.concat([{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]):e.status=e.status.concat([{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]),e;},T_PRESENCE.prototype.getIPEvtMap=function(){var e={ipevt:[{type:"float",name:"illumination",ref:{value:"presenceIllu"}},{type:"enum",name:"state",ref:{value:"presenceState",options:["on","off"]}},{type:"enum",name:"detection activated",ref:{value:"presenceActivate",options:["off","on"]}}]};return"MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?e.ipevt=e.ipevt.concat([{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]):e.ipevt=e.ipevt.concat([{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]),e;},T_PRESENCE.prototype.executeCommand=function(e,t,a,n){a?(script=xnm.aio.hm.HmIPChannel.PRESENCEDETECTOR_TRANSCEIVER.buildCommandScript(e,{"interface":t["interface"],address:this._address,channels:t.channels},{address:this._chPresenceDetectorTransceiver},{value:a.value,ext:a.ext}),script?e._doRequestMarked(script,!0,{execute:function execute(e,t){setTimeout(function(){n&&n(e);},200);}}):n&&n(new Error("invalid command"))):n&&n(new Error("command is null"));},T_PRESENCE.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:this._chMaintenance},a);break;case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,t,{address:this._chMaintenance},a);break;default:n=xnm.aio.hm.HmIPChannel.PRESENCEDETECTOR_TRANSCEIVER.buildStateScript(e,t,{address:this._chPresenceDetectorTransceiver},a);}return n;},T_PRESENCE.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,t);case"presenceIllu":case"presenceState":case"presenceActivate":return xnm.aio.hm.HmIPChannel.PRESENCEDETECTOR_TRANSCEIVER.handleStatusResponse(e,t);default:return"?";}},T_PRESENCE.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(parseInt(r)){case this._chMaintenance:s="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,t,a):xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case this._chPresenceDetectorTransceiver:s=xnm.aio.hm.HmIPChannel.PRESENCEDETECTOR_TRANSCEIVER.resolveState(e,t,a);}return s;},T_PRESENCE.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var t=new T_PRESENCE();return t._type=e.type,t._address=e.address,"HmIP-SPI"==e.type&&(t._chMaintenanceHsstype="MAINTENANCE_BAT_EL"),t;},T_PRESENCE;}(),c=function(){var T_FLOOR_HEATER=function T_FLOOR_HEATER(){this._type=null,this._address=null,this._chMaintenance=0,this._chMaintenanceHsstype=null,this._chHeatingClimateControlFloorTransceiver=1;};return T_FLOOR_HEATER.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"humidity limiter",ref:{value:"cl_f_humidityLimiter",options:["true","false"]}},{type:"enum",name:"emergency operation",ref:{value:"cl_f_emergencyOP",options:["true","false"]}},{type:"enum",name:"frost protection",ref:{value:"cl_f_frostProtection",options:["true","false"]}},{type:"float",name:"valve level",ref:{value:"cl_valve_level",extMeta:"0-100"}}]};},T_FLOOR_HEATER.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"humidity limiter",ref:{value:"cl_f_humidityLimiter",options:["true","false"]}},{type:"enum",name:"emergency operation",ref:{value:"cl_f_emergencyOP",options:["true","false"]}},{type:"enum",name:"frost protection",ref:{value:"cl_f_frostProtection",options:["true","false"]}},{type:"float",name:"valve level",ref:{value:"cl_valve_level",extMeta:"0-100"}}]};},T_FLOOR_HEATER.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:this._chMaintenance},a);break;case"cl_f_humidityLimiter":case"cl_f_emergencyOP":case"cl_f_frostProtection":case"cl_valve_level":n=xnm.aio.hm.HmIPChannel.CLIMATECONTROL_FLOOR_TRANSCEIVER.buildStateScript(e,t,{address:this._chHeatingClimateControlFloorTransceiver},{value:a.value});}return n;},T_FLOOR_HEATER.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"cl_f_humidityLimiter":case"cl_f_emergencyOP":case"cl_f_frostProtection":case"cl_valve_level":return xnm.aio.hm.HmIPChannel.CLIMATECONTROL_FLOOR_TRANSCEIVER.handleStatusResponse(e,t);default:return"?";}},T_FLOOR_HEATER.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(parseInt(r)){case this._chMaintenance:s=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case this._chHeatingClimateControlFloorTransceiver:s=xnm.aio.hm.HmIPChannel.CLIMATECONTROL_FLOOR_TRANSCEIVER.resolveState(e,t,a);}return s;},T_FLOOR_HEATER.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var t=new T_FLOOR_HEATER();t._type=e.type,t._address=e.address,t._chMaintenanceHsstype="MAINTENANCE";for(var a in e.channels){"CLIMATECONTROL_FLOOR_TRANSCEIVER"==a.substr(0,32)&&(t._chHeatingClimateControlFloorTransceiver=parseInt(e.channels[a].address));}return t;},T_FLOOR_HEATER;}(),m=function(){var T_ANALOG_INPUT=function T_ANALOG_INPUT(){this._type=null,this._address=null,this._chMaintenance=0,this._chMaintenanceHsstype="MAINTENANCE",this._chAnalogInputTransmitter=1;};return T_ANALOG_INPUT.prototype.getCommandStatusMap=function(){return{status:[{type:"float",name:"input voltage",ref:{value:"analogInputVoltage",extMeta:"0.0-12.0"}},{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]};},T_ANALOG_INPUT.prototype.getIPEvtMap=function(){return{ipevt:[{type:"float",name:"input voltage",ref:{value:"analogInputVoltage",extMeta:"0.0-12.0"}},{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]};},T_ANALOG_INPUT.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;if("errorComm"===a.value)n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:this._chMaintenance},a);else n=xnm.aio.hm.HmIPChannel.ANALOG_INPUT_TRANSMITTER.buildStateScript(e,t,{address:this._chAnalogInputTransmitter},a);return n;},T_ANALOG_INPUT.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"analogInputVoltage":return xnm.aio.hm.HmIPChannel.ANALOG_INPUT_TRANSMITTER.handleStatusResponse(e,t);default:return"?";}},T_ANALOG_INPUT.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(parseInt(r)){case this._chMaintenance:s=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case this._chAnalogInputTransmitter:s=xnm.aio.hm.HmIPChannel.ANALOG_INPUT_TRANSMITTER.resolveState(e,t,a);}return s;},T_ANALOG_INPUT.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var t=new T_ANALOG_INPUT();for(var a in t._type=e.type,t._address=e.address,e.channels){"ANALOG_INPUT_TRANSMITTER"==a.substr(0,24)&&(t._chAnalogInputTransmitter=parseInt(e.channels[a].address));}return t;},T_ANALOG_INPUT;}(),HmIP_BSM=function HmIP_BSM(){};HmIP_BSM.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"ch.4 on",ref:{value:"ch4on"}},{type:"enum",name:"ch.4 off",ref:{value:"ch4off"}},{type:"enum",name:"ch.4 toggle",ref:{value:"ch4toggle"}},{type:"enum",name:"ch.5 on",ref:{value:"ch5on"}},{type:"enum",name:"ch.5 off",ref:{value:"ch5off"}},{type:"enum",name:"ch.5 toggle",ref:{value:"ch5toggle"}},{type:"enum",name:"ch.6 on",ref:{value:"ch6on"}},{type:"enum",name:"ch.6 off",ref:{value:"ch6off"}},{type:"enum",name:"ch.6 toggle",ref:{value:"ch6toggle"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}},{type:"enum",name:"ch.4 status",ref:{value:"ch4State",options:["off","on"]}},{type:"enum",name:"ch.5 status",ref:{value:"ch5State",options:["off","on"]}},{type:"enum",name:"ch.6 status",ref:{value:"ch6State",options:["off","on"]}},{type:"float",name:"voltage",ref:{value:"meterVoltage",extMeta:"0.0-409.5",scale:"0.1",unit:"V"}},{type:"float",name:"energy counter",ref:{value:"meterEnergyCounter",extMeta:"0.0-838859.1",scale:"0.1",unit:"Wh"}},{type:"float",name:"frequency",ref:{value:"meterFrequency",extMeta:"29.52-70.47",scale:"0.01",unit:"Hz"}},{type:"float",name:"power",ref:{value:"meterPower",extMeta:"0.0-163830.0",scale:"0.1",unit:"W"}},{type:"float",name:"current",ref:{value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1",unit:"mA"}}]};},HmIP_BSM.prototype.getIPEvtMap=function(){var e=this.getCommandStatusMap().status;return{ipevt:JSON.parse(JSON.stringify(e))};},HmIP_BSM.prototype.executeCommand=function(e,t,a,n){if(a){var r=null;switch(a.value){case"on":case"ch4on":r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:4},{value:"on"});break;case"off":case"ch4off":r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:4},{value:"off"});break;case"toggle":case"ch4toggle":r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:4},{value:"toggle"});break;case"ch5on":r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:5},{value:"on"});break;case"ch5off":r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:5},{value:"off"});break;case"ch5toggle":r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:5},{value:"toggle"});break;case"ch6on":r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:6},{value:"on"});break;case"ch6off":r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:6},{value:"off"});break;case"ch6toggle":r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:6},{value:"toggle"});}r?e._doRequestMarked(r,!0,{execute:function execute(e,t){setTimeout(function(){n&&n(e);},200);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},HmIP_BSM.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"switchState":n=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.buildStateScript(e,t,{address:3},{value:"switchTState"});break;case"ch4State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:4},{value:"switchState"});break;case"ch5State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:5},{value:"switchState"});break;case"ch6State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:6},{value:"switchState"});break;case"meterVoltage":case"meterEnergyCounter":case"meterFrequency":case"meterPower":case"meterCurrent":n=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.buildStateScript(e,t,{address:7},a);}return n;},HmIP_BSM.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"meterVoltage":case"meterEnergyCounter":case"meterFrequency":case"meterPower":case"meterCurrent":return xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.handleStatusResponse(e,t);case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"switchState":return xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.handleStatusResponse(e,{value:"switchTState"});case"ch4State":case"ch5State":case"ch6State":return xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.handleStatusResponse(e,{value:"switchState"});default:return"?";}},HmIP_BSM.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"3":s=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.resolveState(e,t,a);break;case"4":case"5":case"6":(s=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.resolveState(e,t,a)).key="4"==r?"ch4State":"5"==r?"ch5State":"ch6State";break;case"7":s=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.resolveState(e,t,a);}return s;};var HmIP_BDT=function HmIP_BDT(){};HmIP_BDT.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"on",ref:{value:"dimOn"}},{type:"enum",name:"off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.4 on",ref:{value:"ch4dimOn"}},{type:"enum",name:"ch.4 off",ref:{value:"ch4dimOff"}},{type:"int",name:"ch.4 dim up",ref:{value:"ch4dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 dim down",ref:{value:"ch4dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 dim to",ref:{value:"ch4dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 toggle to",ref:{value:"ch4toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.5 on",ref:{value:"ch5dimOn"}},{type:"enum",name:"ch.5 off",ref:{value:"ch5dimOff"}},{type:"int",name:"ch.5 dim up",ref:{value:"ch5dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 dim down",ref:{value:"ch5dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 dim to",ref:{value:"ch5dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 toggle to",ref:{value:"ch5toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.6 on",ref:{value:"ch6dimOn"}},{type:"enum",name:"ch.6 off",ref:{value:"ch6dimOff"}},{type:"int",name:"ch.6 dim up",ref:{value:"ch6dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.6 dim down",ref:{value:"ch6dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.6 dim to",ref:{value:"ch6dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.6 toggle to",ref:{value:"ch6toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"int",name:"dimmer status",ref:{value:"dimmerTLevel",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 status",ref:{value:"ch4Level",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 status",ref:{value:"ch5Level",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.6 status",ref:{value:"ch6Level",extMeta:"0-100",unit:"%"}}]};},HmIP_BDT.prototype.getIPEvtMap=function(){var e=this.getCommandStatusMap().status,t=JSON.parse(JSON.stringify(e));return t.push({type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}),{ipevt:t};},HmIP_BDT.prototype.executeCommand=function(e,t,a,n){if(a){var r=null;switch(a.value){case"dimOn":case"ch4dimOn":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:4},{value:"dimOn"});break;case"dimOff":case"ch4dimOff":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:4},{value:"dimOff"});break;case"dimUp":case"ch4dimUp":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:4},{value:"dimUp",ext:a.ext});break;case"dimDown":case"ch4dimDown":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:4},{value:"dimDown",ext:a.ext});break;case"dimTo":case"ch4dimTo":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:4},{value:"dimTo",ext:a.ext});break;case"toggleTo":case"ch4toggleTo":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:4},{value:"toggleTo",ext:a.ext});break;case"ch5dimOn":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:5},{value:"dimOn"});break;case"ch5dimOff":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:5},{value:"dimOff"});break;case"ch5dimUp":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:5},{value:"dimUp",ext:a.ext});break;case"ch5dimDown":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:5},{value:"dimDown",ext:a.ext});break;case"ch5dimTo":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:5},{value:"dimTo",ext:a.ext});break;case"ch5toggleTo":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:5},{value:"toggleTo",ext:a.ext});break;case"ch6dimOn":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:6},{value:"dimOn"});break;case"ch6dimOff":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:6},{value:"dimOff"});break;case"ch6dimUp":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:6},{value:"dimUp",ext:a.ext});break;case"ch6dimDown":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:6},{value:"dimDown",ext:a.ext});break;case"ch6dimTo":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:6},{value:"dimTo",ext:a.ext});break;case"ch6toggleTo":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:6},{value:"toggleTo",ext:a.ext});}r?e._doRequestMarked(r,!0,{execute:function execute(e,t){setTimeout(function(){n&&n(e);},200);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},HmIP_BDT.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"dimmerTLevel":n=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.buildStateScript(e,t,{address:3},{value:"dimmerTLevel"});break;case"ch4Level":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:4},{value:"dimmerLevel"});break;case"ch5Level":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:5},{value:"dimmerLevel"});break;case"ch6Level":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:6},{value:"dimmerLevel"});}return n;},HmIP_BDT.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"dimmerTLevel":return xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.handleStatusResponse(e,{value:"dimmerTLevel"});case"ch4Level":case"ch5Level":case"ch6Level":return xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.handleStatusResponse(e,{value:"dimmerLevel"});default:return"?";}},HmIP_BDT.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"1":case"2":"pressShort"===(s=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a)).key?s.key="1"==r?"btn1pressShort":"btn2pressShort":"pressLong"===s.key&&(s.key="1"==r?"btn1pressLong":"btn2pressLong");break;case"3":s=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.resolveState(e,t,a);break;case"4":case"5":case"6":(s=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.resolveState(e,t,a)).key="4"==r?"ch4Level":"5"==r?"ch5Level":"ch6Level";}return s;};var HmIP_WRC2=function HmIP_WRC2(){};HmIP_WRC2.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]};},HmIP_WRC2.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}]};},HmIP_WRC2.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,t,{address:0},a);}return n;},HmIP_WRC2.prototype.handleStatusResponse=function(e,t){if("?"===e)return e;switch(t.value){case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,t);}return"?";},HmIP_WRC2.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"0":s=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,t,a);break;case"1":case"2":"pressShort"===(s=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a)).key?s.key="1"==r?"btn1pressShort":"btn2pressShort":"pressLong"===s.key&&(s.key="1"==r?"btn1pressLong":"btn2pressLong");}return s;};var HmIP_ASIR=function HmIP_ASIR(){};HmIP_ASIR.prototype.getCommandStatusMap=function(){return{command:[{type:"multi",name:"trigger alarm",ref:{value:"alarmTrigger",ext:"%multi",extMeta:[{type:"enum",name:"set audio",ref:{value:"alarmAudio",ext:"%e",extMeta:["DISABLE_ACOUSTIC_SIGNAL","FREQUENCY_RISING","FREQUENCY_FALLING","FREQUENCY_RISING_AND_FALLING","FREQUENCY_ALTERNATING_LOW_HIGH","FREQUENCY_ALTERNATING_LOW_MID_HIGH","FREQUENCY_HIGHON_OFF","FREQUENCY_HIGHON_LONGOFF","FREQUENCY_LOWON_OFF_HIGHON_OFF","FREQUENCY_LOWON_LONGOFF_HIGHON_LONGOFF","LOW_BATTERY","DISARMED","INTERNALLY_ARMED","EXTERNALLY_ARMED","DELAYED_INTERNALLY_ARMED","DELAYED_EXTERNALLY_ARMED","EVENT","ERROR"]}},{type:"enum",name:"set visual",ref:{value:"alarmVisual",ext:"%e",extMeta:["DISABLE_OPTICAL_SIGNAL","BLINKING_ALTERNATELY_REPEATING","BLINKING_BOTH_REPEATING","DOUBLE_FLASHING_REPEATING","FLASHING_BOTH_REPEATING","CONFIRMATION_SIGNAL_0","CONFIRMATION_SIGNAL_1","CONFIRMATION_SIGNAL_2"]}},{type:"int",name:"set duration",ref:{value:"alarmDur",ext:"%d",extMeta:"0-16343"}},{type:"enum",name:"set duration unit",ref:{value:"alarmDurUnit",ext:"%e",extMeta:["S","M","H","D"]}}]}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"enum",name:"sabotage",ref:{value:"errorSabo",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"alarm state",ref:{value:"alarmState",options:["on","off"]}},{type:"enum",name:"alarm audio state",ref:{value:"alarmAudioState",options:["on","off"]}},{type:"enum",name:"alarm visual state",ref:{value:"alarmVisualState",options:["on","off"]}}]};},HmIP_ASIR.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"enum",name:"sabotage",ref:{value:"errorSabo",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"alarm state",ref:{value:"alarmState",options:["on","off"]}},{type:"enum",name:"alarm audio state",ref:{value:"alarmAudioState",options:["on","off"]}},{type:"enum",name:"alarm visual state",ref:{value:"alarmVisualState",options:["on","off"]}}]};},HmIP_ASIR.prototype.executeCommand=function(e,t,a,n){if(a){var r=null;if("alarmTrigger"===a.value)r=xnm.aio.hm.HmIPChannel.ALARM_SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:3},a);r?e._doRequestMarked(r,!0,{execute:function execute(e,t){setTimeout(function(){n&&n(e);},200);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},HmIP_ASIR.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":case"errorBat":case"errorSabo":case"errorBatVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"alarmState":case"alarmAudioState":case"alarmVisualState":n=xnm.aio.hm.HmIPChannel.ALARM_SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:3},a);}return n;},HmIP_ASIR.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":case"errorBat":case"errorSabo":case"errorBatVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"alarmState":case"alarmAudioState":case"alarmVisualState":return xnm.aio.hm.HmIPChannel.ALARM_SWITCH_VIRTUAL_RECEIVER.handleStatusResponse(e,t);default:return"?";}},HmIP_ASIR.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=null;switch(t.channel.substr(n+1)){case"0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case"3":r=xnm.aio.hm.HmIPChannel.ALARM_SWITCH_VIRTUAL_RECEIVER.resolveState(e,t,a);}return r;};var HmIP_SWSD=function HmIP_SWSD(){};HmIP_SWSD.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"intrusion alarm off",ref:{value:"intrusionAlarmOff"}},{type:"enum",name:"intrusion alarm on",ref:{value:"intrusionAlarmOn"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"enum",name:"alarm state",ref:{value:"smokeState",options:["on","off"]}},{type:"enum",name:"alarm detail",ref:{value:"smokeAlarmDetail",options:["off","primary_alarm","intrusion_alarm","secondary_alarm"]}}]};},HmIP_SWSD.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorLowbat",options:["false","true"]}},{type:"enum",name:"alarm state",ref:{value:"smokeState",options:["on","off"]}},{type:"enum",name:"alarm detail",ref:{value:"smokeAlarmDetail",options:["off","primary_alarm","intrusion_alarm","secondary_alarm"]}}]};},HmIP_SWSD.prototype.executeCommand=function(e,t,a,n){if(a){var r=null;switch(a.value){case"intrusionAlarmOff":case"intrusionAlarmOn":r=xnm.aio.hm.HmIPChannel.SMOKE_DETECTOR.buildCommandScript(e,t,{address:1},a);}r?e._doRequestMarked(r,!0,{execute:function execute(e){n&&n(e);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},HmIP_SWSD.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":case"errorBat":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"smokeState":n=xnm.aio.hm.HmIPChannel.SMOKE_DETECTOR.buildStateScript(e,t,{address:1},a);}return n;},HmIP_SWSD.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":case"errorBat":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"smokeState":case"smokeAlarmDetail":return xnm.aio.hm.HmIPChannel.SMOKE_DETECTOR.handleStatusResponse(e,t);default:return"?";}},HmIP_SWSD.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=null;switch(t.channel.substr(n+1)){case"0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case"1":r=xnm.aio.hm.HmIPChannel.SMOKE_DETECTOR.resolveState(e,t,a);}return r;};var HmIP_SRH=function HmIP_SRH(){};HmIP_SRH.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"enum",name:"sabotage",ref:{value:"errorSabo",options:["false","true"]}},{type:"enum",name:"window state",ref:{value:"handleState",options:["closed","tilted","open"]}}]};},HmIP_SRH.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorLowbat",options:["false","true"]}},{type:"enum",name:"sabotage",ref:{value:"errorSabo",options:["false","true"]}},{type:"enum",name:"window state",ref:{value:"handleState",options:["closed","tilted","open"]}}]};},HmIP_SRH.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":case"errorBat":case"errorSabo":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"handleState":n=xnm.aio.hm.HmIPChannel.ROTARY_HANDLE_TRANSCEIVER.buildStateScript(e,t,{address:1},a);}return n;},HmIP_SRH.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":case"errorBat":case"errorSabo":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"handleState":return xnm.aio.hm.HmIPChannel.ROTARY_HANDLE_TRANSCEIVER.handleStatusResponse(e,t);default:return"?";}},HmIP_SRH.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=null;switch(t.channel.substr(n+1)){case"0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case"1":r=xnm.aio.hm.HmIPChannel.ROTARY_HANDLE_TRANSCEIVER.resolveState(e,t,a);}return r;};var HmIP_FSI16=function HmIP_FSI16(){};HmIP_FSI16.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"ch.3 on",ref:{value:"ch3on"}},{type:"float",name:"ch.3 on for",ref:{value:"ch3onFor",ext:"%f",unit:"s"}},{type:"enum",name:"ch.3 off",ref:{value:"ch3off"}},{type:"enum",name:"ch.3 toggle",ref:{value:"ch3toggle"}},{type:"enum",name:"ch.4 on",ref:{value:"ch4on"}},{type:"float",name:"ch.4 on for",ref:{value:"ch4onFor",ext:"%f",unit:"s"}},{type:"enum",name:"ch.4 off",ref:{value:"ch4off"}},{type:"enum",name:"ch.4 toggle",ref:{value:"ch4toggle"}},{type:"enum",name:"ch.5 on",ref:{value:"ch5on"}},{type:"float",name:"ch.5 on for",ref:{value:"ch5onFor",ext:"%f",unit:"s"}},{type:"enum",name:"ch.5 off",ref:{value:"ch5off"}},{type:"enum",name:"ch.5 toggle",ref:{value:"ch5toggle"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}},{type:"enum",name:"ch.3 status",ref:{value:"ch3State",options:["off","on"]}},{type:"enum",name:"ch.4 status",ref:{value:"ch4State",options:["off","on"]}},{type:"enum",name:"ch.5 status",ref:{value:"ch5State",options:["off","on"]}}]};},HmIP_FSI16.prototype.getIPEvtMap=function(){var e=this.getCommandStatusMap().status,t=JSON.parse(JSON.stringify(e));return t.push({type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}}),{ipevt:t};},HmIP_FSI16.prototype.executeCommand=function(e,t,a,n){if(!a)return void(n&&n(new Error("command is null")));var r=String(a.value);var s=null,l=3;switch(r.startsWith("ch4")?l=4:r.startsWith("ch5")&&(l=5),a.value){case"on":case"ch3on":case"ch4on":case"ch5on":s=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:l},{value:"on"});break;case"onFor":case"ch3onFor":case"ch4onFor":case"ch5onFor":s=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:l},{value:"onFor",ext:a.ext});break;case"off":case"ch3off":case"ch4off":case"ch5off":s=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:l},{value:"off"});break;case"toggle":case"ch3toggle":case"ch4toggle":case"ch5toggle":s=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:l},{value:"toggle"});}s?e._doRequestMarked(s,!0,{execute:function execute(e,t){setTimeout(function(){n&&n(e);},200);}}):n&&n(new Error("invalid command"));},HmIP_FSI16.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"switchState":n=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.buildStateScript(e,t,{address:2},{value:"switchTState"});break;case"ch3State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:3},{value:"switchState"});break;case"ch4State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:4},{value:"switchState"});break;case"ch5State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:5},{value:"switchState"});}return n;},HmIP_FSI16.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"switchState":return xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.handleStatusResponse(e,{value:"switchTState"});case"ch3State":case"ch4State":case"ch5State":return xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.handleStatusResponse(e,{value:"switchState"});default:return"?";}},HmIP_FSI16.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"1":s=xnm.aio.hm.HmIPChannel.MULTI_MODE_INPUT_TRANSMITTER.resolveState(e,t,a);break;case"2":s=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.resolveState(e,t,a);break;case"3":case"4":case"5":(s=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.resolveState(e,t,a)).key="3"==r?"ch3State":"4"==r?"ch4State":"ch5State";}return s;};var HmIP_FSM=function HmIP_FSM(){};HmIP_FSM.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"ch.2 on",ref:{value:"ch2on"}},{type:"enum",name:"ch.2 off",ref:{value:"ch2off"}},{type:"enum",name:"ch.2 toggle",ref:{value:"ch2toggle"}},{type:"enum",name:"ch.3 on",ref:{value:"ch3on"}},{type:"enum",name:"ch.3 off",ref:{value:"ch3off"}},{type:"enum",name:"ch.3 toggle",ref:{value:"ch3toggle"}},{type:"enum",name:"ch.4 on",ref:{value:"ch4on"}},{type:"enum",name:"ch.4 off",ref:{value:"ch4off"}},{type:"enum",name:"ch.4 toggle",ref:{value:"ch4toggle"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}},{type:"enum",name:"ch.2 status",ref:{value:"ch2State",options:["off","on"]}},{type:"enum",name:"ch.3 status",ref:{value:"ch3State",options:["off","on"]}},{type:"enum",name:"ch.4 status",ref:{value:"ch4State",options:["off","on"]}},{type:"float",name:"voltage",ref:{value:"meterVoltage",extMeta:"0.0-409.5",scale:"0.1",unit:"V"}},{type:"float",name:"energy counter",ref:{value:"meterEnergyCounter",extMeta:"0.0-838859.1",scale:"0.1",unit:"Wh"}},{type:"float",name:"frequency",ref:{value:"meterFrequency",extMeta:"29.52-70.47",scale:"0.01",unit:"Hz"}},{type:"float",name:"power",ref:{value:"meterPower",extMeta:"0.0-163830.0",scale:"0.1",unit:"W"}},{type:"float",name:"current",ref:{value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1",unit:"mA"}}]};},HmIP_FSM.prototype.getIPEvtMap=function(){var e=this.getCommandStatusMap().status;return{ipevt:JSON.parse(JSON.stringify(e))};},HmIP_FSM.prototype.executeCommand=function(e,t,a,n){if(a){var r=null,s=null;switch(a.value){case"on":case"ch2on":case"ch3on":case"ch4on":switch(a.value){case"on":case"ch2on":s=2;break;case"ch3on":s=3;break;case"ch4on":s=4;}r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:s},{value:"on"});break;case"off":case"ch2off":case"ch3off":case"ch4off":switch(a.value){case"off":case"ch2off":s=2;break;case"ch3off":s=3;break;case"ch4off":s=4;}r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:s},{value:"off"});break;case"toggle":case"ch2toggle":case"ch3toggle":case"ch4toggle":switch(a.value){case"toggle":case"ch2toggle":s=2;break;case"ch3toggle":s=3;break;case"ch4toggle":s=4;}r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:s},{value:"toggle"});}r?e._doRequestMarked(r,!0,{execute:function execute(e,t){setTimeout(function(){n&&n(e);},200);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},HmIP_FSM.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"switchState":n=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.buildStateScript(e,t,{address:1},{value:"switchTState"});break;case"ch2State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:2},{value:"switchState"});break;case"ch3State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:3},{value:"switchState"});break;case"ch4State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:4},{value:"switchState"});break;case"meterVoltage":case"meterEnergyCounter":case"meterFrequency":case"meterPower":case"meterCurrent":n=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.buildStateScript(e,t,{address:5},a);}return n;},HmIP_FSM.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"meterVoltage":case"meterEnergyCounter":case"meterFrequency":case"meterPower":case"meterCurrent":return xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.handleStatusResponse(e,t);case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"switchState":return xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.handleStatusResponse(e,{value:"switchTState"});case"ch2State":case"ch3State":case"ch4State":return xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.handleStatusResponse(e,{value:"switchState"});default:return"?";}},HmIP_FSM.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"1":s=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.resolveState(e,t,a);break;case"2":case"3":case"4":(s=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.resolveState(e,t,a)).key="2"==r?"ch2State":"3"==r?"ch3State":"ch4State";break;case"5":s=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.resolveState(e,t,a);}return s;};var HmIP_PDT=function HmIP_PDT(){};HmIP_PDT.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"on",ref:{value:"dimOn"}},{type:"enum",name:"off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.3 on",ref:{value:"ch3dimOn"}},{type:"enum",name:"ch.3 off",ref:{value:"ch3dimOff"}},{type:"int",name:"ch.3 dim up",ref:{value:"ch3dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.3 dim down",ref:{value:"ch3dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.3 dim to",ref:{value:"ch3dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.3 toggle to",ref:{value:"ch3toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.4 on",ref:{value:"ch4dimOn"}},{type:"enum",name:"ch.4 off",ref:{value:"ch4dimOff"}},{type:"int",name:"ch.4 dim up",ref:{value:"ch4dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 dim down",ref:{value:"ch4dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 dim to",ref:{value:"ch4dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 toggle to",ref:{value:"ch4toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.5 on",ref:{value:"ch5dimOn"}},{type:"enum",name:"ch.5 off",ref:{value:"ch5dimOff"}},{type:"int",name:"ch.5 dim up",ref:{value:"ch5dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 dim down",ref:{value:"ch5dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 dim to",ref:{value:"ch5dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 toggle to",ref:{value:"ch5toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"int",name:"dimmer status",ref:{value:"dimmerTLevel",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.3 status",ref:{value:"ch3Level",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 status",ref:{value:"ch4Level",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 status",ref:{value:"ch5Level",extMeta:"0-100",unit:"%"}}]};},HmIP_PDT.prototype.getIPEvtMap=function(){var e=this.getCommandStatusMap().status;return{ipevt:JSON.parse(JSON.stringify(e))};},HmIP_PDT.prototype.executeCommand=function(e,t,a,n){if(a){var r=null,s=null;switch(a.value){case"dimOn":case"ch3dimOn":case"ch4dimOn":case"ch5dimOn":switch(a.value){case"dimOn":case"ch3dimOn":s=3;break;case"ch4dimOn":s=4;break;case"ch5dimOn":s=5;}r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:s},{value:"dimOn"});break;case"dimOff":case"ch3dimOff":case"ch4dimOff":case"ch5dimOff":switch(a.value){case"dimOff":case"ch3dimOff":s=3;break;case"ch4dimOff":s=4;break;case"ch5dimOff":s=5;}r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:s},{value:"dimOff"});break;case"dimUp":case"ch3dimUp":case"ch4dimUp":case"ch5dimUp":switch(a.value){case"dimUp":case"ch3dimUp":s=3;break;case"ch4dimUp":s=4;break;case"ch5dimUp":s=5;}r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:s},{value:"dimUp",ext:a.ext});break;case"dimDown":case"ch3dimDown":case"ch4dimDown":case"ch5dimDown":switch(a.value){case"dimDown":case"ch3dimDown":s=3;break;case"ch4dimDown":s=4;break;case"ch5dimDown":s=5;}r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:s},{value:"dimDown",ext:a.ext});break;case"dimTo":case"ch3dimTo":case"ch4dimTo":case"ch5dimTo":switch(a.value){case"dimTo":case"ch3dimTo":s=3;break;case"ch4dimTo":s=4;break;case"ch5dimTo":s=5;}r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:s},{value:"dimTo",ext:a.ext});break;case"toggleTo":case"ch3toggleTo":case"ch4toggleTo":case"ch5toggleTo":switch(a.value){case"toggleTo":case"ch3toggleTo":s=3;break;case"ch4toggleTo":s=4;break;case"ch5toggleTo":s=5;}r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:s},{value:"toggleTo",ext:a.ext});}r?e._doRequestMarked(r,!0,{execute:function execute(e,t){setTimeout(function(){n&&n(e);},200);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},HmIP_PDT.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"dimmerTLevel":n=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.buildStateScript(e,t,{address:2},{value:"dimmerTLevel"});break;case"ch3Level":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:3},{value:"dimmerLevel"});break;case"ch4Level":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:4},{value:"dimmerLevel"});break;case"ch5Level":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:5},{value:"dimmerLevel"});}return n;},HmIP_PDT.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"dimmerTLevel":return xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.handleStatusResponse(e,{value:"dimmerTLevel"});case"ch3Level":case"ch4Level":case"ch5Level":return xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.handleStatusResponse(e,{value:"dimmerLevel"});default:return"?";}},HmIP_PDT.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"2":s=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.resolveState(e,t,a);break;case"3":case"4":case"5":(s=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.resolveState(e,t,a)).key="3"==r?"ch3Level":"4"==r?"ch4Level":"ch5Level";}return s;};var HmIP_BROLL=function HmIP_BROLL(){};HmIP_BROLL.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.4 stop",ref:{value:"ch4stop"}},{type:"enum",name:"ch.4 move up",ref:{value:"ch4moveUp"}},{type:"enum",name:"ch.4 move down",ref:{value:"ch4moveDown"}},{type:"int",name:"ch.4 step up",ref:{value:"ch4stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 step down",ref:{value:"ch4stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 move to",ref:{value:"ch4moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.5 stop",ref:{value:"ch5stop"}},{type:"enum",name:"ch.5 move up",ref:{value:"ch5moveUp"}},{type:"enum",name:"ch.5 move down",ref:{value:"ch5moveDown"}},{type:"int",name:"ch.5 step up",ref:{value:"ch5stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 step down",ref:{value:"ch5stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 move to",ref:{value:"ch5moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.6 stop",ref:{value:"ch6stop"}},{type:"enum",name:"ch.6 move up",ref:{value:"ch6moveUp"}},{type:"enum",name:"ch.6 move down",ref:{value:"ch6moveDown"}},{type:"int",name:"ch.6 step up",ref:{value:"ch6stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.6 step down",ref:{value:"ch6stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.6 move to",ref:{value:"ch6moveTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"int",name:"blind status",ref:{value:"blindTLevel",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 status",ref:{value:"ch4Level",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 status",ref:{value:"ch5Level",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.6 status",ref:{value:"ch6Level",extMeta:"0-100",unit:"%"}}]};},HmIP_BROLL.prototype.getIPEvtMap=function(){var e=this.getCommandStatusMap().status,t=JSON.parse(JSON.stringify(e));return{ipevt:t=t.concat([{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}])};},HmIP_BROLL.prototype.executeCommand=function(e,t,a,n){if(a){var r,s=4,l=null;-1!=a.value.indexOf("ch5")?s=5:-1!=a.value.indexOf("ch6")&&(s=6),-1!=a.value.indexOf("stop")?l="stop":-1!=a.value.indexOf("moveUp")?l="moveUp":-1!=a.value.indexOf("moveDown")?l="moveDown":-1!=a.value.indexOf("stepUp")?l="stepUp":-1!=a.value.indexOf("stepDown")?l="stepDown":-1!=a.value.indexOf("moveTo")&&(l="moveTo"),l?(r=xnm.aio.hm.HmIPChannel.SHUTTER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:s},{value:l,ext:a.ext}))?e._doRequestMarked(r,!0,{execute:function execute(e,t){setTimeout(function(){n&&n(e);},200);}}):n&&n(new Error("invalid command")):n&&n(new Error("unknown command"));}else n&&n(new Error("command is null"));},HmIP_BROLL.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"blindTLevel":n=xnm.aio.hm.HmIPChannel.SHUTTER_TRANSMITTER.buildStateScript(e,t,{address:3},{value:"blindTLevel"});break;case"ch4Level":n=xnm.aio.hm.HmIPChannel.SHUTTER_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:4},{value:"blindLevel"});break;case"ch5Level":n=xnm.aio.hm.HmIPChannel.SHUTTER_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:5},{value:"blindLevel"});break;case"ch6Level":n=xnm.aio.hm.HmIPChannel.SHUTTER_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:6},{value:"blindLevel"});}return n;},HmIP_BROLL.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"blindTLevel":return xnm.aio.hm.HmIPChannel.SHUTTER_TRANSMITTER.handleStatusResponse(e,{value:"blindTLevel"});case"ch4Level":case"ch5Level":case"ch6Level":return xnm.aio.hm.HmIPChannel.SHUTTER_VIRTUAL_RECEIVER.handleStatusResponse(e,{value:"blindLevel"});default:return"?";}},HmIP_BROLL.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"1":case"2":(s=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a))&&("pressShort"==s.key?s.key="btn"+r+"pressShort":"pressLong"==s.key&&(s.key="btn"+r+"pressLong"));break;case"3":s=xnm.aio.hm.HmIPChannel.SHUTTER_TRANSMITTER.resolveState(e,t,a);break;case"4":case"5":case"6":(s=xnm.aio.hm.HmIPChannel.SHUTTER_VIRTUAL_RECEIVER.resolveState(e,t,a))&&(s.key="4"==r?"ch4Level":"5"==r?"ch5Level":"ch6Level");}return s;};var HmIP_FBL=function HmIP_FBL(){};HmIP_FBL.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella step up",ref:{value:"lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella step down",ref:{value:"lamellaStepDown",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.4 stop",ref:{value:"ch4stop"}},{type:"enum",name:"ch.4 move up",ref:{value:"ch4moveUp"}},{type:"enum",name:"ch.4 move down",ref:{value:"ch4moveDown"}},{type:"int",name:"ch.4 step up",ref:{value:"ch4stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 step down",ref:{value:"ch4stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 move to",ref:{value:"ch4moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.4 lamella up",ref:{value:"ch4lamellaUp"}},{type:"enum",name:"ch.4 lamella down",ref:{value:"ch4lamellaDown"}},{type:"int",name:"ch.4 lamella step up",ref:{value:"ch4lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"ch.4 lamella step down",ref:{value:"ch4lamellaStepDown",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"ch.4 lamella to",ref:{value:"ch4lamellaTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.5 stop",ref:{value:"ch5stop"}},{type:"enum",name:"ch.5 move up",ref:{value:"ch5moveUp"}},{type:"enum",name:"ch.5 move down",ref:{value:"ch5moveDown"}},{type:"int",name:"ch.5 step up",ref:{value:"ch5stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 step down",ref:{value:"ch5stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 move to",ref:{value:"ch5moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.5 lamella up",ref:{value:"ch5lamellaUp"}},{type:"enum",name:"ch.5 lamella down",ref:{value:"ch5lamellaDown"}},{type:"int",name:"ch.5 lamella step up",ref:{value:"ch5lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"ch.5 lamella step down",ref:{value:"ch5lamellaStepDown",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"ch.5 lamella to",ref:{value:"ch5lamellaTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.6 stop",ref:{value:"ch6stop"}},{type:"enum",name:"ch.6 move up",ref:{value:"ch6moveUp"}},{type:"enum",name:"ch.6 move down",ref:{value:"ch6moveDown"}},{type:"int",name:"ch.6 step up",ref:{value:"ch6stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.6 step down",ref:{value:"ch6stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.6 move to",ref:{value:"ch6moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.6 lamella up",ref:{value:"ch6lamellaUp"}},{type:"enum",name:"ch.6 lamella down",ref:{value:"ch6lamellaDown"}},{type:"int",name:"ch.6 lamella step up",ref:{value:"ch6lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"ch.6 lamella step down",ref:{value:"ch6lamellaStepDown",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"ch.6 lamella to",ref:{value:"ch6lamellaTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"int",name:"blind status",ref:{value:"blindTPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"lamella status",ref:{value:"lamellaTPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 blind status",ref:{value:"ch4blindPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 lamella status",ref:{value:"ch4lamellaPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 blind status",ref:{value:"ch5blindPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 lamella status",ref:{value:"ch5lamellaPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.6 blind status",ref:{value:"ch6blindPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.6 lamella status",ref:{value:"ch6lamellaPos",extMeta:"0-100",unit:"%"}}]};},HmIP_FBL.prototype.getIPEvtMap=function(){var e=this.getCommandStatusMap().status,t=JSON.parse(JSON.stringify(e));return{ipevt:t=t.concat([{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}])};},HmIP_FBL.prototype.executeCommand=function(e,t,a,n){if(a){var r=4,s=null;if(-1!=a.value.indexOf("ch5")?r=5:-1!=a.value.indexOf("ch6")&&(r=6),-1!=a.value.indexOf("stop")?s="stop":-1!=a.value.indexOf("moveUp")?s="moveUp":-1!=a.value.indexOf("moveDown")?s="moveDown":-1!=a.value.indexOf("stepUp")?s="stepUp":-1!=a.value.indexOf("stepDown")?s="stepDown":-1!=a.value.indexOf("moveTo")?s="moveTo":-1!=a.value.indexOf("lamellaUp")?s="lamellaUp":-1!=a.value.indexOf("lamellaDown")?s="lamellaDown":-1!=a.value.indexOf("lamellaStepUp")?s="lamellaStepUp":-1!=a.value.indexOf("lamellaStepDown")?s="lamellaStepDown":-1!=a.value.indexOf("lamellaTo")&&(s="lamellaTo"),s){var l=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:r,stateAddress:3},{value:s,ext:a.ext});l?e._doRequestMarked(l,!0,{execute:function execute(e,t){setTimeout(function(){n&&n(e);},200);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("unknown command"));}else n&&n(new Error("command is null"));},HmIP_FBL.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"blindTPos":n=xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.buildStateScript(e,t,{address:3},{value:"blindTPos"});break;case"lamellaTPos":n=xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.buildStateScript(e,t,{address:3},{value:"lamellaTPos"});break;case"ch4blindPos":n=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:4},{value:"blindPos"});break;case"ch4lamellaPos":n=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:4},{value:"lamellaPos"});break;case"ch5blindPos":n=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:5},{value:"blindPos"});break;case"ch5lamellaPos":n=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:5},{value:"lamellaPos"});break;case"ch6blindPos":n=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:6},{value:"blindPos"});break;case"ch6lamellaPos":n=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildStateScript(e,t,{address:6},{value:"lamellaPos"});}return n;},HmIP_FBL.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"blindTPos":return xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.handleStatusResponse(e,{value:"blindTPos"});case"lamellaTPos":return xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.handleStatusResponse(e,{value:"lamellaTPos"});case"ch4blindPos":case"ch5blindPos":case"ch6blindPos":return xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.handleStatusResponse(e,{value:"blindPos"});case"ch4lamellaPos":case"ch5lamellaPos":case"ch6lamellaPos":return xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.handleStatusResponse(e,{value:"lamellaPos"});default:return"?";}},HmIP_FBL.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"1":case"2":(s=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a))&&("pressShort"==s.key?s.key="btn"+r+"pressShort":"pressLong"==s.key&&(s.key="btn"+r+"pressLong"));break;case"3":s=xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.resolveState(e,t,a);break;case"4":case"5":case"6":(s=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.resolveState(e,t,a))&&("LEVEL"==t.datapoint?s.key="4"==r?"ch4blindPos":"5"==r?"ch5blindPos":"ch6blindPos":"LEVEL_2"==t.datapoint&&(s.key="4"==r?"ch4lamellaPos":"5"==r?"ch5lamellaPos":"ch6lamellaPos"));}return s;};var HmIP_WRC6=function HmIP_WRC6(){};HmIP_WRC6.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}}]};},HmIP_WRC6.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorLowbat",options:["false","true"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}},{type:"enum",name:"button 3 short press",ref:{value:"btn3pressShort",options:["true"]}},{type:"enum",name:"button 3 long press",ref:{value:"btn3pressLong",options:["true"]}},{type:"enum",name:"button 4 short press",ref:{value:"btn4pressShort",options:["true"]}},{type:"enum",name:"button 4 long press",ref:{value:"btn4pressLong",options:["true"]}},{type:"enum",name:"button 5 short press",ref:{value:"btn5pressShort",options:["true"]}},{type:"enum",name:"button 5 long press",ref:{value:"btn5pressLong",options:["true"]}},{type:"enum",name:"button 6 short press",ref:{value:"btn6pressShort",options:["true"]}},{type:"enum",name:"button 6 long press",ref:{value:"btn6pressLong",options:["true"]}}]};},HmIP_WRC6.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":case"errorBat":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);}return n;},HmIP_WRC6.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":case"errorBat":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);default:return"?";}},HmIP_WRC6.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"0":s=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case"1":case"2":case"3":case"4":case"5":case"6":"pressShort"==(s=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a)).key?s.key="btn"+r+"pressShort":"pressLong"==s.key&&(s.key="btn"+r+"pressLong");}return s;};var HmIP_SPDR=function HmIP_SPDR(){};HmIP_SPDR.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"enum",name:"passages detected",ref:{value:"passageCurrentDirection",options:["right_to_left","left_to_right"]}},{type:"enum",name:"previous passage",ref:{value:"passageLastDirection",options:["right_to_left","left_to_right"]}},{type:"int",name:"passage count from left to right",ref:{value:"passageL2RC",extMeta:"0-127"}},{type:"enum",name:"passage count overflow from left to right",ref:{value:"passageL2RCOF",options:["false","true"]}},{type:"int",name:"passage count from right to left",ref:{value:"passageR2LC",extMeta:"0-127"}},{type:"enum",name:"passage count overflow from right to left",ref:{value:"passageR2LCOF",options:["false","true"]}}]};},HmIP_SPDR.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"enum",name:"passages detected",ref:{value:"passageCurrentDirection",options:["right_to_left","left_to_right"]}},{type:"enum",name:"previous passage",ref:{value:"passageLastDirection",options:["right_to_left","left_to_right"]}},{type:"int",name:"passage count from left to right",ref:{value:"passageL2RC",extMeta:"0-127"}},{type:"enum",name:"passage count overflow from left to right",ref:{value:"passageL2RCOF",options:["false","true"]}},{type:"int",name:"passage count from right to left",ref:{value:"passageR2LC",extMeta:"0-127"}},{type:"enum",name:"passage count overflow from right to left",ref:{value:"passageR2LCOF",options:["false","true"]}}]};},HmIP_SPDR.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":case"errorBat":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"passageCurrentDirection":n=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(e,t,{address:2},{value:"passageCurrentDirection"});break;case"passageLastDirection":n=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(e,t,{address:2},{value:"passageLastDirection"});break;case"passageR2LCurrent":n=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(e,t,{address:2},{value:"passageCurrent"});break;case"passageR2LLast":n=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(e,t,{address:2},{value:"passageLast"});break;case"passageR2LC":n=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(e,t,{address:2},{value:"passageC"});break;case"passageR2LCOF":n=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(e,t,{address:2},{value:"passageCOF"});break;case"passageL2RCurrent":n=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(e,t,{address:3},{value:"passageCurrent"});break;case"passageL2RLast":n=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(e,t,{address:3},{value:"passageLast"});break;case"passageL2RC":n=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(e,t,{address:3},{value:"passageC"});break;case"passageL2RCOF":n=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(e,t,{address:3},{value:"passageCOF"});}return n;},HmIP_SPDR.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":case"errorBat":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"passageCurrentDirection":case"passageLastDirection":return xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.handleStatusResponse(e,t);case"passageR2LCurrent":case"passageL2RCurrent":return xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.handleStatusResponse(e,{value:"passageCurrent"});case"passageR2LLast":case"passageL2RLast":return xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.handleStatusResponse(e,{value:"passageLast"});case"passageR2LC":case"passageL2RC":return xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.handleStatusResponse(e,{value:"passageC"});case"passageL2RCOF":case"passageR2LCOF":return xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.handleStatusResponse(e,{value:"passageCOF"});default:return"?";}},HmIP_SPDR.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"0":s=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case"2":case"3":"passageCurrentDirection"==(s=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.resolveState(e,t,a)).key?s.key="passageCurrentDirection":"passageLastDirection"==s.key?s.key="passageLastDirection":"passageC"==s.key?s.key="2"==r?"passageR2LC":"passageL2RC":"passageCOF"==s.key&&(s.key="2"==r?"passageR2LCOF":"passageL2RCOF");}return s;};var HmIP_SWD=function HmIP_SWD(){};HmIP_SWD.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"enum",name:"alarm state",ref:{value:"waterAlarmState",options:["on","off"]}},{type:"enum",name:"moisture detected",ref:{value:"waterMoistureDetected",options:["true","false"]}},{type:"enum",name:"water detected",ref:{value:"waterWaterDetected",options:["true","false"]}}]};},HmIP_SWD.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"enum",name:"alarm state",ref:{value:"waterAlarmState",options:["on","off"]}},{type:"enum",name:"moisture detected",ref:{value:"waterMoistureDetected",options:["true","false"]}},{type:"enum",name:"water detected",ref:{value:"waterWaterDetected",options:["true","false"]}}]};},HmIP_SWD.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":case"errorBat":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"waterAlarmState":n=xnm.aio.hm.HmIPChannel.WATER_DETECTION_TRANSMITTER.buildStateScript(e,t,{address:1},{value:"waterAlarmState"});break;case"waterMoistureDetected":n=xnm.aio.hm.HmIPChannel.WATER_DETECTION_TRANSMITTER.buildStateScript(e,t,{address:1},{value:"waterMoistureDetected"});break;case"waterWaterDetected":n=xnm.aio.hm.HmIPChannel.WATER_DETECTION_TRANSMITTER.buildStateScript(e,t,{address:1},{value:"waterWaterDetected"});}return n;},HmIP_SWD.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":case"errorBat":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"waterAlarmState":case"waterMoistureDetected":case"waterWaterDetected":return xnm.aio.hm.HmIPChannel.WATER_DETECTION_TRANSMITTER.handleStatusResponse(e,t);default:return"?";}},HmIP_SWD.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=null;switch(t.channel.substr(n+1)){case"0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case"1":r=xnm.aio.hm.HmIPChannel.WATER_DETECTION_TRANSMITTER.resolveState(e,t,a);}return r;};var p={getCommandStatusMap:function getCommandStatusMap(e){var t={status:[{type:"enum",name:"duty cycle error",ref:{value:"errorBatElDutyCycle",value_t:"maintDutyCycle",options:["false","true"]}},{type:"int",name:"error code",ref:{value:"errorBatElCode",value_t:"maintErrorCode",ext:"%d",extMeta:"0-255"}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",value_t:"maintBatVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"sensor error",ref:{value:"errorBatElSensor",value_t:"maintErrorSensor",options:["false","true"]}},{type:"enum",name:"communication error",ref:{value:"errorBatElComm",value_t:"maintErrorComm",options:["false","true"]}},{type:"enum",name:"motion",ref:{value:"acceMotion",value_t:"motion",options:["false","true"]}}]};return e&&"hmip-stv"===String(e.type).toLowerCase()&&t.status.push({type:"int",name:"angle",ref:{value:"acceAngle",ext:"%d",unit:"Grad"}}),t;},getIPEvtMap:function getIPEvtMap(e){return this.getCommandStatusMap(e);},buildStateScript:function buildStateScript(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorBatElDutyCycle":case"errorBatElCode":case"errorBatElBat":case"errorBatElVoltage":case"errorBatElSensor":case"errorBatElComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,t,{address:0},a);break;case"acceAngle":case"acceMotion":n=xnm.aio.hm.HmIPChannel.ACCELERATION_TRANSCEIVER.buildStateScript(e,t,{address:1},a);}return n;},handleStatusResponse:function handleStatusResponse(e,t){if("?"===e)return e;switch(t.value){case"errorBatElDutyCycle":case"errorBatElCode":case"errorBatElBat":case"errorBatElVoltage":case"errorBatElSensor":case"errorBatElComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,t);case"acceAngle":case"acceMotion":return xnm.aio.hm.HmIPChannel.ACCELERATION_TRANSCEIVER.handleStatusResponse(e,t);}return"?";},resolveState:function resolveState(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=null;switch(t.channel.substr(n+1)){case"0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,t,a);break;case"1":r=xnm.aio.hm.HmIPChannel.ACCELERATION_TRANSCEIVER.resolveState(e,t,a);}return r;}},f=p,HmIP_WGC=function HmIP_WGC(){};HmIP_WGC.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]};},HmIP_WGC.prototype.getIPEvtMap=function(){var e=this.getCommandStatusMap().status,t=JSON.parse(JSON.stringify(e));return t.push({type:"enum",name:"button short press",ref:{value:"btnPressShort",options:["true"]}}),t.push({type:"enum",name:"button long press",ref:{value:"btnPressLong",options:["true"]}}),{ipevt:t};},HmIP_WGC.prototype.executeCommand=function(e,t,a,n){if(a){var r=null;switch(a.value){case"on":r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:3},{value:"onFor",ext:.5});break;case"onFor":r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:3},a);break;default:return void(n&&n(new Error("unknown command")));}r?e._doRequestMarked(r,!0,{execute:function execute(e,t){n&&n(e);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},HmIP_WGC.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,t,{address:0},a);}return n;},HmIP_WGC.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,t);default:return"?";}},HmIP_WGC.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=null;switch(t.channel.substr(n+1)){case"0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,t,a);break;case"1":"pressShort"==(r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a)).key?r.key="btnPressShort":"pressLong"==r.key&&(r.key="btnPressLong");}return r;};var HmIP_BSL=function HmIP_BSL(){};HmIP_BSL.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"led 1 on",ref:{value:"led1On"}},{type:"enum",name:"led 1 off",ref:{value:"led1Off"}},{type:"int",name:"led 1 dim up",ref:{value:"led1DimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"led 1 dim down",ref:{value:"led1DimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"led 1 dim to",ref:{value:"led1DimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"led 1 toggle to",ref:{value:"led1ToggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led 1 color",ref:{value:"led1Color",ext:"%e",extMeta:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"enum",name:"led 2 on",ref:{value:"led2On"}},{type:"enum",name:"led 2 off",ref:{value:"led2Off"}},{type:"int",name:"led 2 dim up",ref:{value:"led2DimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"led 2 dim down",ref:{value:"led2DimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"led 2 dim to",ref:{value:"led2DimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"led 2 toggle to",ref:{value:"led2ToggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led 2 color",ref:{value:"led2Color",ext:"%e",extMeta:["off","blue","green","torqoise","red","purple","yellow","white"]}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}},{type:"int",name:"led 1 status",ref:{value:"led1Level",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led 1 color",ref:{value:"led1Color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"int",name:"led 2 status",ref:{value:"led2Level",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led 2 color",ref:{value:"led2Color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}}]};},HmIP_BSL.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}},{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}},{type:"int",name:"led 1 status",ref:{value:"led1Level",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led 1 color",ref:{value:"led1Color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"int",name:"led 2 status",ref:{value:"led2Level",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led 2 color",ref:{value:"led2Color",options:["off","blue","green","torqoise","red","purple","yellow","white"]}}]};},HmIP_BSL.prototype.executeCommand=function(e,t,a,n){if(a){var r=null,s=null,l=null;switch(a.value){case"on":case"off":case"toggle":r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:4},a);break;case"led1On":case"led1Off":case"led1DimUp":case"led1DimDown":case"led1DimTo":case"led1ToggleTo":case"led1Color":case"led2On":case"led2Off":case"led2DimUp":case"led2DimDown":case"led2DimTo":case"led2ToggleTo":case"led2Color":l="led1"==a.value.substr(0,4)?{address:12}:{address:8},"On"==a.value.substr(4)?s={value:"dimOn"}:"Off"==a.value.substr(4)?s={value:"dimOff"}:"DimUp"==a.value.substr(4)?s={value:"dimUp",ext:a.ext}:"DimDown"==a.value.substr(4)?s={value:"dimDown",ext:a.ext}:"DimTo"==a.value.substr(4)?s={value:"dimTo",ext:a.ext}:"ToggleTo"==a.value.substr(4)?s={value:"toggleTo",ext:a.ext}:"Color"==a.value.substr(4)&&(s={value:"color",ext:a.ext}),r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,l,s);break;default:return void(n&&n(new Error("unknown command")));}r?e._doRequestMarked(r,!0,{execute:function execute(e,t){n&&n(e);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},HmIP_BSL.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n,r,s=null;switch(a.value){case"errorComm":s=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"switchState":s=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.buildStateScript(e,t,{address:3},{value:"switchTState"});break;case"led1Level":case"led1Color":case"led2Level":case"led2Color":r="led1"==a.value.substr(0,4)?{address:11}:{address:7},"Level"==a.value.substr(4)?n={value:"dimmerTLevel"}:"Color"==a.value.substr(4)&&(n={value:"dimmerTColor"}),s=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.buildStateScript(e,t,r,n);}return s;},HmIP_BSL.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"switchState":return xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.handleStatusResponse(e,{value:"switchTState"});case"led1Level":case"led2Level":return xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.handleStatusResponse(e,{value:"dimmerTLevel"});case"led1Color":case"led2Color":return xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.handleStatusResponse(e,{value:"dimmerTColor"});default:return"?";}},HmIP_BSL.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"0":s=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case"1":case"2":"pressShort"==(s=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a)).key?s.key="btn"+r+"pressShort":"pressLong"==s.key&&(s.key="btn"+r+"pressLong");break;case"3":(s=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.resolveState(e,t,a))&&"switchTState"===s.key&&(s.key="switchState");break;case"7":case"11":s=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.resolveState(e,t,a),"7"==r?"dimmerTLevel"==s.key?s.key="led2Level":"dimmerTColor"==s.key&&(s.key="led2Color"):"11"==r&&("dimmerTLevel"==s.key?s.key="led1Level":"dimmerTColor"==s.key&&(s.key="led1Color"));}return s;};var HmIP_MOD_TM=function HmIP_MOD_TM(){};HmIP_MOD_TM.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"partial open",ref:{value:"partialOpen"}},{type:"enum",name:"light on",ref:{value:"lightOn"}},{type:"enum",name:"light off",ref:{value:"lightOff"}},{type:"enum",name:"light toggle",ref:{value:"lightToggle"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"door status",ref:{value:"doorState",options:["open","closed","ventilation","unknown"]}},{type:"enum",name:"light status",ref:{value:"lightState",options:["off","on"]}}]};},HmIP_MOD_TM.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"door status",ref:{value:"doorState",options:["open","closed","ventilation","unknown"]}},{type:"enum",name:"light status",ref:{value:"lightState",options:["off","on"]}}]};},HmIP_MOD_TM.prototype.executeCommand=function(e,t,a,n){if(a){var r=null;switch(a.value){case"open":case"close":case"stop":case"partialOpen":r=xnm.aio.hm.HmIPChannel.DOOR_RECEIVER.buildCommandScript(e,t,{address:1},a);break;case"lightOn":case"lightOff":case"lightToggle":r=xnm.aio.hm.HmIPChannel.SIMPLE_SWITCH_RECEIVER.buildCommandScript(e,t,{address:2},{value:a.value.substr(5).toLowerCase()});break;default:return void(n&&n(new Error("unknown command")));}r?e._doRequestMarked(r,!0,{execute:function execute(e,t){n&&n(e);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},HmIP_MOD_TM.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"doorState":n=xnm.aio.hm.HmIPChannel.DOOR_RECEIVER.buildStateScript(e,t,{address:1},a);break;case"lightState":n=xnm.aio.hm.HmIPChannel.SIMPLE_SWITCH_RECEIVER.buildStateScript(e,t,{address:2},{value:"state"});}return n;},HmIP_MOD_TM.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"doorState":return xnm.aio.hm.HmIPChannel.DOOR_RECEIVER.handleStatusResponse(e,t);case"lightState":return xnm.aio.hm.HmIPChannel.SIMPLE_SWITCH_RECEIVER.handleStatusResponse(e,{value:"state"});default:return"?";}},HmIP_MOD_TM.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=null;switch(t.channel.substr(n+1)){case"0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case"1":r=xnm.aio.hm.HmIPChannel.DOOR_RECEIVER.resolveState(e,t,a);break;case"2":(r=xnm.aio.hm.HmIPChannel.SIMPLE_SWITCH_RECEIVER.resolveState(e,t,a))&&(r.key="lightState");}return r;};var E,d,h=((E=function E(){}).prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"duty cycle error",ref:{value:"errorBatElDutyCycle",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"float",name:"average brightness",ref:{value:"briAvgIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},{type:"float",name:"current brightness",ref:{value:"briIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},{type:"float",name:"maximum brightness",ref:{value:"briMaxIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},{type:"float",name:"minimum brightness",ref:{value:"briMinIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}}]};},E.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"duty cycle error",ref:{value:"errorBatElDutyCycle",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"float",name:"average brightness",ref:{value:"briAvgIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},{type:"float",name:"current brightness",ref:{value:"briIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},{type:"float",name:"maximum brightness",ref:{value:"briMaxIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},{type:"float",name:"minimum brightness",ref:{value:"briMinIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}}]};},E.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorBatElDutyCycle":case"errorBatElBat":case"errorBatElVoltage":case"errorBatElComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,t,{address:0},a);break;case"briAvgIllu":case"briIllu":case"briMaxIllu":case"briMinIllu":n=xnm.aio.hm.HmIPChannel.BRIGHTNESS_TRANSMITTER.buildStateScript(e,t,{address:1},a);}return n;},E.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorBatElDutyCycle":case"errorBatElBat":case"errorBatElVoltage":case"errorBatElComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,t);case"briAvgIllu":case"briIllu":case"briMaxIllu":case"briMinIllu":return xnm.aio.hm.HmIPChannel.BRIGHTNESS_TRANSMITTER.handleStatusResponse(e,t);default:return"?";}},E.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=null;switch(t.channel.substr(n+1)){case"0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,t,a);break;case"1":r=xnm.aio.hm.HmIPChannel.BRIGHTNESS_TRANSMITTER.resolveState(e,t,a);}return r;},E),T=((d=function d(){}).prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"power failure",ref:{value:"powerMainsFailure",options:["false","true"]}}]};},d.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"power failure",ref:{value:"powerMainsFailure",options:["false","true"]}}]};},d.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);break;case"powerMainsFailure":n=xnm.aio.hm.HmIPChannel.POWER_MAINS_TRANSMITTER.buildStateScript(e,t,{address:1},a);}return n;},d.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"powerMainsFailure":return xnm.aio.hm.HmIPChannel.POWER_MAINS_TRANSMITTER.handleStatusResponse(e,t);default:return"?";}},d.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=null;switch(t.channel.substr(n+1)){case"0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case"1":r=xnm.aio.hm.HmIPChannel.POWER_MAINS_TRANSMITTER.resolveState(e,t,a);}return r;},d),S=function(){var HmIP_MP3P=function HmIP_MP3P(){};return HmIP_MP3P.prototype.getCommandStatusMap=function(){return{command:[{type:"multi",name:"play sound",ref:{value:"acousticPlay",ext:"%multi",extMeta:[{type:"int",name:"set sound",ref:{value:"acousticSound",ext:"%d",extMeta:"0-255"}},{type:"int",name:"set level",ref:{value:"acousticLevel",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set duration",ref:{value:"acousticDur",ext:"%d",extMeta:"0-16343"}},{type:"enum",name:"set duration unit",ref:{value:"acousticDurUnit",ext:"%e",extMeta:["S","M","H","10MS"]}},{type:"int",name:"set repeat",ref:{value:"acousticRepeat",ext:"%d",extMeta:"0-15"}}]}},{type:"multi",name:"play sound list",ref:{value:"acousticPlayList",ext:"%multi",extMeta:[{type:"string",name:"set sound list",ref:{value:"acousticSoundList",ext:"%s"}},{type:"int",name:"set level",ref:{value:"acousticLevel",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set duration",ref:{value:"acousticDur",ext:"%d",extMeta:"0-16343"}},{type:"enum",name:"set duration unit",ref:{value:"acousticDurUnit",ext:"%e",extMeta:["S","M","H","10MS"]}},{type:"int",name:"set repeat",ref:{value:"acousticRepeat",ext:"%d",extMeta:"0-15"}}]}},{type:"enum",name:"led on",ref:{value:"dimOn"}},{type:"enum",name:"led off",ref:{value:"dimOff"}},{type:"int",name:"led dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"led dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"led dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"led toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led color",ref:{value:"color",ext:"%e",extMeta:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"multi",name:"play color",ref:{value:"colorList",ext:"%multi",extMeta:[{type:"int",name:"set level",ref:{value:"colorLevel",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"set color",ref:{value:"colorValue",ext:"%e",extMeta:["off","blue","green","torqoise","red","purple","yellow","white"]}},{type:"enum",name:"set on time",ref:{value:"colorOnTime",ext:"%e",extMeta:["100MS","200MS","300MS","400MS","500MS","700MS","1S","2S","3S","5S","7S","10S","20S","40S","50S","ALWAYS"]}},{type:"int",name:"set duration",ref:{value:"colorDur",ext:"%d",extMeta:"0-16343"}},{type:"enum",name:"set duration unit",ref:{value:"colorDurUnit",ext:"%e",extMeta:["S","M","H","10MS"]}},{type:"int",name:"set repeat",ref:{value:"colorRepeat",ext:"%d",extMeta:"0-15"}}]}},{type:"multi",name:"play color list",ref:{value:"colorPlayList",ext:"%multi",extMeta:[{type:"int",name:"set level",ref:{value:"colorLevel",ext:"%d",extMeta:"0-100"}},{type:"string",name:"set color list",ref:{value:"colorList",ext:"%s"}},{type:"string",name:"set on time list",ref:{value:"colorOnTime",ext:"%s"}},{type:"int",name:"set duration",ref:{value:"colorDur",ext:"%d",extMeta:"0-16343"}},{type:"enum",name:"set duration unit",ref:{value:"colorDurUnit",ext:"%e",extMeta:["S","M","H","10MS"]}},{type:"int",name:"set repeat",ref:{value:"colorRepeat",ext:"%d",extMeta:"0-15"}}]}}],status:[{type:"enum",name:"duty cycle error",ref:{value:"errorBatElDutyCycle",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"int",name:"sound level",ref:{value:"acousticTLevel",extMeta:"0-100"}},{type:"int",name:"sound file",ref:{value:"acousticTSoundfile",extMeta:"0-255"}},{type:"int",name:"led level",ref:{value:"dimmerTLevel",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led color",ref:{value:"dimmerTColor",options:["off","blue","green","torqoise","red","purple","yellow","white"]}}]};},HmIP_MP3P.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"duty cycle error",ref:{value:"errorBatElDutyCycle",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"int",name:"sound level",ref:{value:"acousticTLevel",extMeta:"0-100"}},{type:"int",name:"sound file",ref:{value:"acousticTSoundfile",extMeta:"0-255"}},{type:"int",name:"led level",ref:{value:"dimmerTLevel",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led color",ref:{value:"dimmerTColor",options:["off","blue","green","torqoise","red","purple","yellow","white"]}}]};},HmIP_MP3P.prototype.executeCommand=function(e,t,a,n){if(a){var r=null;switch(a.value){case"acousticPlay":case"acousticPlayList":r=xnm.aio.hm.HmIPChannel.ACOUSTIC_SIGNAL_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:2},a);break;case"dimOn":case"dimOff":case"dimUp":case"dimDown":case"dimTo":case"toggleTo":case"color":case"colorPlay":case"colorPlayList":r=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,t,{address:6},a);}r?e._doRequestMarked(r,!0,{execute:function execute(e,t){n&&n(e);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},HmIP_MP3P.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorBatElDutyCycle":case"errorBatElBat":case"errorBatElVoltage":case"errorBatElComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,t,{address:0},a);break;case"acousticTLevel":case"acousticTSoundfile":n=xnm.aio.hm.HmIPChannel.ACOUSTIC_SIGNAL_TRANSMITTER.buildStateScript(e,t,{address:1},a);break;case"dimmerTLevel":case"dimmerTColor":n=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.buildStateScript(e,t,{address:5},a);}return n;},HmIP_MP3P.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorBatElDutyCycle":case"errorBatElBat":case"errorBatElVoltage":case"errorBatElComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,t);case"acousticTLevel":case"acousticTSoundfile":return xnm.aio.hm.HmIPChannel.ACOUSTIC_SIGNAL_TRANSMITTER.handleStatusResponse(e,t);case"dimmerTLevel":case"dimmerTColor":return xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.handleStatusResponse(e,t);default:return"?";}},HmIP_MP3P.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=null;switch(t.channel.substr(n+1)){case"0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,t,a);break;case"1":r=xnm.aio.hm.HmIPChannel.ACOUSTIC_SIGNAL_TRANSMITTER.resolveState(e,t,a);break;case"5":r=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.resolveState(e,t,a);}return r;},HmIP_MP3P;}(),v=function(){var HmIP_WRCD=function HmIP_WRCD(){};return HmIP_WRCD.prototype.getCommandStatusMap=function(){return{command:[{type:"multi",name:"set line",ref:{value:"setLine",ext:"%multi",extMeta:[{type:"enum",name:"line",ref:{value:"line",ext:"%e",extMeta:["1","2","3","4","5"]}},{type:"string",name:"text",ref:{value:"text",ext:"%s"}},{type:"enum",name:"text alignment",ref:{value:"textAlign",ext:"%e",extMeta:["center","left","right"]}},{type:"enum",name:"text color",ref:{value:"textColor",ext:"%e",extMeta:["black","white"]}},{type:"enum",name:"background color",ref:{value:"bgColor",ext:"%e",extMeta:["black","white"]}},{type:"int",name:"icon",ref:{value:"icon",ext:"%d",extMeta:"0-31"}}]}},{type:"multi",name:"set sound",ref:{value:"setSound",ext:"%multi",extMeta:[{type:"int",name:"sound",ref:{value:"sound",ext:"%d",extMeta:"-1-6"}},{type:"int",name:"repeat",ref:{value:"repeat",ext:"%d"}},{type:"int",name:"interval",ref:{value:"interval",ext:"%d"}}]}}],status:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]};},HmIP_WRCD.prototype.getIPEvtMap=function(){var e=this.getCommandStatusMap().status,t=JSON.parse(JSON.stringify(e));return{ipevt:t=t.concat([{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}])};},HmIP_WRCD.prototype.executeCommand=function(e,t,a,n){if(a){var r=xnm.aio.hm.HmIPChannel.ACOUSTIC_DISPLAY_RECEIVER.buildCommandScript(e,t,{address:3},a);r?e._doRequestMarked(r,!0,{execute:function execute(e,t){n&&n(e);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},HmIP_WRCD.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,t,{address:0},a);}return n;},HmIP_WRCD.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorBatElComm":case"errorBatElBat":case"errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,t);default:return"?";}},HmIP_WRCD.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"0":s=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,t,a);break;case"1":case"2":(s=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a))&&("pressShort"==s.key?s.key="btn"+r+"pressShort":"pressLong"==s.key&&(s.key="btn"+r+"pressLong"));}return s;},HmIP_WRCD;}(),R=function(){var HmIP_WRCR=function HmIP_WRCR(){};return HmIP_WRCR.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatVoltage",ext:"%f",extMeta:"0.0-25.2"}}]};},HmIP_WRCR.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorLowbat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatVoltage",ext:"%f",extMeta:"0.0-25.2"}},{type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}},{type:"enum",name:"fast clockwise rotation",ref:{value:"roCWFast",options:["true"]}},{type:"enum",name:"slow clockwise rotation",ref:{value:"roCWSlow",options:["true"]}},{type:"enum",name:"fast anti-clockwise rotation",ref:{value:"roACWFast",options:["true"]}},{type:"enum",name:"slow anti-clockwise rotation",ref:{value:"roACWSlow",options:["true"]}}]};},HmIP_WRCR.prototype.buildStateScript=function(e,t,a){if(!a)return null;var n=null;switch(a.value){case"errorComm":case"errorBat":case"errorBatVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);}return n;},HmIP_WRCR.prototype.handleStatusResponse=function(e,t){if("?"==e)return e;switch(t.value){case"errorComm":case"errorBat":case"errorBatVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);default:return"?";}},HmIP_WRCR.prototype.resolveState=function(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=null;switch(t.channel.substr(n+1)){case"0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case"1":r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a);break;case"2":"pressShort"==(r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a)).key?r.key="roCWFast":"pressLong"==r.key&&(r.key="roCWSlow");break;case"3":"pressShort"==(r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,t,a)).key?r.key="roACWFast":"pressLong"==r.key&&(r.key="roACWSlow");}return r;},HmIP_WRCR;}(),I={buildStateScript:function buildStateScript(e,t,a){if(!t.channels)return null;if(!a.value)return null;if("errorComm"===a.value||"errorBat"===a.value)return xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,t,{address:0},a);var n={tempSensor1:{dp:"ACTUAL_TEMPERATURE",chn:1},tempSensor2:{dp:"ACTUAL_TEMPERATURE",chn:2},tempDiff1m2:{dp:"ACTUAL_TEMPERATURE",chn:3},tempDiff2m1:{dp:"ACTUAL_TEMPERATURE",chn:3}}[a.value];return n?xnm.aio.hm.Channel.buildStateScript(t,{address:n.chn},n.dp):null;},getCommandStatusMap:function getCommandStatusMap(e){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"float",name:"temperature sensor 1",ref:{value:"tempSensor1",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"float",name:"temperature sensor 2",ref:{value:"tempSensor2",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"float",name:"temperature difference (1 - 2)",ref:{value:"tempDiff1m2",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"float",name:"temperature difference (2 - 1)",ref:{value:"tempDiff2m1",extMeta:"-3276.8-3276.7",scale:"0.1"}}]};},handleStatusResponse:function handleStatusResponse(e,t){if("?"===e)return e;var a="?";switch(t.value){case"errorComm":case"errorBat":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,t);case"tempSensor1":case"tempSensor2":case"tempDiff1m2":case"tempDiff2m1":a=parseFloat(e);}return"tempDiff2m1"!==t.value||isNaN(a)||(a*=-1),isNaN(a)||(a=Number(a).toFixed(1)),a;},resolveState:function resolveState(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=null;switch(t.channel.substr(n+1)){case"0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,t,a);break;case"1":r={key:"tempSensor1",value:a};break;case"2":r={key:"tempSensor2",value:a};break;case"3":r=[{key:"tempDiff1m2",value:a},{key:"tempDiff2m1",value:isNaN(a)?a:-a}];}return r;}},_={executeCommand:function executeCommand(e,t,a,n){if(a){var r=null,s=null,l=null,o="";switch(a.value){case"lock":case"unlock":case"open":r=1,s="LOCK_TARGET_LEVEL",o="if(o!=null){o.State("+(l={lock:"0",unlock:"1",open:"2"}[a.value])+");}\n";}if(!r&&String(a.value).startsWith("accessAuthSet")){if(r=parseInt(String(a.value).replace("accessAuthSet",""),10),r+=1,s="ACCESS_AUTHORIZATION","on"===a.ext)l="1";else{if("off"!==a.ext)return void(n&&n(new Error('ext value expected to be "on" or "off"')));l="0";}o="if(o!=null){o.State("+l+");}\n";}if(isNaN(r))return null;var u=xnm.aio.hm.Channel.buildCommandScript(t,{address:r},s,o);u?e._doRequestMarked(u,!0,{execute:function execute(e,t){n&&n(e);}}):n&&n(new Error("invalid command"));}else n&&n(new Error("command is null"));},buildStateScript:function buildStateScript(e,t,a){var n=null;switch(a.value){case"maintBatBlBat":case"maintBatBlComm":case"maintBatBlDutyCycle":case"maintBatBlVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_BL.buildStateScript(e,t,{address:0},a);break;case"lockState":n=xnm.aio.hm.Channel.buildStateScript(t,{address:1},"LOCK_STATE");}if(!n&&String(a.value).startsWith("accessAuthState")){var r=parseInt(String(a.value).replace("accessAuthState",""),10);n=xnm.aio.hm.Channel.buildStateScript(t,{address:r+1},"STATE");}return n;},getCommandStatusMap:function getCommandStatusMap(e){return{command:[{type:"enum",name:"lock",ref:{value:"lock"}},{type:"enum",name:"unlock",ref:{value:"unlock"}},{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"user 1 authorization",ref:{value:"accessAuthSet01",ext:"%e",extMeta:["on","off"]}},{type:"enum",name:"user 2 authorization",ref:{value:"accessAuthSet02",ext:"%e",extMeta:["on","off"]}},{type:"enum",name:"user 3 authorization",ref:{value:"accessAuthSet03",ext:"%e",extMeta:["on","off"]}},{type:"enum",name:"user 4 authorization",ref:{value:"accessAuthSet04",ext:"%e",extMeta:["on","off"]}},{type:"enum",name:"user 5 authorization",ref:{value:"accessAuthSet05",ext:"%e",extMeta:["on","off"]}},{type:"enum",name:"user 6 authorization",ref:{value:"accessAuthSet06",ext:"%e",extMeta:["on","off"]}},{type:"enum",name:"user 7 authorization",ref:{value:"accessAuthSet07",ext:"%e",extMeta:["on","off"]}},{type:"enum",name:"user 8 authorization",ref:{value:"accessAuthSet08",ext:"%e",extMeta:["on","off"]}}],status:[{type:"enum",name:"duty cycle error",ref:{value:"maintBatBlDutyCycle",value_t:"maintDutyCycle",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"maintBatBlBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"maintBatBlVoltage",value_t:"maintBatVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"communication error",ref:{value:"maintBatBlComm",value_t:"maintErrorComm",options:["false","true"]}},{type:"enum",name:"lock state",ref:{value:"lockState",options:["unknown","locked","unlocked"]}},{type:"enum",name:"user 1 authorization",ref:{value:"accessAuthState01",options:["on","off"]}},{type:"enum",name:"user 2 authorization",ref:{value:"accessAuthState02",options:["on","off"]}},{type:"enum",name:"user 3 authorization",ref:{value:"accessAuthState03",options:["on","off"]}},{type:"enum",name:"user 4 authorization",ref:{value:"accessAuthState04",options:["on","off"]}},{type:"enum",name:"user 5 authorization",ref:{value:"accessAuthState05",options:["on","off"]}},{type:"enum",name:"user 6 authorization",ref:{value:"accessAuthState06",options:["on","off"]}},{type:"enum",name:"user 7 authorization",ref:{value:"accessAuthState07",options:["on","off"]}},{type:"enum",name:"user 8 authorization",ref:{value:"accessAuthState08",options:["on","off"]}}]};},handleStatusResponse:function handleStatusResponse(e,t){if("?"===e)return e;switch(t.value){case"maintBatBlBat":case"maintBatBlComm":case"maintBatBlDutyCycle":case"maintBatBlVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_BL.handleStatusResponse(e,t);case"lockState":return["unknown","locked","unlocked"][e]||"?";}if(String(t.value).startsWith("accessAuthState")){if("true"==e)return"on";if("false"==e)return"off";}return"?";},resolveState:function resolveState(e,t,a){if(!t||!t.channel)return null;var n=t.channel.indexOf(":");if(-1==n)return null;var r=t.channel.substr(n+1),s=null;switch(r){case"0":s=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_BL.resolveState(e,t,a);break;case"1":s={key:"lockState",value:["unknown","locked","unlocked"][a]||"?"};break;case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s={key:"accessAuthState0"+(parseInt(r,10)-1),value:a?"on":"off"};}return s;}};return{"HMIP-ASIR":new HmIP_ASIR(),"HMIP-ASIR-2":new HmIP_ASIR(),"HMIP-ASIR-B1":new HmIP_ASIR(),"HMIP-ASIR-O":new HmIP_ASIR(),"HMIP-BBL":new HmIP_FBL(),"HMIP-BDT":new HmIP_BDT(),"HMIP-BROLL":new HmIP_BROLL(),"HMIP-BSL":new HmIP_BSL(),"HMIP-BSM":new HmIP_BSM(),"HMIP-DLD":_,"HMIP-FBL":new HmIP_FBL(),"HMIP-FROLL":new HmIP_BROLL(),"HMIP-FSI16":new HmIP_FSI16(),"HMIP-FSM":new HmIP_FSM(),"HMIP-MOD-HO":new HmIP_MOD_TM(),"HMIP-MOD-TM":new HmIP_MOD_TM(),"HMIP-MP3P":new S(),"HMIP-PDT":new HmIP_PDT(),"HMIP-PMFS":new T(),"HMIP-SAM":p,"HMIP-SLO":new h(),"HMIP-SPDR":new HmIP_SPDR(),"HMIP-SRH":new HmIP_SRH(),"HMIP-STE2-PCB":I,"HMIP-STV":f,"HMIP-SWD":new HmIP_SWD(),"HMIP-SWSD":new HmIP_SWSD(),"HMIP-WGC":new HmIP_WGC(),"HMIP-WRC2":new HmIP_WRC2(),"HMIP-WRC6":new HmIP_WRC6(),"HMIP-WRCC2":new HmIP_WRC2(),"HMIP-WRCD":new v(),"HMIP-WRCR":new R(),"HMIPW-WRC2":new HmIP_WRC2(),"HMIPW-WRC6":new HmIP_WRC6(),resolveJSON:function resolveJSON(p){if(!p||!p.type)return null;var f=String(p.type).toUpperCase();if(f.startsWith("ELV-SH-")&&(f=f.replace("ELV-SH-","HMIP-")),"HMIP-PDT"===f)return n.parseJSON(p);if("HMIP-BSM"===f.substr(0,8))return a.parseJSON(p,!0);if(this[f])return this[f];if(f.startsWith("HMIP-FSM"))return this["HMIP-FSM"];var E=null;switch(f){case"HMIP-BS2":E=t.parseJSON(p,1,2,!0);break;case"HMIP-WHS2":E=t.parseJSON(p,1,2);break;case"HMIP-BRC2":case"HMIP-DBB":case"HMIP-RCV-50":E=e.parseJSON(p);}if("HMIP-PS"===f.substr(0,7))E="HMIP-PSM"===f.substr(0,8)?a.parseJSON(p):t.parseJSON(p);else if(f.startsWith("HMIP-USBSM"))E=a.parseJSON(p);else if("HMIPW-DRS"===f.substr(0,9)){var _e14=parseInt(p.type.substr(9),10);E=t.parseJSON(p,1,_e14);}else if("HMIPW-DRD"===f.substr(0,9))E=n.parseJSON(p);else if("HMIPW-DRBL"===f.substr(0,10)){var _e15=parseInt(p.type.substr(10),10);E=r.parseJSON(p,1,_e15);}else if("HMIPW-FIO"===f.substr(0,9)){var _e16=parseInt(p.type.substr(9),10);if(p.channels)for(var _a3 in p.channels){if("MULTI_MODE_INPUT_TRANSMITTER"===_a3.substr(0,28)){E=s.parseJSON(p);break;}if("SWITCH_TRANSMITTER"===_a3.substr(0,18)){E=t.parseJSON(p,_e16+1,_e16);break;}}}else if("HMIPW-STH"===f.substr(0,9)||"HMIPW-STHD"===f.substr(0,10)||"HMIPW-WTH"===f.substr(0,9)||"HMIP-WTH-B"===f)E=o.parseJSON(p);else if("HMIPW-SMI55"===f)E=u.parseJSON(p);else if("HMIPW-SPI"===f)E=i.parseJSON(p);else if(f.startsWith("HMIP-DSD-PCB")||f.startsWith("HMIP-FCI")||f.startsWith("HMIP-MOD-RC")||f.startsWith("HMIPW-DRI"))E=s.parseJSON(p);else if("HMIP-MOD-OC"===f.substr(0,11)){var _a4=parseInt(p.type.substr(11),10),_n9=p.address.indexOf(":");var _r2=0;-1!=_n9&&(_r2=parseInt(p.address.substr(_n9+1),10)),_r2>0&&_r2<=_a4?E=e.parseJSON(p):0!=_r2&&(E=t.parseJSON(p,_a4+1,_a4));}else if("HMIP-FDT"===f.substr(0,8))E=n.parseJSON(p);else if("HMIP-FALMOT"===f.substr(0,11))E=c.parseJSON(p);else if("HMIP-PCBS"===f.substr(0,9)){var _a5=parseInt(p.type.substr(9),10);if(!isNaN(_a5)){var _n10=p.address.indexOf(":");var _r3=0;-1!=_n10&&(_r3=parseInt(p.address.substr(_n10+1),10)),_r3>0&&_r3<=_a5?E=e.parseJSON(p):0!=_r3&&(E=t.parseJSON(p,_a5+1,_a5));}}else if("HMIP-DRSI"===f.substr(0,9)){var _e17=parseInt(p.type.substr(9),10),_a6=p.address.indexOf(":");var _n11=0;-1!=_a6&&(_n11=parseInt(p.address.substr(_a6+1))),_n11>0&&_n11<=_e17?E=s.parseJSON(p):0!=_n11&&(E=t.parseJSON(p,_e17+1,_e17));}else if("HMIP-DRDI"===f.substr(0,9)){var _e18=parseInt(p.type.substr(9),10),_t25=p.address.indexOf(":");var _a7=0;-1!=_t25&&(_a7=parseInt(p.address.substr(_t25+1),10)),_a7>0&&_a7<=_e18?E=s.parseJSON(p):0!=_a7&&(E=n.parseJSON(p,_e18+1,_e18));}else if("HMIP-DRBLI"===f.substr(0,10)){var _e19=parseInt(p.type.substr(10),10),_t26=p.address.indexOf(":");var _a8=0;-1!=_t26&&(_a8=parseInt(p.address.substr(_t26+1),10)),_a8>0&&_a8<=2*_e19?E=s.parseJSON(p):0!=_a8&&(E=r.parseJSON(p,2*_e19+1,_e19));}else if("HMIP-SCI"==f.substr(0,8))E=l.parseJSON(p);else if("HMIP-MIO16-PCB"==f){var _e20=p.address.indexOf(":");var _a9=0;-1!=_e20&&(_a9=parseInt(p.address.substr(_e20+1),10)),E=_a9>0&&_a9<13?m.parseJSON(p):_a9>=13&&_a9<17?s.parseJSON(p):t.parseJSON(p,17,8);}return E;},parseDevice:function parseDevice(e){return e.channels&&e.hsstype&&e["interface"]?0==e.hsstype.indexOf("HmIPW")?this._parseHMIPWDevice(e):this._parseHmIPRFDevice(e):null;},_parseHMIPWDevice:function _parseHMIPWDevice(e){var t=e.hsstype;if("HmIPW-DRS"==t.substr(0,9))return this._resolveHmIPMultiSwitch(e);if("HmIPW-DRD"==t.substr(0,9))return this._resolveHmIPMultiDimmer(e);if("HmIPW-DRBL"==t.substr(0,10))return this._resolveHmIPMultiBlind(e);if("HmIPW-DRI"==t.substr(0,9))return function(e){var t,a,n=[];(a={}).sys="hm",a.id=e.name,a.type=e.hsstype,a.address=e.address,a["interface"]=e["interface"],a.channels={};var r=0,s=JSON.parse(JSON.stringify(a)),l=null,o=e.channels,u=!1;for(var i in o){if(o.hasOwnProperty(i)){if(!(t=e.channels[i]).hsstype)continue;if("ALARM_COND_SWITCH_TRANSMITTER"==t.hsstype){n.push(s);continue;}if("MULTI_MODE_INPUT_TRANSMITTER"==t.hsstype&&(0!=r&&(n.push(s),s=JSON.parse(JSON.stringify(a)),u=!1,l&&(s.channels.MAINTENANCE=l)),r++),!t.address)continue;var c=t.address.indexOf(":");if(-1===c)continue;"MULTI_MODE_INPUT_TRANSMITTER"!=t.hsstype||u||(s.id=t.name?t.name:s.id,u=!0);var m=t.address.substring(c+1);"MULTI_MODE_INPUT_TRANSMITTER"==t.hsstype&&(s.address+=":"+m);var p={id:t.name,address:m,room:t.room,group:t.func};0==m?(l=p,s.channels.MAINTENANCE=l):s.channels[t.hsstype+":"+m]=p;}}return n;}(e);if("HmIPW-FIO"==t.substr(0,9))return function(e){var t=[],a={sys:"hm"};a.id=e.name,a.type=e.hsstype,a.address=e.address,a["interface"]=e["interface"],a.channels={};var n=0,r=!1,s=[],l=JSON.parse(JSON.stringify(a)),o=null,u=e.channels;for(var i in u){if(u.hasOwnProperty(i)){var c=e.channels[i];if(!c.hsstype)continue;if(!c.address)continue;var m=c.address.indexOf(":");if(-1===m)continue;var p=c.address.substring(m+1),f={id:c.name,address:p,room:c.room,group:c.func};if("MAINTENANCE"==c.hsstype)o=f,l.channels.MAINTENANCE=o;else if("MULTI_MODE_INPUT_TRANSMITTER"==c.hsstype)l.channels[c.hsstype+":"+p]=f,l.id=c.name?c.name:l.id,l.address+=":"+p,s.push(l),l=JSON.parse(JSON.stringify(a)),o&&(l.channels.MAINTENANCE=o);else if("SWITCH_TRANSMITTER"==c.hsstype)0!=n&&(t.push(l),l=JSON.parse(JSON.stringify(a)),r=!1,o&&(l.channels.MAINTENANCE=o)),n++,l.channels[c.hsstype+":"+p]=f,l.address+=":"+p;else if("SWITCH_VIRTUAL_RECEIVER"!=c.hsstype||r){if("SWITCH_WEEK_PROFILE"==c.hsstype){for(var E=0;E<t.length;E++){t[E].channels[c.hsstype+":"+p]=f;}t.push(l);}}else l.channels[c.hsstype+":"+p]=f,l.id=c.name?c.name:l.id,r=!0;}}return t.concat(s);}(e);if(t.startsWith("HmIPW-WRC2"))return this._resolveHmIPDeviceFromScript(e,function(e,t){return["1","2"].includes(e)?2:1;});if(t.startsWith("HmIPW-WRC6"))return this._resolveHmIPDeviceFromScript(e,function(e,t){return["1","2","3","4","5","6"].includes(e)||["7","8","9","10","11","12","13"].includes(e)?2:1;});if("HmIPW-SMI55"==t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return-1==["0","1","2","3"].indexOf(e)?0:-1!=["1","2"].indexOf(e)?2:1;});if("HmIPW-SPI"==t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return-1==["0","1"].indexOf(e)?0:1;});var a={};return this._resolveHmIPDeviceFromScript(e,function(e,t){return xnm.aio.hm.HMIP_CHANNEL[t]?(a[t]||(a[t]=e),a[t]!=e?0:1):0;});},_parseHmIPRFDevice:function _parseHmIPRFDevice(e){var t=String(e.hsstype).toUpperCase();if(t.startsWith("ELV-SH-")&&(t=t.replace("ELV-SH-","HMIP-")),t.startsWith("HMIP-PS")||t.startsWith("HMIP-USBSM"))return this._resolveHmIPDeviceFromScript(e,function(e,t){return["3","4","5"].includes(e)?2:1;});if("HMIP-BSM"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return["1","2","4","5","6"].includes(e)?2:1;});if(t.startsWith("HMIP-FSM"))return this._resolveHmIPDeviceFromScript(e,function(e,t){return["0","1","5"].includes(e)?1:["2","3","4"].includes(e)?2:0;});if("HMIP-BDT"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return["0","3"].includes(e)?1:["1","2","4","5","6"].includes(e)?2:0;});if("HMIP-PDT"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return["0","2","6"].includes(e)?1:["3","4","5"].includes(e)?2:0;});if("HMIP-FDT"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return["0","1","5"].includes(e)?1:["2","3","4"].includes(e)?2:0;});if("HMIP-BBL"===t||"HMIP-BROLL"===t||"HMIP-FBL"===t||"HMIP-FROLL"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return["1","2","4","5","6"].includes(e)?2:["0","3"].includes(e)?1:0;});if(t.startsWith("HMIP-WRC"))return"HMIP-WRCD"===t?this._resolveHmIPDeviceFromScript(e,function(e,t){return["0","3"].includes(e)?1:["1","2"].includes(e)?2:0;}):"HMIP-WRCR"===t?this._resolveHmIPDeviceFromScript(e,function(e,t){return["0","1","2","3"].includes(e)?1:0;}):this._resolveHmIPDeviceFromScript(e,function(e,t){return"0"===e?1:"KEY_TRANSCEIVER"===t?2:0;});if(t.startsWith("HMIP-FAL"))return this._resolveHmIPDeviceFromScript(e,function(e,t){return"CLIMATECONTROL_FLOOR_PUMP_TRANSCEIVER"===t||"CLIMATECONTROL_FLOOR_TRANSCEIVER"===t?3:0;});if("HMIP-SPDR"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return["0"].includes(e)?1:["2","3"].includes(e)?2:0;});if("HMIP-SMI55"===t||"HMIP-SMI55-2"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return["0","3"].includes(e)?1:["1","2"].includes(e)?3:0;});if("HMIP-MIOB"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return["3","7","9","10","11"].includes(e)?3:0;});if("HMIP-MOD-HO"===t||"HMIP-MOD-TM"===t||"HMIP-PMFS"===t||"HMIP-SAM"===t||"HMIP-STV"===t||"HMIP-SWD"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return 1;});if("HMIP-WGC"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return["0","1","2"].includes(e)?1:["3","4","5"].includes(e)?2:0;});if("HMIP-BSL"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return["5","6","9","10","13","14"].includes(e)?0:["1","2","7","8","11","12"].includes(e)?2:1;});if("HMIP-SLO"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return["2","3"].includes(e)?0:1;});if("HMIP-MP3P"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return["0","1","5","9"].includes(e)?1:["2","3","4","6","7","8"].includes(e)?2:0;});if("HMIP-SCI"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return"0"===e||"SHUTTER_CONTACT_TRANSCEIVER"===t||"SHUTTER_CONTACT"===t?1:0;});if(t.startsWith("HMIP-MOD-OC")){var _t27=parseInt(e.hsstype.substr(11),10),_a10=[];for(var _e21=1;_e21<=_t27;_e21++){_a10.push(_e21);}var _n12=this._resolveHmIPDeviceFromScript(e,function(e,t){return"MAINTENANCE"===t?1:"KEY_TRANSCEIVER"===t?3:0;}),_r4=this._resolveHmIPMultiSwitch(e,_a10);return _n12?_r4?_n12.concat(_r4):_n12:_r4;}if(t.startsWith("HMIP-FCI"))return this._resolveHmIPDeviceFromScript(e,function(e,t){return"0"===e?1:"MULTI_MODE_INPUT_TRANSMITTER"===t?3:0;});if(t.startsWith("HMIP-PCBS")){var _t28=parseInt(e.hsstype.substr(9),10);if(!isNaN(_t28)){var _a11=[];for(var _e22=1;_e22<=_t28;_e22++){_a11.push(_e22);}var _n13=this._resolveHmIPDeviceFromScript(e,function(e,t){return"MAINTENANCE"===t?1:"KEY_TRANSCEIVER"===t?3:0;}),_r5=this._resolveHmIPMultiSwitch(e,_a11);return _n13?_r5?_n13.concat(_r5):_n13:_r5;}}if(t.startsWith("HMIP-DRSI")){var _t29=parseInt(e.hsstype.substr(9),10),_a12=[];for(var _e23=1;_e23<=_t29;_e23++){_a12.push(_e23);}var _n14=this._resolveHmIPDeviceFromScript(e,function(e,t){return"MAINTENANCE"===t?1:"MULTI_MODE_INPUT_TRANSMITTER"===t?3:0;}),_r6=this._resolveHmIPMultiSwitch(e,_a12);return _n14?_r6?_n14.concat(_r6):_n14:_r6;}if(t.startsWith("HMIP-DRDI")){var _t30=parseInt(e.hsstype.substr(9),10),_a13=[];for(var _e24=1;_e24<=_t30;_e24++){_a13.push(_e24);}var _n15=this._resolveHmIPDeviceFromScript(e,function(e,t){return"MAINTENANCE"===t?1:"MULTI_MODE_INPUT_TRANSMITTER"===t?3:0;}),_r7=this._resolveHmIPMultiDimmer(e,_a13);return _n15?_r7?_n15.concat(_r7):_n15:_r7;}if(t.startsWith("HMIP-DRBLI")){var _t31=parseInt(e.hsstype.substr(10),10),_a14=[];for(var _e25=1;_e25<=2*_t31;_e25++){_a14.push(_e25);}var _n16=this._resolveHmIPDeviceFromScript(e,function(e,t){return"MAINTENANCE"===t?1:"MULTI_MODE_INPUT_TRANSMITTER"===t?3:0;}),_r8=this._resolveHmIPMultiBlind(e,_a14);return _n16?_r8?_n16.concat(_r8):_n16:_r8;}if("HMIP-MIO16-PCB"===t){var _t32=[];for(var _e26=1;_e26<=16;_e26++){_t32.push(_e26);}var _a15=this._resolveHmIPDeviceFromScript(e,function(e,t){return"MAINTENANCE"===t?1:"ANALOG_INPUT_TRANSMITTER"===t||"MULTI_MODE_INPUT_TRANSMITTER"===t?3:0;}),_n17=this._resolveHmIPMultiSwitch(e,_t32);return _a15?_n17?_a15.concat(_n17):_a15:_n17;}if("HMIP-STE2-PCB"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return"MAINTENANCE"===t?1:"COND_SWITCH_TRANSMITTER_TEMPERATURE"===t?2:0;});if("HMIP-DLD"===t)return this._resolveHmIPDeviceFromScript(e,function(e,t){return"MAINTENANCE_BAT_BL"===t||"DOOR_LOCK_STATE_TRANSMITTER"===t?1:"ACCESS_RECEIVER"===t?2:"SWITCH_WEEK_PROFILE"===t?1:0;});if("HMIP-BS2"===t)return this._resolveHmIPMultiSwitch(e);var a=this._getChannelCount(e.channels,"SWITCH_TRANSMITTER"),n=this._getChannelCount(e.channels,"SWITCH_VIRTUAL_RECEIVER");if(this._getChannelCount(e.channels,"KEY_TRANSCEIVER")>1)return this._resolveHmIPDeviceFromScript(e,function(e,t){return"MAINTENANCE"===t?1:"KEY_TRANSCEIVER"===t?3:0;});if(a>1&&n>1)return this._resolveHmIPMultiSwitch(e);var r={};return this._resolveHmIPDeviceFromScript(e,function(e,t){return xnm.aio.hm.HMIP_CHANNEL[t]?(r[t]||(r[t]=e),r[t]!=e?0:1):0;});},_getChannelCount:function _getChannelCount(e,t){var a=0;for(var n in e){if(e.hasOwnProperty(n))e[n].hsstype==t&&a++;}return a;},_parseDeviceBasic:function _parseDeviceBasic(e){var t={sys:"hm"};return t.id=e.name,t.type=e.hsstype,t.address=e.address,t["interface"]=e["interface"],t.channels={},t;},_resolveHmIPMultiSwitch:function _resolveHmIPMultiSwitch(e,t){var a,n,r=[];(n={}).sys="hm",n.id=e.name,n.type=e.hsstype,n.address=e.address,n["interface"]=e["interface"],n.channels={};var s=0,l=JSON.parse(JSON.stringify(n)),o=null,u=e.channels,i=!1;for(var c in u){if(u.hasOwnProperty(c)){if(!(a=e.channels[c]).hsstype)continue;if("SWITCH_TRANSMITTER"==a.hsstype&&(0!=s&&(r.push(l),l=JSON.parse(JSON.stringify(n)),i=!1,o&&(l.channels.MAINTENANCE=o)),s++),!a.address)continue;var m=a.address.indexOf(":");if(-1===m)continue;"SWITCH_VIRTUAL_RECEIVER"!=a.hsstype||i||(l.id=a.name?a.name:l.id,i=!0);var p=a.address.substring(m+1);if(t&&-1!=t.indexOf(parseInt(p)))continue;"SWITCH_TRANSMITTER"==a.hsstype&&(l.address+=":"+p);var f={id:a.name,address:p,room:a.room,group:a.func};if(0==p?(o=f,l.channels.MAINTENANCE=o):l.channels[a.hsstype+":"+p]=f,"SWITCH_WEEK_PROFILE"==a.hsstype){for(var E=0;E<r.length;E++){r[E].channels[a.hsstype+":"+p]=f;}r.push(l);}}}return r;},_resolveHmIPMultiDimmer:function _resolveHmIPMultiDimmer(e,t){var a,n,r=[];(n={}).sys="hm",n.id=e.name,n.type=e.hsstype,n.address=e.address,n["interface"]=e["interface"],n.channels={};var s=0,l=JSON.parse(JSON.stringify(n)),o=null,u=e.channels,i=!1;for(var c in u){if(u.hasOwnProperty(c)){if(!(a=e.channels[c]).hsstype)continue;if("DIMMER_TRANSMITTER"==a.hsstype&&(0!=s&&(r.push(l),l=JSON.parse(JSON.stringify(n)),i=!1,o&&(l.channels.MAINTENANCE=o)),s++),!a.address)continue;var m=a.address.indexOf(":");if(-1===m)continue;"DIMMER_VIRTUAL_RECEIVER"!=a.hsstype||i||(l.id=a.name?a.name:l.id,i=!0);var p=a.address.substring(m+1);if(t&&-1!=t.indexOf(parseInt(p)))continue;"DIMMER_TRANSMITTER"==a.hsstype&&(l.address+=":"+p);var f={id:a.name,address:p,room:a.room,group:a.func};if(0==p?(o=f,l.channels.MAINTENANCE=o):l.channels[a.hsstype+":"+p]=f,"DIMMER_WEEK_PROFILE"==a.hsstype){for(var E=0;E<r.length;E++){r[E].channels[a.hsstype+":"+p]=f;}r.push(l);}}}return r;},_resolveHmIPMultiBlind:function _resolveHmIPMultiBlind(e,t){var a,n,r=[];(n={}).sys="hm",n.id=e.name,n.type=e.hsstype,n.address=e.address,n["interface"]=e["interface"],n.channels={};var s=0,l=JSON.parse(JSON.stringify(n)),o=null,u=e.channels,i=!1;for(var c in u){if(u.hasOwnProperty(c)){if(!(a=e.channels[c]).hsstype)continue;if("BLIND_TRANSMITTER"==a.hsstype&&(0!=s&&(r.push(l),l=JSON.parse(JSON.stringify(n)),i=!1,o&&(l.channels.MAINTENANCE=o)),s++),!a.address)continue;var m=a.address.indexOf(":");if(-1===m)continue;"BLIND_VIRTUAL_RECEIVER"!=a.hsstype||i||(l.id=a.name?a.name:l.id,i=!0);var p=a.address.substring(m+1);if(t&&-1!=t.indexOf(parseInt(p)))continue;"BLIND_TRANSMITTER"==a.hsstype&&(l.address+=":"+p);var f={id:a.name,address:p,room:a.room,group:a.func};if(0==p?(o=f,l.channels.MAINTENANCE=o):l.channels[a.hsstype+":"+p]=f,"BLIND_WEEK_PROFILE"==a.hsstype){for(var E=0;E<r.length;E++){r[E].channels[a.hsstype+":"+p]=f;}r.push(l);}}}return r;},_resolveHmIPDeviceFromScript:function _resolveHmIPDeviceFromScript(e,t){var a=[],n={sys:"hm"};n.id=e.name,n.type=e.hsstype,n.address=e.address,n["interface"]=e["interface"],n.channels={};var r=e.channels,s=!1;for(var l in r){if(channel=e.channels[l],channel.address){var o=channel.address.indexOf(":");if(-1!==o){var u=channel.address.substring(o+1),i=channel.hsstype;if(channel.hsstype){var c=1;if(t&&(c=t(u,i)),0!=c)if(3!=c)s=!0,2==c&&(i=i+":"+u),n.channels[i]={id:channel.name,address:u,room:channel.room,group:channel.func};else{var m=JSON.parse(JSON.stringify(n));m.address=m.address+":"+u,m.id=m.id+"("+m.address+")",m.channels[i]={id:channel.name,address:u,room:channel.room,group:channel.func},a.push(m);}}}}}return s&&a.push(n),a;}};}(),xnm.aio.hm.VirtualDevice=function(){var e={"VIR-LG-ONOFF-CH":{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null;switch(n.value){case"onoffChOn":r="LEVEL",s="if(o!=null){o.State(0.9);}\n";break;case"onoffChOff":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"onoffChToggle":r="LEVEL",s="if(o!=null){if(o.Value()>0.0){o.State(0.0);}else{o.State(0.9);}}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"onoffChState":case"onoffChLevel":r="LEVEL";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"onoffChState"===t.value?parseFloat(e)?"on":"off":"?";},resolveState:function resolveState(e,t,a){var n;return"LEVEL"===t.datapoint&&(n="onoffChState"),n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},"VIR-LG-RGBW-DIM-CH":{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"rgbwChOn":r="LEVEL",s="if(o!=null){o.State(1.0);}\n";break;case"rgbwChOff":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"rgbwChUp":l=null==n.ext||void 0===n.ext?.1:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.1,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"rgbwChLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+"+l+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+"+l+";if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"rgbwChDown":l=null==n.ext||void 0===n.ext?.1:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.1,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"rgbwChLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-"+l+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-"+l+";if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"rgbwChLvlTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;case"rgbwChRgbwTo":if(null==n.ext||void 0===n.ext)return null;if((l=n.ext).length<8)return null;r="RGBW",s='if(o!=null){o.State("rgb('+parseInt(l.substr(0,2),16)+","+parseInt(l.substr(2,2),16)+","+parseInt(l.substr(4,2),16)+","+parseInt(l.substr(6,2),16)+')");}\n';break;case"rgbwChCtTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="WHITE",s="if(o!=null){o.State("+l+");}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"rgbwChLevel":r="LEVEL";break;case"rgbwChRgbw":r="RGBW";break;case"rgbwChCt":r="WHITE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"rgbwChLevel":return parseFloat(e);case"rgbwChRgbw":return e;case"rgbwChCt":return parseInt(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="rgbwChLevel";break;case"RGBW":n="rgbwChRgbw";break;case"WHITE":n="rgbwChCt";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},"VIR-LG-DIM-CH":{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"dimChOn":r="LEVEL",s="if(o!=null){o.State(1.0);}\n";break;case"dimChOff":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"dimChUp":l=null==n.ext||void 0===n.ext?.1:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.1,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"rgbwChLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+"+l+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+"+l+";if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"dimChDown":l=null==n.ext||void 0===n.ext?.1:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.1,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"rgbwChLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-"+l+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-"+l+";if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"dimChLvlTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;return"dimChLevel"!==n.value?null:(r="LEVEL",xnm.aio.hm.Channel.buildStateScript(t,a,r));},handleStatusResponse:function handleStatusResponse(e,t){return"?"==e?e:"dimChLevel"===t.value?parseFloat(e):"?";},resolveState:function resolveState(e,t,a){var n;return"LEVEL"===t.datapoint&&(n="dimChLevel"),n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},"VIR-LG-RGB-DIM-CH":{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"rgbChOn":r="LEVEL",s="if(o!=null){o.State(1.0);}\n";break;case"rgbChOff":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"rgbChUp":l=null==n.ext||void 0===n.ext?.1:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.1,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"rgbChLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+"+l+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+"+l+";if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"rgbChDown":l=null==n.ext||void 0===n.ext?.1:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.1,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"rgbChLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-"+l+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-"+l+";if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"rgbChLvlTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;case"rgbChRgbTo":if(null==n.ext||void 0===n.ext)return null;if((l=n.ext).length<6)return null;r="RGBW",s='if(o!=null){o.State("rgb('+parseInt(l.substr(0,2),16)+","+parseInt(l.substr(2,2),16)+","+parseInt(l.substr(4,2),16)+')");}\n';break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"rgbChLevel":r="LEVEL";break;case"rgbChRgb":r="RGB";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"rgbChLevel":return parseFloat(e);case"rgbChRgb":return e;default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="rgbChLevel";break;case"RGB":n="rgbChRgb";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}},"VIR-LG-WHITE-DIM-CH":{buildCommandScript:function buildCommandScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null,s=null,l=null,o=null;switch(n.value){case"dimChOn":r="LEVEL",s="if(o!=null){o.State(1.0);}\n";break;case"dimChOff":r="LEVEL",s="if(o!=null){o.State(0.0);}\n";break;case"dimChUp":l=null==n.ext||void 0===n.ext?.1:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.1,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"rgbwChLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()+"+l+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"+"+l+";if(v>1){v=1.0;}o.State(v);}\n",r="LEVEL";break;case"dimChDown":l=null==n.ext||void 0===n.ext?.1:"number"==typeof n.ext||n.ext.match(/^[-+]?[0-9]+$/)?(parseInt(n.ext)/100).toFixed(2):.1,e._statebuffer&&(o=this.getBufferedState(e._statebuffer,t,a,{value:"rgbwChLevel"})),s=null==o||void 0===o?"if(o!=null){var v=o.Value()-"+l+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+(o/=100)+"-"+l+";if(v<0){v=0.0;}o.State(v);}\n",r="LEVEL";break;case"dimChLvlTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="LEVEL",s="if(o!=null){o.State("+(l=(l=(l/=100)<0?0:l)>1?1:l)+");}\n";break;case"dimChCtTo":if(null==n.ext||void 0===n.ext)return null;if("number"==typeof n.ext)l=parseInt(n.ext);else{if(!n.ext.match(/^[-+]?[0-9]+$/))return null;l=n.ext;}r="WHITE",s="if(o!=null){o.State("+l+");}\n";break;default:return null;}return xnm.aio.hm.Channel.buildCommandScript(t,a,r,s);},buildStateScript:function buildStateScript(e,t,a,n){if(!t.channels)return null;if(!n.value)return null;var r=null;switch(n.value){case"dimChLevel":r="LEVEL";break;case"dimChCt":r="WHITE";break;default:return null;}return xnm.aio.hm.Channel.buildStateScript(t,a,r);},handleStatusResponse:function handleStatusResponse(e,t){if("?"==e)return e;switch(t.value){case"dimChLevel":return parseFloat(e);case"dimChCt":return parseInt(e);default:return"?";}},resolveState:function resolveState(e,t,a){var n;switch(t.datapoint){case"LEVEL":n="dimChLevel";break;case"WHITE":n="dimChCt";}return n?{key:n,value:this.handleStatusResponse(a+"",{value:n})}:null;}}},VIR_LG_ONOFF=function VIR_LG_ONOFF(){};VIR_LG_ONOFF.prototype.executeCommand=function(t,a,n,r){if(n){var s=null;switch(n.value){case"onoffChOn":s=e["VIR-LG-ONOFF-CH"].buildCommandScript(t,a,{address:1},{value:"onoffChOn"});break;case"onoffChOff":s=e["VIR-LG-ONOFF-CH"].buildCommandScript(t,a,{address:1},{value:"onoffChOff"});break;case"onoffChToggle":s=e["VIR-LG-ONOFF-CH"].buildCommandScript(t,a,{address:1},{value:"onoffChToggle"});}s?t._doRequestMarked(s,!0,{execute:function execute(e,a){"onoffChOn"!=n.value||e?setTimeout(function(){r&&r(e);},200):setTimeout(function(){t._doRequestMarked(s,!0,{execute:function execute(e,t){r&&r(e);}});},3e3);}}):r&&r(new Error("invalid command"));}else r&&r(new Error("command is null"));},VIR_LG_ONOFF.prototype.buildStateScript=function(t,a,n){if(!n)return null;var r=null;if("onoffChState"===n.value)r=e["VIR-LG-ONOFF-CH"].buildStateScript(t,a,{address:1},n);return r;},VIR_LG_ONOFF.prototype.handleStatusResponse=function(t,a){return"?"==t?t:"onoffChState"===a.value?e["VIR-LG-ONOFF-CH"].handleStatusResponse(t,a):"?";},VIR_LG_ONOFF.prototype.resolveState=function(t,a,n){if(!a||!a.channel)return null;var r=a.channel.indexOf(":");if(-1==r)return null;var s=null;if("1"===a.channel.substr(r+1))s=e["VIR-LG-ONOFF-CH"].resolveState(t,a,n);return s;};var VIR_LG_RGBW_DIM=function VIR_LG_RGBW_DIM(){};VIR_LG_RGBW_DIM.prototype.executeCommand=function(t,a,n,r){if(n){var s=e["VIR-LG-RGBW-DIM-CH"].buildCommandScript(t,a,{address:1},n);s?t._doRequestMarked(s,!0,{execute:function execute(e,t){setTimeout(function(){r&&r(e);},200);}}):r&&r(new Error("invalid command"));}else r&&r(new Error("command is null"));},VIR_LG_RGBW_DIM.prototype.buildStateScript=function(t,a,n){return n?e["VIR-LG-RGBW-DIM-CH"].buildStateScript(t,a,{address:1},n):null;},VIR_LG_RGBW_DIM.prototype.handleStatusResponse=function(t,a){return"?"==t?t:e["VIR-LG-RGBW-DIM-CH"].handleStatusResponse(t,a);},VIR_LG_RGBW_DIM.prototype.resolveState=function(t,a,n){if(!a||!a.channel)return null;var r=a.channel.indexOf(":");if(-1==r)return null;var s=null;if("1"===a.channel.substr(r+1))s=e["VIR-LG-RGBW-DIM-CH"].resolveState(t,a,n);return s;};var VIR_LG_DIM=function VIR_LG_DIM(){};VIR_LG_DIM.prototype.executeCommand=function(t,a,n,r){if(n){var s=e["VIR-LG-DIM-CH"].buildCommandScript(t,a,{address:1},n);s?t._doRequestMarked(s,!0,{execute:function execute(e,t){setTimeout(function(){r&&r(e);},200);}}):r&&r(new Error("invalid command"));}else r&&r(new Error("command is null"));},VIR_LG_DIM.prototype.buildStateScript=function(t,a,n){return n?e["VIR-LG-DIM-CH"].buildStateScript(t,a,{address:1},n):null;},VIR_LG_DIM.prototype.handleStatusResponse=function(t,a){return"?"==t?t:e["VIR-LG-DIM-CH"].handleStatusResponse(t,a);},VIR_LG_DIM.prototype.resolveState=function(t,a,n){if(!a||!a.channel)return null;var r=a.channel.indexOf(":");if(-1==r)return null;var s=null;if("1"===a.channel.substr(r+1))s=e["VIR-LG-DIM-CH"].resolveState(t,a,n);return s;};var VIR_LG_RGB_DIM=function VIR_LG_RGB_DIM(){};VIR_LG_RGB_DIM.prototype.executeCommand=function(t,a,n,r){if(n){var s=e["VIR-LG-RGB-DIM-CH"].buildCommandScript(t,a,{address:1},n);s?t._doRequestMarked(s,!0,{execute:function execute(e,t){setTimeout(function(){r&&r(e);},200);}}):r&&r(new Error("invalid command"));}else r&&r(new Error("command is null"));},VIR_LG_RGB_DIM.prototype.buildStateScript=function(t,a,n){return n?e["VIR-LG-RGB-DIM-CH"].buildStateScript(t,a,{address:1},n):null;},VIR_LG_RGB_DIM.prototype.handleStatusResponse=function(t,a){return"?"==t?t:e["VIR-LG-RGB-DIM-CH"].handleStatusResponse(t,a);},VIR_LG_RGB_DIM.prototype.resolveState=function(t,a,n){if(!a||!a.channel)return null;var r=a.channel.indexOf(":");if(-1==r)return null;var s=null;if("1"===a.channel.substr(r+1))s=e["VIR-LG-RGB-DIM-CH"].resolveState(t,a,n);return s;};var VIR_LG_WHITE_DIM=function VIR_LG_WHITE_DIM(){};VIR_LG_WHITE_DIM.prototype.executeCommand=function(t,a,n,r){if(n){var s=e["VIR-LG-WHITE-DIM-CH"].buildCommandScript(t,a,{address:1},n);s?t._doRequestMarked(s,!0,{execute:function execute(e,t){setTimeout(function(){r&&r(e);},200);}}):r&&r(new Error("invalid command"));}else r&&r(new Error("command is null"));},VIR_LG_WHITE_DIM.prototype.buildStateScript=function(t,a,n){return n?e["VIR-LG-WHITE-DIM-CH"].buildStateScript(t,a,{address:1},n):null;},VIR_LG_WHITE_DIM.prototype.handleStatusResponse=function(t,a){return"?"==t?t:e["VIR-LG-WHITE-DIM-CH"].handleStatusResponse(t,a);},VIR_LG_WHITE_DIM.prototype.resolveState=function(t,a,n){if(!a||!a.channel)return null;var r=a.channel.indexOf(":");if(-1==r)return null;var s=null;if("1"===a.channel.substr(r+1))s=e["VIR-LG-WHITE-DIM-CH"].resolveState(t,a,n);return s;};var t={"VIR-LG-ONOFF":VIR_LG_ONOFF,"VIR-LG-RGBW-DIM":VIR_LG_RGBW_DIM,"VIR-LG-DIM":VIR_LG_DIM,"VIR-LG-RGB-DIM":VIR_LG_RGB_DIM,"VIR-LG-WHITE-DIM":VIR_LG_WHITE_DIM,parseDevice:function parseDevice(e){var t={sys:"hm"};t.id=e.name,t.type=e.hsstype,t.address=e.address,t["interface"]=e["interface"],t.channels={};var a=e.channels;for(var n in a){if(a.hasOwnProperty(n)){var r=e.channels[n];if(!r.address)continue;var s=r.address.indexOf(":");if(-1===s)continue;var l=r.address.substring(s+1);if(!r.hsstype)continue;var o=r.hsstype;t.channels[o]={id:r.name,address:l,room:r.room,group:r.func};}}return[t];}};return t;}(),xnm.aio.hm.VirtualDevice_MAP={"VIR-LG-ONOFF-CH":{LEVEL:{command:[{type:"enum",name:"on",ref:{value:"onoffChOn"}},{type:"enum",name:"off",ref:{value:"onoffChOff"}}]}},"VIR-LG-RGBW-DIM-CH":{LEVEL:{command:[{type:"enum",name:"on",ref:{value:"rgbwChOn"}},{type:"enum",name:"off",ref:{value:"rgbwChOff"}},{type:"int",name:"dim to",ref:{value:"rgbwChLvlTo",ext:"%d",extMeta:"0-100"}}]},RGBW:{command:[{type:"rgbw",name:"set rgbw",ref:{value:"rgbwChRgbwTo",ext:"%s"}}]},WHITE:{command:[{type:"int",name:"set color temperature",ref:{value:"rgbwChCtTo",ext:"%d",extMeta:"2000-6500",scale:"50"}}]}},"VIR-LG-DIM-CH":{LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dimChOn"}},{type:"enum",name:"off",ref:{value:"dimChOff"}},{type:"int",name:"dim to",ref:{value:"dimChLvlTo",ext:"%d",extMeta:"0-100"}}]}},"VIR-LG-RGB-DIM-CH":{LEVEL:{command:[{type:"enum",name:"on",ref:{value:"rgbChOn"}},{type:"enum",name:"off",ref:{value:"rgbChOff"}},{type:"int",name:"dim to",ref:{value:"rgbChLvlTo",ext:"%d",extMeta:"0-100"}}]},RGB:{command:[{type:"rgb",name:"set rgb",ref:{value:"rgbChRgbTo",ext:"%s"}}]}},"VIR-LG-WHITE-DIM-CH":{LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dimChOn"}},{type:"enum",name:"off",ref:{value:"dimChOff"}},{type:"int",name:"dim to",ref:{value:"dimChLvlTo",ext:"%d",extMeta:"0-100"}}]},WHITE:{command:[{type:"int",name:"set color temperature",ref:{value:"dimChCtTo",ext:"%d",extMeta:"2200-6500",scale:"50"}}]}}},xnm.aio.hm.DMError=function(e,t){this.code=e,this.message=t,this.stack=new Error().stack;},xnm.aio.hm.DMError.prototype=new Error(),xnm.aio.hm.DMError.prototype.name="HomeMaticDeviceManagerError",xnm.aio.hm.DMError.prototype.code=0,xnm.aio.hm.DMError.ERROR_CODE={DEFAULT:0,INDEX_EXISTS:1,ID_EXISTS:2,INVALID:3,UNKNOW:4,NOT_FOUND:5,IP_EXISTS:6},xnm.aio.hm.DM={SYS:"hm",SYSVAR:"SysVar",PROG:"Prog",getGatewayType:function getGatewayType(){return[{sys:this.SYS,name:"HomeMatic CCU"}];},createGateway:function createGateway(e,t,a){var n=xnm.aio.hm.DMError,r=xnm.aio.hm.DMError.ERROR_CODE;e?e.ip?a(null,e):a(new n(r.INVALID,"ip is invalid")):a(new n(r.INVALID,"info is invalid"));},updateGateway:function updateGateway(e,t,a,n){var r=xnm.aio.hm.DMError,s=xnm.aio.hm.DMError.ERROR_CODE;t?t.ip?n(null,t):n(new r(s.INVALID,"ip is invalid")):n(new r(s.INVALID,"update is invalid"));},deleteGateway:function deleteGateway(e,t,a){a();},createDevice:function createDevice(e,t,a){var n=xnm.aio.hm.DMError,r=xnm.aio.hm.DMError.ERROR_CODE;if(e){if(e.gateway){if(e["interface"]){if(e.address){if(e.type){if("SysVar"==e.type||"Prog"==e.type||e.channels){if(t.data&&t.data.gateways&&0!==t.data.gateways.length){var s,l,o=t.data.gateways;for(s=0;s<o.length;s++){if(o[s].index===e.gateway){l=o[s];break;}}l?a(null,e):a(new n(r.NOT_FOUND,"gateway with index "+e.gateway+" not exists"));}else a(new n(r.NOT_FOUND,"gateway with index "+e.gateway+" not exists"));}else a(new n(r.INVALID,"channels is invalid"));}else a(new n(r.INVALID,"type is invalid"));}else a(new n(r.INVALID,"address is invalid"));}else a(new n(r.INVALID,"interface is invalid"));}else a(new n(r.INVALID,"gateway is invalid"));}else a(new n(r.INVALID,"info is invalid"));},updateDevice:function updateDevice(e,t,a){var n=xnm.aio.hm.DMError,r=xnm.aio.hm.DMError.ERROR_CODE;if(e){if(e.address){if(e["interface"]){if(e.type){if("SysVar"==e.type||"Prog"==e.type||e.channels){if(e.gateway){var s,l,o=t.data.gateways;for(s=0;s<o.length;s++){if(o[s].index===e.gateway){l=o[s];break;}}l?a(null,e):a(new n(r.NOT_FOUND,"gateway with index "+e.gateway+" not exists"));}else a(new n(r.INVALID,"gateway is invalid"));}else a(new n(r.INVALID,"channels is invalid"));}else a(new n(r.INVALID,"type is invalid"));}else a(new n(r.INVALID,"interface is invalid"));}else a(new n(r.INVALID,"address is invalid"));}else a(new n(r.INVALID,"info is invalid"));},deleteDevice:function deleteDevice(e,t,a){a();},_getChannels:function _getChannels(e){var t={},a=null==xnm.aio.hm.TYPE[e.type],n=a?e.channels:xnm.aio.hm.CATAGORY[xnm.aio.hm.TYPE[e.type]].channels;for(var r in n){if(n.hasOwnProperty(r)){var s=a?0:n[r];xnm.aio.hm.CHANNEL[r]&&xnm.aio.hm.CHANNEL[r].datapoints[s]&&(t[r]=xnm.aio.hm.CHANNEL[r].datapoints[s]);}}return t;},_getHmIPChannels:function _getHmIPChannels(e){var t={},a=null==xnm.aio.hm.HMIP_TYPE[e.type],n=a?e.channels:xnm.aio.hm.HMIP_CATAGORY[xnm.aio.hm.HMIP_TYPE[e.type]].channels;for(var r in n){if(n.hasOwnProperty(r)){var s=a?0:n[r];xnm.aio.hm.HMIP_CHANNEL[r]&&xnm.aio.hm.HMIP_CHANNEL[r].datapoints[s]&&(t[r]=xnm.aio.hm.HMIP_CHANNEL[r].datapoints[s]);}}return t.KEY_TRANSCEIVER&&delete t.KEY_TRANSCEIVER,t;},_getCUxDChannels:function _getCUxDChannels(e){var t={};e.cuxd||(e.cuxd=xnm.aio.hm.MHMCCU._resolveCUxDType(e));var a=!e.cuxd,n=e.channels;for(var r in n){if(n.hasOwnProperty(r)){var s=a?0:xnm.aio.hm.CUxDTYPE[e.cuxd][r];xnm.aio.hm.CUxDCHANNEL[r]&&xnm.aio.hm.CUxDCHANNEL[r].datapoints[s]?t[r]=xnm.aio.hm.CUxDCHANNEL[r].datapoints[s]:xnm.aio.hm.CHANNEL[r]&&xnm.aio.hm.CHANNEL[r].datapoints[s]&&(s=0,t[r]=xnm.aio.hm.CHANNEL[r].datapoints[s]);}}return t;},applyUIFilter:function applyUIFilter(e,t){var a=this,_contains=function _contains(e,t){if("*"==e)return!0;for(var a=!1,n=0;n<e.length;n++){if(e[n]==t){a=!0;break;}}return a;},_filter=function _filter(e,t){switch(e.type){case"SysVar":return _filterSysvar(e,t);case"Prog":return _filterProg(e,t);default:return _filterDevice(e,t);}},_filterProg=function _filterProg(e,t){var a=[],n=t.elems;if("command"===t.catagory){[{type:"enum",name:"execute",ref:{value:"progExec"}}].forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});}return a;},_filterSysvar=function _filterSysvar(e,t){var a=[],n=t.elems;if(e["class"]){var r=xnm.aio.hm.MAP.SysVar[e["class"]];if(r)switch(t.catagory){case"command":r.command&&r.command.forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});break;case"status":r.status&&r.status.forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});}}return a;},_doFilter=function _doFilter(e,a,n,r,s){var l=[],o=e[a][n];if(o)switch(t.catagory){case"command":o.command&&r.access&&-1!=r.access.indexOf("w")&&o.command.forEach(function(e){if(_contains(s,e.type)){var t=JSON.parse(JSON.stringify(e));l.push(t);}});break;case"status":o.status&&r.access&&-1!=r.access.indexOf("r")&&o.status.forEach(function(e){if(_contains(s,e.type)){var t=JSON.parse(JSON.stringify(e));l.push(t);}});}return l;},_doFilterMap=function _doFilterMap(e,t){var a=[],n=t.elems;switch(t.catagory){case"command":e.command&&e.command.forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});break;case"status":e.status&&e.status.forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});}return a;},_filterHmIPDevice=function _filterHmIPDevice(e,t){if(e){var a=xnm.aio.hm.HmIPDevice.resolveJSON(e);if(a&&a.getCommandStatusMap){var n=a.getCommandStatusMap(e);if(n)return _doFilterMap(n,t);}}var r,s=[],l=e.channels,o=xnm.aio.hm.DM._getHmIPChannels(e),u=t.elems;for(var i in l){if(l.hasOwnProperty(i)){var c=o[i];if(c)for(var m in c){c.hasOwnProperty(m)&&xnm.aio.hm.HMIP_MAP[i]&&(r=_doFilter(xnm.aio.hm.HMIP_MAP,i,m,c[m],u),s=s.concat(r));}}}return s;},_filterDevice=function _filterDevice(e,t){if("HmIP-HEATING"==e.type)return _filterHmIPDevice(e,t);if(e["interface"]&&"CUxD"==e["interface"])return function(e,t){var a,n=[];e.cuxd||(e.cuxd=xnm.aio.hm.MHMCCU._resolveCUxDType(e));var r=e.channels,s=xnm.aio.hm.DM._getCUxDChannels(e),l=t.elems;for(var o in r){if(r.hasOwnProperty(o)){var u=s[o];if(u)for(var i in u){u.hasOwnProperty(i)&&("FHT_Multiventil"==e.cuxd&&"DIMMER"==o?o="FHT_Multiventil_Dimmer":"HMS_100_Contact"==e.cuxd&&"SENSOR"==o?o="HMS_100_Contact":"FHT_Contact"==e.cuxd&&"SENSOR"==o?o="FHT_Contact":("Security_Sensor"==e.cuxd&&"SENSOR"==o||"HMS_100_W/WD"==e.cuxd&&"SENSOR"==o)&&(o="Security_Sensor"),xnm.aio.hm.CUxDMAP[o]?(a=_doFilter(xnm.aio.hm.CUxDMAP,o,i,u[i],l),n=n.concat(a)):xnm.aio.hm.MAP[o]&&(a=_doFilter(xnm.aio.hm.MAP,o,i,u[i],l),n=n.concat(a)));}}}return n;}(e,t);if(e["interface"]&&"HmIP-RF"==e["interface"])return _filterHmIPDevice(e,t);if(e["interface"]&&"BidCos-RF"==e["interface"]&&e.type&&xnm.aio.hm.BidCosDevice[e.type]){var n=xnm.aio.hm.BidCosDevice[e.type];if(n&&n.getCommandStatusMap){var _a16=n.getCommandStatusMap(e);if(_a16)return _doFilterMap(_a16,t);}}if(e["interface"]&&"VirtualDevices"==e["interface"]&&-1==e.type.indexOf("HM-CC-VG")){var _n18=a._getVirtualDevicesMap(e);if(_n18)return _doFilterMap(_n18,t);}if("DimmerKey"==e.type)return function(e,t){var a=[],n=t.elems;"command"===t.catagory&&[{type:"int",name:"dim to",ref:{value:"dimRaw",ext:"%d",extMeta:"0-100",scale:"10"}}].forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});return a;}(0,t);if("HM-Sec-Sir-WM"==e.type)return function(e,t){var a=[],n=t.elems,r=xnm.aio.hm.HM_Sec_Sir_WM_MAP;switch(t.catagory){case"command":r.command.forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});break;case"status":r.status.forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});}return a;}(0,t);if("HM-WDS30-OT2-SM-2"==e.type)return function(e,t){var a=[],n=t.elems,r=xnm.aio.hm.HM_WDS30_OT2_SM_2_MAP;switch(t.catagory){case"command":break;case"status":r.status.forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});}return a;}(0,t);if("HM-ES-TX-WM"==e.type&&e.channels&&e.channels.POWERMETER_IEC1)return function(e,t){var a=[],n=t.elems,r=xnm.aio.hm.HM_ES_TX_WM_MAP;switch(t.catagory){case"command":break;case"status":r.status.forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});}return a;}(0,t);var r,s=[],l=e.channels,o=xnm.aio.hm.DM._getChannels(e),u=t.elems;for(var i in l){if(l.hasOwnProperty(i)){var c=o[i];if(c)for(var m in c){c.hasOwnProperty(m)&&xnm.aio.hm.MAP[i]&&(r=_doFilter(xnm.aio.hm.MAP,i,m,c[m],u),s=s.concat(r));}}}return s;};if(!e.type)return null;var n=JSON.parse(JSON.stringify(e)),r=null;switch(t.catagory){case"command":r=_filter(e,t),n.command=r;break;case"status":r=_filter(e,t),n.status=r;break;default:return null;}return r&&0!=r.length?n:null;},applyUIFilterGateway:function applyUIFilterGateway(e,t){var _contains=function _contains(e,t){if("*"==e)return!0;for(var a=!1,n=0;n<e.length;n++){if(e[n]==t){a=!0;break;}}return a;},_filter=function _filter(e,t){var a=[],n=t.elems,r=xnm.aio.hm.MAP.CCU;if(r)switch(t.catagory){case"command":r.command&&r.command.forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});break;case"status":r.status&&r.status.forEach(function(e){if(_contains(n,e.type)){var t=JSON.parse(JSON.stringify(e));a.push(t);}});}return a;},a=JSON.parse(JSON.stringify(e)),n=null;switch(t.catagory){case"command":n=_filter(0,t),a.command=n;break;case"status":n=_filter(0,t),a.status=n;break;default:return null;}return n&&0!=n.length?a:null;},applyIPEventFilter:function applyIPEventFilter(e){if(!e||"SysVar"==e.type)return null;if("HM-MOD-EM-8Bit"==e.type)return(t={}).ipevt=xnm.aio.hm.HM_MOD_EM_8BIT_MAP.ipevt,t;if("VirtualDevices"==e["interface"])return null;var t;if("HmIP-RF"==e["interface"]&&e.type){var a=xnm.aio.hm.HmIPDevice.resolveJSON(e);if(a&&a.getIPEvtMap){var n=a.getIPEvtMap(e);if(n&&n.ipevt)return{ipevt:n.ipevt};}}return t=xnm.aio.hm.DM.applyUIFilter(e,{catagory:"status",elems:"*"}),"HmIP-RF"==e["interface"]&&e.type&&e.channels&&e.channels.KEY_TRANSCEIVER&&(t||(t={}),t.ipevt||(t.ipevt=[]),t.ipevt.push({type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}}),t.ipevt.push({type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}})),"BidCos-Wired"==e["interface"]&&e.channels&&(e.channels.KEY||e.channels.VIRTUAL_KEY)&&(t||(t={}),t.ipevt||(t.ipevt=[]),t.ipevt.push({type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}}),t.ipevt.push({type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}})),"BidCos-RF"==e["interface"]&&e.channels&&(e.channels.KEY||e.channels.VIRTUAL_KEY)&&(t||(t={}),t.ipevt||(t.ipevt=[]),t.ipevt.push({type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}}),t.ipevt.push({type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}})),t?(t.ipevt||(t.ipevt=[]),t.status&&(t.ipevt=t.ipevt.concat(t.status),delete t.status),t):null;},_insertIntoArray:function _insertIntoArray(e,t){for(var a=-1,n=0;n<t.length;n++){if(t[n].index>e.index){a=n;break;}}-1===a?t.push(e):t.splice(a,0,e);},_getVirtualDevicesMap:function _getVirtualDevicesMap(e){if(!e||!e.channels)return null;var t={command:[],status:[]};for(var a in e.channels){var n=xnm.aio.hm.VirtualDevice_MAP[a];if(n)for(var r in n){var s=n[r];s&&s.command&&(t.command=t.command.concat(s.command)),s&&s.status&&(t.status=t.status.concat(s.status));}}return t;},supportSmartWidget:function supportSmartWidget(e){if(!e||"Prog"==e.type||"Sysvar"==e.type)return!1;var t=e.channels;if(!t)return!1;var a={};for(var n in t){if(t.hasOwnProperty(n)){var r=n,s=r.indexOf(":");-1!=s&&(r=r.substr(0,s)),a[r]=!0;}}return"BidCos-RF"==e["interface"]?!!(a.BLIND||a.CLIMATECONTROL_REGULATOR||a.CLIMATECONTROL_RT_TRANSCEIVER||a.DIMMER||a.JALOUSIE||a.KEYMATIC||a.LUXMETER||a.MOTION_DETECTOR||a.POWERMETER||a.RGBW_COLOR||a.ROTARY_HANDLE_SENSOR||a.SENSOR_FOR_CARBON_DIOXIDE||a.SHUTTER_CONTACT||a.SMOKE_DETECTOR||a.SMOKE_DETECTOR_TEAM||a.SMOKE_DETECTOR_TEAM_V2||a.SWITCH||a.THERMALCONTROL_TRANSMIT||a.VIRTUAL_DIMMER||a.WATERDETECTIONSENSOR||a.WEATHER||a.WINMATIC):e["interface"]&&"HMIP-RF"==e["interface"].toUpperCase()?!!(a.ACCELERATION_TRANSCEIVER||a.ANALOG_OUTPUT_TRANSCEIVER||a.BLIND_VIRTUAL_RECEIVER||a.BRIGHTNESS_TRANSMITTER||a.CLIMATE_TRANSCEIVER||a.COND_SWITCH_TRANSMITTER_TEMPERATURE||a.DIMMER_VIRTUAL_RECEIVER||a.DOOR_LOCK_STATE_TRANSMITTER||a.ENERGIE_METER_TRANSMITTER||a.HEATING_CLIMATECONTROL_TRANSCEIVER||a.MOTIONDETECTOR_TRANSCEIVER||a.PRESENCEDETECTOR_TRANSCEIVER||a.RAIN_DETECTION_TRANSMITTER||a.ROTARY_HANDLE_TRANSCEIVER||a.SHUTTER_CONTACT||a.SHUTTER_CONTACT_TRANSCEIVER||a.SHUTTER_VIRTUAL_RECEIVER||a.SMOKE_DETECTOR||a.SWITCH_VIRTUAL_RECEIVER||a.WEATHER_TRANSMIT):"BidCos-Wired"==e["interface"]&&!!(a.DIGITAL_OUTPUT||a.DIGITAL_ANALOG_OUTPUT||a.SWITCH||a.DIMMER||a.BLIND);},applySmartWidgetFilter:function applySmartWidgetFilter(e,t,a){return e&&e["interface"]&&"Prog"!==e.type&&"Sysvar"!==e.type?"BidCos-RF"===e["interface"]||"BidCos-Wired"===e["interface"]?this._applySmartWidget_BidCos(e,t,a):"HMIP-RF"===String(e["interface"]).toUpperCase()?this._applySmartWidget_HmIP(e,t,a):null:null;},_applySmartWidget_BidCos:function _applySmartWidget_BidCos(e,t,a,n,r){if(!e.channels)return null;var s,l,o,u,i={};for(var c in e.channels){if(e.channels.hasOwnProperty(c)){var m=c,p=m.indexOf(":");-1!=p&&(m=m.substr(0,p)),i[m]=!0;}}if(i.DIGITAL_OUTPUT&&(s={"%on%":{value:"digOutOn",name:"on"},"%off%":{value:"digOutOff",name:"off"},"%toggle%":{value:"digOutToggle",name:"toggle"}},l={"%switchState%":{value:"digOutState",options:["off","on"],name:"state"}},o=["switch"]),i.DIGITAL_ANALOG_OUTPUT&&(s={"%on%":{value:"daOutOn",name:"on"},"%off%":{value:"daOutOff",name:"off"},"%toggle%":{value:"daOutToggle",name:"toggle"}},l={"%switchState%":{value:"daOutState",options:["off","on"],name:"state"}},o=["switch"]),i.SWITCH&&(s={"%on%":{value:"on",name:"on"},"%off%":{value:"off",name:"off"},"%toggle%":{value:"toggle",name:"toggle"}},l={"%switchState%":{value:"switchState",options:["off","on"],name:"switch status"}},o=["switch"]),(i.DIMMER||i.VIRTUAL_DIMMER)&&(s={"%on%":{value:"dimOn",name:"on"},"%off%":{value:"dimOff",name:"off"},"%dimOn%":{value:"dimOn",name:"on"},"%dimOff%":{value:"dimOff",name:"off"},"%dimUp%":{value:"dimUp",name:"dim up"},"%dimDown%":{value:"dimDown",name:"dim down"},"%dimTo%":{value:"dimRaw",ext:"%d",extMeta:"0-100",name:"dim to"}},l={"%dimmerState%":{value:"dimmerLevel",ext:"%d",extMeta:"0-100",name:"dimmer status"}},o=["switch","dimmer"]),i.BLIND&&(s||(s={}),s["%stop%"]||(s["%stop%"]={value:"blindStop",name:"stop"}),s["%moveUp%"]||(s["%moveUp%"]={value:"blindUp",name:"move up"}),s["%moveDown%"]||(s["%moveDown%"]={value:"blindDown",name:"move down"}),s["%stepUp%"]||(s["%stepUp%"]={value:"blindStepUp",name:"step up"}),s["%stepDown%"]||(s["%stepDown%"]={value:"blindStepDown",name:"step down"}),s["%moveTo%"]||(s["%moveTo%"]={value:"blindRaw",ext:"%d",extMeta:"0-100",name:"move to"}),l={"%shutterState%":{value:"blindLevel",ext:"%d",extMeta:"0-100",name:"blind status"}},o=["shutter"]),i.JALOUSIE&&(s||(s={}),s["%stop%"]||(s["%stop%"]={value:"jalStop",name:"stop"}),s["%moveUp%"]||(s["%moveUp%"]={value:"jalUp",name:"move up"}),s["%moveDown%"]||(s["%moveDown%"]={value:"jalDown",name:"move down"}),s["%stepUp%"]||(s["%stepUp%"]={value:"jalStepUp",name:"step up"}),s["%stepDown%"]||(s["%stepDown%"]={value:"jalStepDown",name:"step down"}),s["%moveTo%"]||(s["%moveTo%"]={value:"jalRaw",ext:"%d",extMeta:"0-100",name:"move to"}),s["%lamellaUp%"]||(s["%lamellaUp%"]={value:"jalLmlUp",name:"lamella up"}),s["%lamellaDown%"]||(s["%lamellaDown%"]={value:"jalLmlDown",name:"lamella down"}),s["%lamellaStepUp%"]||(s["%lamellaStepUp%"]={value:"jalLmlStepUp",name:"lamella step up",ext:10}),s["%lamellaStepDown%"]||(s["%lamellaStepDown%"]={value:"jalLmlStepDown",name:"lamella step down",ext:10}),s["%lamellaTo%"]||(s["%lamellaTo%"]={value:"jalLmlRaw",ext:"%d",extMeta:"0-100",name:"lamella to"}),l={"%blindState%":{value:"jalLevel",ext:"%d",extMeta:"0-100",name:"status"},"%lamellaState%":{value:"jalLmlLevel",ext:"%d",extMeta:"0-100",name:"lamella status"}},o=["shutter","blind"]),i.POWERMETER&&(l||(l={}),l["%meterVoltage%"]||(l["%meterVoltage%"]={value:"meterVoltage",extMeta:"0.0-6553.5",scale:"0.1",unit:"V",name:"voltage"}),l["%meterEnergyCounter%"]||(l["%meterEnergyCounter%"]={value:"meterEnergyCounter",extMeta:"0.0-838860.7",scale:"0.1",unit:"Wh",name:"energy counter"}),l["%meterFrequency%"]||(l["%meterFrequency%"]={value:"meterFrequency",extMeta:"48.72-51.27",scale:"0.01",unit:"Hz",name:"frequency"}),l["%meterPower%"]||(l["%meterPower%"]={value:"meterPower",extMeta:"0.0-167772.15",scale:"0.1",unit:"W",name:"power"}),l["%meterCurrent%"]||(l["%meterCurrent%"]={value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1",unit:"mA",name:"current"}),o||(o=[]),-1==o.indexOf("powermeter")&&o.push("powermeter")),i.CLIMATECONTROL_REGULATOR&&(s||(s={}),s["%thermoTempUp%"]||(s["%thermoTempUp%"]={value:"themoRTempUp",name:"temperature up"}),s["%thermoTempDown%"]||(s["%thermoTempDown%"]={value:"themoRTempDown",name:"temperature down"}),s["%thermoTempTo%"]||(s["%thermoTempTo%"]={value:"themoRTempRaw",ext:"%f",extMeta:"6-30",scale:"0.5",name:"temperature to"}),s["%thermoOn%"]||(s["%thermoOn%"]={value:"themoTempOn",name:"on"}),s["%thermoOff%"]||(s["%thermoOff%"]={value:"themoRTempClose",name:"close"}),l={"%thermoCurrentTemp%":{value:"weatherTemp",name:"temperature"},"%thermoHum%":{value:"weatherHum",name:"humidity"},"%thermoSetTemp%":{value:"themoRSetTemp",extMeta:"6-30",scale:"0.5",name:"set temperature"}},o=["thermostat"]),i.THERMALCONTROL_TRANSMIT&&(s||(s={}),s["%thermoAuto%"]||(s["%thermoAuto%"]={value:"themoTAutoMode",name:"set auto mode"}),s["%thermoManu%"]||(s["%thermoManu%"]={value:"themoTManuMode",ext:"20.0",name:"set manual mode"}),s["%thermoBoost%"]||(s["%thermoBoost%"]={value:"themoTBoostMode",name:"set boost mode"}),s["%thermoTempUp%"]||(s["%thermoTempUp%"]={value:"themoTTempUp",name:"temperature up"}),s["%thermoTempDown%"]||(s["%thermoTempDown%"]={value:"themoTTempDown",name:"temperature down"}),s["%thermoTempTo%"]||(s["%thermoTempTo%"]={value:"themoTTempRaw",ext:"%f",extMeta:"4.5-30.5",scale:"0.5",name:"temperature to"}),s["%thermoOff%"]||(s["%thermoOff%"]={value:"themoTTempOff",name:"off"}),l={"%thermoCurrentTemp%":{value:"themoTActualTemp",name:"actual temperature"},"%thermoHum%":{value:"themoTActualHum",name:"actual humidity"},"%thermoMode%":{value:"themoTMode",options:["auto","manu","party","boost"],name:"mode"},"%thermoSetTemp%":{value:"themoTSetTemp",extMeta:"4.5-30.5",scale:"0.5",name:"set temperature"},"%thermoWindow%":{value:"themoTWin",options:["open","closed"],name:"window open"}},o=["thermostat"]),i.CLIMATECONTROL_RT_TRANSCEIVER&&(s||(s={}),s["%thermoAuto%"]||(s["%thermoAuto%"]={value:"themoAutoMode",name:"set auto mode"}),s["%thermoManu%"]||(s["%thermoManu%"]={value:"themoManuMode",ext:"20.0",name:"set manual mode"}),s["%thermoBoost%"]||(s["%thermoBoost%"]={value:"themoBoostMode",name:"set boost mode"}),s["%thermoTempUp%"]||(s["%thermoTempUp%"]={value:"themoTempUp",name:"temperature up"}),s["%thermoTempDown%"]||(s["%thermoTempDown%"]={value:"themoTempDown",name:"temperature down"}),s["%thermoTempTo%"]||(s["%thermoTempTo%"]={value:"themoTempRaw",ext:"%f",extMeta:"4.5-30.5",scale:"0.5",name:"temperature to"}),s["%thermoOff%"]||(s["%thermoOff%"]={value:"themoTempOff",name:"off"}),l={"%thermoCurrentTemp%":{value:"themoActualTemp",name:"actual temperature"},"%thermoHum%":{value:"themoActualHum",name:"actual humidit"},"%thermoMode%":{value:"themoMode",options:["auto","manu","party","boost"],name:"mode"},"%thermoSetTemp%":{value:"themoSetTemp",extMeta:"4.5-30.5",scale:"0.5",name:"set temperature"},"%thermoWindow%":{value:"themoWinState",options:["open","closed"],name:"window state"}},o=["thermostat"]),i.SHUTTER_CONTACT&&(l={"%contactState%":{value:"shutterState",options:["closed","open"],name:"contact state"}},o=["contact"]),i.ROTARY_HANDLE_SENSOR&&(l={"%windowState%":{value:"handleState",options:["closed","tilted","open"],name:"handle state"}},o=["window"]),i.WEATHER){var f=e.type;f&&"HM-WDS30"==f.substr(0,8)?(l={"%tempState%":{value:"weatherTemp",name:"temperature"}},o=["climate"]):f&&"HM-WDS100"==f.substr(0,9)?(l={"%tempState%":{value:"weatherTemp",name:"temperature"},"%humState%":{value:"weatherHum",name:"humidity"},"%brightnessState%":{value:"weatherBright",name:"brightness"},"%sunshineState%":{value:"weatherSunD",name:"sunshine duration"},"%windDirection%":{value:"weatherWindD",name:"wind direction",options:["N","NO","O","SO","S","SW","W","NW"]},"%windspeedState%":{value:"weatherWindS",name:"wind speed"},"%rainingState%":{value:"weatherRaining",name:"raining"},"%rainingCounterState%":{value:"weatherRainCounter",name:"rain counter"}},o=["weather_station"]):(l={"%tempState%":{value:"weatherTemp",name:"temperature"},"%humState%":{value:"weatherHum",name:"humidity"}},o=["climate"]);}return i.MOTION_DETECTOR&&(l={"%motionState%":{value:"motionState",options:["on","off"],name:"state"},"%motionBrightness%":{value:"motionBright",name:"brightness"}},o=["motion"]),i.SMOKE_DETECTOR&&(l={"%smokeState%":{value:"smokeState",options:["on","off"],name:"state"}},o=["smoke"]),i.SMOKE_DETECTOR_TEAM&&(l={"%smokeState%":{value:"smokeGroup1State",options:["on","off"],name:"state"}},o=["smoke"]),i.SMOKE_DETECTOR_TEAM_V2&&(l={"%smokeState%":{value:"smokeGroupState",options:["on","off"],name:"state"}},o=["smoke"]),i.RGBW_COLOR&&(s||(s={}),s["%rgb%"]||(s["%rgb%"]={value:"rgb",ext:"%s",name:"rgb color"}),s["%white%"]||(s["%white%"]={value:"white",name:"white"}),o||(o=[]),-1==o.indexOf("rgb")&&o.push("rgb")),i.WINMATIC&&(s||(s={}),s["%windowUp%"]||(s["%windowUp%"]={value:"windowUp"}),s["%windowDown%"]||(s["%windowDown%"]={value:"windowDown"}),s["%windowTo%"]||(s["%windowTo%"]={value:"windowTo",ext:"%d",extMeta:"0-100"}),s["%windowLock%"]||(s["%windowLock%"]={value:"winLock"}),s["%windowStop%"]||(s["%windowStop%"]={value:"winStop"}),l={"%windowLevel%":{value:"winLevel"}},o=["winmatic"]),i.KEYMATIC&&(s||(s={}),s["%lock%"]||(s["%lock%"]={value:"keyLock"}),s["%unlock%"]||(s["%unlock%"]={value:"keyOpen"}),s["%open%"]||(s["%open%"]={value:"keyOpenDo"}),l={"%lockStatus%":{value:"keyState",options:["open","lock"]}},o=["keymatic"]),i.SENSOR_FOR_CARBON_DIOXIDE&&(l={"%co2State%":{value:"co2State",options:["normal","added","added_strong"]}},o=["sensor_co2"]),i.WATERDETECTIONSENSOR&&(l={"%waterState%":{value:"waterState",options:["dry","wet","water"]}},o=["sensor_water"]),i.LUXMETER&&(l={"%state%":{value:"luxState",extMeta:"0.00-100000.00",scale:"0.01"}},u={"%icon%":"sun"},o=["generic_state"]),o&&0!=o.length?this._injectToSmartWidgetTemplate(t,o,a,s,l,u):null;},_applySmartWidget_HmIP:function _applySmartWidget_HmIP(e,t,a,n,r){if(!e.channels)return null;if("HmIP-WGC"==e.type)return null;var s,l,o;if("HmIP-BSL"==e.type)return s||(s={}),s["%on%"]||(s["%on%"]={value:"on",name:"on"}),s["%off%"]||(s["%off%"]={value:"off",name:"off"}),s["%toggle%"]||(s["%toggle%"]={value:"toggle",name:"toggle"}),l||(l={}),l["%switchState%"]||(l["%switchState%"]={value:"switchState",options:["off","on"],name:"switch status"}),this._injectToSmartWidgetTemplate(t,["switch"],a,s,l);var u={};for(var i in e.channels){if(e.channels.hasOwnProperty(i)){var c=i,m=c.indexOf(":");-1!=m&&(c=c.substr(0,m)),u[c]=!0;}}return u.SWITCH_VIRTUAL_RECEIVER&&(s||(s={}),"HmIP-BSM"==e.type?(s["%on%"]||(s["%on%"]={value:"ch4on",name:"ch.4 on"}),s["%off%"]||(s["%off%"]={value:"ch4off",name:"ch.4 off"}),s["%toggle%"]||(s["%toggle%"]={value:"ch4toggle",name:"ch.4 toggle"})):(s["%on%"]||(s["%on%"]={value:"on",name:"on"}),s["%off%"]||(s["%off%"]={value:"off",name:"off"}),s["%toggle%"]||(s["%toggle%"]={value:"toggle",name:"toggle"})),l||(l={}),l["%switchState%"]||(l["%switchState%"]={value:"switchState",options:["off","on"],name:"switch status"}),o||(o=[]),-1==o.indexOf("switch")&&o.push("switch")),u.DIMMER_VIRTUAL_RECEIVER&&(s||(s={}),s["%on%"]||(s["%on%"]={value:"dimTo",ext:100,name:"dim to"}),s["%off%"]||(s["%off%"]={value:"dimOff",name:"off"}),s["%dimOn%"]||(s["%dimOn%"]={value:"dimTo",ext:100,name:"dim to"}),s["%dimOff%"]||(s["%dimOff%"]={value:"dimOff",name:"off"}),s["%dimUp%"]||(s["%dimUp%"]={value:"dimUp",ext:5,name:"dim up"}),s["%dimDown%"]||(s["%dimDown%"]={value:"dimDown",ext:5,name:"dim down"}),s["%dimTo%"]||(s["%dimTo%"]={value:"dimTo",ext:"%d",extMeta:"0-100",name:"dim to"}),l={"%dimmerState%":{value:"dimmerTLevel",ext:"%d",extMeta:"0-100",name:"dimmer status"}},o=["switch","dimmer"]),u.SHUTTER_VIRTUAL_RECEIVER&&(s||(s={}),s["%stop%"]||(s["%stop%"]={value:"stop",name:"stop"}),s["%moveUp%"]||(s["%moveUp%"]={value:"moveUp",name:"move up"}),s["%moveDown%"]||(s["%moveDown%"]={value:"moveDown",name:"move down"}),s["%stepUp%"]||(s["%stepUp%"]={value:"stepUp",ext:5,name:"step up"}),s["%stepDown%"]||(s["%stepDown%"]={value:"stepDown",ext:5,name:"step down"}),s["%moveTo%"]||(s["%moveTo%"]={value:"moveTo",ext:"%d",extMeta:"0-100",name:"move to"}),l={"%shutterState%":{value:"blindTLevel",ext:"%d",extMeta:"0-100",name:"blind status"}},o=["shutter"]),u.BLIND_VIRTUAL_RECEIVER&&(s||(s={}),s["%stop%"]||(s["%stop%"]={value:"stop",name:"stop"}),s["%moveUp%"]||(s["%moveUp%"]={value:"moveUp",name:"move up"}),s["%moveDown%"]||(s["%moveDown%"]={value:"moveDown",name:"move down"}),s["%stepUp%"]||(s["%stepUp%"]={value:"stepUp",ext:5,name:"step up"}),s["%stepDown%"]||(s["%stepDown%"]={value:"stepDown",ext:5,name:"step down"}),s["%moveTo%"]||(s["%moveTo%"]={value:"moveTo",ext:"%d",extMeta:"0-100",name:"move to"}),s["%lamellaUp%"]||(s["%lamellaUp%"]={value:"lamellaUp",name:"lamella up"}),s["%lamellaDown%"]||(s["%lamellaDown%"]={value:"lamellaDown",name:"lamella down"}),s["%lamellaStepUp%"]||(s["%lamellaStepUp%"]={value:"lamellaStepUp",ext:5,name:"lamella step up"}),s["%lamellaStepDown%"]||(s["%lamellaStepDown%"]={value:"lamellaStepDown",ext:5,name:"lamella step down"}),s["%lamellaTo%"]||(s["%lamellaTo%"]={value:"lamellaTo",ext:"%d",extMeta:"0-100",name:"lamella to"}),l={"%blindState%":{value:"blindTPos",ext:"%d",extMeta:"0-100",name:"blind status"},"%lamellaState%":{value:"lamellaTPos",ext:"%d",extMeta:"0-100",name:"lamella status"}},o=["shutter","blind"]),u.ENERGIE_METER_TRANSMITTER&&(l||(l={}),l["%meterVoltage%"]||(l["%meterVoltage%"]={value:"meterVoltage",extMeta:"0.0-409.5",scale:"0.1",unit:"V",name:"voltage"}),l["%meterEnergyCounter%"]||(l["%meterEnergyCounter%"]={value:"meterEnergyCounter",extMeta:"0.0-838859.1",scale:"0.1",unit:"Wh",name:"energy counter"}),l["%meterFrequency%"]||(l["%meterFrequency%"]={value:"meterFrequency",extMeta:"29.52-70.47",scale:"0.01",unit:"Hz",name:"frequency"}),l["%meterPower%"]||(l["%meterPower%"]={value:"meterPower",extMeta:"0.0-163830.0",scale:"0.1",unit:"W",name:"power"}),l["%meterCurrent%"]||(l["%meterCurrent%"]={value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1",unit:"mA",name:"current"}),o||(o=[]),-1==o.indexOf("powermeter")&&o.push("powermeter")),u.HEATING_CLIMATECONTROL_TRANSCEIVER&&(s||(s={}),s["%thermoAuto%"]||(s["%thermoAuto%"]={value:"themoAutoMode",name:"set auto mode"}),s["%thermoManu%"]||(s["%thermoManu%"]={value:"themoManuMode",name:"set manu mode"}),s["%thermoBoost%"]||(s["%thermoBoost%"]={value:"themoBoostOn",name:"boost on"}),s["%thermoTempUp%"]||(s["%thermoTempUp%"]={value:"themoTempUp",name:"temperature up"}),s["%thermoTempDown%"]||(s["%thermoTempDown%"]={value:"themoTempDown",name:"temperature down"}),s["%thermoTempTo%"]||(s["%thermoTempTo%"]={value:"themoTemp",ext:"%f",extMeta:"4.5-30.5",scale:"0.5",name:"set temperature"}),s["%thermoOn%"]||(s["%thermoOn%"]={value:"themoTempOn",name:"on"}),s["%thermoOff%"]||(s["%thermoOff%"]={value:"themoTempOff",name:"off"}),s["%thermoBoostOff%"]||(s["%thermoBoostOff%"]={value:"themoBoostOff",name:"boost off"}),s["%thermoProfile%"]||(s["%thermoProfile%"]={value:"themoProf",ext:"%d",extMeta:"1-6",scale:"1",name:"set profile"}),s["%thermoModeHeating%"]||(s["%thermoModeHeating%"]={value:"themoModeHeating",name:"set heating mode"}),s["%thermoModeCooling%"]||(s["%thermoModeCooling%"]={value:"themoModeCooling",name:"set cooling mode"}),l={"%thermoCurrentTemp%":{value:"themoActualTemp",name:"actual temperature"},"%thermoHum%":{value:"themoHum",name:"humidity"},"%thermoMode%":{value:"themoMode",options:["auto","manu"],name:"mode"},"%thermoSetTemp%":{value:"themoTemp",extMeta:"4.5-30.5",scale:"0.5",name:"set temperature"},"%thermoProfile%":{value:"themoProf",ext:"%d",extMeta:"1-6",scale:"1",name:"set profile"},"%thermoBoostMode%":{value:"themoBoostMode",options:["off","on"],name:"boost mode"},"%thermoWindow%":{value:"themoWinState",options:["open","closed"],name:"window state"}},o=["thermostat"]),u.SHUTTER_CONTACT&&(l={"%contactState%":{value:"shutterState",options:["closed","open"],name:"contact state"}},o=["contact"]),u.SHUTTER_CONTACT_TRANSCEIVER&&(l={"%contactState%":{value:"shutterTState",options:["closed","open"],name:"contact state"}},o=["contact"]),u.ROTARY_HANDLE_TRANSCEIVER&&(l={"%windowState%":{value:"handleState",options:["closed","tilted","open"],name:"handle state"}},o=["window"]),u.CLIMATE_TRANSCEIVER&&(l={"%tempState%":{value:"climateActualTemp",extMeta:"-3276.8-3276.7",scale:"0.1",name:"actual temperature"},"%humState%":{value:"climateHum",name:"humidity"}},o=["climate"]),u.COND_SWITCH_TRANSMITTER_TEMPERATURE&&(l={"%tempState%":{value:"tempSensor1",extMeta:"-3276.8-3276.7",scale:"0.1"}},o=["climate"]),u.WEATHER_TRANSMIT&&(l={"%tempState%":{value:"weatherActualTemp",name:"actual temperature"},"%humState%":{value:"weatherHum",name:"humidity"},"%brightnessState%":{value:"weatherIllu",name:"brightness"},"%sunshineState%":{value:"weatherSunD",name:"sunshine duration"},"%windspeedState%":{value:"weatherWindS",name:"wind speed"}},"HmIP-SWO-PL"==e.type?(l["%rainingState%"]={value:"weatherRain",name:"raining"},l["%rainingCounterState%"]={value:"weatherRainC",name:"rain counter"}):"HmIP-SWO-PR"==e.type&&(l["%rainingState%"]={value:"weatherRain",name:"raining"},l["%rainingCounterState%"]={value:"weatherRainC",name:"rain counter"},l["%windDirection%"]={value:"weatherWindD",name:"wind direction"}),o=["weather_station"]),u.MOTIONDETECTOR_TRANSCEIVER&&(s||(s={}),s["%motionActivate%"]||(s["%motionActivate%"]={value:"motionOn",name:"activate detection"}),s["%motionDeactivate%"]||(s["%motionDeactivate%"]={value:"motionOff",name:"deactivate detection"}),s["%motionToggle%"]||(s["%motionToggle%"]={value:"motionToggle",name:"toggle detection"}),s["%motionReset%"]||(s["%motionReset%"]={value:"motionReset",name:"reset"}),l={"%motionState%":{value:"motionState",options:["on","off"],name:"state",conv_s:{on:"true",off:"false"}},"%motionBrightness%":{value:"motionIllu",name:"illumination"},"%motionActivate%":{value:"motionActivate",options:["off","on"],name:"detection activated"}},o=["motion"]),u.PRESENCEDETECTOR_TRANSCEIVER&&(s||(s={}),s["%motionActivate%"]||(s["%motionActivate%"]={value:"presenceOn",name:"activate detection"}),s["%motionDeactivate%"]||(s["%motionDeactivate%"]={value:"presenceOff",name:"deactivate detection"}),s["%motionToggle%"]||(s["%motionToggle%"]={value:"presenceToggle",name:"toggle detection"}),s["%motionReset%"]||(s["%motionReset%"]={value:"presenceReset",name:"reset"}),l={"%motionState%":{value:"presenceState",options:["on","off"],name:"state",conv_s:{on:"true",off:"false"}},"%motionBrightness%":{value:"presenceIllu",name:"illumination"},"%motionActivate%":{value:"presenceActivate",options:["off","on"],name:"detection activated"}},o=["motion"]),u.SMOKE_DETECTOR&&(l={"%smokeState%":{value:"smokeState",options:["on","off"],name:"alarm state"}},o=["smoke"]),u.ANALOG_OUTPUT_TRANSCEIVER&&(s||(s={}),s["%dimOn%"]||(s["%dimOn%"]={value:"analogOutputTo",ext:100,name:"output to"}),s["%dimOff%"]||(s["%dimOff%"]={value:"analogOutputOff",name:"off"}),s["%dimUp%"]||(s["%dimUp%"]={value:"analogOutputUp",ext:5,name:"up"}),s["%dimDown%"]||(s["%dimDown%"]={value:"analogOutputDown",ext:5,name:"down"}),s["%dimTo%"]||(s["%dimTo%"]={value:"analogOutputTo",ext:"%d",extMeta:"0-100",name:"output to"}),l={"%dimmerState%":{value:"analogOutputLevel",ext:"%d",extMeta:"0-100",name:"output status"}},o=["dimmer"]),u.BRIGHTNESS_TRANSMITTER&&(l={"%brightnessState%":{value:"briIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"},"%brightnessAvg%":{value:"briAvgIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"},"%brightnessMax%":{value:"briMaxIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"},"%brightnessMin%":{value:"briMinIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},o=["lux"]),u.RAIN_DETECTION_TRANSMITTER&&(l={"%rainState%":{value:"raining",options:["true","false"]},"%tempState%":{value:"temperature",extMeta:"-3276.8-3276.7",scale:"0.1"}},o=["rain"]),u.DOOR_LOCK_STATE_TRANSMITTER&&(s||(s={}),s["%lock%"]||(s["%lock%"]={value:"lock"}),s["%unlock%"]||(s["%unlock%"]={value:"unlock"}),s["%open%"]||(s["%open%"]={value:"open"}),l={"%lockStatus%":{value:"lockState",options:["unknown","locked","unlocked"],conv_s:{unknown:"?",unlocked:"open"}}},o=["keymatic"]),u.ACCELERATION_TRANSCEIVER&&(l={"%vibrationStatus%":{value:"acceMotion",options:["false","true"]}},o=["vibration"]),o&&0!=o.length?this._injectToSmartWidgetTemplate(t,o,a,s,l):null;},_injectToSmartWidgetTemplate:function _injectToSmartWidgetTemplate(e,t,a,n,r,s){var l=[];e||(n={}),n||(n={}),r||(r={});for(var o=0;o<e.length;o++){var u=e[o];if(u.meta&&-1!=t.indexOf(u.meta.type)&&u.elements){var i=JSON.parse(JSON.stringify(u)),c=!1;for(var m in i.elements){var p=i.elements[m];if(p&&Array.isArray(p))for(var f=0;f<p.length;f++){var E=p[f];if(E){if(E.action&&"command"==E.action.type&&E.action.ref&&E.action.ref.value){var d=E.action.ref.ext;n[E.action.ref.value]?(E.action.ref=n[E.action.ref.value],d&&(E.action.ref.ext=d),E.action.device=a,c=!0):E.action=null;}E.status&&E.status.ref&&E.status.ref.value&&(r[E.status.ref.value]?(E.status.ref=r[E.status.ref.value],E.status.device=a,c=!0):E.status=null),E.widget&&"%icon%"==E.widget.key_img&&s&&(E.widget.key_img=s["%icon%"]);}}}c&&l.push(i);}}return l;},toGeneralDevice:function toGeneralDevice(e,t){if(!e)return null;var a=null,n={};for(var r in e.channels){var s=r,l=s.indexOf(":");-1!=l&&(s=s.substr(0,l)),n[s]=!0;}return n.SWITCH&&((a={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}}}).details={commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"switchState"}}}),n.DIMMER&&((a={type:"dimmer",commands:{on:{},off:{},brightness:{value:{type:"INT",min:0,max:100,step:1}}},states:{brightness:{min:0,max:100,unit:"%"}}}).details={commands:{on:{value:"dimTo",ext:100},off:{value:"dimOff"},brightness:{value:"dimTo",ext:"%d"}},states:{brightness:{value:"dimmerTLevel"}}}),n.BLIND&&((a={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"blindUp"},down:{value:"blindDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d"}},states:{position:{value:"blindLevel"}}}),n.JALOUSIE&&((a={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}},rotation:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100},rotation:{min:0,max:100}}}).details={commands:{up:{value:"jalUp"},down:{value:"jalDown"},stop:{value:"jalStop"},position:{value:"jalRaw",ext:"%d"},rotation:{value:"jalLmlRaw",ext:"%d"}},states:{position:{value:"jalLevel"},rotation:{value:"jalLmlLevel"}}}),n.CLIMATECONTROL_REGULATOR&&((a={type:"heater",commands:{tempUp:{},tempDown:{},tempTo:{value:{type:"FLOAT",min:6,max:30,step:.5}}},states:{setpoint:{type:"FLOAT",min:6,max:30,step:.5,unit:"°C"},temperature:{type:"FLOAT"},humidity:{type:"INT"}}}).details={commands:{tempUp:{value:"themoRTempUp"},tempDown:{value:"themoRTempDown"},tempTo:{value:"themoRTempRaw",ext:"%f"}},states:{setpoint:{value:"themoRSetTemp"},temperature:{value:"weatherTemp"},humidity:{value:"weatherHum"}}}),n.THERMALCONTROL_TRANSMIT&&((a={type:"heater",commands:{tempUp:{},tempDown:{},tempTo:{value:{type:"FLOAT",min:4,max:30.5,step:.5}},auto:{},manu:{}},states:{setpoint:{type:"FLOAT",min:4,max:30.5,step:.5,unit:"°C"},temperature:{type:"FLOAT"},humidity:{type:"INT"}}}).details={commands:{tempUp:{value:"themoTTempUp"},tempDown:{value:"themoTTempDown"},tempTo:{value:"themoTTempRaw",ext:"%f"},auto:{value:"themoAutoMode"},manu:{value:"themoManuMode"}},states:{setpoint:{value:"themoTSetTemp"},temperature:{value:"themoTActualTemp"},humidity:{value:"themoTActualHum"},mode:{value:"themoTMode"}}}),n.CLIMATECONTROL_RT_TRANSCEIVER&&((a={type:"heater",commands:{tempUp:{},tempDown:{},tempTo:{value:{type:"FLOAT",min:4,max:30.5,step:.5}},auto:{},manu:{}},states:{setpoint:{type:"FLOAT",min:4,max:30.5,step:.5,unit:"°C"},temperature:{type:"FLOAT"},humidity:{type:"INT"}}}).details={commands:{tempUp:{value:"themoTempUp"},tempDown:{value:"themoTempDown"},tempTo:{value:"themoTempRaw",ext:"%f"},auto:{value:"themoAutoMode"},manu:{value:"themoManuMode"}},states:{setpoint:{value:"themoSetTemp"},temperature:{value:"themoActualTemp"},humidity:{value:"themoActualHum"},mode:{value:"themoMode"}}}),"HmIP-WGC"==e.type?null:(n.SWITCH_VIRTUAL_RECEIVER&&((a={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}}}).details={commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"switchState"}}}),n.DIMMER_VIRTUAL_RECEIVER&&((a={type:"dimmer",commands:{on:{},off:{},brightness:{value:{type:"INT",min:0,max:100,step:1}}},states:{brightness:{min:0,max:100,unit:"%"}}}).details={commands:{on:{value:"dimOn"},off:{value:"dimOff"},brightness:{value:"dimRaw",ext:"%d"}},states:{brightness:{value:"dimmerLevel"}}}),n.SHUTTER_VIRTUAL_RECEIVER&&((a={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"blindStop"},position:{value:"blindRaw",ext:"%d"}},states:{position:{value:"blindTLevel"}}}),n.BLIND_VIRTUAL_RECEIVER&&((a={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}},rotation:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100},rotation:{min:0,max:100}}}).details={commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d"},rotation:{value:"lamellaTo",ext:"%d"}},states:{position:{value:"blindTPos"},rotation:{value:"lamellaTPos"}}}),n.HEATING_CLIMATECONTROL_TRANSCEIVER&&((a={type:"heater",commands:{tempUp:{},tempDown:{},tempTo:{value:{type:"FLOAT",min:4,max:30.5,step:.5}},auto:{},manu:{}},states:{setpoint:{type:"FLOAT",min:4,max:30.5,step:.5,unit:"°C"},temperature:{type:"FLOAT"},humidity:{type:"INT"}}}).details={commands:{tempUp:{value:"themoTempUp"},tempDown:{value:"themoTempDown"},tempTo:{value:"themoTemp",ext:"%f"},auto:{value:"themoTAutoMode"},manu:{value:"themoTManuMode"}},states:{setpoint:{value:"themoTemp"},temperature:{value:"themoActualTemp"},humidity:{value:"themoHum"},mode:{value:"themoMode"}}}),a);}},xnm.aio.hm.Handler=function(){var e=require("x.logger.js");this._logger=e?e.getLogger("xnm.aio.hm.Handler"):{log:function log(){}},xnm.aio.hm.Handler._logger=e?e.getLogger("xnm.aio.hm.Handler"):{log:function log(){}};},xnm.aio.hm.Handler.prototype={CCU:xnm.aio.hm.MHMCCU,devicemanager:xnm.aio.hm.DM,_discoveryCallbacks:[],_upnpCallback:null,_udpSockets:null,registModule:function registModule(e){e.register(this.devicemanager.SYS,"hm");},resolveGateway:function resolveGateway(e){return e.ip?new xnm.aio.hm.MHMCCU(e.ip,e.password,e.port,e.tclport,e.uuid,e.type,e.username,e.cloudmatic):null;},getDeviceCommands:function getDeviceCommands(e,t){var a=xnm.aio.hm.DM.applyUIFilter(e,{catagory:"command",elems:"*"}),n=a?a.command:[];t&&t(null,n);},getDeviceStatus:function getDeviceStatus(e,t){var a=xnm.aio.hm.DM.applyUIFilter(e,{catagory:"status",elems:"*"}),n=a?a.status:[];t&&t(null,n);},doCommand:function doCommand(e,t,a,n){this.resolveGateway(e).executeCommandCreator(t,a,function(e){n&&n(e);});},doStatus:function doStatus(e,t,a,n,r){var s=this.resolveGateway(t);if(s){var l=[{id:e,device:a,status:n}];s.getStatesCreator(null,l,function(e,t){e?r&&r(e):r&&r(null,t[0]);});}else r&&r(new Error("gateway json invalid"));},discoverCCUs:function discoverCCUs(e){var t=require("x.upnp.js");if(t){var a=!1;if(this._discoveryCallbacks.forEach(function(t){t==e&&(a=!0);}),a||this._discoveryCallbacks.push(e),!this._upnpCallback){var n=this;this._upnpCallback=function(e,t){n._onDiscover(e,t);};}t.discoverDevices(this._upnpCallback),this._discoverUdp();}else e&&e(new Error("upnp module is not avaliable"));},_discoverUdp:function _discoverUdp(){var _findToken=function _findToken(e){for(var t=0;t<e.length-1;t+=2){if("00"==e.substr(t,2))return t;}return-1;},_receivedData=function _receivedData(e,t){var a=t,n=e.address,r=a.toString("hex");if(r.length>8&&"02a5db30"==r.substr(0,8)){var s=r.substr(8),l=_findToken(s);if(-1!=l&&l<s.length-2){var o=s.substr(2,l-2),u=new Buffer(o,"hex").toString(),i=1;if(-1!=u.indexOf("CCU2")?i=2:-1!=u.indexOf("CCU3")&&(i=3),s=s.substr(l+2),-1!=(l=_findToken(s))&&(s=s.substr(0,l))){var c=new Buffer(s,"hex").toString(),m=new xnm.aio.hm.MHMCCU(n,"",80,8181,c,i);this._discoveryCallbacks&&this._discoveryCallbacks.forEach(function(e){e&&e(m);});}}}},_createDiscoverSocket=function _createDiscoverSocket(e,t,a){xnm.aio.hm.Handler._logger.log("debug","create discover socket @:"+t);var n,r=require("dgram"),s=this;try{n=r.createSocket({reuseAddr:!0,type:"udp4"});}catch(e){n=r.createSocket("udp4");}var l=a;return n.on("listening",function(){n.setBroadcast&&n.setBroadcast(!0),l&&(l(null,n),l=null);}),n.on("message",function(e,t){_receivedData.call(s,t,e);}),n.on("error",function(e){xnm.aio.hm.Handler._logger.log("warn","create discover socket error:"+e),l&&(l(e),l=null);}),n.bind(e,t),n;},_sendDiscoverPacket=function _sendDiscoverPacket(e,t){var a=new Buffer([2,165,219,48,1,101,81,51,45,42,0,42,0,73]);e.send(a,0,a.length,43439,"255.255.255.255",function(){t&&e.close();});},e=this;(function(e){var t,a=[],n=this,r=require("os"),s=require("dgram");r&&r.networkInterfaces?((t=s.createSocket("udp4")).on("listening",function(){t.setBroadcast(!0);var s=r.networkInterfaces(),l=[];for(var o in s){for(var u=s[o],i=0;i<u.length;i++){"IPv4"==u[i].family&&0==u[i].internal&&l.push(u[i].address);}}var c=l.length;if(c)for(var m=0;m<l.length;m++){_createDiscoverSocket.call(n,t.address().port,l[m],function(t,n){c--,!t&&n&&a.push(n),c||e&&e(null,a);});}else e&&e(null,a);}),t.on("message",function(e,t){_receivedData.call(n,t,e);}),t.bind(null)):_createDiscoverSocket.call(n,null,null,function(t,n){!t&&n&&a.push(n),e&&e(null,a);});}).call(this,function(t,a){if(!t&&a){for(var n=0;n<a.length;n++){_sendDiscoverPacket.call(e,a[n]);}setTimeout(function(){for(var t=0;t<a.length;t++){a[t].close();}e._udpSockets=null;},3e3);}});},discoverCCUsWithTimeout:function discoverCCUsWithTimeout(e,t){var a=this,n=[],cb=function cb(e){if(e){for(var t=0;t<n.length;t++){if(n[t].uuid==e.uuid)return;}n.push(e);}};setTimeout(function(){a.removeDiscoveryCallback(cb),t&&t(n);},1e3*e),this.discoverCCUs(cb);},removeDiscoveryCallback:function removeDiscoveryCallback(e){if(this._discoveryCallbacks){for(var t=-1,a=0;a<this._discoveryCallbacks.length;a++){if(this._discoveryCallbacks[a]===e){t=a;break;}}-1!=t&&this._discoveryCallbacks.splice(t,1);}},_onDiscover:function _onDiscover(e,t){if(e.name&&e.name.indexOf("HomeMatic Central")>=0){var a="";if(e.uuid){var n=(a=e.uuid.replace("upnp-BasicDevice-","")).split("-");n.length>1&&(a=n[1]);}var r=new xnm.aio.hm.MHMCCU(e.ip,"",80,8181,a);this._discoveryCallbacks&&this._discoveryCallbacks.forEach(function(e){e&&e(r,t);});}},getDeviceListWithTimeout:function getDeviceListWithTimeout(e,t,a){var n=this.resolveGateway(e);if(n){var r=a,s=setTimeout(function(){r&&r(new Error("get device list timeout")),r=null;},1e3*t);n.getDeviceList(function(e,t){clearTimeout(s),r&&r(e,t);});}else a&&a(new Error("gateway json format invalid"));},getDeviceCommandList:function getDeviceCommandList(e,t){var a=[];return"HM-ES-PMSw1-Pl"==e.type?(a.push({id:window.XC_Text.on,cmd:"1:SWITCH:on"}),a.push({id:window.XC_Text.off,cmd:"1:SWITCH:off"})):"FHT80b"==e.subtype||(a.push({id:window.XC_Text.on,cmd:"on"}),a.push({id:window.XC_Text.off,cmd:"off"})),a;},getCCUServiceMessages:function getCCUServiceMessages(e,t){this.resolveGateway(e).getServiceMessage(function(e,a){t&&t(e,a);});}},"undefined"!=typeof module&&module&&module.exports&&(module.exports=new xnm.aio.hm.Handler());