var x=x||{};x.hub=x.hub||{},x.hub.datastore=x.hub.datastore||{},x.hub.datastore.DataStore=function(){var DataStore=function DataStore(t){this._file=t;};return DataStore.DB_FILE="xhub.db",DataStore.prototype.init=function(t,e){var a=require("fs-extra"),i=require("path");this._file||(this._file=i.resolve(t.getUserRootDataPath(),"xhub.db"));var r=this;a.ensureFile(this._file,function(t){t?e&&e(t):r._initDB(e);});},DataStore.prototype._initDB=function(t){var e=new(require("sqlite3").Database)(this._file,function(a){a?t&&t(a):e.serialize(function(){e.run("CREATE TABLE IF NOT EXISTS windowstate (id integer primary key autoincrement, window text, state text, time datetime default current_timestamp)",function(a){e.close(),t&&t(a);});});});},DataStore.prototype.openDB=function(t){var e=new(require("sqlite3").Database)(this._file,function(a){t&&t(a,e);});},DataStore.prototype._dumpTable=function(t){this.openDB(function(e,a){!e&&a&&a.each("SELECT * FROM "+t,function(t,e){XC.debugf(e),a.close();});});},DataStore;}(),x.hub.datastore.Handler=function(){this.dataStore=new x.hub.datastore.DataStore();},x.hub.datastore.Handler.prototype.DataStore=x.hub.datastore.DataStore,x.hub.datastore.Handler.prototype.init=function(t,e){this.dataStore.init(t,function(t){e&&e({error:t});});},module.exports=new x.hub.datastore.Handler();