var xnm=xnm||{};xnm.aio=xnm.aio||{},xnm.aio.push=xnm.aio.push||{},xnm.aio.push.Handler=function(){var e="http://webservice.aio-control.com/pushservice",Handler=function Handler(){};return Handler.prototype.setURL=function(r){e=r;},Handler.prototype.PUSH_TYPE={GCM:0,APNS:1,APNS_SANDBOX:2,ADM:3,IN_APNS:4,IN_APNS_SANDBOX:5},Handler.prototype.getDeviceToken=function(e){XC.callHost("pushservice","getDeviceToken",null,function(r){r.error?e&&e(new Error(r.error)):e(null,r.token);});},Handler.prototype.registDevice=function(r,n,i,o){if(r){if(n){var t;switch(i){case this.PUSH_TYPE.GCM:t="GCM";break;case this.PUSH_TYPE.APNS:t="APNS";break;case this.PUSH_TYPE.APNS_SANDBOX:t="APNS_SANDBOX";break;case this.PUSH_TYPE.ADM:t="ADM";break;case this.PUSH_TYPE.IN_APNS:t="IN_APNS";break;case this.PUSH_TYPE.IN_APNS_SANDBOX:t="IN_APNS_SANDBOX";break;default:o&&o(new Error("no such push type"));}var s=e+"/registDevice?",a={sid:r.toUpperCase(),token:n,type:t};s+=$.param(a),$.ajax({url:s,timeout:4e3,cache:!1,dataType:"json",success:function success(e){e&&e.arn?o&&o(null,e.arn):o&&o(new Error("regist device response invalid"));},error:function error(e,r,n){o&&o(new Error(r));}});}else o&&o(new Error("token invalid"));}else o&&o(new Error("sid invalid"));},Handler.prototype.deleteDevice=function(r,n,i,o){if(r){if(n){var t;switch(i){case this.PUSH_TYPE.GCM:t="NEO_GCM";break;case this.PUSH_TYPE.APNS:t="NEO_APNS";break;case this.PUSH_TYPE.APNS_SANDBOX:t="NEO_APNS_SANDBOX";break;case this.PUSH_TYPE.ADM:t="ADM";break;default:o&&o(new Error("no such push type"));}var s=e+"/deleteDevice?",a={sid:r.toUpperCase(),token:n,type:t};s+=$.param(a),$.ajax({url:s,timeout:4e3,cache:!1,dataType:"json",success:function success(){o&&o(null);},error:function error(e,r,n){o&&o(new Error(r));}});}else o&&o(new Error("token invalid"));}else o&&o(new Error("sid invalid"));},Handler.prototype.getRegistedDevice=function(r,n){if(r){var i=e+"/getDevice?",o={sid:r.toUpperCase()};i+=$.param(o),$.ajax({url:i,timeout:4e3,cache:!1,dataType:"json",success:function success(e){e?n&&n(null,e):n&&n(new Error("regist device response invalid"));},error:function error(e,r,i){n&&n(new Error(r));}});}else n&&n(new Error("sid invalid"));},Handler;}(),"undefined"!=typeof module&&null!=module&&(module.exports=new xnm.aio.push.Handler());